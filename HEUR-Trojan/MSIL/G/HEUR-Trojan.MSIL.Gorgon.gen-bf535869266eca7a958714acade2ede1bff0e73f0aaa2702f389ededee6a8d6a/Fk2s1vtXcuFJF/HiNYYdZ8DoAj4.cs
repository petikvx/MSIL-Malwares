// Decompiled with JetBrains decompiler
// Type: Fk2s1vtXcuFJF.HiNYYdZ8DoAj4
// Assembly: Udby4Jt48oXkJ, Version=3.17.2.31, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
// MVID: 37899E89-D673-4F5B-A193-2E4DF6A54096
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.03\HEUR-Trojan.MSIL.Gorgon.gen-bf535869266eca7a958714acade2ede1bff0e73f0aaa2702f389ededee6a8d6a.exe

using \u0033s1eDqxyulHOR;
using \u0036L2LozIEXTU3P;
using HqLTLdqt37SZu;
using QXLuUL1nSmIC4;
using System;
using System.ComponentModel;
using System.Linq;
using System.Runtime.InteropServices;
using System.Windows.Forms;
using W6lnKCNNZZvNb;

namespace Fk2s1vtXcuFJF
{
  [EditorBrowsable(EditorBrowsableState.Never)]
  [ComVisible(true)]
  internal class HiNYYdZ8DoAj4 : rQFfIYZKpyJcM
  {
    private DateTime HzKYrmwzFNbXZ = DateTime.MaxValue;
    private Timer UAo3d0DUA8Coa;
    private bool HJZCX5MFIKfBG;

    internal event HiNYYdZ8DoAj4.mXulKMlchhj48 \u0034GN6EEKvVH8ZN;

    public int dlAzoYIbaDV0K { get; set; }

    public HiNYYdZ8DoAj4(object ownerWindow)
      : base(ownerWindow)
    {
      this.\u0035ajWCXHFKTkiH();
      this.M0JusVAdeNdRj.DocumentCompleted += new WebBrowserDocumentCompletedEventHandler(this.hPGTN3TsJPeEU);
    }

    public void dKKrlSKtY9j2c() => this.GceEtLEWXw9h4();

    private void \u0035ajWCXHFKTkiH() => ((zqag0ALhZ2pM6.IWebBrowser2) this.M0JusVAdeNdRj.ActiveXInstance).Silent = true;

    protected override void WebBrowserNavigatingHandler(
      object sender,
      WebBrowserNavigatingEventArgs e)
    {
      if (this.UAo3d0DUA8Coa == null)
        this.UAo3d0DUA8Coa = HiNYYdZ8DoAj4.ikH7HxmwdFquw((Action) (() =>
        {
          if (!(DateTime.Now > this.HzKYrmwzFNbXZ))
            return;
          this.\u0038MGxYVOyIR8CE();
        }), this.dlAzoYIbaDV0K);
      this.HzKYrmwzFNbXZ = DateTime.MaxValue;
      base.WebBrowserNavigatingHandler(sender, e);
    }

    private static Timer ikH7HxmwdFquw(Action M9f9mqEvOVC7Y, int YEcU4LnmNJLL2)
    {
      // ISSUE: variable of a compiler-generated type
      HiNYYdZ8DoAj4.\u0034rv3cGcjPW1fr obj = (HiNYYdZ8DoAj4.\u0034rv3cGcjPW1fr) new HiNYYdZ8DoAj4.mXulKMlchhj48();
      ((y9WeDGzdnipVD.kGzPNOSVgQdW3) obj).lhdllaTvMFv9p = M9f9mqEvOVC7Y;
      Timer timer = new Timer();
      timer.Interval = YEcU4LnmNJLL2;
      // ISSUE: reference to a compiler-generated method
      timer.Tick += new EventHandler(obj.HkdQRjeOs6XJn);
      timer.Start();
      return timer;
    }

    private void GceEtLEWXw9h4(Exception hkHra3BC81DXV = null)
    {
      if (this.HJZCX5MFIKfBG)
        return;
      this.UAo3d0DUA8Coa.Stop();
      \u0035rskoHrOVZ8wX args = new \u0035rskoHrOVZ8wX(hkHra3BC81DXV);
      // ISSUE: reference to a compiler-generated field
      if (this.WkCMmdMm3HWLs != null)
      {
        // ISSUE: reference to a compiler-generated field
        this.WkCMmdMm3HWLs((object) this, args);
      }
      this.HJZCX5MFIKfBG = true;
    }

    private void hPGTN3TsJPeEU(
      object GaTy1bi4WMbeF,
      WebBrowserDocumentCompletedEventArgs Em5SaCtKg1Oup)
    {
      this.HzKYrmwzFNbXZ = DateTime.Now.AddMilliseconds((double) this.dlAzoYIbaDV0K);
      if (!this.UUl1U6YWhauK0())
        return;
      this.\u0038MGxYVOyIR8CE();
    }

    private void \u0038MGxYVOyIR8CE() => this.GceEtLEWXw9h4((Exception) new LlM9VbgWu20VY("user_interaction_required"));

    protected override void OnClosingUrl() => this.GceEtLEWXw9h4();

    protected override void OnNavigationCanceled(int statusCode) => this.GceEtLEWXw9h4((Exception) this.CreateExceptionForAuthenticationUiFailed(statusCode));

    private bool UUl1U6YWhauK0()
    {
      HtmlDocument document = this.M0JusVAdeNdRj.Document;
      HtmlElement htmlElement = (HtmlElement) null;
      if ((HtmlDocument) null != document)
        htmlElement = document.GetElementsByTagName("INPUT").Cast<HtmlElement>().Where<HtmlElement>((Func<HtmlElement, bool>) (sji0HMlXQnNQk => string.Equals(sji0HMlXQnNQk.GetAttribute("type"), "password", StringComparison.OrdinalIgnoreCase) && sji0HMlXQnNQk.Enabled && sji0HMlXQnNQk.OffsetRectangle.Height > 0 && sji0HMlXQnNQk.OffsetRectangle.Width > 0)).FirstOrDefault<HtmlElement>();
      return htmlElement != (HtmlElement) null;
    }

    protected override void Dispose(bool disposing)
    {
      if (this.UAo3d0DUA8Coa != null)
        this.UAo3d0DUA8Coa.Dispose();
      base.Dispose(disposing);
    }

    internal delegate void mXulKMlchhj48(object sender, \u0035rskoHrOVZ8wX args);
  }
}
