// Decompiled with JetBrains decompiler
// Type: flac.Format.MetadataBlock
// Assembly: STAThreadAttrib, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: 6EE3DE1A-E148-4FBA-A193-65BEA1824C00
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.04\HEUR-Trojan-PSW.MSIL.Stealer.gen-f6a784c2aa30ddaf03919958455d18bf51533a475c21a73eff578df0174cc5d4.exe

namespace flac.Format
{
  public abstract class MetadataBlock
  {
    private MetadataBlockHeader header_;

    public MetadataBlockHeader Header => this.header_;

    protected MetadataBlock(MetadataBlockHeader header) => this.header_ = header;

    public abstract void Read(FlacStream stream);

    public abstract void Write(FlacStream stream);

    public static MetadataBlock New(FlacStream stream)
    {
      MetadataBlockHeader header = new MetadataBlockHeader();
      header.Read(stream);
      MetadataBlock block = MetadataBlock.GetBlock(header);
      block.Read(stream);
      return block;
    }

    private static MetadataBlock GetBlock(MetadataBlockHeader header)
    {
      MetadataBlock block;
      switch (header.BlockType)
      {
        case 0:
          block = (MetadataBlock) new MetadataBlockStreamInfo(header);
          break;
        case 1:
          block = (MetadataBlock) new MetadataBlockPadding(header);
          break;
        case 2:
        case 3:
        case 4:
        case 5:
        case 6:
          block = (MetadataBlock) new MetadataBlockPadding(header);
          break;
        case (int) sbyte.MaxValue:
          throw new FlacFormatInvalidException();
        default:
          throw new FlacFormatReservedException();
      }
      return block;
    }
  }
}
