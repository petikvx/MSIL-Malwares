// Decompiled with JetBrains decompiler
// Type: 059981703148.572153133819
// Assembly: 373224271579, Version=1.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
// MVID: F1AD5918-0B7E-492E-9A94-09EF01F479FE
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.04\HEUR-Trojan.MSIL.PowerShell.gen-38d6bfa22e0921e6d7bc625f64ef700d87bdf7d00cf4896c4f39e86cb2731ccc.exe

using \u003059981703148;
using \u003121761495087;
using \u003148605597467;
using \u003373224271579.Properties;
using System;
using System.Collections.Generic;
using System.IO;
using System.IO.Compression;
using System.Reflection;
using System.Runtime.CompilerServices;
using System.Threading;

namespace \u003059981703148
{
  [CompilerGenerated]
  internal static class \u003572153133819
  {
    private static Dictionary<string, bool> \u003631391260950;
    private static Dictionary<string, string> \u003300495688177;
    private static Dictionary<string, string> \u003591042348782;
    private static int \u003736717223776;
    internal const string \u003959622073190 = "3.2.9.0";

    private static Assembly \u003338037308924(AssemblyName _param0)
    {
      foreach (Assembly assembly in AppDomain.CurrentDomain.GetAssemblies())
      {
        AssemblyName name = assembly.GetName();
        // ISSUE: reference to a compiler-generated method
        // ISSUE: reference to a compiler-generated method
        if (string.Equals(name.Name, _param0.Name, StringComparison.InvariantCultureIgnoreCase) && string.Equals(\u003369978330651.\u003293326461146(name.CultureInfo), \u003369978330651.\u003293326461146(_param0.CultureInfo), StringComparison.InvariantCultureIgnoreCase))
          return assembly;
      }
      return (Assembly) null;
    }

    private static void \u003613239363578(Stream _param0, Stream _param1)
    {
      byte[] buffer = new byte[81920];
      int count;
      while ((count = _param0.Read(buffer, 0, buffer.Length)) != 0)
        _param1.Write(buffer, 0, count);
    }

    private static Stream \u003795254705253(string _param0)
    {
      Assembly executingAssembly = Assembly.GetExecutingAssembly();
      if (!_param0.EndsWith(".compressed"))
        return executingAssembly.GetManifestResourceStream(_param0);
      using (Stream manifestResourceStream = executingAssembly.GetManifestResourceStream(_param0))
      {
        using (DeflateStream deflateStream = new DeflateStream(manifestResourceStream, CompressionMode.Decompress))
        {
          MemoryStream memoryStream = new MemoryStream();
          // ISSUE: reference to a compiler-generated method
          \u003572153133819.\u003613239363578((Stream) deflateStream, (Stream) memoryStream);
          memoryStream.Position = 0L;
          return (Stream) memoryStream;
        }
      }
    }

    private static Stream \u003037534996099(
      Dictionary<string, string> _param0,
      string _param1)
    {
      string str;
      // ISSUE: reference to a compiler-generated method
      return _param0.TryGetValue(_param1, out str) ? \u003572153133819.\u003795254705253(str) : (Stream) null;
    }

    private static byte[] \u003828366853977(Stream _param0)
    {
      byte[] buffer = new byte[_param0.Length];
      _param0.Read(buffer, 0, buffer.Length);
      return buffer;
    }

    private static Assembly \u003508168905451(
      Dictionary<string, string> _param0,
      Dictionary<string, string> _param1,
      AssemblyName _param2)
    {
      string str = _param2.Name.ToLowerInvariant();
      if (_param2.CultureInfo != null && !string.IsNullOrEmpty(_param2.CultureInfo.Name))
        str = _param2.CultureInfo.Name + "." + str;
      byte[] rawAssembly;
      // ISSUE: reference to a compiler-generated method
      using (Stream stream = \u003572153133819.\u003037534996099(_param0, str))
      {
        if (stream == null)
          return (Assembly) null;
        // ISSUE: reference to a compiler-generated method
        rawAssembly = \u003572153133819.\u003828366853977(stream);
      }
      // ISSUE: reference to a compiler-generated method
      using (Stream stream = \u003572153133819.\u003037534996099(_param1, str))
      {
        if (stream != null)
        {
          // ISSUE: reference to a compiler-generated method
          byte[] rawSymbolStore = \u003572153133819.\u003828366853977(stream);
          return Assembly.Load(rawAssembly, rawSymbolStore);
        }
      }
      return Assembly.Load(rawAssembly);
    }

    public static Assembly \u003938232345228(object _param0, ResolveEventArgs _param1)
    {
      // ISSUE: reference to a compiler-generated field
      lock (\u003836412958683.\u003124784973742)
      {
        // ISSUE: reference to a compiler-generated field
        if (\u003572153133819.\u003631391260950.ContainsKey(_param1.Name))
          return (Assembly) null;
      }
      AssemblyName assemblyRef = new AssemblyName(_param1.Name);
      // ISSUE: reference to a compiler-generated method
      Assembly assembly1 = \u003572153133819.\u003338037308924(assemblyRef);
      if (assembly1 != (Assembly) null)
        return assembly1;
      // ISSUE: reference to a compiler-generated field
      // ISSUE: reference to a compiler-generated field
      // ISSUE: reference to a compiler-generated method
      Assembly assembly2 = \u003572153133819.\u003508168905451(\u003572153133819.\u003300495688177, \u003572153133819.\u003591042348782, assemblyRef);
      if (assembly2 == (Assembly) null)
      {
        // ISSUE: reference to a compiler-generated field
        lock (\u003836412958683.\u003124784973742)
        {
          // ISSUE: reference to a compiler-generated field
          \u003572153133819.\u003631391260950[_param1.Name] = true;
        }
        if ((assemblyRef.Flags & AssemblyNameFlags.Retargetable) != AssemblyNameFlags.None)
          assembly2 = Assembly.Load(assemblyRef);
      }
      return assembly2;
    }

    static \u003572153133819()
    {
      // ISSUE: reference to a compiler-generated field
      \u003836412958683.\u003124784973742 = new object();
      // ISSUE: reference to a compiler-generated field
      \u003572153133819.\u003631391260950 = new Dictionary<string, bool>();
      // ISSUE: reference to a compiler-generated field
      \u003572153133819.\u003300495688177 = new Dictionary<string, string>();
      // ISSUE: reference to a compiler-generated field
      \u003572153133819.\u003591042348782 = new Dictionary<string, string>();
      // ISSUE: reference to a compiler-generated field
      \u003572153133819.\u003300495688177.Add("costura", "costura.costura.dll.compressed");
      // ISSUE: reference to a compiler-generated field
      \u003572153133819.\u003300495688177.Add("newtonsoft.json", "costura.newtonsoft.json.dll.compressed");
    }

    public static void \u003281540110815()
    {
      // ISSUE: reference to a compiler-generated field
      if (Interlocked.Exchange(ref \u003572153133819.\u003736717223776, 1) == 1)
        return;
      AppDomain.CurrentDomain.AssemblyResolve += (ResolveEventHandler) ((_param0, _param1) =>
      {
        // ISSUE: reference to a compiler-generated field
        lock (\u003836412958683.\u003124784973742)
        {
          // ISSUE: reference to a compiler-generated field
          if (\u003572153133819.\u003631391260950.ContainsKey(_param1.Name))
            return (Assembly) null;
        }
        AssemblyName assemblyRef = new AssemblyName(_param1.Name);
        // ISSUE: reference to a compiler-generated method
        Assembly assembly1 = \u003572153133819.\u003338037308924(assemblyRef);
        if (assembly1 != (Assembly) null)
          return assembly1;
        // ISSUE: reference to a compiler-generated field
        // ISSUE: reference to a compiler-generated field
        // ISSUE: reference to a compiler-generated method
        Assembly assembly2 = \u003572153133819.\u003508168905451(\u003572153133819.\u003300495688177, \u003572153133819.\u003591042348782, assemblyRef);
        if (assembly2 == (Assembly) null)
        {
          // ISSUE: reference to a compiler-generated field
          lock (\u003836412958683.\u003124784973742)
          {
            // ISSUE: reference to a compiler-generated field
            \u003572153133819.\u003631391260950[_param1.Name] = true;
          }
          if ((assemblyRef.Flags & AssemblyNameFlags.Retargetable) != AssemblyNameFlags.None)
            assembly2 = Assembly.Load(assemblyRef);
        }
        return assembly2;
      });
    }

    static \u003572153133819() => \u003236411193980.\u003633363894260.\u003719846745458 = new \u003580413098070.\u003711966888805();
  }
}
