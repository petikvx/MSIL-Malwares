// Decompiled with JetBrains decompiler
// Type: Newtonsoft.Json.Serialization.JsonSerializerInternalReader
// Assembly: BitGenerator, Version=37.0.2.5583, Culture=neutral, PublicKeyToken=70e4c26ef2031892
// MVID: D3922F89-E00A-4D10-8BC9-9309D5539F14
// Assembly location: C:\Users\Administrateur\Downloads\VirusShare_CryptoRansom_20160715-msil\Trojan.Win32.Scar.nxii-31823040d8ccb20eab0b8653d01af370a6537017e69ead69f6f7b73d6ef7ac14.exe

using \u0001;
using \u0012;
using \u0016;
using SmartAssembly.Delegates;
using System;
using System.Collections;
using System.Collections.Generic;
using System.Collections.ObjectModel;
using System.Diagnostics;
using System.Globalization;
using System.Linq;
using System.Reflection;
using System.Runtime.InteropServices;
using System.Security;

namespace Newtonsoft.Json.Serialization
{
  internal sealed class JsonSerializerInternalReader : \u0016.\u0008
  {
    [NonSerialized]
    internal static GetString \u0090;

    public JsonSerializerInternalReader([In] \u0016.\u0003 obj0)
      : base(obj0)
    {
    }

    internal unsafe object \u0001(
      [In] \u0007 obj0_1,
      [In] \u0011.\u0008 obj1,
      [In] JsonProperty obj2,
      [In] \u0004.\u000F<object> obj3,
      [In] string obj4)
    {
      // ISSUE: untyped stack allocation
      IntPtr num = __untypedstackalloc(9);
      void* voidPtr;
      if (true)
        voidPtr = (void*) num;
      \u0014.\u0006.\u0001((object) obj3, JsonSerializerInternalReader.\u0090(4834));
      bool flag = \u0014.\u0006.\u0001(obj1) || \u0014.\u0006.\u0001(this, this.\u0001.\u0001, \u0008.\u0004.\u0003);
      Type type = obj1.\u0002();
      if (this.\u0001 != null && this.\u0001.\u0001() >= TraceLevel.Info)
      {
        string str = string.Join(JsonSerializerInternalReader.\u0090(25167), \u0014.\u0006.\u0001(obj1).Select<JsonProperty, string>((Func<JsonProperty, string>) (obj0_2 => obj0_2.\u0001)).ToArray<string>());
        this.\u0001.\u0001(TraceLevel.Info, \u0011.\u0002.\u0001(obj0_1 as \u000F.\u0001, obj0_1.\u0001(), \u0002.\u0002.\u0001(JsonSerializerInternalReader.\u0090(25172), (IFormatProvider) CultureInfo.InvariantCulture, (object) obj1.\u0002(), (object) str)), (Exception) null);
      }
      List<JsonSerializerInternalReader.\u0001> source = \u0014.\u0006.\u0001(this, obj1, obj2, obj0_1, type);
      if (flag)
      {
        foreach (JsonProperty jsonProperty in (Collection<JsonProperty>) obj1.\u0001())
        {
          // ISSUE: object of a compiler-generated type is created
          // ISSUE: variable of a compiler-generated type
          JsonSerializerInternalReader.\u0002 obj = new JsonSerializerInternalReader.\u0002();
          // ISSUE: reference to a compiler-generated field
          obj.\u0001 = jsonProperty;
          // ISSUE: reference to a compiler-generated method
          if (source.All<JsonSerializerInternalReader.\u0001>(new Func<JsonSerializerInternalReader.\u0001, bool>(obj.\u0001)))
          {
            // ISSUE: reference to a compiler-generated field
            // ISSUE: reference to a compiler-generated field
            source.Add(new JsonSerializerInternalReader.\u0001()
            {
              \u0001 = obj.\u0001,
              \u0001 = obj.\u0001.\u0001,
              \u0001 = new JsonSerializerInternalReader.PropertyPresence?(JsonSerializerInternalReader.PropertyPresence.\u0001)
            });
          }
        }
      }
      object[] objArray = new object[\u0014.\u0006.\u0001(obj1).Count];
      foreach (JsonSerializerInternalReader.\u0001 obj5 in source)
      {
        if (flag && obj5.\u0001 != null && !obj5.\u0001.HasValue)
        {
          object obj6 = obj5.\u0001;
          JsonSerializerInternalReader.PropertyPresence propertyPresence = obj6 != null ? (!(obj6 is string) ? JsonSerializerInternalReader.PropertyPresence.\u0003 : (\u0014.\u0006.\u0001(obj5.\u0001.\u0001, obj5.\u0001.\u0001(), (string) obj6) ? JsonSerializerInternalReader.PropertyPresence.\u0002 : JsonSerializerInternalReader.PropertyPresence.\u0003)) : JsonSerializerInternalReader.PropertyPresence.\u0002;
          obj5.\u0001 = new JsonSerializerInternalReader.PropertyPresence?(propertyPresence);
        }
        JsonProperty jsonProperty = obj5.\u0002;
        if (jsonProperty == null && obj5.\u0001 != null)
          jsonProperty = \u0002.\u0002.\u0001<JsonProperty>((IEnumerable<JsonProperty>) \u0014.\u0006.\u0001(obj1), (Func<JsonProperty, string>) (obj0_3 => obj0_3.\u0001), obj5.\u0001.\u0001());
        if (jsonProperty != null && !jsonProperty.\u0001())
        {
          if (flag)
          {
            JsonSerializerInternalReader.PropertyPresence? nullable = obj5.\u0001;
            JsonSerializerInternalReader.PropertyPresence propertyPresence1 = JsonSerializerInternalReader.PropertyPresence.\u0001;
            if ((nullable.GetValueOrDefault() == propertyPresence1 ? (nullable.HasValue ? 1 : 0) : 0) == 0)
            {
              nullable = obj5.\u0001;
              JsonSerializerInternalReader.PropertyPresence propertyPresence2 = JsonSerializerInternalReader.PropertyPresence.\u0002;
              if ((nullable.GetValueOrDefault() == propertyPresence2 ? (nullable.HasValue ? 1 : 0) : 0) == 0)
                goto label_26;
            }
            if (jsonProperty.\u0001() == null)
            {
              if (true)
                jsonProperty.\u0001(\u0014.\u0006.\u0001(this, jsonProperty.\u0001));
              else
                break;
            }
            if (\u0014.\u0006.\u0001(this, jsonProperty.\u0001().GetValueOrDefault(this.\u0001.\u0001), \u0008.\u0004.\u0003))
              obj5.\u0001 = \u0014.\u0006.\u0001(this, obj0_1, \u0014.\u0006.\u0001(jsonProperty), CultureInfo.InvariantCulture, jsonProperty.\u0001(), jsonProperty.\u0001);
          }
label_26:
          *(int*) voidPtr = \u0014.\u0006.\u0001(obj1).IndexOf(jsonProperty);
          objArray[*(int*) voidPtr] = obj5.\u0001;
          obj5.\u0001 = true;
        }
      }
      object obj7 = obj3(objArray);
      if (obj4 != null)
        \u0014.\u0006.\u0001(obj0_1, this, obj7, obj4);
      \u0014.\u0006.\u0001(this, obj0_1, (\u0007) obj1, obj7);
      foreach (JsonSerializerInternalReader.\u0001 obj8 in source)
      {
        if (!obj8.\u0001 && obj8.\u0001 != null && !obj8.\u0001.\u0001())
        {
          JsonSerializerInternalReader.PropertyPresence? nullable = obj8.\u0001;
          JsonSerializerInternalReader.PropertyPresence propertyPresence = JsonSerializerInternalReader.PropertyPresence.\u0001;
          if ((nullable.GetValueOrDefault() == propertyPresence ? (nullable.HasValue ? 1 : 0) : 0) == 0)
          {
            JsonProperty jsonProperty = obj8.\u0001;
            object obj9 = obj8.\u0001;
            if (\u0014.\u0006.\u0001(this, jsonProperty, obj9))
            {
              jsonProperty.\u0001().\u0001(obj7, obj9);
              obj8.\u0001 = true;
            }
            else if (!jsonProperty.\u0003() && obj9 != null)
            {
              \u0007 obj10 = this.\u0001.\u0001.\u0001(jsonProperty.\u0001);
              if (obj10.\u0001 == \u0003.\u0005.\u0003)
              {
                \u0007 obj11 = (\u0007) obj10;
                object obj12 = jsonProperty.\u0001().\u0001(obj7);
                if (obj12 != null)
                {
                  \u000E.\u0006 obj13 = \u0014.\u0006.\u0001(obj11, obj12);
                  foreach (object obj14 in (IEnumerable) \u0014.\u0006.\u0001(obj11, obj9))
                    obj13.Add(obj14);
                }
              }
              else if (obj10.\u0001 == \u0003.\u0005.\u0006)
              {
                \u0003.\u0006 obj15 = (\u0003.\u0006) obj10;
                object obj16 = jsonProperty.\u0001().\u0001(obj7);
                if (obj16 != null)
                {
                  IDictionary dictionary = obj15.\u0001() ? (IDictionary) \u0014.\u0006.\u0001(obj15, obj16) : (IDictionary) obj16;
                  foreach (DictionaryEntry dictionaryEntry in obj15.\u0001() ? (IDictionary) \u0014.\u0006.\u0001(obj15, obj9) : (IDictionary) obj9)
                    dictionary.Add(dictionaryEntry.Key, dictionaryEntry.Value);
                }
              }
              obj8.\u0001 = true;
            }
          }
        }
      }
      if (obj1.\u0001() != null)
      {
        foreach (JsonSerializerInternalReader.\u0001 obj17 in source)
        {
          if (!obj17.\u0001)
            obj1.\u0001()(obj7, obj17.\u0001, obj17.\u0001);
        }
      }
      if (flag)
      {
        List<JsonSerializerInternalReader.\u0001>.Enumerator enumerator = source.GetEnumerator();
        try
        {
          while (enumerator.MoveNext())
          {
            JsonSerializerInternalReader.\u0001 current = enumerator.Current;
            if (current.\u0001 != null)
            {
              *(int*) ((IntPtr) voidPtr + 4) = obj0_1.\u0001();
              JsonProperty jsonProperty = current.\u0001;
              JsonSerializerInternalReader.PropertyPresence valueOrDefault = current.\u0001.GetValueOrDefault();
              *(sbyte*) ((IntPtr) voidPtr + 8) = (sbyte) !current.\u0001;
              \u0014.\u0006.\u0001(obj7, (bool) *(sbyte*) ((IntPtr) voidPtr + 8), this, obj0_1, obj1, valueOrDefault, *(int*) ((IntPtr) voidPtr + 4), jsonProperty);
            }
          }
        }
        finally
        {
          do
          {
            enumerator.Dispose();
          }
          while (false);
        }
      }
      \u0014.\u0006.\u0001(this, obj0_1, (\u0007) obj1, obj7);
      return obj7;
    }

    internal unsafe object \u0001(
      [In] object obj0_1,
      [In] \u0007 obj1,
      [In] \u0011.\u0008 obj2,
      [In] JsonProperty obj3,
      [In] string obj4)
    {
      void* voidPtr;
      if (true)
      {
        // ISSUE: untyped stack allocation
        voidPtr = (void*) __untypedstackalloc(5);
        \u0014.\u0006.\u0001(this, obj1, (\u0007) obj2, obj0_1);
      }
      Dictionary<JsonProperty, JsonSerializerInternalReader.PropertyPresence> dictionary = \u0014.\u0006.\u0001(obj2) || \u0014.\u0006.\u0001(this, this.\u0001.\u0001, \u0008.\u0004.\u0003) ? obj2.\u0001().ToDictionary<JsonProperty, JsonProperty, JsonSerializerInternalReader.PropertyPresence>((Func<JsonProperty, JsonProperty>) (obj0_2 => obj0_2), (Func<JsonProperty, JsonSerializerInternalReader.PropertyPresence>) delegate
      {
        return JsonSerializerInternalReader.PropertyPresence.\u0001;
      }) : (Dictionary<JsonProperty, JsonSerializerInternalReader.PropertyPresence>) null;
      if (obj4 != null)
        \u0014.\u0006.\u0001(obj1, this, obj0_1, obj4);
      *(int*) voidPtr = obj1.\u0001();
      *(sbyte*) ((IntPtr) voidPtr + 4) = (sbyte) 0;
      do
      {
        switch (obj1.\u0001())
        {
          case JsonToken.PropertyName:
            string str = global::\u0001.\u007E\u0001(obj1.\u0001());
            if (true)
            {
              if (!\u0014.\u0006.\u0001(obj1, str, this))
              {
                try
                {
                  JsonProperty jsonProperty = \u0014.\u0006.\u0001(obj2.\u0001(), str);
                  if (jsonProperty == null)
                  {
                    if (this.\u0001 != null && this.\u0001.\u0001() >= TraceLevel.Verbose)
                      this.\u0001.\u0001(TraceLevel.Verbose, \u0011.\u0002.\u0001(obj1 as \u000F.\u0001, obj1.\u0001(), \u0002.\u0002.\u0001(JsonSerializerInternalReader.\u0090(25245), (IFormatProvider) \u0098.\u0002\u0004(), (object) str, (object) obj2.\u0002())), (Exception) null);
                    if (this.\u0001.\u0001 == \u000E.\u0005.\u0002)
                      throw \u0014.\u0006.\u0001(obj1, \u0002.\u0002.\u0001(JsonSerializerInternalReader.\u0090(22978), (IFormatProvider) \u0098.\u0002\u0004(), (object) str, (object) global::\u0001.\u007E\u000E((object) obj2.\u0002())));
                    if (obj1.\u0001())
                    {
                      \u0014.\u0006.\u0001(this, obj2, obj3, obj1, str, obj0_1);
                      goto case JsonToken.Comment;
                    }
                    else
                      goto case JsonToken.Comment;
                  }
                  else if (jsonProperty.\u0001() || !\u0014.\u0006.\u0001(obj1, obj0_1, jsonProperty, this))
                  {
                    if (obj1.\u0001())
                    {
                      \u0014.\u0006.\u0001(this, obj1, jsonProperty, dictionary);
                      \u0014.\u0006.\u0001(this, obj2, obj3, obj1, str, obj0_1);
                      goto case JsonToken.Comment;
                    }
                    else
                      goto case JsonToken.Comment;
                  }
                  else
                  {
                    if (jsonProperty.\u0001() == null)
                      jsonProperty.\u0001(\u0014.\u0006.\u0001(this, jsonProperty.\u0001));
                    \u0005.\u0005 obj = \u0014.\u0006.\u0001(this, jsonProperty.\u0001(), jsonProperty.\u0002(), (\u0006.\u0002) obj2, obj3);
                    if (!\u0014.\u0006.\u0001(this, obj1, jsonProperty.\u0001(), obj != null))
                      throw \u0014.\u0006.\u0001(obj1, \u0002.\u0002.\u0001(JsonSerializerInternalReader.\u0090(15974), (IFormatProvider) \u0098.\u0002\u0004(), (object) str));
                    \u0014.\u0006.\u0001(this, obj1, jsonProperty, dictionary);
                    if (!\u0014.\u0006.\u0001(jsonProperty, obj3, this, obj1, obj0_1, (\u0006.\u0002) obj2, obj))
                    {
                      \u0014.\u0006.\u0001(this, obj2, obj3, obj1, str, obj0_1);
                      goto case JsonToken.Comment;
                    }
                    else
                      goto case JsonToken.Comment;
                  }
                }
                catch (Exception ex)
                {
                  if (\u0014.\u0006.\u0001(obj1.\u0001(), obj0_1, (object) str, ex, obj1 as \u000F.\u0001, (\u0007) obj2, (\u0016.\u0008) this))
                  {
                    \u0014.\u0006.\u0001(obj1, this, *(int*) voidPtr, true);
                    goto case JsonToken.Comment;
                  }
                  else
                    throw;
                }
              }
              else
                goto case JsonToken.Comment;
            }
            else
              goto label_30;
          case JsonToken.Comment:
            continue;
          case JsonToken.EndObject:
            *(sbyte*) ((IntPtr) voidPtr + 4) = (sbyte) 1;
            goto case JsonToken.Comment;
          default:
            throw \u0014.\u0006.\u0001(obj1, \u0086.\u0086\u0003((object) JsonSerializerInternalReader.\u0090(16031), (object) obj1.\u0001()));
        }
      }
      while (*(sbyte*) ((IntPtr) voidPtr + 4) == (sbyte) 0 && obj1.\u0001());
      if (*(sbyte*) ((IntPtr) voidPtr + 4) != (sbyte) 0)
        goto label_31;
label_30:
      \u0014.\u0006.\u0001(obj0_1, this, (\u0007) obj2, JsonSerializerInternalReader.\u0090(10299), obj1);
label_31:
      if (dictionary != null)
      {
        foreach (KeyValuePair<JsonProperty, JsonSerializerInternalReader.PropertyPresence> keyValuePair in dictionary)
        {
          JsonProperty key = keyValuePair.Key;
          JsonSerializerInternalReader.PropertyPresence propertyPresence = keyValuePair.Value;
          \u0014.\u0006.\u0001(obj0_1, true, this, obj1, obj2, propertyPresence, *(int*) voidPtr, key);
        }
      }
      \u0014.\u0006.\u0001(this, obj1, (\u0007) obj2, obj0_1);
      return obj0_1;
    }

    static JsonSerializerInternalReader()
    {
      do
      {
        SmartAssembly.HouseOfCards.Strings.CreateGetStringDelegate(typeof (JsonSerializerInternalReader));
        bool flag = false;
        Assembly assembly = \u0013.\u008B\u0002();
        if (\u0014.\u0006.\u0001(global::\u0001.\u007E\u0002((object) assembly), true, out flag))
          goto label_7;
label_5:
        throw new SecurityException(JsonSerializerInternalReader.\u0090(2704));
label_7:
        int num = flag ? 1 : 0;
        if (true)
        {
          if (num != 0)
            num = global::\u0014.\u007E\u008C\u0002((object) global::\u0001.\u007E\u0003((object) assembly), JsonSerializerInternalReader.\u0090(2679)) ? 1 : 0;
          else
            goto label_5;
        }
        if (num == 0)
          goto label_5;
      }
      while (false);
    }

    internal enum PropertyPresence
    {
      \u0001,
      \u0002,
      \u0003,
    }

    internal new sealed class \u0001
    {
      public string \u0001;
      public JsonProperty \u0001;
      public JsonProperty \u0002;
      public JsonSerializerInternalReader.PropertyPresence? \u0001;
      public object \u0001;
      public bool \u0001;
    }
  }
}
