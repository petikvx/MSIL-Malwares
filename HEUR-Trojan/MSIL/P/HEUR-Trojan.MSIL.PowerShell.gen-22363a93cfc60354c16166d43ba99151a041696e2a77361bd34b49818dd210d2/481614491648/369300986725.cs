// Decompiled with JetBrains decompiler
// Type: 481614491648.369300986725
// Assembly: 422928051450, Version=1.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
// MVID: F1AD5918-0B7E-492E-9A94-09EF01F479FE
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.04\HEUR-Trojan.MSIL.PowerShell.gen-22363a93cfc60354c16166d43ba99151a041696e2a77361bd34b49818dd210d2.exe

using \u003325799383069;
using \u003422928051450.Properties;
using \u003481614491648;
using \u003627586333967;
using System;
using System.Collections.Generic;
using System.IO;
using System.IO.Compression;
using System.Reflection;
using System.Runtime.CompilerServices;
using System.Threading;

namespace \u003481614491648
{
  [CompilerGenerated]
  internal static class \u003369300986725
  {
    private static Dictionary<string, bool> \u003322531388375;
    private static Dictionary<string, string> \u003532106784367;
    private static Dictionary<string, string> \u003776120893599;
    private static int \u003951610201066;
    internal const string \u003135277521003 = "3.2.9.0";

    private static Assembly \u003989950027226(AssemblyName _param0)
    {
      foreach (Assembly assembly in AppDomain.CurrentDomain.GetAssemblies())
      {
        AssemblyName name = assembly.GetName();
        // ISSUE: reference to a compiler-generated method
        // ISSUE: reference to a compiler-generated method
        if (string.Equals(name.Name, _param0.Name, StringComparison.InvariantCultureIgnoreCase) && string.Equals(\u003933566155802.\u003792949136337(name.CultureInfo), \u003933566155802.\u003792949136337(_param0.CultureInfo), StringComparison.InvariantCultureIgnoreCase))
          return assembly;
      }
      return (Assembly) null;
    }

    private static void \u003550600648378(Stream _param0, Stream _param1)
    {
      byte[] buffer = new byte[81920];
      int count;
      while ((count = _param0.Read(buffer, 0, buffer.Length)) != 0)
        _param1.Write(buffer, 0, count);
    }

    private static Stream \u003064487963916(string _param0)
    {
      Assembly executingAssembly = Assembly.GetExecutingAssembly();
      if (!_param0.EndsWith(".compressed"))
        return executingAssembly.GetManifestResourceStream(_param0);
      using (Stream manifestResourceStream = executingAssembly.GetManifestResourceStream(_param0))
      {
        using (DeflateStream deflateStream = new DeflateStream(manifestResourceStream, CompressionMode.Decompress))
        {
          MemoryStream memoryStream = new MemoryStream();
          // ISSUE: reference to a compiler-generated method
          \u003369300986725.\u003550600648378((Stream) deflateStream, (Stream) memoryStream);
          memoryStream.Position = 0L;
          return (Stream) memoryStream;
        }
      }
    }

    private static Stream \u003856497921852(
      Dictionary<string, string> _param0,
      string _param1)
    {
      string str;
      // ISSUE: reference to a compiler-generated method
      return _param0.TryGetValue(_param1, out str) ? \u003369300986725.\u003064487963916(str) : (Stream) null;
    }

    private static byte[] \u003428994605202(Stream _param0)
    {
      byte[] buffer = new byte[_param0.Length];
      _param0.Read(buffer, 0, buffer.Length);
      return buffer;
    }

    private static Assembly \u003214795151094(
      Dictionary<string, string> _param0,
      Dictionary<string, string> _param1,
      AssemblyName _param2)
    {
      string str = _param2.Name.ToLowerInvariant();
      if (_param2.CultureInfo != null && !string.IsNullOrEmpty(_param2.CultureInfo.Name))
        str = _param2.CultureInfo.Name + "." + str;
      byte[] rawAssembly;
      // ISSUE: reference to a compiler-generated method
      using (Stream stream = \u003369300986725.\u003856497921852(_param0, str))
      {
        if (stream == null)
          return (Assembly) null;
        // ISSUE: reference to a compiler-generated method
        rawAssembly = \u003369300986725.\u003428994605202(stream);
      }
      // ISSUE: reference to a compiler-generated method
      using (Stream stream = \u003369300986725.\u003856497921852(_param1, str))
      {
        if (stream != null)
        {
          // ISSUE: reference to a compiler-generated method
          byte[] rawSymbolStore = \u003369300986725.\u003428994605202(stream);
          return Assembly.Load(rawAssembly, rawSymbolStore);
        }
      }
      return Assembly.Load(rawAssembly);
    }

    public static Assembly \u003400815296896(object _param0, ResolveEventArgs _param1)
    {
      // ISSUE: reference to a compiler-generated field
      lock (\u003733071836822.\u003777483257043)
      {
        // ISSUE: reference to a compiler-generated field
        if (\u003369300986725.\u003322531388375.ContainsKey(_param1.Name))
          return (Assembly) null;
      }
      AssemblyName assemblyRef = new AssemblyName(_param1.Name);
      // ISSUE: reference to a compiler-generated method
      Assembly assembly1 = \u003369300986725.\u003989950027226(assemblyRef);
      if (assembly1 != (Assembly) null)
        return assembly1;
      // ISSUE: reference to a compiler-generated field
      // ISSUE: reference to a compiler-generated field
      // ISSUE: reference to a compiler-generated method
      Assembly assembly2 = \u003369300986725.\u003214795151094(\u003369300986725.\u003532106784367, \u003369300986725.\u003776120893599, assemblyRef);
      if (assembly2 == (Assembly) null)
      {
        // ISSUE: reference to a compiler-generated field
        lock (\u003733071836822.\u003777483257043)
        {
          // ISSUE: reference to a compiler-generated field
          \u003369300986725.\u003322531388375[_param1.Name] = true;
        }
        if ((assemblyRef.Flags & AssemblyNameFlags.Retargetable) != AssemblyNameFlags.None)
          assembly2 = Assembly.Load(assemblyRef);
      }
      return assembly2;
    }

    static \u003369300986725()
    {
      // ISSUE: reference to a compiler-generated field
      \u003733071836822.\u003777483257043 = new object();
      // ISSUE: reference to a compiler-generated field
      \u003369300986725.\u003322531388375 = new Dictionary<string, bool>();
      // ISSUE: reference to a compiler-generated field
      \u003369300986725.\u003532106784367 = new Dictionary<string, string>();
      // ISSUE: reference to a compiler-generated field
      \u003369300986725.\u003776120893599 = new Dictionary<string, string>();
      // ISSUE: reference to a compiler-generated field
      \u003369300986725.\u003532106784367.Add("costura", "costura.costura.dll.compressed");
      // ISSUE: reference to a compiler-generated field
      \u003369300986725.\u003532106784367.Add("newtonsoft.json", "costura.newtonsoft.json.dll.compressed");
    }

    public static void \u003455345047384()
    {
      // ISSUE: reference to a compiler-generated field
      if (Interlocked.Exchange(ref \u003369300986725.\u003951610201066, 1) == 1)
        return;
      AppDomain.CurrentDomain.AssemblyResolve += (ResolveEventHandler) ((_param0, _param1) =>
      {
        // ISSUE: reference to a compiler-generated field
        lock (\u003733071836822.\u003777483257043)
        {
          // ISSUE: reference to a compiler-generated field
          if (\u003369300986725.\u003322531388375.ContainsKey(_param1.Name))
            return (Assembly) null;
        }
        AssemblyName assemblyRef = new AssemblyName(_param1.Name);
        // ISSUE: reference to a compiler-generated method
        Assembly assembly1 = \u003369300986725.\u003989950027226(assemblyRef);
        if (assembly1 != (Assembly) null)
          return assembly1;
        // ISSUE: reference to a compiler-generated field
        // ISSUE: reference to a compiler-generated field
        // ISSUE: reference to a compiler-generated method
        Assembly assembly2 = \u003369300986725.\u003214795151094(\u003369300986725.\u003532106784367, \u003369300986725.\u003776120893599, assemblyRef);
        if (assembly2 == (Assembly) null)
        {
          // ISSUE: reference to a compiler-generated field
          lock (\u003733071836822.\u003777483257043)
          {
            // ISSUE: reference to a compiler-generated field
            \u003369300986725.\u003322531388375[_param1.Name] = true;
          }
          if ((assemblyRef.Flags & AssemblyNameFlags.Retargetable) != AssemblyNameFlags.None)
            assembly2 = Assembly.Load(assemblyRef);
        }
        return assembly2;
      });
    }

    static \u003369300986725() => \u003899410353382.\u003390380329349.\u003157530616011 = new \u003741523902115.\u003101956246888();
  }
}
