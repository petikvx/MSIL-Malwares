// Decompiled with JetBrains decompiler
// Type: Alero.Querying.FullTextClause
// Assembly: AssemblyCopyrightAttrib, Version=2005.1.0.0, Culture=neutral, PublicKeyToken=null
// MVID: 6DE54395-8B54-4A88-80DE-363C4128FB08
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.03\Trojan-Spy.Win32.Noon.bcqx-d67265883ffb3f3129132bfe1dad4a828c887266a0a005e814bcda58c525625b.exe

using System.Collections.Generic;

namespace Alero.Querying
{
  public class FullTextClause : WherePart
  {
    private string _searchText;
    private List<FieldReference> _fieldReferences;

    public FullTextClause(string searchText, params FieldReference[] fieldReferences)
    {
      this._searchText = searchText;
      this._fieldReferences = new List<FieldReference>((IEnumerable<FieldReference>) fieldReferences);
    }

    public override bool Active => !string.IsNullOrEmpty(this._searchText) && !(this._searchText == "*") && !(this._searchText == "\"*\"");

    internal override void BuildSql(BuildSqlContext sqlContext)
    {
      sqlContext.Builder.Append("contains(");
      foreach (WherePart fieldReference in this._fieldReferences)
      {
        fieldReference.BuildSql(sqlContext);
        sqlContext.Builder.Append(",");
      }
      new StringConstant(this._searchText).BuildSql(sqlContext);
      sqlContext.Builder.Append(")");
    }
  }
}
