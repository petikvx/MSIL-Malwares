// Decompiled with JetBrains decompiler
// Type: ShZW03mN3mAus.CbzZdRCYQXRdZ
// Assembly: Udby4Jt48oXkJ, Version=3.17.2.31, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
// MVID: 37899E89-D673-4F5B-A193-2E4DF6A54096
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.03\HEUR-Trojan.MSIL.Gorgon.gen-bf535869266eca7a958714acade2ede1bff0e73f0aaa2702f389ededee6a8d6a.exe

using \u0036mHL90hQ651VX;
using mhZ8amQVr4JAO;
using PWm847EhHuyVB;
using rremZdV0lo9Ty;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Net;
using System.Net.Http;
using System.Runtime.CompilerServices;
using System.Threading.Tasks;

namespace ShZW03mN3mAus
{
  public sealed class CbzZdRCYQXRdZ
  {
    private const string ZjtgvjaHC9QGn = "WWW-Authenticate";
    private const string gJEiKrlh2zdC5 = "bearer";
    private const string lfhBLRDDGpMEl = "authorization_uri";
    private const string t88mlDRXEQDin = "resource_id";

    public string s2xRAo261Z4R2 { get; set; }

    public string \u00319V8WlqUajRMQ { get; set; }

    public static Task<CbzZdRCYQXRdZ> W0N5mbauy95sj(Uri urVPuvyTQecC5)
    {
      // ISSUE: variable of a compiler-generated type
      CbzZdRCYQXRdZ.\u0038Totd6VO18j4P stateMachine;
      // ISSUE: reference to a compiler-generated field
      stateMachine.\u0036aiuTCDMIG2JJ = urVPuvyTQecC5;
      // ISSUE: reference to a compiler-generated field
      stateMachine.jlZwnzQmtxqfH = AsyncTaskMethodBuilder<CbzZdRCYQXRdZ>.Create();
      // ISSUE: cast to a reference type
      // ISSUE: explicit reference operation
      // ISSUE: reference to a compiler-generated field
      (^(JzrlaHov73olq.vrAbPMUorwwZg&) ref stateMachine).EFCSSfEiMyucc = -1;
      // ISSUE: reference to a compiler-generated field
      stateMachine.jlZwnzQmtxqfH.Start<CbzZdRCYQXRdZ.\u0038Totd6VO18j4P>(ref stateMachine);
      // ISSUE: reference to a compiler-generated field
      return stateMachine.jlZwnzQmtxqfH.Task;
    }

    public static Task<CbzZdRCYQXRdZ> sbbMq5vgipQuD(
      HttpResponseMessage PpsSCrfWdiRJ7)
    {
      // ISSUE: variable of a compiler-generated type
      CbzZdRCYQXRdZ.OSAlhRBcAbExj stateMachine;
      // ISSUE: reference to a compiler-generated field
      stateMachine.KJ9CLole1sjWA = PpsSCrfWdiRJ7;
      // ISSUE: reference to a compiler-generated field
      stateMachine.\u0032JfHdIcHTpWhJ = AsyncTaskMethodBuilder<CbzZdRCYQXRdZ>.Create();
      // ISSUE: cast to a reference type
      // ISSUE: explicit reference operation
      // ISSUE: reference to a compiler-generated field
      (^(CbzZdRCYQXRdZ.\u0038Totd6VO18j4P&) ref stateMachine).JAeoKp9B9JLT2 = -1;
      // ISSUE: reference to a compiler-generated field
      stateMachine.\u0032JfHdIcHTpWhJ.Start<CbzZdRCYQXRdZ.OSAlhRBcAbExj>(ref stateMachine);
      // ISSUE: reference to a compiler-generated field
      return stateMachine.\u0032JfHdIcHTpWhJ.Task;
    }

    public static CbzZdRCYQXRdZ a8Sot2azj9pWo(string zkj8BshTW9mwq)
    {
      zkj8BshTW9mwq = !string.IsNullOrWhiteSpace(zkj8BshTW9mwq) ? zkj8BshTW9mwq.Trim() : throw new ArgumentNullException("authenticateHeader");
      if (!zkj8BshTW9mwq.StartsWith("bearer", StringComparison.OrdinalIgnoreCase) || zkj8BshTW9mwq.Length < "bearer".Length + 2 || !char.IsWhiteSpace(zkj8BshTW9mwq["bearer".Length]))
      {
        ArgumentException argumentException = new ArgumentException("Invalid authenticate header format", "authenticateHeader");
        Up2ciG6wVdM5T.xgsfAAH34Fgnl.\u0031CII3TGnWWaPA.DEWNyx9yDAdaP((Up2ciG6wVdM5T) null, (Exception) argumentException, "E:\\A\\_work\\115\\s\\src\\Microsoft.IdentityModel.Clients.ActiveDirectory\\CbzZdRCYQXRdZ.cs");
        throw argumentException;
      }
      zkj8BshTW9mwq = zkj8BshTW9mwq.Substring("bearer".Length).Trim();
      IDictionary<string, string> dictionary;
      try
      {
        dictionary = (IDictionary<string, string>) \u0037BKomckZ2VHww.JOkRJia4GcwSK(zkj8BshTW9mwq, ',', false, true, (Up2ciG6wVdM5T) null);
      }
      catch (ArgumentException ex)
      {
        ArgumentException argumentException = new ArgumentException("Invalid authenticate header format", "authenticateHeader", (Exception) ex);
        Up2ciG6wVdM5T.xgsfAAH34Fgnl.\u0031CII3TGnWWaPA.DEWNyx9yDAdaP((Up2ciG6wVdM5T) null, (Exception) argumentException, "E:\\A\\_work\\115\\s\\src\\Microsoft.IdentityModel.Clients.ActiveDirectory\\CbzZdRCYQXRdZ.cs");
        throw argumentException;
      }
      CbzZdRCYQXRdZ cbzZdRcyqxRdZ = new CbzZdRCYQXRdZ();
      string str;
      dictionary.TryGetValue("authorization_uri", out str);
      cbzZdRcyqxRdZ.s2xRAo261Z4R2 = str;
      dictionary.TryGetValue("resource_id", out str);
      cbzZdRcyqxRdZ.\u00319V8WlqUajRMQ = str;
      return cbzZdRcyqxRdZ;
    }

    private static Task<CbzZdRCYQXRdZ> \u0039iZbIUS712vm7(Uri b34HqZvaVihET)
    {
      // ISSUE: variable of a compiler-generated type
      CbzZdRCYQXRdZ.\u0031sMfOTzff1QmA stateMachine;
      // ISSUE: reference to a compiler-generated field
      stateMachine.jznFqESPG7oj7 = b34HqZvaVihET;
      // ISSUE: reference to a compiler-generated field
      stateMachine.jLXx2lgpy8Zof = AsyncTaskMethodBuilder<CbzZdRCYQXRdZ>.Create();
      // ISSUE: cast to a reference type
      // ISSUE: explicit reference operation
      // ISSUE: reference to a compiler-generated field
      (^(CbzZdRCYQXRdZ.OSAlhRBcAbExj&) ref stateMachine).XhyPEy3D8i9k3 = -1;
      // ISSUE: reference to a compiler-generated field
      stateMachine.jLXx2lgpy8Zof.Start<CbzZdRCYQXRdZ.\u0031sMfOTzff1QmA>(ref stateMachine);
      // ISSUE: reference to a compiler-generated field
      return stateMachine.jLXx2lgpy8Zof.Task;
    }

    private static CbzZdRCYQXRdZ BoCH481UjNfr4(IHttpWebResponse _param0)
    {
      if (_param0 == null)
        throw new ArgumentNullException("response");
      if (_param0.StatusCode == HttpStatusCode.Unauthorized)
      {
        if (_param0.Headers.Contains("WWW-Authenticate"))
          return CbzZdRCYQXRdZ.a8Sot2azj9pWo(_param0.Headers.GetValues("WWW-Authenticate").FirstOrDefault<string>());
        ArgumentException argumentException = new ArgumentException("WWW-Authenticate header was expected in the response", "response");
        Up2ciG6wVdM5T.xgsfAAH34Fgnl.\u0031CII3TGnWWaPA.DEWNyx9yDAdaP((Up2ciG6wVdM5T) null, (Exception) argumentException, "E:\\A\\_work\\115\\s\\src\\Microsoft.IdentityModel.Clients.ActiveDirectory\\CbzZdRCYQXRdZ.cs");
        throw argumentException;
      }
      ArgumentException argumentException1 = new ArgumentException("Unauthorized Http Status Code (401) was expected in the response", "response");
      Up2ciG6wVdM5T.xgsfAAH34Fgnl.\u0031CII3TGnWWaPA.DEWNyx9yDAdaP((Up2ciG6wVdM5T) null, (Exception) argumentException1, "E:\\A\\_work\\115\\s\\src\\Microsoft.IdentityModel.Clients.ActiveDirectory\\CbzZdRCYQXRdZ.cs");
      throw argumentException1;
    }
  }
}
