// Decompiled with JetBrains decompiler
// Type: EbNNdTmxNaUt.QdyPcvhjhZtP
// Assembly: Client-0, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: B8444C5B-FCC9-4B9F-A06C-7304BA49E3C5
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2021.03-msil\HEUR-Trojan-Ransom.Win32.Generic-1d4db8733c5f11ee8fca530aeb4a91069de04b1af64cbe1fa3ae2d3572a6e554.exe

using System;
using System.Collections;
using System.Collections.Generic;
using System.IO;
using System.Runtime.CompilerServices;
using System.Runtime.InteropServices;

namespace EbNNdTmxNaUt
{
  public sealed class QdyPcvhjhZtP : IEnumerable<string>, IEnumerable
  {
    private Dictionary<ulong, gscyLTjmBf> vUiqVfPrYxX;
    private Dictionary<ulong, gscyLTjmBf> RwRYcnGkxg;
    private readonly string FigiclpimPfO;

    public QdyPcvhjhZtP([In] string obj0) => this.FigiclpimPfO = obj0;

    IEnumerator IEnumerable.GetEnumerator() => (IEnumerator) this.GetEnumerator();

    public IEnumerator<string> GetEnumerator() => (IEnumerator<string>) new QdyPcvhjhZtP.TorSSUbwlcW(0)
    {
      wJyalXNgTTzc = this
    };

    private void eGLObvqxqTZ()
    {
      if (this.vUiqVfPrYxX != null)
        return;
      new aMKFziBBCmob().npFmhzJJPSuN(this.FigiclpimPfO, (HashSet<string>) null, out this.vUiqVfPrYxX, out this.RwRYcnGkxg);
    }

    private sealed class TorSSUbwlcW : IEnumerator<string>, IDisposable, IEnumerator
    {
      private string hfMYqDULWlNj;
      private int XYkKIGBwgfaoLL;
      public QdyPcvhjhZtP wJyalXNgTTzc;
      public List<string> lULeJhJjDQnCD;
      public gscyLTjmBf fDgfrsexlySQGS;
      public gscyLTjmBf yemWgdydcQ;
      public int RUcnEqUJXet;
      public string ZUfzseLuJBUIgkZ;
      public Dictionary<ulong, gscyLTjmBf>.ValueCollection.Enumerator MCfVMCOcDmH;

      bool IEnumerator.MoveNext()
      {
        // ISSUE: fault handler
        try
        {
          switch (this.XYkKIGBwgfaoLL)
          {
            case 0:
              this.XYkKIGBwgfaoLL = -1;
              this.wJyalXNgTTzc.eGLObvqxqTZ();
              this.lULeJhJjDQnCD = new List<string>();
              this.MCfVMCOcDmH = this.wJyalXNgTTzc.vUiqVfPrYxX.Values.GetEnumerator();
              this.XYkKIGBwgfaoLL = 1;
              break;
            case 2:
              this.XYkKIGBwgfaoLL = 1;
              break;
            default:
label_11:
              return false;
          }
          while (this.MCfVMCOcDmH.MoveNext())
          {
            this.fDgfrsexlySQGS = this.MCfVMCOcDmH.Current;
            this.lULeJhJjDQnCD.Clear();
            this.yemWgdydcQ = this.fDgfrsexlySQGS;
            this.RUcnEqUJXet = -1;
            do
            {
              if (this.yemWgdydcQ.get_ParentFrn() != 0UL)
                this.lULeJhJjDQnCD.Add(this.yemWgdydcQ.get_Name());
              this.yemWgdydcQ = !this.wJyalXNgTTzc.vUiqVfPrYxX.ContainsKey(this.yemWgdydcQ.get_ParentFrn()) ? (!this.wJyalXNgTTzc.RwRYcnGkxg.ContainsKey(this.yemWgdydcQ.get_ParentFrn()) ? (gscyLTjmBf) null : this.wJyalXNgTTzc.RwRYcnGkxg[this.yemWgdydcQ.get_ParentFrn()]) : this.wJyalXNgTTzc.vUiqVfPrYxX[this.yemWgdydcQ.get_ParentFrn()];
            }
            while (this.yemWgdydcQ != null && ++this.RUcnEqUJXet < 1000);
            if (this.lULeJhJjDQnCD.Count != 0)
            {
              this.lULeJhJjDQnCD.Reverse();
              this.ZUfzseLuJBUIgkZ = this.wJyalXNgTTzc.FigiclpimPfO + (object) '\\' + Path.Combine(this.lULeJhJjDQnCD.ToArray());
              this.hfMYqDULWlNj = this.ZUfzseLuJBUIgkZ;
              this.XYkKIGBwgfaoLL = 2;
              return true;
            }
          }
          this.\u003C\u003Em__Finally7();
          goto label_11;
        }
        __fault
        {
          this.System\u002EIDisposable\u002EDispose();
        }
      }

      [SpecialName]
      string IEnumerator<string>.get_Current() => this.hfMYqDULWlNj;

      void IEnumerator.Reset() => throw new NotSupportedException();

      void IDisposable.Dispose()
      {
        switch (this.XYkKIGBwgfaoLL)
        {
          case 1:
          case 2:
            try
            {
            }
            finally
            {
              this.\u003C\u003Em__Finally7();
            }
            break;
        }
      }

      [SpecialName]
      object IEnumerator.get_Current() => (object) this.hfMYqDULWlNj;

      public TorSSUbwlcW([In] int obj0) => this.XYkKIGBwgfaoLL = obj0;

      private void \u003C\u003Em__Finally7()
      {
        this.XYkKIGBwgfaoLL = -1;
        this.MCfVMCOcDmH.Dispose();
      }
    }
  }
}
