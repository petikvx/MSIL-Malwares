// Decompiled with JetBrains decompiler
// Type: Coache.Business.CiudadesManager
// Assembly: IsCopyConstruc, Version=5.6.2.1, Culture=neutral, PublicKeyToken=null
// MVID: 1DA50973-FF9A-4563-8B8F-74E2573677DF
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.02-msil\HEUR-Trojan-Ransom.MSIL.Blocker.gen-136935297fa08738f6957068951067c699c91b2902f3ea14da650289cabfd29d.exe

using Coache.Common;
using Data;
using System.Collections.Generic;
using System.Configuration;
using System.Data;

namespace Coache.Business
{
  public class CiudadesManager
  {
    public List<City> GetAll()
    {
      if (SessionData.Contains("Cities"))
        return SessionData.Get<List<City>>("Cities");
      List<City> all = new List<City>();
      DataTable dataTable = SqlDataAccess.ExecuteDataTableQuery(ConfigurationManager.ConnectionStrings["GrouponConnectionString"].ToString(), "GRUPO_N.GetCiudades");
      if (dataTable != null)
      {
        foreach (DataRow row in (InternalDataCollectionBase) dataTable.Rows)
          all.Add(new City()
          {
            ID = int.Parse(row["ID"].ToString()),
            Name = row["Descripcion"].ToString()
          });
      }
      SessionData.Set("Cities", (object) all);
      return all;
    }
  }
}
