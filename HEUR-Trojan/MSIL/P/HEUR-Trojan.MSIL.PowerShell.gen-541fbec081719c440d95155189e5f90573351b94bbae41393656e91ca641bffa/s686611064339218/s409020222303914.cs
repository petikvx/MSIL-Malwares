// Decompiled with JetBrains decompiler
// Type: s686611064339218.s409020222303914
// Assembly: s778197286190734, Version=16.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
// MVID: B8DB6840-BCA0-4EC3-93C1-1E026E238560
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.04\HEUR-Trojan.MSIL.PowerShell.gen-541fbec081719c440d95155189e5f90573351b94bbae41393656e91ca641bffa.exe

using Microsoft.VisualStudio.Debugger;
using Microsoft.VisualStudio.Debugger.ComponentInterfaces;
using Microsoft.VisualStudio.Debugger.Script;
using s281269497025338;
using s402371713847991;
using s444004179517387;
using s454135884932901;
using System;
using System.IO;
using System.Net;

namespace s686611064339218
{
  internal sealed class s409020222303914 : IDkmScriptDocumentProvider
  {
    string IDkmScriptDocumentProvider.s785381014572562(
      DkmScriptDocument s801151676782553,
      bool s695017949924119,
      out uint[] s767169795008854)
    {
      s767169795008854 = new uint[0];
      s139515059365893 dataItem = ((DkmDataContainer) s801151676782553).GetDataItem<s139515059365893>();
      if (dataItem != null)
        return dataItem.s064565302052790;
      s115731280245153 s033776201707366 = ((DkmDataContainer) s801151676782553).GetDataItem<s115731280245153>();
      if (s033776201707366 == null)
      {
        string sourceText = (string) null;
        string exceptionMessage = (string) null;
        int exceptionHResult = 0;
        try
        {
          if (string.IsNullOrEmpty(s801151676782553.FilePath))
          {
            using (WebResponse webResponse = s028001312605085.s939883195364330(new Uri(s801151676782553.Url)))
            {
              using (Stream responseStream = webResponse.GetResponseStream())
              {
                using (StreamReader streamReader = new StreamReader(responseStream))
                  sourceText = streamReader.ReadToEnd();
              }
            }
          }
          else
          {
            using (StreamReader streamReader = new StreamReader(s801151676782553.FilePath))
              sourceText = streamReader.ReadToEnd();
          }
        }
        catch (Exception ex)
        {
          if (ex.InnerException != null && !string.IsNullOrEmpty(ex.InnerException.Message))
          {
            exceptionMessage = ex.InnerException.Message;
            exceptionHResult = ex.InnerException.HResult;
          }
          else
          {
            exceptionMessage = ex.Message;
            exceptionHResult = ex.HResult;
          }
        }
        s033776201707366 = new s115731280245153(sourceText, exceptionMessage, exceptionHResult);
        ((DkmDataContainer) s801151676782553).SetDataItem<s115731280245153>((DkmDataCreationDisposition) 0, s033776201707366);
      }
      return this.s844230232689392(s801151676782553, s033776201707366);
    }

    private string s844230232689392(
      DkmScriptDocument s261606240751984,
      s115731280245153 s033776201707366)
    {
      if (s033776201707366.s601293350212296 != null)
        return s033776201707366.s601293350212296;
      DkmCustomMessage.Create(s261606240751984.Module.Connection, ((DkmScriptDocumentTreeNode) s261606240751984).Process, s244964523437792.s462897974219091, 102, string.IsNullOrEmpty(s261606240751984.FilePath) ? (object) s261606240751984.Url : (object) s261606240751984.FilePath, (object) s244964523437792.s742448680049159(s033776201707366.s723589783449203, s033776201707366.s381761094451797)).SendHigher();
      throw new Exception(s033776201707366.s723589783449203);
    }

    void IDkmScriptDocumentProvider.s625210386677737(
      DkmScriptDocument s286464917636966,
      bool s957583386433080)
    {
      s286464917636966.SetRaiseContentEvents(s957583386433080);
    }
  }
}
