// Decompiled with JetBrains decompiler
// Type: OOP_TeamWork.Unit
// Assembly: OOP-TeamWork, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: 78E60F07-1B9F-418F-8C6F-A1FA2CABDF45
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.07\HEUR-Trojan.MSIL.Picsys.gen-5866008a90168b7835b8f8b3d25aa43b6aaafd059e7519932278729ceae256ba.exe

namespace OOP_TeamWork
{
  public abstract class Unit : Object, IMovable
  {
    public int health;
    protected int attack;
    protected int defense;
    public bool hasWall = false;
    private int currentHealth = 100;
    private bool isAlive = true;

    public Unit(int x, int y, int width, int height, int health, int attack, int defense)
      : base(x, y, width, height)
    {
      this.health = health;
      this.attack = attack;
      this.defense = defense;
    }

    public void Move(int x, int y)
    {
      this.UnitPositionX += x;
      this.UnitPositionY += y;
    }

    public void AttackEnemy(Unit enemy)
    {
      if (this.attack <= enemy.defense)
        return;
      enemy.CurrentHealth -= this.attack - enemy.defense;
    }

    public bool IsAlive
    {
      get => this.isAlive;
      set
      {
        if (this.CurrentHealth <= 0)
          this.isAlive = false;
        else
          this.isAlive = true;
      }
    }

    public int CurrentHealth
    {
      get => this.currentHealth;
      set
      {
        if (value < 0)
        {
          this.currentHealth = 0;
          this.isAlive = false;
        }
        else if (value > this.health)
          this.currentHealth = this.health;
        else
          this.currentHealth = value;
      }
    }

    public int UnitPositionY
    {
      get => this.positionY;
      set
      {
        if (value < 30 || value > 520)
          value = this.positionY;
        this.positionY = value;
      }
    }

    public int UnitPositionX
    {
      get => this.positionX;
      set
      {
        if (value < 30 || value > 1120)
          value = this.positionX;
        this.positionX = value;
      }
    }
  }
}
