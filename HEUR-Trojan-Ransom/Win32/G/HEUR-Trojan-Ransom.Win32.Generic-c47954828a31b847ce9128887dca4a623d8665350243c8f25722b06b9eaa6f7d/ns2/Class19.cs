// Decompiled with JetBrains decompiler
// Type: ns2.Class19
// Assembly: TRM, Version=1.0.4536.20171, Culture=neutral, PublicKeyToken=null
// MVID: CEEA56E5-11FC-4347-A0BD-C051910E6353
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.07\HEUR-Trojan-Ransom.Win32.Generic-c47954828a31b847ce9128887dca4a623d8665350243c8f25722b06b9eaa6f7d.exe

using ns0;
using ns1;
using System;
using System.IO;
using System.Runtime.CompilerServices;
using System.Runtime.InteropServices;
using System.Text;

namespace ns2
{
  internal sealed class Class19
  {
    private Class38.Struct2 struct2_0;
    private string string_0;
    private string string_1;

    [SpecialName]
    public Class38.Struct2 method_0() => this.struct2_0;

    [SpecialName]
    public string method_1() => this.string_0;

    [SpecialName]
    public string method_2() => this.string_1 == null ? this.string_1 : this.string_1.Substring(0, this.string_1.Length - 1);

    [SpecialName]
    public string method_3() => this.string_1;

    [SpecialName]
    public void method_4(string string_2)
    {
      switch (string_2)
      {
        case "":
          this.string_1 = string_2 + (object) char.MinValue;
          break;
        case null:
          this.string_1 = (string) null;
          this.struct2_0.ushort_1 = (ushort) 0;
          return;
        default:
          if (string_2[string_2.Length - 1] == char.MinValue)
          {
            this.string_1 = string_2;
            break;
          }
          goto case "";
      }
      this.struct2_0.ushort_1 = (ushort) this.string_1.Length;
    }

    public Class19(string string_2)
    {
      this.string_0 = string_2;
      this.struct2_0.ushort_2 = (ushort) 1;
      this.struct2_0.ushort_0 = (ushort) 0;
      this.struct2_0.ushort_1 = (ushort) 0;
    }

    internal Class19(IntPtr intptr_0) => this.method_5(intptr_0);

    internal void method_5(IntPtr intptr_0)
    {
      this.struct2_0 = (Class38.Struct2) Marshal.PtrToStructure(intptr_0, typeof (Class38.Struct2));
      IntPtr ptr1 = new IntPtr(intptr_0.ToInt32() + Marshal.SizeOf((object) this.struct2_0));
      this.string_0 = Marshal.PtrToStringUni(ptr1);
      IntPtr ptr2 = Class15.smethod_0(ptr1.ToInt32() + (this.string_0.Length + 1) * Marshal.SystemDefaultCharSize);
      this.string_1 = this.struct2_0.ushort_1 > (ushort) 0 ? Marshal.PtrToStringUni(ptr2, (int) this.struct2_0.ushort_1) : (string) null;
    }

    internal void method_6(BinaryWriter binaryWriter_0)
    {
      long position1 = binaryWriter_0.BaseStream.Position;
      binaryWriter_0.Write(this.struct2_0.ushort_0);
      binaryWriter_0.Write(this.struct2_0.ushort_1);
      binaryWriter_0.Write(this.struct2_0.ushort_2);
      binaryWriter_0.Write(Encoding.Unicode.GetBytes(this.string_0));
      binaryWriter_0.Write((ushort) 0);
      Class15.smethod_2(binaryWriter_0);
      long position2 = binaryWriter_0.BaseStream.Position;
      if (this.string_1 != null)
        binaryWriter_0.Write(Encoding.Unicode.GetBytes(this.string_1));
      Class15.smethod_5(binaryWriter_0, (binaryWriter_0.BaseStream.Position - position2) / (long) Marshal.SystemDefaultCharSize, position1 + 2L);
      Class15.smethod_5(binaryWriter_0, binaryWriter_0.BaseStream.Position - position1, position1);
    }
  }
}
