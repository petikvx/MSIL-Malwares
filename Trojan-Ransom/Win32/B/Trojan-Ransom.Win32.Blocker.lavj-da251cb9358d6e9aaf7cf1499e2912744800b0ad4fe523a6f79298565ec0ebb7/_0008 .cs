// Decompiled with JetBrains decompiler
// Type:  
// Assembly: AV, Version=2.0.5.0, Culture=neutral, PublicKeyToken=null
// MVID: 56F2F6CB-C947-430A-8E47-6539AD6C5806
// Assembly location: C:\Users\Administrateur\Downloads\Virusshare.00040-msil\Trojan-Ransom.Win32.Blocker.lavj-da251cb9358d6e9aaf7cf1499e2912744800b0ad4fe523a6f79298565ec0ebb7.exe

using System;
using System.ComponentModel;
using System.Drawing;
using System.Drawing.Design;
using System.Windows.Forms;
using System.Windows.Forms.Design;

public sealed class \u0008\u2002 : UITypeEditor
{
  private IWindowsFormsEditorService \u0002;
  private CheckedListBox \u0003;
  private ToolTip \u0005;
  private bool \u0008;

  public override object EditValue(
    ITypeDescriptorContext _param1,
    System.IServiceProvider _param2,
    object _param3)
  {
    if (_param1 != null && _param1.Instance != null && _param2 != null)
    {
      this.\u0002 = (IWindowsFormsEditorService) _param2.GetService(typeof (IWindowsFormsEditorService));
      if (this.\u0002 != null)
      {
        this.\u0003 = new CheckedListBox();
        this.\u0003.BorderStyle = BorderStyle.FixedSingle;
        this.\u0003.CheckOnClick = true;
        this.\u0003.MouseDown += new MouseEventHandler(this.\u0002);
        this.\u0003.MouseMove += new MouseEventHandler(this.\u0003);
        this.\u0005 = new ToolTip();
        this.\u0005.ShowAlways = true;
        foreach (string name in Enum.GetNames(_param1.PropertyDescriptor.PropertyType))
        {
          object obj = Enum.Parse(_param1.PropertyDescriptor.PropertyType, name);
          int num1 = (int) Convert.ChangeType(obj, typeof (int));
          DescriptionAttribute[] customAttributes = (DescriptionAttribute[]) _param1.PropertyDescriptor.PropertyType.GetField(name).GetCustomAttributes(typeof (DescriptionAttribute), false);
          string str = customAttributes.Length > 0 ? customAttributes[0].Description : string.Empty;
          int num2 = (int) Convert.ChangeType(_param3, typeof (int));
          this.\u0003.Items.Add((object) new \u0008\u2002.\u0002(obj.ToString(), num1, str), (num2 & num1) == num1);
        }
        this.\u0002.DropDownControl((Control) this.\u0003);
        int num = 0;
        foreach (\u0008\u2002.\u0002 checkedItem in this.\u0003.CheckedItems)
          num |= checkedItem.\u0002();
        return Enum.ToObject(_param1.PropertyDescriptor.PropertyType, num);
      }
    }
    return _param3;
  }

  public override UITypeEditorEditStyle GetEditStyle(
    ITypeDescriptorContext _param1)
  {
    return UITypeEditorEditStyle.DropDown;
  }

  private void \u0002(object _param1, MouseEventArgs _param2)
  {
    if (this.\u0008 || !this.\u0003.ClientRectangle.Contains(this.\u0003.PointToClient(new Point(_param2.X, _param2.Y))))
      return;
    this.\u0003.LostFocus += new EventHandler(this.\u0002);
    this.\u0008 = true;
  }

  private void \u0003(object _param1, MouseEventArgs _param2)
  {
    int index = this.\u0003.IndexFromPoint(_param2.X, _param2.Y);
    if (index < 0)
      return;
    this.\u0005.SetToolTip((Control) this.\u0003, ((\u0008\u2002.\u0002) this.\u0003.Items[index]).\u0002());
  }

  private void \u0002(object _param1, EventArgs _param2)
  {
    if (this.\u0002 == null)
      return;
    this.\u0002.CloseDropDown();
  }

  internal sealed class \u0002
  {
    private string \u0002;
    private int \u0003;
    private string \u0005;

    public \u0002(string _param1, int _param2, string _param3)
    {
      this.\u0002 = _param1;
      this.\u0003 = _param2;
      this.\u0005 = _param3;
    }

    public int \u0002() => this.\u0003;

    public string \u0002() => this.\u0005;

    public override string ToString() => this.\u0002;
  }
}
