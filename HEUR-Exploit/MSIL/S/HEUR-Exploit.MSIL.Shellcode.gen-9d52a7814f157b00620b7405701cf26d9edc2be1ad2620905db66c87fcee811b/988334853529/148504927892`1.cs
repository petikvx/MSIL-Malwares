// Decompiled with JetBrains decompiler
// Type: 988334853529.148504927892
// Assembly: 341658236064, Version=3.1.2.23007, Culture=neutral, PublicKeyToken=31bf3856ad364e35
// MVID: 307D4BC7-4605-49A1-A696-CC8CC5C1D6BD
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.03\HEUR-Exploit.MSIL.Shellcode.gen-9d52a7814f157b00620b7405701cf26d9edc2be1ad2620905db66c87fcee811b.exe

using \u003650657212766;
using \u003802842917103;
using \u003988334853529;
using Microsoft.Build.Framework;
using System;
using System.Collections.Generic;

namespace \u003988334853529
{
  internal class \u003148504927892<TConflictItem> where TConflictItem : class, IConflictItem
  {
    private ITaskItem[] \u003062356838089;
    private Lazy<Dictionary<string, \u003889142146773>> \u003989284296206;

    public \u003148504927892(ITaskItem[] packageOverrideItems)
    {
      this._packageOverrideItems = packageOverrideItems;
      this._packageOverrides = new Lazy<Dictionary<string, \u003889142146773>>(new Func<Dictionary<string, \u003889142146773>>(this.\u003C\u002Ector\u003Eb__2_0));
    }

    public Dictionary<string, \u003889142146773> \u003059143818278 => this._packageOverrides.Value;

    private Dictionary<string, \u003889142146773> \u003615275566728()
    {
      ITaskItem[] packageOverrideItems = this._packageOverrideItems;
      Dictionary<string, \u003889142146773> dictionary;
      if ((packageOverrideItems != null ? (packageOverrideItems.Length != 0 ? 1 : 0) : 0) != 0)
      {
        dictionary = new Dictionary<string, \u003889142146773>(this._packageOverrideItems.Length, (IEqualityComparer<string>) StringComparer.OrdinalIgnoreCase);
        foreach (ITaskItem packageOverrideItem in this._packageOverrideItems)
        {
          \u003889142146773 obj1 = \u003889142146773.\u003069842552243(packageOverrideItem);
          \u003889142146773 obj2;
          if (dictionary.TryGetValue(obj1.\u003407937272315, out obj2))
            \u003148504927892<TConflictItem>.MergePackageOverrides(obj1, obj2);
          else
            dictionary[obj1.\u003407937272315] = obj1;
        }
      }
      else
        dictionary = (Dictionary<string, \u003889142146773>) null;
      return dictionary;
    }

    private static void \u003785619269221(\u003889142146773 _param0, \u003889142146773 _param1)
    {
      foreach (KeyValuePair<string, Version> keyValuePair in _param0.\u003543149747249)
      {
        Version version;
        if (_param1.\u003543149747249.TryGetValue(keyValuePair.Key, out version))
        {
          if (version < keyValuePair.Value)
            _param1.\u003543149747249[keyValuePair.Key] = keyValuePair.Value;
        }
        else
          _param1.\u003543149747249[keyValuePair.Key] = keyValuePair.Value;
      }
    }

    public TConflictItem \u003527029542645(TConflictItem _param1, TConflictItem _param2)
    {
      if (this.\u003059143818278 != null && _param1.PackageId != null && _param2.PackageId != null)
      {
        \u003889142146773 obj;
        Version version;
        if (this.\u003059143818278.TryGetValue(_param1.PackageId, out obj) && obj.\u003543149747249.TryGetValue(_param2.PackageId, out version) && _param2.PackageVersion != (Version) null && _param2.PackageVersion <= version)
          return _param1;
        if (this.\u003059143818278.TryGetValue(_param2.PackageId, out obj) && obj.\u003543149747249.TryGetValue(_param1.PackageId, out version) && _param1.PackageVersion != (Version) null && _param1.PackageVersion <= version)
          return _param2;
      }
      return default (TConflictItem);
    }
  }
}
