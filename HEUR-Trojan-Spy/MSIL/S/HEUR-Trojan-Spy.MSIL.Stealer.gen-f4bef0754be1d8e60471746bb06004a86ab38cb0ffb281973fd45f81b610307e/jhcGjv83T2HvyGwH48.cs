// Decompiled with JetBrains decompiler
// Type: AvkJoyfOeh7dTxCa0j.jhcGjv83T2HvyGwH48
// Assembly: CLAIMVALUESATTRIBUT, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: 02CC8C23-A5FB-4ECC-B8C2-95BA2C4203FD
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.03\HEUR-Trojan-Spy.MSIL.Stealer.gen-f4bef0754be1d8e60471746bb06004a86ab38cb0ffb281973fd45f81b610307e.exe

using System;
using System.Collections.Generic;
using System.Globalization;
using System.IO;
using System.Runtime.CompilerServices;
using System.Runtime.InteropServices;
using System.Text.RegularExpressions;
using System.Threading;
using System.Xml.XPath;

namespace AvkJoyfOeh7dTxCa0j
{
  public class jhcGjv83T2HvyGwH48 : vNYCOAMjxXTsFVQ6Fw
  {
    private static string LNxvRTBB0l;
    private static readonly Uri KBQvUoUFhN;
    private static readonly TimeSpan B09vBO6dHZ;
    private static readonly Dictionary<int, Dictionary<int, jhcGjv83T2HvyGwH48.OAK9kY5D30mLpnCyGd>> Sajv88dNN4;
    private static readonly Regex OnLvO0rXWk;
    public static readonly jhcGjv83T2HvyGwH48 flGvvWdpLB;
    private static jhcGjv83T2HvyGwH48 jDmAKw32TxjHC2MTETY;

    private jhcGjv83T2HvyGwH48()
    {
      YKUvaI4TsnyoXODJ2q.GJnKaSGoKIybi();
      // ISSUE: explicit constructor call
      base.\u002Ector();
    }

    private static string TsrOollrI7(int _param0)
    {
      if (_param0 == -1)
        return "prices-all.xml";
label_4:
      bool flag = _param0 == -2;
      int num1 = 0;
      if (!jhcGjv83T2HvyGwH48.jsBPAa36KTg9xvlk9Pu())
        goto label_5;
label_1:
      switch (num1)
      {
        case 1:
          goto label_4;
        default:
          return flag ? "prices-chs.xml" : string.Format("prices-{0}.xml", (object) _param0);
      }
label_5:
      int num2;
      num1 = num2;
      goto label_1;
    }

    private static Uri GKHOLTipW7(int _param0) => new Uri(jhcGjv83T2HvyGwH48.KBQvUoUFhN, jhcGjv83T2HvyGwH48.TsrOollrI7(_param0));

    private static int VowOMIeYXf(string _param0)
    {
      if (_param0 == "all")
        return -1;
label_5:
      bool flag = jhcGjv83T2HvyGwH48.euUPmY3Ej1pYmdhSFrR((object) _param0, (object) "chs");
      int num1 = 1;
      if (!jhcGjv83T2HvyGwH48.jsBPAa36KTg9xvlk9Pu())
        goto label_6;
label_1:
      switch (num1)
      {
        case 1:
          return !flag ? int.Parse(_param0, (IFormatProvider) CultureInfo.InvariantCulture) : -2;
        default:
          goto label_5;
      }
label_6:
      int num2;
      num1 = num2;
      goto label_1;
    }

    private static Dictionary<int, jhcGjv83T2HvyGwH48.OAK9kY5D30mLpnCyGd> M5tOuiTAJC(
      string _param0)
    {
      Dictionary<int, jhcGjv83T2HvyGwH48.OAK9kY5D30mLpnCyGd> dictionary = new Dictionary<int, jhcGjv83T2HvyGwH48.OAK9kY5D30mLpnCyGd>();
      using (FileStream fileStream = File.OpenRead(_param0))
      {
        XPathNodeIterator xpathNodeIterator = new XPathDocument((Stream) fileStream).CreateNavigator().Select("/eveapi/result/rowset[@name = 'prices']/row");
        while (xpathNodeIterator.MoveNext())
        {
          int key = int.Parse(xpathNodeIterator.Current.SelectSingleNode("@typeID").Value, (IFormatProvider) CultureInfo.InvariantCulture);
          dictionary[key] = new jhcGjv83T2HvyGwH48.OAK9kY5D30mLpnCyGd()
          {
            FLvvmIXf5U = Decimal.Parse(xpathNodeIterator.Current.SelectSingleNode("@avg").Value, (IFormatProvider) CultureInfo.InvariantCulture),
            yervPUavqq = Decimal.Parse(xpathNodeIterator.Current.SelectSingleNode("@median").Value, (IFormatProvider) CultureInfo.InvariantCulture),
            NIMvjwkpKj = long.Parse(xpathNodeIterator.Current.SelectSingleNode("@vol").Value, (IFormatProvider) CultureInfo.InvariantCulture),
            LWXvVyXGuU = Decimal.Parse(xpathNodeIterator.Current.SelectSingleNode("@lo").Value, (IFormatProvider) CultureInfo.InvariantCulture),
            W50v4H3WTC = Decimal.Parse(xpathNodeIterator.Current.SelectSingleNode("@hi").Value, (IFormatProvider) CultureInfo.InvariantCulture),
            Unov5dvhUL = DateTime.Parse(xpathNodeIterator.Current.SelectSingleNode("@first").Value, (IFormatProvider) CultureInfo.InvariantCulture),
            pJNva0BN1P = DateTime.Parse(xpathNodeIterator.Current.SelectSingleNode("@last").Value, (IFormatProvider) CultureInfo.InvariantCulture)
          };
        }
      }
      return dictionary;
    }

    private void CnYO2ocjuK(int _param1, int _param2)
    {
      // ISSUE: reference to a compiler-generated field
      EventHandler<pQaZbNnbJYaKgOcMw4> vxVvhg5x1y = this.VXVvhg5x1y;
      if (vxVvhg5x1y == null)
        return;
      vxVvhg5x1y((object) this, new pQaZbNnbJYaKgOcMw4(_param1, _param2));
    }

    private HV3ZyQdJE0Z1pMphII PKyOIQR1fq(int _param1)
    {
      // ISSUE: object of a compiler-generated type is created
      // ISSUE: variable of a compiler-generated type
      jhcGjv83T2HvyGwH48.aeeacrkZQV45GgwfDQ aeeacrkZqV45GgwfDq = new jhcGjv83T2HvyGwH48.aeeacrkZQV45GgwfDQ();
      // ISSUE: reference to a compiler-generated field
      aeeacrkZqV45GgwfDq.oCLv3ZCGYW = _param1;
      int num1 = 1;
      if (jhcGjv83T2HvyGwH48.QC34vi358uoOil7VBbl() != null)
        goto label_6;
label_1:
      HV3ZyQdJE0Z1pMphII hv3ZyQdJe0Z1pMphIi;
      while (true)
      {
        switch (num1)
        {
          case 1:
            // ISSUE: reference to a compiler-generated field
            string str1 = Path.Combine(jhcGjv83T2HvyGwH48.LNxvRTBB0l, jhcGjv83T2HvyGwH48.TsrOollrI7(aeeacrkZqV45GgwfDq.oCLv3ZCGYW));
            // ISSUE: reference to a compiler-generated field
            string str2 = jhcGjv83T2HvyGwH48.qYhfx43fweNXMkYRS8W(aeeacrkZqV45GgwfDq.oCLv3ZCGYW).ToString();
            Directory.CreateDirectory(jhcGjv83T2HvyGwH48.LNxvRTBB0l);
            if (vUVYekerQS9BdcWk3X.uy3OjsK8GW(str1, jhcGjv83T2HvyGwH48.B09vBO6dHZ).DDo8fj0fBb() != 0)
              goto label_3;
label_2:
            // ISSUE: reference to a compiler-generated method
            hv3ZyQdJe0Z1pMphIi = vUVYekerQS9BdcWk3X.lvrOC0VCMn(str2, str1, jhcGjv83T2HvyGwH48.B09vBO6dHZ, new S68g4BO8yPnc05dptk(aeeacrkZqV45GgwfDq.VTdvNCbQ2a));
            num1 = !jhcGjv83T2HvyGwH48.jsBPAa36KTg9xvlk9Pu() ? 0 : 0;
            continue;
label_3:
            this.CnYO2ocjuK(0, 1);
            goto label_2;
          default:
            goto label_5;
        }
      }
label_5:
      return hv3ZyQdJe0Z1pMphIi;
label_6:
      int num2;
      num1 = num2;
      goto label_1;
    }

    private Decimal DngOKOO8Jg(int _param1, int _param2, cNZyRhDVpibjblQ5ym _param3)
    {
      Decimal num;
      if (!this.PctOzZwXdu((IEnumerable<int>) new int[1]
      {
        _param1
      }, _param2, _param3).TryGetValue(_param1, out num))
        throw new lTxLhIBUYkHsj4MWY2((t1mJgo6VUVxNapPv7y) 0, "No price for typeID " + _param1.ToString());
      return num;
    }

    private Dictionary<int, Decimal> PctOzZwXdu(
      IEnumerable<int> _param1,
      int _param2,
      cNZyRhDVpibjblQ5ym _param3)
    {
      Dictionary<int, Decimal> dictionary1 = new Dictionary<int, Decimal>();
      HV3ZyQdJE0Z1pMphII hv3ZyQdJe0Z1pMphIi = this.PKyOIQR1fq(_param2);
      lock (jhcGjv83T2HvyGwH48.Sajv88dNN4)
      {
        Dictionary<int, jhcGjv83T2HvyGwH48.OAK9kY5D30mLpnCyGd> dictionary2;
        if (!jhcGjv83T2HvyGwH48.Sajv88dNN4.TryGetValue(_param2, out dictionary2))
          throw new lTxLhIBUYkHsj4MWY2((t1mJgo6VUVxNapPv7y) 1, "No prices available for region " + _param2.ToString(), hv3ZyQdJe0Z1pMphIi.Rnx8G1a8YI());
        foreach (int key in _param1)
        {
          jhcGjv83T2HvyGwH48.OAK9kY5D30mLpnCyGd k9kY5D30mLpnCyGd;
          if (dictionary2.TryGetValue(key, out k9kY5D30mLpnCyGd))
          {
            switch (_param3)
            {
              case cNZyRhDVpibjblQ5ym.Mean:
                dictionary1[key] = k9kY5D30mLpnCyGd.FLvvmIXf5U;
                break;
              case cNZyRhDVpibjblQ5ym.Median:
                dictionary1[key] = k9kY5D30mLpnCyGd.yervPUavqq;
                break;
              case cNZyRhDVpibjblQ5ym.High:
                dictionary1[key] = k9kY5D30mLpnCyGd.W50v4H3WTC;
                break;
              case cNZyRhDVpibjblQ5ym.Low:
                dictionary1[key] = k9kY5D30mLpnCyGd.LWXvVyXGuU;
                break;
              default:
                throw new ApplicationException("Unknown stat " + _param3.ToString());
            }
          }
        }
      }
      return dictionary1;
    }

    [CompilerGenerated]
    [SpecialName]
    public void qBxhA9UFju(EventHandler<pQaZbNnbJYaKgOcMw4> _param1)
    {
      // ISSUE: reference to a compiler-generated field
      EventHandler<pQaZbNnbJYaKgOcMw4> eventHandler = this.VXVvhg5x1y;
      EventHandler<pQaZbNnbJYaKgOcMw4> comparand;
      do
      {
        comparand = eventHandler;
        // ISSUE: reference to a compiler-generated field
        eventHandler = Interlocked.CompareExchange<EventHandler<pQaZbNnbJYaKgOcMw4>>(ref this.VXVvhg5x1y, comparand + _param1, comparand);
      }
      while (eventHandler != comparand);
    }

    [CompilerGenerated]
    [SpecialName]
    public void F4chYNEFls(EventHandler<pQaZbNnbJYaKgOcMw4> _param1)
    {
      // ISSUE: reference to a compiler-generated field
      EventHandler<pQaZbNnbJYaKgOcMw4> eventHandler = this.VXVvhg5x1y;
      EventHandler<pQaZbNnbJYaKgOcMw4> comparand;
      do
      {
        comparand = eventHandler;
        // ISSUE: reference to a compiler-generated field
        eventHandler = Interlocked.CompareExchange<EventHandler<pQaZbNnbJYaKgOcMw4>>(ref this.VXVvhg5x1y, comparand - _param1, comparand);
      }
      while (eventHandler != comparand);
    }

    public void B1phXa5hVn()
    {
      if (!jhcGjv83T2HvyGwH48.Hqb1Pk3D3XZvNti82K5((object) jhcGjv83T2HvyGwH48.LNxvRTBB0l))
        return;
      lock (jhcGjv83T2HvyGwH48.Sajv88dNN4)
      {
        string[] files = Directory.GetFiles(jhcGjv83T2HvyGwH48.LNxvRTBB0l);
        int index = 0;
        while (index < files.Length)
        {
          string path = files[index];
          Match match = jhcGjv83T2HvyGwH48.OnLvO0rXWk.Match(Path.GetFileName(path));
          if (match.Success)
            goto label_7;
          else
            goto label_6;
label_3:
          int num1;
          switch (num1)
          {
            case 1:
              continue;
            default:
              try
              {
                int key = jhcGjv83T2HvyGwH48.CmwVVt3GmRtsMwOpYvs((object) match.Groups[1].Value);
                jhcGjv83T2HvyGwH48.Sajv88dNN4[key] = jhcGjv83T2HvyGwH48.M5tOuiTAJC(path);
              }
              catch (Exception ex)
              {
              }
              break;
          }
label_6:
          ++index;
          num1 = jhcGjv83T2HvyGwH48.jsBPAa36KTg9xvlk9Pu() ? 1 : 0;
          goto label_3;
label_7:
          num1 = 0;
          if (!jhcGjv83T2HvyGwH48.jsBPAa36KTg9xvlk9Pu())
          {
            int num2;
            num1 = num2;
            goto label_3;
          }
          else
            goto label_3;
        }
      }
    }

    public void bTLhgxalpo()
    {
    }

    public Decimal LHJh15mAFH(int _param1, cNZyRhDVpibjblQ5ym _param2) => this.L31hZOHymg(_param1, -1, _param2);

    public Decimal S3FhqtRIs2(int _param1, cNZyRhDVpibjblQ5ym _param2) => this.L31hZOHymg(_param1, -2, _param2);

    public Decimal L31hZOHymg(int _param1, int _param2, cNZyRhDVpibjblQ5ym _param3) => this.DngOKOO8Jg(_param1, _param2, _param3);

    public Dictionary<int, Decimal> uG2hHYqxvS(
      IEnumerable<int> _param1,
      cNZyRhDVpibjblQ5ym _param2)
    {
      return this.rIhhcUbssC(_param1, -1, _param2);
    }

    public Dictionary<int, Decimal> IHrhxyJMhP(
      IEnumerable<int> _param1,
      cNZyRhDVpibjblQ5ym _param2)
    {
      return this.rIhhcUbssC(_param1, -2, _param2);
    }

    public Dictionary<int, Decimal> rIhhcUbssC(
      IEnumerable<int> _param1,
      int _param2,
      cNZyRhDVpibjblQ5ym _param3)
    {
      return this.PctOzZwXdu(_param1, _param2, _param3);
    }

    static jhcGjv83T2HvyGwH48()
    {
      YKUvaI4TsnyoXODJ2q.GJnKaSGoKIybi();
      jhcGjv83T2HvyGwH48.LNxvRTBB0l = Path.Combine(vUVYekerQS9BdcWk3X.e5iON7x0UC(), "zofu");
      jhcGjv83T2HvyGwH48.KBQvUoUFhN = new Uri("http://eve.no-ip.de/prices/30d/");
      jhcGjv83T2HvyGwH48.B09vBO6dHZ = TimeSpan.FromHours(4.0);
      jhcGjv83T2HvyGwH48.Sajv88dNN4 = new Dictionary<int, Dictionary<int, jhcGjv83T2HvyGwH48.OAK9kY5D30mLpnCyGd>>();
      jhcGjv83T2HvyGwH48.OnLvO0rXWk = new Regex("^prices-(\\d+|all|chs)\\.xml$");
      jhcGjv83T2HvyGwH48.flGvvWdpLB = new jhcGjv83T2HvyGwH48();
      int num1 = 0;
      if (false)
        goto label_3;
label_1:
      switch (num1)
      {
        case 0:
          return;
        default:
          return;
      }
label_3:
      int num2;
      num1 = num2;
      goto label_1;
    }

    internal static bool jsBPAa36KTg9xvlk9Pu() => jhcGjv83T2HvyGwH48.jDmAKw32TxjHC2MTETY == null;

    internal static jhcGjv83T2HvyGwH48 QC34vi358uoOil7VBbl() => jhcGjv83T2HvyGwH48.jDmAKw32TxjHC2MTETY;

    internal static bool euUPmY3Ej1pYmdhSFrR([In] object obj0, [In] object obj1) => (string) obj0 == (string) obj1;

    internal static object qYhfx43fweNXMkYRS8W(int _param0) => (object) jhcGjv83T2HvyGwH48.GKHOLTipW7(_param0);

    internal static bool Hqb1Pk3D3XZvNti82K5([In] object obj0) => Directory.Exists((string) obj0);

    internal static int CmwVVt3GmRtsMwOpYvs([In] object obj0) => jhcGjv83T2HvyGwH48.VowOMIeYXf((string) obj0);

    private class OAK9kY5D30mLpnCyGd
    {
      public Decimal FLvvmIXf5U;
      public Decimal yervPUavqq;
      public long NIMvjwkpKj;
      public Decimal LWXvVyXGuU;
      public Decimal W50v4H3WTC;
      public DateTime Unov5dvhUL;
      public DateTime pJNva0BN1P;
      internal static jhcGjv83T2HvyGwH48.OAK9kY5D30mLpnCyGd AIGNxGC9Rj4cFX8CZO7;

      public OAK9kY5D30mLpnCyGd()
      {
        YKUvaI4TsnyoXODJ2q.GJnKaSGoKIybi();
        // ISSUE: explicit constructor call
        base.\u002Ector();
      }

      internal static bool MrNTYGCN1tAIPVOD4sl() => jhcGjv83T2HvyGwH48.OAK9kY5D30mLpnCyGd.AIGNxGC9Rj4cFX8CZO7 == null;

      internal static jhcGjv83T2HvyGwH48.OAK9kY5D30mLpnCyGd APN5HZCevSgIE7far2Q() => jhcGjv83T2HvyGwH48.OAK9kY5D30mLpnCyGd.AIGNxGC9Rj4cFX8CZO7;
    }
  }
}
