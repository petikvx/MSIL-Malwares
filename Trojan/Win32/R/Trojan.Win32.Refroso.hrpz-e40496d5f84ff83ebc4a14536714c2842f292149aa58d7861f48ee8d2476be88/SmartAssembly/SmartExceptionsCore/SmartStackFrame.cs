// Decompiled with JetBrains decompiler
// Type: SmartAssembly.SmartExceptionsCore.SmartStackFrame
// Assembly: C, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: F25E1EAB-EB04-4ECD-A70E-0143E63DFF03
// Assembly location: C:\Users\Administrateur\Desktop\Virusshare-00005-msil\Trojan.Win32.Refroso.hrpz-e40496d5f84ff83ebc4a14536714c2842f292149aa58d7861f48ee8d2476be88.exe

using System;
using System.Runtime.InteropServices;
using System.Runtime.Serialization;

namespace SmartAssembly.SmartExceptionsCore
{
  [Serializable]
  public sealed class SmartStackFrame : ISerializable
  {
    public readonly int MethodID;
    public readonly object[] Objects;
    public readonly int ILOffset;
    public readonly int ExceptionStackDepth;

    public virtual void GetObjectData([In] SerializationInfo obj0, [In] StreamingContext obj1)
    {
      obj0.AddValue("UnhandledException.MethodID", (object) this.MethodID, typeof (int));
      obj0.AddValue("UnhandledException.ILOffset", (object) this.ILOffset, typeof (int));
      // ISSUE: type reference
      obj0.AddValue("UnhandledException.ExceptionStackDepth", (object) this.ExceptionStackDepth, \u0088\u0004.\u0003\u0004(__typeref (int)));
      int num1;
      int num2;
      int num3;
      if (this.Objects != null)
      {
        int length = this.Objects.Length;
        if (true)
        {
          if (true)
          {
            num1 = length;
          }
          else
          {
            num2 = length;
            goto label_17;
          }
        }
        else
        {
          num3 = length;
          goto label_15;
        }
      }
      else
        num1 = 0;
      if (true)
        goto label_18;
label_6:
      int num4;
      // ISSUE: type reference
      \u000F\u0005.\u007E\u001B\u0006((object) obj0, "UnhandledException.Objects.Length", (object) num4, \u0088\u0004.\u0003\u0004(__typeref (int)));
      int index;
      if (true)
      {
        index = 0;
        goto label_16;
      }
      else
        goto label_16;
label_18:
      num4 = num1;
      goto label_6;
label_15:
      index = num3 + 1;
label_16:
      num2 = index;
label_17:
      int num5 = num4;
      if (num2 >= num5)
        return;
      string str1 = \u0094\u0003.\u0082\u0002("UnhandledException.Objects[{0}]", (object) index);
      if (true)
        goto label_20;
label_8:
      string str2;
      try
      {
        if (this.Objects[index] == null)
        {
          // ISSUE: type reference
          \u000F\u0005.\u007E\u001B\u0006((object) obj0, str2, (object) null, \u0088\u0004.\u0003\u0004(__typeref (object)));
        }
        else if (true)
        {
          // ISSUE: type reference
          \u000F\u0005.\u007E\u001B\u0006((object) obj0, str2, (object) \u0097\u0003.\u0086\u0002((object) \u007F\u0003.\u007E\u009C(this.Objects[index]), (object) " - ", this.Objects[index]), \u0088\u0004.\u0003\u0004(__typeref (string)));
        }
      }
      catch (Exception ex)
      {
      }
      num3 = index;
      goto label_15;
label_20:
      str2 = str1;
      goto label_8;
    }

    internal SmartStackFrame([In] SerializationInfo obj0, [In] StreamingContext obj1)
    {
      this.MethodID = \u0091\u0003.\u007E\u001D\u0006((object) obj0, "UnhandledException.MethodID");
      this.ILOffset = \u0091\u0003.\u007E\u001D\u0006((object) obj0, "UnhandledException.ILOffset");
      this.ExceptionStackDepth = \u0091\u0003.\u007E\u001D\u0006((object) obj0, "UnhandledException.ExceptionStackDepth");
      int length = \u0091\u0003.\u007E\u001D\u0006((object) obj0, "UnhandledException.Objects.Length");
      this.Objects = new object[length];
      for (int index = 0; index < length; ++index)
      {
        try
        {
          // ISSUE: type reference
          this.Objects[index] = \u0010\u0005.\u007E\u001C\u0006((object) obj0, \u0094\u0003.\u0082\u0002("UnhandledException.Objects[{0}]", (object) index), \u0088\u0004.\u0003\u0004(__typeref (string)));
        }
        catch (Exception ex)
        {
          this.Objects[index] = (object) "Could not deserialize the obect";
        }
      }
    }

    internal SmartStackFrame([In] int obj0, [In] object[] obj1, [In] int obj2, [In] int obj3)
    {
      this.MethodID = obj0;
      this.ExceptionStackDepth = obj3;
      this.ILOffset = obj2;
      this.Objects = obj1;
    }
  }
}
