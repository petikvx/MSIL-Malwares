// Decompiled with JetBrains decompiler
// Type: atGii7q.A6vuDF1
// Assembly: jmZGgwW, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
// MVID: 3D70FD3D-7EEC-4701-9107-04233FCFD67F
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.03\HEUR-Backdoor.MSIL.DcRat.gen-29c7b524ec1c67f80e1ce8d5b2ed484b6a4b6d119ff128d65734114fe0fe501b.exe

using Microsoft;
using Microsoft.ServiceHub.Utility;
using StreamJsonRpc;
using System;

namespace atGii7q
{
  internal class A6vuDF1 : IDisposable
  {
    private readonly JsonRpc \u0036oNw174;
    private readonly DevHubTraceSource JPOdnEm;
    private readonly string OUTGzV9;
    private bool PiJ2N8R;

    private A6vuDF1(JsonRpc rpc, string source, DevHubTraceSource logger)
    {
      Requires.NotNull<JsonRpc>(rpc, nameof (rpc));
      Requires.NotNull<DevHubTraceSource>(logger, nameof (logger));
      Requires.NotNullOrEmpty(source, nameof (source));
      this.\u0036oNw174 = rpc;
      this.JPOdnEm = logger;
      this.OUTGzV9 = source;
      this.\u0036oNw174.Disconnected += new EventHandler<JsonRpcDisconnectedEventArgs>(this.AaDMNyv);
    }

    public static JsonRpc \u0037sBfgUL(
      JsonRpc rS6BagQ,
      string _param1,
      DevHubTraceSource JerfyCU)
    {
      A6vuDF1 a6vuDf1 = new A6vuDF1(rS6BagQ, _param1, JerfyCU);
      return rS6BagQ;
    }

    public void SsOMTJK()
    {
      this.Dispose(true);
      GC.SuppressFinalize((object) this);
    }

    protected virtual void Dispose(bool disposing)
    {
      if (this.PiJ2N8R)
        return;
      if (disposing)
        this.\u0036oNw174.Disconnected -= new EventHandler<JsonRpcDisconnectedEventArgs>(this.AaDMNyv);
      this.PiJ2N8R = true;
    }

    private void oWkTSIG(JsonRpcDisconnectedEventArgs _param1)
    {
      try
      {
        switch ((int) _param1.Reason)
        {
          case 0:
            this.JPOdnEm.TraceError("Disconnected {0} stream error: {1}: {2} at {3}", new object[4]
            {
              (object) this.OUTGzV9,
              (object) (_param1.Exception?.GetType().Name ?? string.Empty),
              (object) _param1.Description,
              (object) _param1.Exception?.StackTrace
            });
            break;
          case 1:
            this.JPOdnEm.TraceError("Disconnected {0} JSON RPC parse error: {1}. JSON: '{2}'", new object[3]
            {
              (object) this.OUTGzV9,
              (object) _param1.Description,
              (object) _param1.LastMessage
            });
            break;
          case 2:
            this.JPOdnEm.TraceInformation("{0} JSON RPC has been disposed", new object[1]
            {
              (object) this.OUTGzV9
            });
            break;
          default:
            this.JPOdnEm.TraceError("Disconnected {0} {1} error: {2}: {3} at {4}", new object[5]
            {
              (object) this.OUTGzV9,
              (object) _param1.Reason,
              (object) (_param1.Exception?.GetType().Name ?? string.Empty),
              (object) _param1.Description,
              (object) _param1.Exception?.StackTrace
            });
            break;
        }
      }
      catch (ObjectDisposedException ex)
      {
        this.SsOMTJK();
      }
    }

    private void AaDMNyv(object g54Qsd0, JsonRpcDisconnectedEventArgs T0nxcFr)
    {
      this.oWkTSIG(T0nxcFr);
      this.SsOMTJK();
    }
  }
}
