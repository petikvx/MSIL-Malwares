// Decompiled with JetBrains decompiler
// Type: MiniGames_Team9.Puzzle
// Assembly: IdentityRefere, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: 9F5D51E6-71BD-43F4-AA35-8F19B20FF789
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.07\UDS-Trojan.Win32.GenericML.xnet-3cda0e34cd6f8adaabeeeb6e8bd08d80ba8d758bb3218c8058cd88353d253b61.exe

using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Diagnostics;
using System.Drawing;
using System.Windows.Forms;

namespace MiniGames_Team9
{
  public class Puzzle : Form
  {
    private int inNullSliceIndex;
    private int inmoves = 0;
    private List<Bitmap> lstOriginalPictureList = new List<Bitmap>();
    private Stopwatch timer = new Stopwatch();
    private IContainer components = (IContainer) null;
    private Button btnPause;
    private PictureBox pbx1;
    private PictureBox pbx2;
    private PictureBox pbx3;
    private PictureBox pbx4;
    private PictureBox pbx5;
    private PictureBox pbx6;
    private PictureBox pbx7;
    private Label lblTimeElapsed;
    private Label lblMovesMade;
    private PictureBox pbx8;
    private GroupBox gbOriginal;
    private PictureBox pbx9;
    private Timer tmrTimeElapse;
    private Button btnShuffle;
    private GroupBox gbPuzzleBox;

    public Puzzle()
    {
      this.InitializeComponent();
      this.lblMovesMade.Text += this.inmoves.ToString();
      this.lblTimeElapsed.Text = "00:00:00";
    }

    private void Puzzle_Load(object sender, EventArgs e) => this.Shuffle();

    private void btnShuffle_Click(object sender, EventArgs e)
    {
      DialogResult dialogResult = DialogResult.None;
      if (this.lblTimeElapsed.Text != "00:00:00")
        dialogResult = MessageBox.Show("Are You Sure To RESTART ?", "Rabbit Puzzle", MessageBoxButtons.YesNo, MessageBoxIcon.Question);
      if (dialogResult != DialogResult.Yes && !(this.lblTimeElapsed.Text == "00:00:00"))
        return;
      this.Shuffle();
      this.timer.Reset();
      this.lblTimeElapsed.Text = "00:00:00";
      this.inmoves = 0;
      this.lblMovesMade.Text = "Moves Made : 0";
    }

    private void btnPause_Click(object sender, EventArgs e)
    {
      if (this.btnPause.Text == "Pause")
      {
        this.timer.Stop();
        this.gbPuzzleBox.Visible = false;
        this.btnPause.Text = "Resume";
      }
      else
      {
        this.timer.Start();
        this.gbPuzzleBox.Visible = true;
        this.btnPause.Text = "Pause";
      }
    }

    private void btnQuit_Click(object sender, EventArgs e)
    {
    }

    private void SwitchPictureBox(object sender, EventArgs e)
    {
      if (this.lblTimeElapsed.Text == "00:00:00")
        this.timer.Start();
      int index = this.gbPuzzleBox.Controls.IndexOf(sender as Control);
      if (this.inNullSliceIndex == index)
        return;
      if (new List<int>((IEnumerable<int>) new int[4]
      {
        index % 3 == 0 ? -1 : index - 1,
        index - 3,
        index % 3 == 2 ? -1 : index + 1,
        index + 3
      }).Contains(this.inNullSliceIndex))
      {
        ((PictureBox) this.gbPuzzleBox.Controls[this.inNullSliceIndex]).Image = ((PictureBox) this.gbPuzzleBox.Controls[index]).Image;
        ((PictureBox) this.gbPuzzleBox.Controls[index]).Image = (Image) this.lstOriginalPictureList[9];
        this.inNullSliceIndex = index;
        this.lblMovesMade.Text = "Moves Made : " + (++this.inmoves).ToString();
        if (this.CheckWin())
        {
          this.timer.Stop();
          (this.gbPuzzleBox.Controls[8] as PictureBox).Image = (Image) this.lstOriginalPictureList[8];
          int num = (int) MessageBox.Show("Congratulations...\nYour Rabbit Is Happy\nTime Elapsed : " + this.timer.Elapsed.ToString().Remove(8) + "\nTotal Moves Made : " + this.inmoves.ToString(), "Rabbit Puzzle");
          this.inmoves = 0;
          this.lblMovesMade.Text = "Moves Made : 0";
          this.lblTimeElapsed.Text = "00:00:00";
          this.timer.Reset();
          this.Shuffle();
        }
      }
    }

    private void Shuffle()
    {
      do
      {
        List<int> intList = new List<int>((IEnumerable<int>) new int[9]
        {
          0,
          1,
          2,
          3,
          4,
          5,
          6,
          7,
          9
        });
        Random random = new Random();
        for (int index1 = 0; index1 < 9; ++index1)
        {
          int index2;
          intList.Remove(index2 = intList[random.Next(0, intList.Count)]);
          ((PictureBox) this.gbPuzzleBox.Controls[index1]).Image = (Image) this.lstOriginalPictureList[index2];
          if (index2 == 9)
            this.inNullSliceIndex = index1;
        }
      }
      while (this.CheckWin());
    }

    private void UpdateTimeElapsed(object sender, EventArgs e)
    {
      if (this.timer.Elapsed.ToString() != "00:00:00")
        this.lblTimeElapsed.Text = this.timer.Elapsed.ToString().Remove(8);
      TimeSpan elapsed = this.timer.Elapsed;
      if (elapsed.ToString() == "00:00:00")
        this.btnPause.Enabled = false;
      else
        this.btnPause.Enabled = true;
      elapsed = this.timer.Elapsed;
      if (!(elapsed.Minutes.ToString() == "1"))
        return;
      this.timer.Reset();
      this.lblMovesMade.Text = "Moves Made : 0";
      this.lblTimeElapsed.Text = "00:00:00";
      this.inmoves = 0;
      this.btnPause.Enabled = false;
      int num = (int) MessageBox.Show("Time Is Up\nTry Again", "Rabbit Puzzle");
      this.Shuffle();
    }

    private void AskPermissionBeforeQuit(object sender, FormClosingEventArgs e) => MessageBox.Show("Are You Sure To Quit ?", "Rabbit Puzzle", MessageBoxButtons.YesNo, MessageBoxIcon.Question);

    private bool CheckWin()
    {
      int index = 0;
      while (index < 8 && (this.gbPuzzleBox.Controls[index] as PictureBox).Image == this.lstOriginalPictureList[index])
        ++index;
      return index == 8;
    }

    protected override void Dispose(bool disposing)
    {
      if (disposing && this.components != null)
        this.components.Dispose();
      base.Dispose(disposing);
    }

    private void InitializeComponent()
    {
      this.components = (IContainer) new Container();
      this.btnPause = new Button();
      this.lblTimeElapsed = new Label();
      this.lblMovesMade = new Label();
      this.tmrTimeElapse = new Timer(this.components);
      this.btnShuffle = new Button();
      this.gbPuzzleBox = new GroupBox();
      this.gbOriginal = new GroupBox();
      this.pbx1 = new PictureBox();
      this.pbx2 = new PictureBox();
      this.pbx3 = new PictureBox();
      this.pbx4 = new PictureBox();
      this.pbx5 = new PictureBox();
      this.pbx6 = new PictureBox();
      this.pbx7 = new PictureBox();
      this.pbx8 = new PictureBox();
      this.pbx9 = new PictureBox();
      this.gbPuzzleBox.SuspendLayout();
      ((ISupportInitialize) this.pbx1).BeginInit();
      ((ISupportInitialize) this.pbx2).BeginInit();
      ((ISupportInitialize) this.pbx3).BeginInit();
      ((ISupportInitialize) this.pbx4).BeginInit();
      ((ISupportInitialize) this.pbx5).BeginInit();
      ((ISupportInitialize) this.pbx6).BeginInit();
      ((ISupportInitialize) this.pbx7).BeginInit();
      ((ISupportInitialize) this.pbx8).BeginInit();
      ((ISupportInitialize) this.pbx9).BeginInit();
      this.SuspendLayout();
      this.btnPause.Enabled = false;
      this.btnPause.Location = new Point(734, 426);
      this.btnPause.Name = "btnPause";
      this.btnPause.Size = new Size(86, 42);
      this.btnPause.TabIndex = 11;
      this.btnPause.Text = "Pause";
      this.btnPause.UseVisualStyleBackColor = true;
      this.btnPause.Click += new EventHandler(this.btnPause_Click);
      this.lblTimeElapsed.AutoSize = true;
      this.lblTimeElapsed.Font = new Font("Impact", 48f, FontStyle.Regular, GraphicsUnit.Point, (byte) 0);
      this.lblTimeElapsed.Location = new Point(591, 317);
      this.lblTimeElapsed.Name = "lblTimeElapsed";
      this.lblTimeElapsed.Size = new Size(264, 80);
      this.lblTimeElapsed.TabIndex = 10;
      this.lblTimeElapsed.Text = "00:00:00";
      this.lblMovesMade.AutoSize = true;
      this.lblMovesMade.Font = new Font("Arial", 12f, FontStyle.Bold, GraphicsUnit.Point, (byte) 0);
      this.lblMovesMade.ForeColor = SystemColors.Highlight;
      this.lblMovesMade.Location = new Point(75, 465);
      this.lblMovesMade.Name = "lblMovesMade";
      this.lblMovesMade.Size = new Size(118, 19);
      this.lblMovesMade.TabIndex = 9;
      this.lblMovesMade.Text = "Moves Made : ";
      this.tmrTimeElapse.Enabled = true;
      this.tmrTimeElapse.Interval = 900;
      this.tmrTimeElapse.Tick += new EventHandler(this.UpdateTimeElapsed);
      this.btnShuffle.BackColor = Color.White;
      this.btnShuffle.FlatStyle = FlatStyle.System;
      this.btnShuffle.Location = new Point(575, 426);
      this.btnShuffle.Name = "btnShuffle";
      this.btnShuffle.Size = new Size(86, 42);
      this.btnShuffle.TabIndex = 8;
      this.btnShuffle.Text = "Shuffle";
      this.btnShuffle.UseVisualStyleBackColor = false;
      this.btnShuffle.Click += new EventHandler(this.btnShuffle_Click);
      this.gbPuzzleBox.Controls.Add((Control) this.pbx1);
      this.gbPuzzleBox.Controls.Add((Control) this.pbx2);
      this.gbPuzzleBox.Controls.Add((Control) this.pbx3);
      this.gbPuzzleBox.Controls.Add((Control) this.pbx4);
      this.gbPuzzleBox.Controls.Add((Control) this.pbx5);
      this.gbPuzzleBox.Controls.Add((Control) this.pbx6);
      this.gbPuzzleBox.Controls.Add((Control) this.pbx7);
      this.gbPuzzleBox.Controls.Add((Control) this.pbx8);
      this.gbPuzzleBox.Controls.Add((Control) this.pbx9);
      this.gbPuzzleBox.Location = new Point(12, 12);
      this.gbPuzzleBox.Name = "gbPuzzleBox";
      this.gbPuzzleBox.Size = new Size(427, 433);
      this.gbPuzzleBox.TabIndex = 6;
      this.gbPuzzleBox.TabStop = false;
      this.gbPuzzleBox.Text = "PuzzleBox";
      this.gbOriginal.BackgroundImageLayout = ImageLayout.Stretch;
      this.gbOriginal.Location = new Point(548, 23);
      this.gbOriginal.Name = "gbOriginal";
      this.gbOriginal.Size = new Size(315, 282);
      this.gbOriginal.TabIndex = 5;
      this.gbOriginal.TabStop = false;
      this.gbOriginal.Text = "Original";
      this.pbx1.Location = new Point(17, 23);
      this.pbx1.Name = "pbx1";
      this.pbx1.Size = new Size(130, 130);
      this.pbx1.SizeMode = PictureBoxSizeMode.StretchImage;
      this.pbx1.TabIndex = 0;
      this.pbx1.TabStop = false;
      this.pbx1.Click += new EventHandler(this.SwitchPictureBox);
      this.pbx2.Location = new Point(149, 23);
      this.pbx2.Name = "pbx2";
      this.pbx2.Size = new Size(130, 130);
      this.pbx2.SizeMode = PictureBoxSizeMode.StretchImage;
      this.pbx2.TabIndex = 0;
      this.pbx2.TabStop = false;
      this.pbx2.Click += new EventHandler(this.SwitchPictureBox);
      this.pbx3.Location = new Point(281, 23);
      this.pbx3.Name = "pbx3";
      this.pbx3.Size = new Size(130, 130);
      this.pbx3.SizeMode = PictureBoxSizeMode.StretchImage;
      this.pbx3.TabIndex = 0;
      this.pbx3.TabStop = false;
      this.pbx3.Click += new EventHandler(this.SwitchPictureBox);
      this.pbx4.Location = new Point(17, 155);
      this.pbx4.Name = "pbx4";
      this.pbx4.Size = new Size(130, 130);
      this.pbx4.SizeMode = PictureBoxSizeMode.StretchImage;
      this.pbx4.TabIndex = 0;
      this.pbx4.TabStop = false;
      this.pbx4.Click += new EventHandler(this.SwitchPictureBox);
      this.pbx5.Location = new Point(149, 155);
      this.pbx5.Name = "pbx5";
      this.pbx5.Size = new Size(130, 130);
      this.pbx5.SizeMode = PictureBoxSizeMode.StretchImage;
      this.pbx5.TabIndex = 0;
      this.pbx5.TabStop = false;
      this.pbx5.Click += new EventHandler(this.SwitchPictureBox);
      this.pbx6.Location = new Point(281, 155);
      this.pbx6.Name = "pbx6";
      this.pbx6.Size = new Size(130, 130);
      this.pbx6.SizeMode = PictureBoxSizeMode.StretchImage;
      this.pbx6.TabIndex = 0;
      this.pbx6.TabStop = false;
      this.pbx6.Click += new EventHandler(this.SwitchPictureBox);
      this.pbx7.Location = new Point(17, 287);
      this.pbx7.Name = "pbx7";
      this.pbx7.Size = new Size(130, 130);
      this.pbx7.SizeMode = PictureBoxSizeMode.StretchImage;
      this.pbx7.TabIndex = 0;
      this.pbx7.TabStop = false;
      this.pbx7.Click += new EventHandler(this.SwitchPictureBox);
      this.pbx8.Location = new Point(149, 287);
      this.pbx8.Name = "pbx8";
      this.pbx8.Size = new Size(130, 130);
      this.pbx8.SizeMode = PictureBoxSizeMode.StretchImage;
      this.pbx8.TabIndex = 0;
      this.pbx8.TabStop = false;
      this.pbx8.Click += new EventHandler(this.SwitchPictureBox);
      this.pbx9.Location = new Point(281, 287);
      this.pbx9.Name = "pbx9";
      this.pbx9.Size = new Size(130, 130);
      this.pbx9.SizeMode = PictureBoxSizeMode.StretchImage;
      this.pbx9.TabIndex = 0;
      this.pbx9.TabStop = false;
      this.pbx9.Click += new EventHandler(this.SwitchPictureBox);
      this.AutoScaleDimensions = new SizeF(6f, 13f);
      this.AutoScaleMode = AutoScaleMode.Font;
      this.ClientSize = new Size(918, 499);
      this.Controls.Add((Control) this.btnPause);
      this.Controls.Add((Control) this.lblTimeElapsed);
      this.Controls.Add((Control) this.lblMovesMade);
      this.Controls.Add((Control) this.gbOriginal);
      this.Controls.Add((Control) this.btnShuffle);
      this.Controls.Add((Control) this.gbPuzzleBox);
      this.FormBorderStyle = FormBorderStyle.Fixed3D;
      this.Name = nameof (Puzzle);
      this.Text = nameof (Puzzle);
      this.FormClosing += new FormClosingEventHandler(this.AskPermissionBeforeQuit);
      this.Load += new EventHandler(this.Puzzle_Load);
      this.gbPuzzleBox.ResumeLayout(false);
      ((ISupportInitialize) this.pbx1).EndInit();
      ((ISupportInitialize) this.pbx2).EndInit();
      ((ISupportInitialize) this.pbx3).EndInit();
      ((ISupportInitialize) this.pbx4).EndInit();
      ((ISupportInitialize) this.pbx5).EndInit();
      ((ISupportInitialize) this.pbx6).EndInit();
      ((ISupportInitialize) this.pbx7).EndInit();
      ((ISupportInitialize) this.pbx8).EndInit();
      ((ISupportInitialize) this.pbx9).EndInit();
      this.ResumeLayout(false);
      this.PerformLayout();
    }
  }
}
