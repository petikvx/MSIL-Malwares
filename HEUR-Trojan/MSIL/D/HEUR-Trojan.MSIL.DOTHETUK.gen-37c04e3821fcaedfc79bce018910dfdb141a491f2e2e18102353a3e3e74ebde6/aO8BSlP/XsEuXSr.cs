// Decompiled with JetBrains decompiler
// Type: aO8BSlP.XsEuXSr
// Assembly: aO8BSlP, Version=2.0.0.0, Culture=neutral, PublicKeyToken=0a613f4dd989e8ae
// MVID: 26D80EA7-FF8D-466E-8999-D26AD81041E3
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.03\HEUR-Trojan.MSIL.DOTHETUK.gen-37c04e3821fcaedfc79bce018910dfdb141a491f2e2e18102353a3e3e74ebde6.exe

using \u0030EOtVsm;
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Diagnostics;
using System.Drawing;
using System.IO;
using System.Reflection;
using System.Windows.Forms;
using System.Xml.Serialization;

namespace aO8BSlP
{
  public class XsEuXSr : Form
  {
    public static XmlSerializer eLt4Eah;
    public List<bBIDu7t> RB6ePqK;
    private T6GZO8Z yqXCPHl;
    private List<\u0036vKbfC0> tCDcJnE;
    private BnAt7qQ ZKZJi1k;
    private bBIDu7t \u0031NlBv3W;
    private IContainer sWfD0qv;
    private MenuStrip K0K1C3m;
    private ToolStripMenuItem hMZ3aoy;
    private ToolStripMenuItem yA8qA8m;
    private GroupBox TPzDSd7;
    private GroupBox aKahupU;
    private ListBox QVwTrad;
    private BackgroundWorker JEPF3O7;
    private Label rFKJ7Yq;
    private GroupBox JHmeyXd;
    private Button \u0038LX53XF;
    private RadioButton OkaaWzj;
    private RadioButton ww8X4aw;
    private RadioButton DzAsbqj;
    private ListView uNhyskj;
    private ColumnHeader \u0037hVGGCG;
    private ColumnHeader peinqJ7;
    private Button tuqu7Bu;
    private ContextMenuStrip kz4UKYa;
    private ToolStripMenuItem jXgR2Gc;
    private ToolStripMenuItem iCnVNCe;
    private ToolStripMenuItem I3jU6Px;
    private ToolStripMenuItem cmUGBfD;
    private ToolStripMenuItem XucCLzb;
    private BackgroundWorker fEuc9hz;
    private ToolStripMenuItem zq931ez;
    private Button \u0032mXEilU;
    private bBIDu7t a4AYox9;

    private void OHd7FFK(object u6t2qH9, EventArgs mBlVAw1)
    {
      if (!Directory.Exists("tracks"))
        Directory.CreateDirectory("tracks");
      if (!Directory.Exists("playlists"))
        Directory.CreateDirectory("playlists");
      if (!Directory.Exists("cafiine_root"))
        Directory.CreateDirectory("cafiine_root");
      vS0aGF9.\u0030nbtJih();
      \u0035pj8Rz5.MA8n6s3();
      this.\u0037ZPRDL1(OU79GnJ.LJrE3yY.yIcPxd5);
      this.JEPF3O7.RunWorkerAsync();
      this.fEuc9hz.RunWorkerAsync((object) false);
    }

    private void \u0034VK8Zsm(object GFJi7Iy, FormClosingEventArgs jo1RoaL)
    {
    }

    public void \u0037ZPRDL1(string PlCvbGZ)
    {
      OU79GnJ.LJrE3yY.yIcPxd5 = PlCvbGZ;
      OU79GnJ.\u0039ip15Yv();
      if (!File.Exists("playlists\\" + PlCvbGZ + ".xml"))
      {
        using (FileStream fileStream = File.OpenWrite("playlists\\" + PlCvbGZ + ".xml"))
          XsEuXSr.eLt4Eah.Serialize((Stream) fileStream, (object) new List<bBIDu7t>());
      }
      using (FileStream fileStream = File.OpenRead("playlists\\" + PlCvbGZ + ".xml"))
        this.RB6ePqK = (List<bBIDu7t>) XsEuXSr.eLt4Eah.Deserialize((Stream) fileStream);
      this.sjSgfiJ();
    }

    public void sjSgfiJ()
    {
      // ISSUE: unable to decompile the method.
    }

    public void Q7fy9md()
    {
      File.Delete("playlists\\" + OU79GnJ.LJrE3yY.yIcPxd5 + ".xml");
      using (FileStream fileStream = File.OpenWrite("playlists\\" + OU79GnJ.LJrE3yY.yIcPxd5 + ".xml"))
        XsEuXSr.eLt4Eah.Serialize((Stream) fileStream, (object) this.RB6ePqK);
    }

    public bBIDu7t zQmBXsq(string _param1)
    {
      // ISSUE: unable to decompile the method.
    }

    public void sS4JkeO(OuVUUc7 qgVfJIb, string vJibIK7)
    {
      // ISSUE: unable to decompile the method.
    }

    private void KLOrKwp(object JIgaizz, DoWorkEventArgs Gwg9x5u)
    {
      try
      {
        this.yqXCPHl = new T6GZO8Z(this);
        this.yqXCPHl.WCKZzri();
      }
      catch (Exception ex)
      {
        Gwg9x5u.Result = (object) ex.Message;
      }
    }

    private void IjsGzOM(object hkR4uwD, ProgressChangedEventArgs MPO2lQ9)
    {
      // ISSUE: unable to decompile the method.
    }

    private void uuWTz18(object wj5QHmp, RunWorkerCompletedEventArgs _param2)
    {
      int num = (int) MessageBox.Show("An error was encountered when starting the cafiine server. Please ensure that there are no other cafiine servers running on this computer.\n\nDetails: " + _param2.Result?.ToString());
      this.Close();
    }

    private void ssfqvTu(object _param1, DoWorkEventArgs DWJHymJ)
    {
      string khkWlXC = Assembly.GetExecutingAssembly().GetName().Version.ToString();
      Hg6LpJu hg6LpJu = Hg6LpJu.\u00351Afmd3();
      int num1 = int.Parse(\u0035pj8Rz5.fa7lfxV(khkWlXC));
      if (int.Parse(\u0035pj8Rz5.fa7lfxV(((kpByqel) hg6LpJu).JiFZx9e)) > num1)
      {
        if (MessageBox.Show("Version " + ((kpByqel) hg6LpJu).JiFZx9e + " is now available for aO8BSlP with the following changes:\n\n" + hg6LpJu.YuhvbPX + "\n\nWould you like to download the latest update from GitHub now?", "Update available", MessageBoxButtons.YesNo, MessageBoxIcon.Asterisk, MessageBoxDefaultButton.Button1) != DialogResult.Yes)
          return;
        this.wKGaQuO((object) null, (EventArgs) null);
      }
      else if ((bool) DWJHymJ.Argument)
      {
        int num2 = (int) MessageBox.Show("There is no update available right now.", "No update available", MessageBoxButtons.OK, MessageBoxIcon.Asterisk);
      }
    }

    private void \u0032FVBzpQ(object vLFU2sB, MouseEventArgs zl3JMl0)
    {
      if (zl3JMl0.Button != MouseButtons.Right || !this.uNhyskj.FocusedItem.Bounds.Contains(zl3JMl0.Location))
        return;
      this.kz4UKYa.Show(Cursor.Position);
    }

    private void e3sgOrG(object _param1, EventArgs eWgAyl6)
    {
      int num = (int) new \u0031n8fs0B(this.RB6ePqK[this.uNhyskj.SelectedIndices[0]]).ShowDialog((IWin32Window) this);
    }

    private void C56HudV(object fRzyuF3, EventArgs kSi9CXx)
    {
      bBIDu7t bBiDu7t = this.RB6ePqK[this.uNhyskj.SelectedIndices[0]];
      foreach (OU79GnJ ou79GnJ in this.tCDcJnE)
        ou79GnJ.\u0037FxR6ID.Remove(bBiDu7t);
      this.RB6ePqK.Remove(bBiDu7t);
      this.uNhyskj.Items.RemoveAt(this.uNhyskj.SelectedIndices[0]);
      this.Q7fy9md();
    }

    private void weWQDN5(object RxV52xF, EventArgs b4lHzES)
    {
      int num = (int) new XsEuXSr().ShowDialog((IWin32Window) this);
    }

    private void hLKyK7G(object bDezqoP, EventArgs VxWFUZa)
    {
      int num = (int) new \u0034c1jErj().ShowDialog((IWin32Window) this);
    }

    private void \u0039b5CNVk(object A1GJokD, EventArgs Ygja30O)
    {
      if (this.uNhyskj.SelectedIndices == null)
        return;
      this.\u0031NlBv3W = this.RB6ePqK[this.uNhyskj.SelectedIndices[0]];
    }

    private void m2xZlgb(object Y08oKuG, EventArgs _param2)
    {
      if (!this.DzAsbqj.Checked)
        return;
      this.ZKZJi1k = BnAt7qQ.Shuffle;
    }

    private void G36scRz(object WD5sYwN, EventArgs PlgAkOP)
    {
      if (!this.ww8X4aw.Checked)
        return;
      this.ZKZJi1k = BnAt7qQ.InOrder;
    }

    private void GL9cHS1(object iVXcnRr, EventArgs fj0dvq5)
    {
      if (!this.OkaaWzj.Checked)
        return;
      this.ZKZJi1k = BnAt7qQ.TrueRandom;
    }

    private void IjxoD9c(object vSCPGAo, EventArgs mU9Sppv) => this.fEuc9hz.RunWorkerAsync((object) true);

    private void \u0039QEm9G5(object juwLXCc, EventArgs rBe1cjz) => this.Close();

    private void wKGaQuO(object NIaOunf, EventArgs _param2) => Process.Start("https://github.com/OatmealDome/SplatoonUtilities/blob/master/aO8BSlP/README.md");

    private void \u0035iMKtf8(object ynHHV6r, EventArgs HpPDoKU)
    {
      int num = (int) MessageBox.Show("aO8BSlP (" + Assembly.GetExecutingAssembly().GetName().Version.ToString() + ")\nCopyright (c) 2016 OatmealDome");
    }

    protected override void Dispose(bool disposing)
    {
      if (disposing && this.sWfD0qv != null)
        this.sWfD0qv.Dispose();
      base.Dispose(disposing);
    }

    private void JwJtJrB()
    {
      this.sWfD0qv = (IContainer) new Container();
      this.K0K1C3m = new MenuStrip();
      this.hMZ3aoy = new ToolStripMenuItem();
      this.zq931ez = new ToolStripMenuItem();
      this.yA8qA8m = new ToolStripMenuItem();
      this.I3jU6Px = new ToolStripMenuItem();
      this.cmUGBfD = new ToolStripMenuItem();
      this.XucCLzb = new ToolStripMenuItem();
      this.TPzDSd7 = new GroupBox();
      this.uNhyskj = new ListView();
      this.\u0037hVGGCG = new ColumnHeader();
      this.peinqJ7 = new ColumnHeader();
      this.rFKJ7Yq = new Label();
      this.aKahupU = new GroupBox();
      this.QVwTrad = new ListBox();
      this.JEPF3O7 = new BackgroundWorker();
      this.JHmeyXd = new GroupBox();
      this.\u0032mXEilU = new Button();
      this.tuqu7Bu = new Button();
      this.OkaaWzj = new RadioButton();
      this.ww8X4aw = new RadioButton();
      this.DzAsbqj = new RadioButton();
      this.\u0038LX53XF = new Button();
      this.kz4UKYa = new ContextMenuStrip(this.sWfD0qv);
      this.jXgR2Gc = new ToolStripMenuItem();
      this.iCnVNCe = new ToolStripMenuItem();
      this.fEuc9hz = new BackgroundWorker();
      this.K0K1C3m.SuspendLayout();
      this.TPzDSd7.SuspendLayout();
      this.aKahupU.SuspendLayout();
      this.JHmeyXd.SuspendLayout();
      this.kz4UKYa.SuspendLayout();
      this.SuspendLayout();
      this.K0K1C3m.Items.AddRange(new ToolStripItem[2]
      {
        (ToolStripItem) this.hMZ3aoy,
        (ToolStripItem) this.I3jU6Px
      });
      this.K0K1C3m.Location = new Point(0, 0);
      this.K0K1C3m.Name = "menuStrip";
      this.K0K1C3m.Size = new Size(486, 24);
      this.K0K1C3m.TabIndex = 0;
      this.K0K1C3m.Text = "menuStrip1";
      this.hMZ3aoy.DropDownItems.AddRange(new ToolStripItem[2]
      {
        (ToolStripItem) this.zq931ez,
        (ToolStripItem) this.yA8qA8m
      });
      this.hMZ3aoy.Name = "programToolStripMenuItem";
      this.hMZ3aoy.Size = new Size(65, 20);
      this.hMZ3aoy.Text = "Program";
      this.zq931ez.Name = "checkForUpdateToolStripMenuItem";
      this.zq931ez.Size = new Size(166, 22);
      this.zq931ez.Text = "Check for Update";
      this.zq931ez.Click += new EventHandler(this.IjxoD9c);
      this.yA8qA8m.Name = "exitToolStripMenuItem";
      this.yA8qA8m.Size = new Size(166, 22);
      this.yA8qA8m.Text = "Exit";
      this.yA8qA8m.Click += new EventHandler(this.\u0039QEm9G5);
      this.I3jU6Px.DropDownItems.AddRange(new ToolStripItem[2]
      {
        (ToolStripItem) this.cmUGBfD,
        (ToolStripItem) this.XucCLzb
      });
      this.I3jU6Px.Name = "helpToolStripMenuItem";
      this.I3jU6Px.Size = new Size(44, 20);
      this.I3jU6Px.Text = "Help";
      this.cmUGBfD.Name = "usageToolStripMenuItem";
      this.cmUGBfD.Size = new Size(107, 22);
      this.cmUGBfD.Text = "Usage";
      this.cmUGBfD.Click += new EventHandler(this.wKGaQuO);
      this.XucCLzb.Name = "aboutToolStripMenuItem";
      this.XucCLzb.Size = new Size(107, 22);
      this.XucCLzb.Text = "About";
      this.XucCLzb.Click += new EventHandler(this.\u0035iMKtf8);
      this.TPzDSd7.Controls.Add((Control) this.uNhyskj);
      this.TPzDSd7.Controls.Add((Control) this.rFKJ7Yq);
      this.TPzDSd7.Location = new Point(12, 27);
      this.TPzDSd7.Name = "grpTracks";
      this.TPzDSd7.Size = new Size(459, 207);
      this.TPzDSd7.TabIndex = 1;
      this.TPzDSd7.TabStop = false;
      this.TPzDSd7.Text = "Tracks";
      this.uNhyskj.Columns.AddRange(new ColumnHeader[2]
      {
        this.\u0037hVGGCG,
        this.peinqJ7
      });
      this.uNhyskj.Location = new Point(9, 19);
      this.uNhyskj.MultiSelect = false;
      this.uNhyskj.Name = "lsvTracks";
      this.uNhyskj.Size = new Size(444, 162);
      this.uNhyskj.TabIndex = 5;
      this.uNhyskj.UseCompatibleStateImageBehavior = false;
      this.uNhyskj.View = View.Details;
      this.uNhyskj.MouseClick += new MouseEventHandler(this.\u0032FVBzpQ);
      this.\u0037hVGGCG.Text = "Name";
      this.\u0037hVGGCG.Width = 100;
      this.peinqJ7.Text = "Plays At";
      this.peinqJ7.Width = 340;
      this.rFKJ7Yq.AutoSize = true;
      this.rFKJ7Yq.Location = new Point(6, 185);
      this.rFKJ7Yq.Name = "lblNowPlaying";
      this.rFKJ7Yq.Size = new Size(89, 13);
      this.rFKJ7Yq.TabIndex = 4;
      this.rFKJ7Yq.Text = "Now Playing: n/a";
      this.aKahupU.Controls.Add((Control) this.QVwTrad);
      this.aKahupU.Location = new Point(197, 240);
      this.aKahupU.Name = "groupBox1";
      this.aKahupU.Size = new Size(282, 136);
      this.aKahupU.TabIndex = 3;
      this.aKahupU.TabStop = false;
      this.aKahupU.Text = "Log";
      this.QVwTrad.FormattingEnabled = true;
      this.QVwTrad.HorizontalScrollbar = true;
      this.QVwTrad.Location = new Point(6, 19);
      this.QVwTrad.Name = "lstOutput";
      this.QVwTrad.Size = new Size(270, 108);
      this.QVwTrad.TabIndex = 0;
      this.JEPF3O7.WorkerReportsProgress = true;
      this.JEPF3O7.DoWork += new DoWorkEventHandler(this.KLOrKwp);
      this.JEPF3O7.ProgressChanged += new ProgressChangedEventHandler(this.IjsGzOM);
      this.JEPF3O7.RunWorkerCompleted += new RunWorkerCompletedEventHandler(this.uuWTz18);
      this.JHmeyXd.Controls.Add((Control) this.\u0032mXEilU);
      this.JHmeyXd.Controls.Add((Control) this.tuqu7Bu);
      this.JHmeyXd.Controls.Add((Control) this.OkaaWzj);
      this.JHmeyXd.Controls.Add((Control) this.ww8X4aw);
      this.JHmeyXd.Controls.Add((Control) this.DzAsbqj);
      this.JHmeyXd.Controls.Add((Control) this.\u0038LX53XF);
      this.JHmeyXd.Location = new Point(12, 245);
      this.JHmeyXd.Name = "grpControls";
      this.JHmeyXd.Size = new Size(177, 131);
      this.JHmeyXd.TabIndex = 5;
      this.JHmeyXd.TabStop = false;
      this.JHmeyXd.Text = "Controls";
      this.\u0032mXEilU.Location = new Point(96, 48);
      this.\u0032mXEilU.Name = "btnPlaylists";
      this.\u0032mXEilU.Size = new Size(75, 23);
      this.\u0032mXEilU.TabIndex = 8;
      this.\u0032mXEilU.Text = "Playlists";
      this.\u0032mXEilU.UseVisualStyleBackColor = true;
      this.\u0032mXEilU.Click += new EventHandler(this.hLKyK7G);
      this.tuqu7Bu.Location = new Point(96, 19);
      this.tuqu7Bu.Name = "btnImport";
      this.tuqu7Bu.Size = new Size(75, 23);
      this.tuqu7Bu.TabIndex = 0;
      this.tuqu7Bu.Text = "Import File";
      this.tuqu7Bu.UseVisualStyleBackColor = true;
      this.tuqu7Bu.Click += new EventHandler(this.weWQDN5);
      this.OkaaWzj.AutoSize = true;
      this.OkaaWzj.Location = new Point(9, 68);
      this.OkaaWzj.Name = "radTrueRandom";
      this.OkaaWzj.Size = new Size(65, 17);
      this.OkaaWzj.TabIndex = 7;
      this.OkaaWzj.Text = "Random";
      this.OkaaWzj.UseVisualStyleBackColor = true;
      this.OkaaWzj.CheckedChanged += new EventHandler(this.GL9cHS1);
      this.ww8X4aw.AutoSize = true;
      this.ww8X4aw.Location = new Point(9, 45);
      this.ww8X4aw.Name = "radInOrder";
      this.ww8X4aw.Size = new Size(63, 17);
      this.ww8X4aw.TabIndex = 6;
      this.ww8X4aw.Text = "In Order";
      this.ww8X4aw.UseVisualStyleBackColor = true;
      this.ww8X4aw.CheckedChanged += new EventHandler(this.G36scRz);
      this.DzAsbqj.AutoSize = true;
      this.DzAsbqj.Checked = true;
      this.DzAsbqj.Location = new Point(9, 22);
      this.DzAsbqj.Name = "radShuffle";
      this.DzAsbqj.Size = new Size(58, 17);
      this.DzAsbqj.TabIndex = 5;
      this.DzAsbqj.TabStop = true;
      this.DzAsbqj.Text = "Shuffle";
      this.DzAsbqj.UseVisualStyleBackColor = true;
      this.DzAsbqj.CheckedChanged += new EventHandler(this.m2xZlgb);
      this.\u0038LX53XF.Location = new Point(96, 77);
      this.\u0038LX53XF.Name = "btnPlayNext";
      this.\u0038LX53XF.Size = new Size(75, 23);
      this.\u0038LX53XF.TabIndex = 0;
      this.\u0038LX53XF.Text = "Play Next";
      this.\u0038LX53XF.UseVisualStyleBackColor = true;
      this.\u0038LX53XF.Click += new EventHandler(this.\u0039b5CNVk);
      this.kz4UKYa.Items.AddRange(new ToolStripItem[2]
      {
        (ToolStripItem) this.jXgR2Gc,
        (ToolStripItem) this.iCnVNCe
      });
      this.kz4UKYa.Name = "contextMenu";
      this.kz4UKYa.Size = new Size(118, 48);
      this.jXgR2Gc.Name = "editToolStripMenuItem";
      this.jXgR2Gc.Size = new Size(117, 22);
      this.jXgR2Gc.Text = "Edit";
      this.jXgR2Gc.Click += new EventHandler(this.e3sgOrG);
      this.iCnVNCe.Name = "removeToolStripMenuItem";
      this.iCnVNCe.Size = new Size(117, 22);
      this.iCnVNCe.Text = "Remove";
      this.iCnVNCe.Click += new EventHandler(this.C56HudV);
      this.fEuc9hz.DoWork += new DoWorkEventHandler(this.ssfqvTu);
      this.AutoScaleDimensions = new SizeF(6f, 13f);
      this.AutoScaleMode = AutoScaleMode.Font;
      this.ClientSize = new Size(486, 385);
      this.Controls.Add((Control) this.JHmeyXd);
      this.Controls.Add((Control) this.aKahupU);
      this.Controls.Add((Control) this.TPzDSd7);
      this.Controls.Add((Control) this.K0K1C3m);
      this.FormBorderStyle = FormBorderStyle.FixedSingle;
      this.MainMenuStrip = this.K0K1C3m;
      this.Name = nameof (XsEuXSr);
      this.Text = "aO8BSlP";
      this.FormClosing += new FormClosingEventHandler(this.\u0034VK8Zsm);
      this.Load += new EventHandler(this.OHd7FFK);
      this.K0K1C3m.ResumeLayout(false);
      this.K0K1C3m.PerformLayout();
      this.TPzDSd7.ResumeLayout(false);
      this.TPzDSd7.PerformLayout();
      this.aKahupU.ResumeLayout(false);
      this.JHmeyXd.ResumeLayout(false);
      this.JHmeyXd.PerformLayout();
      this.kz4UKYa.ResumeLayout(false);
      this.ResumeLayout(false);
      this.PerformLayout();
    }

    static XsEuXSr()
    {
      OuVUUc7.COCHpQQ = new Random();
      XsEuXSr.eLt4Eah = new XmlSerializer(typeof (List<bBIDu7t>), new XmlRootAttribute("Tracks"));
    }

    public XsEuXSr()
    {
      ((\u0031n8fs0B) this).HGC3g7U = (IContainer) null;
      // ISSUE: explicit constructor call
      base.\u002Ector();
      ((\u0031n8fs0B) this).QA7nqYA();
      this.a4AYox9 = (bBIDu7t) null;
    }
  }
}
