// Decompiled with JetBrains decompiler
// Type: LTSvcMon.LogError
// Assembly: LTSvcMon, Version=40.101.4107.19874, Culture=neutral, PublicKeyToken=null
// MVID: 816B70F7-DB44-4BCA-BD08-988C39A8AB45
// Assembly location: C:\Users\Administrateur\Downloads\Virusshare-00006-msil\Trojan.Win32.Patched.mf-f4d248fac8113c5e0ed835350bfdc060077775705ca69e00ce08a4a7e4643090.exe

using Microsoft.VisualBasic;
using Microsoft.VisualBasic.CompilerServices;
using System;
using System.IO;
using System.Reflection;

namespace LTSvcMon
{
  [StandardModule]
  internal sealed class LogError
  {
    public static void LogEvent(string message)
    {
      try
      {
        if (Conversions.ToBoolean(Settings.GlobalSettings[(object) Settings.GSettings.NoDebug]))
          return;
        StreamWriter streamWriter = new StreamWriter(Environment.ExpandEnvironmentVariables("%Windir%\\LTSvc\\LTSVCMon.txt"), true);
        streamWriter.WriteLine(Assembly.GetExecutingAssembly().GetName().Name + "  v" + Conversions.ToString(Assembly.GetExecutingAssembly().GetName().Version.Major) + "." + Conversions.ToString(Assembly.GetExecutingAssembly().GetName().Version.Minor) + "\t - " + Conversions.ToString(DateAndTime.Now) + "\t - " + message + ":::");
        streamWriter.Close();
        if (new FileInfo(Environment.ExpandEnvironmentVariables("%Windir%\\LTSvc\\LTSVCMon.txt")).Length <= 50000L)
          return;
        if (File.Exists(Environment.ExpandEnvironmentVariables("%Windir%\\LTSvc\\LTSVCMonold.txt")))
          File.Delete(Environment.ExpandEnvironmentVariables("%Windir%\\LTSvc\\LTSVCMonold.txt"));
        File.Move(Environment.ExpandEnvironmentVariables("%Windir%\\LTSvc\\LTSVCMon.txt"), Environment.ExpandEnvironmentVariables("%Windir%\\LTSvc\\LTSVCMonsold.txt"));
      }
      catch (Exception ex)
      {
        ProjectData.SetProjectError(ex);
        ProjectData.ClearProjectError();
      }
    }
  }
}
