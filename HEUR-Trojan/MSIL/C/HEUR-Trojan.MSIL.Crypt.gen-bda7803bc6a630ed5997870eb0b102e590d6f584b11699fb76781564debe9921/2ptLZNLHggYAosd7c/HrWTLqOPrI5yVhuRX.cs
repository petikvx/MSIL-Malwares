// Decompiled with JetBrains decompiler
// Type: 2ptLZNLHggYAosd7c.HrWTLqOPrI5yVhuRX
// Assembly: Q7jU8zFqbfRJyQUdT, Version=5.6.0.5, Culture=neutral, PublicKeyToken=31bf3856ad364e35
// MVID: 36427E73-5524-420A-9724-276045DDB54E
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.03\HEUR-Trojan.MSIL.Crypt.gen-bda7803bc6a630ed5997870eb0b102e590d6f584b11699fb76781564debe9921.exe

using \u0030JN4tITWFH8cI1F37;
using \u0031fTNqlFmAxykGbSmG;
using \u0032ptLZNLHggYAosd7c;
using \u0035RJpKBxICv6YNAuej;
using asG2wIovp329kbSlg;
using hieINalQwozdxq67C;
using IUNAR1cj6J6hiho3U;
using Newtonsoft.Json;
using Newtonsoft.Json.Linq;
using NuGet.Common;
using NuGet.Frameworks;
using NuGet.Packaging.Core;
using NuGet.Versioning;
using System;
using System.Collections.Generic;
using System.Globalization;
using System.IO;
using System.Linq;

namespace \u0032ptLZNLHggYAosd7c
{
  public class HrWTLqOPrI5yVhuRX
  {
    public static readonly int krxyqx242685zhfqP = 1;
    public static readonly string \u0034rSdZPqn25j4dE1IL = "packages.lock.json";
    private const string xrvkCFdzwkCtCPypD = "version";
    private const string m366mWE4OA5jvHJuJ = "resolved";
    private const string h6aubTJiCq2qwq0aO = "requested";
    private const string nRWy7F7yGznM39ca0 = "contentHash";
    private const string pDfJTEjAb61x7zgbl = "dependencies";
    private const string yHP0fAoeM0u0dxfeT = "type";

    public static xarJYuxFNPEca7Nae PTfMJ6JAtpd61q1DW(
      string ETU3yNeHTof2uS0qQ,
      string RFgOrrTHPXGzJvAPx)
    {
      return HrWTLqOPrI5yVhuRX.CdA3JWdKFNCBB4ftg(ETU3yNeHTof2uS0qQ, NullLogger.Instance, RFgOrrTHPXGzJvAPx);
    }

    public static xarJYuxFNPEca7Nae CdA3JWdKFNCBB4ftg(
      string _param0,
      ILogger DmVAp3pH9XWiPNUAV,
      string TVVkjGTwEvqRb3w79)
    {
      using (StringReader bguVKs6qwXwC2gEoc = new StringReader(_param0))
        return HrWTLqOPrI5yVhuRX.Rj1EljTPuvkgjmwit((TextReader) bguVKs6qwXwC2gEoc, DmVAp3pH9XWiPNUAV, TVVkjGTwEvqRb3w79);
    }

    public static xarJYuxFNPEca7Nae Lo8iEWXy6pKsfebSY(string pnwzDIFfyzH6StqI9) => HrWTLqOPrI5yVhuRX.yLMdZ44zqIrfBPu2d(pnwzDIFfyzH6StqI9, NullLogger.Instance);

    public static xarJYuxFNPEca7Nae yLMdZ44zqIrfBPu2d(
      string lSXO17PjffnWUJ3PH,
      ILogger FrZSYFwuIA2d1io0e)
    {
      using (FileStream KN9fcbRcen4uy4lfQ = File.OpenRead(lSXO17PjffnWUJ3PH))
        return HrWTLqOPrI5yVhuRX.okZOnbu9qmpPGaZ6v((Stream) KN9fcbRcen4uy4lfQ, FrZSYFwuIA2d1io0e, lSXO17PjffnWUJ3PH);
    }

    public static xarJYuxFNPEca7Nae okZOnbu9qmpPGaZ6v(
      Stream KN9fcbRcen4uy4lfQ,
      ILogger tsP5duiYFevtKyjcE,
      string _param2)
    {
      using (StreamReader bguVKs6qwXwC2gEoc = new StreamReader(KN9fcbRcen4uy4lfQ))
        return HrWTLqOPrI5yVhuRX.Rj1EljTPuvkgjmwit((TextReader) bguVKs6qwXwC2gEoc, tsP5duiYFevtKyjcE, _param2);
    }

    public static xarJYuxFNPEca7Nae Rj1EljTPuvkgjmwit(
      TextReader bguVKs6qwXwC2gEoc,
      ILogger BCQGxQC6gMxsg9tjs,
      string VYtpp3pml3P3GVACS)
    {
      try
      {
        xarJYuxFNPEca7Nae xarJyuxFnpEca7Nae = HrWTLqOPrI5yVhuRX.\u0031M1yi7tJHxjWMX79o(\u0030fG62LUjkewuNbewi.\u0031D6xFrkFSRdawAyAR(bguVKs6qwXwC2gEoc));
        xarJyuxFnpEca7Nae.\u0037nREejOAzUwQWq5Ly = VYtpp3pml3P3GVACS;
        return xarJyuxFnpEca7Nae;
      }
      catch (Exception ex)
      {
        BCQGxQC6gMxsg9tjs.LogInformation(string.Format((IFormatProvider) CultureInfo.CurrentCulture, \u0035BtvAZ7iGu3fb9DUp.M4R92AprdY9qN9rB1, (object) VYtpp3pml3P3GVACS, (object) ex.Message));
        return new xarJYuxFNPEca7Nae()
        {
          M1VbwZJiqAWCuf4m2 = int.MinValue,
          \u0037nREejOAzUwQWq5Ly = VYtpp3pml3P3GVACS
        };
      }
    }

    private static xarJYuxFNPEca7Nae \u0031M1yi7tJHxjWMX79o(
      JObject WRABzqrgv57SoC9Qa)
    {
      return new xarJYuxFNPEca7Nae()
      {
        M1VbwZJiqAWCuf4m2 = \u0030fG62LUjkewuNbewi.X7c6O9n4KM6nnJhZa((JToken) WRABzqrgv57SoC9Qa, "version", int.MinValue),
        A38XupG8jkmDJpAN0 = \u0030fG62LUjkewuNbewi.QpTDZoJm1YV48Rx7j<CpzYuRtJ0AVZniMag>(WRABzqrgv57SoC9Qa["dependencies"] as JObject, new Func<string, JToken, CpzYuRtJ0AVZniMag>(HrWTLqOPrI5yVhuRX.\u00336yhwPWeROw1hilip))
      };
    }

    public static string \u0038UnxSP1aIlk6fjaSk(xarJYuxFNPEca7Nae clYPsnCpFXtthKOAi)
    {
      using (StringWriter stringWriter = new StringWriter())
      {
        HrWTLqOPrI5yVhuRX.w8D7gBeck0als9iK8((TextWriter) stringWriter, clYPsnCpFXtthKOAi);
        return stringWriter.ToString();
      }
    }

    public static void zSI7fZJa7TppzfKtE(
      string ScusWoYoyhmHjlIoL,
      xarJYuxFNPEca7Nae fTiCOhfStP1N2amnV)
    {
      new FileInfo(ScusWoYoyhmHjlIoL).Directory.Create();
      using (FileStream bsZf9dRh6xUNrn1Rn = new FileStream(ScusWoYoyhmHjlIoL, FileMode.Create, FileAccess.Write, FileShare.None))
        HrWTLqOPrI5yVhuRX.Nni7TYqglJRLaQzac((Stream) bsZf9dRh6xUNrn1Rn, fTiCOhfStP1N2amnV);
    }

    public static void Nni7TYqglJRLaQzac(
      Stream bsZf9dRh6xUNrn1Rn,
      xarJYuxFNPEca7Nae NeG3AXUhj8Fb4lSHu)
    {
      using (StreamWriter streamWriter = new StreamWriter(bsZf9dRh6xUNrn1Rn))
        HrWTLqOPrI5yVhuRX.w8D7gBeck0als9iK8((TextWriter) streamWriter, NeG3AXUhj8Fb4lSHu);
    }

    public static void w8D7gBeck0als9iK8(TextWriter _param0, xarJYuxFNPEca7Nae sZ5CccDgRY7uUsaW3)
    {
      using (JsonTextWriter jsonTextWriter = new JsonTextWriter(_param0))
      {
        ((JsonWriter) jsonTextWriter).Formatting = (Formatting) 1;
        ((JToken) HrWTLqOPrI5yVhuRX.Q2420gADzmzkzu3ra(sZ5CccDgRY7uUsaW3)).WriteTo((JsonWriter) jsonTextWriter, Array.Empty<JsonConverter>());
      }
    }

    private static JObject Q2420gADzmzkzu3ra(xarJYuxFNPEca7Nae WgTOfyogfbp1MCWWt) => new JObject()
    {
      ["version"] = (JToken) new JValue((long) WgTOfyogfbp1MCWWt.M1VbwZJiqAWCuf4m2),
      ["dependencies"] = (JToken) \u0030fG62LUjkewuNbewi.bkGL2wMXrFSkXLmGb<CpzYuRtJ0AVZniMag>((IEnumerable<CpzYuRtJ0AVZniMag>) WgTOfyogfbp1MCWWt.A38XupG8jkmDJpAN0, new Func<CpzYuRtJ0AVZniMag, JProperty>(HrWTLqOPrI5yVhuRX.RkzXrjiOyPcvngQVX))
    };

    private static CpzYuRtJ0AVZniMag \u00336yhwPWeROw1hilip(
      string L77IB9XYrVUEfd3Cg,
      JToken PxgHD4R1fEvYbD0q7)
    {
      string[] strArray = L77IB9XYrVUEfd3Cg.Split(\u0030fG62LUjkewuNbewi.VAqhxQ8aa86vw8wcn, 2);
      CpzYuRtJ0AVZniMag cpzYuRtJ0AvZniMag = new CpzYuRtJ0AVZniMag()
      {
        t3A4BfLlEBQSwxPnE = NuGetFramework.Parse(strArray[0]),
        PIoke5PEqJExneG3T = \u0030fG62LUjkewuNbewi.QpTDZoJm1YV48Rx7j<KQaZZ651oWdGV1MFo>(PxgHD4R1fEvYbD0q7 as JObject, new Func<string, JToken, KQaZZ651oWdGV1MFo>(HrWTLqOPrI5yVhuRX.pTVkOpI5dVO6ZHliC))
      };
      if (strArray.Length == 2)
        cpzYuRtJ0AvZniMag.yZ00DorYMiVXCYNln = strArray[1];
      return cpzYuRtJ0AvZniMag;
    }

    private static KQaZZ651oWdGV1MFo pTVkOpI5dVO6ZHliC(
      string nkrniO0Lf1OWU9y6L,
      JToken obuHYkqitNgxiNZbK)
    {
      KQaZZ651oWdGV1MFo kqaZz651oWdGv1Mfo = new KQaZZ651oWdGV1MFo()
      {
        L0k3DQW7WN8iWZMOQ = nkrniO0Lf1OWU9y6L,
        txeI6x0gTzlrzz84e = \u0030fG62LUjkewuNbewi.QpTDZoJm1YV48Rx7j<PackageDependency>(obuHYkqitNgxiNZbK[(object) "dependencies"] as JObject, new Func<string, JToken, PackageDependency>(\u0030fG62LUjkewuNbewi.JVxUTM1dIbTsO22Al))
      };
      JObject GCuVxpqOTce0gzJk7 = obuHYkqitNgxiNZbK as JObject;
      string str1 = \u0030fG62LUjkewuNbewi.cCME9EjbhfM6fzYe5<string>(GCuVxpqOTce0gzJk7, "type");
      \u0031S2bl7yHbwfVV8aJN result;
      if (!string.IsNullOrEmpty(str1) && Enum.TryParse<\u0031S2bl7yHbwfVV8aJN>(str1, true, out result))
        kqaZz651oWdGv1Mfo.RLzRGuh69RHkcA5ms = result;
      string str2 = \u0030fG62LUjkewuNbewi.cCME9EjbhfM6fzYe5<string>(GCuVxpqOTce0gzJk7, "resolved");
      if (!string.IsNullOrEmpty(str2))
        kqaZz651oWdGv1Mfo.\u0035K78KylUMf1zXkEqv = NuGetVersion.Parse(str2);
      string str3 = \u0030fG62LUjkewuNbewi.cCME9EjbhfM6fzYe5<string>(GCuVxpqOTce0gzJk7, "requested");
      if (!string.IsNullOrEmpty(str3))
        kqaZz651oWdGv1Mfo.UkJwtgRVyqSTUIJgZ = VersionRange.Parse(str3);
      kqaZz651oWdGv1Mfo.o4e9PDQRLHhH9d0Rb = \u0030fG62LUjkewuNbewi.cCME9EjbhfM6fzYe5<string>(GCuVxpqOTce0gzJk7, "contentHash");
      return kqaZz651oWdGv1Mfo;
    }

    private static JProperty RkzXrjiOyPcvngQVX(CpzYuRtJ0AVZniMag _param0)
    {
      JObject jobject = \u0030fG62LUjkewuNbewi.bkGL2wMXrFSkXLmGb<KQaZZ651oWdGV1MFo>((IEnumerable<KQaZZ651oWdGV1MFo>) _param0.PIoke5PEqJExneG3T, new Func<KQaZZ651oWdGV1MFo, JProperty>(HrWTLqOPrI5yVhuRX.\u0037NAsPmoFGvxvN7PQQ));
      return new JProperty(_param0.aW9u9lSdNDrYWP31C, (object) jobject);
    }

    private static JProperty \u0037NAsPmoFGvxvN7PQQ(KQaZZ651oWdGV1MFo yaFy3y6uDpvHV0faj)
    {
      JObject jobject = new JObject()
      {
        ["type"] = JToken.op_Implicit(yaFy3y6uDpvHV0faj.RLzRGuh69RHkcA5ms.ToString())
      };
      if (yaFy3y6uDpvHV0faj.UkJwtgRVyqSTUIJgZ != null)
        jobject["requested"] = JToken.op_Implicit(yaFy3y6uDpvHV0faj.UkJwtgRVyqSTUIJgZ.ToNormalizedString());
      if (SemanticVersion.op_Inequality((SemanticVersion) yaFy3y6uDpvHV0faj.\u0035K78KylUMf1zXkEqv, (SemanticVersion) null))
        jobject["resolved"] = JToken.op_Implicit(((SemanticVersion) yaFy3y6uDpvHV0faj.\u0035K78KylUMf1zXkEqv).ToNormalizedString());
      if (yaFy3y6uDpvHV0faj.o4e9PDQRLHhH9d0Rb != null)
        jobject["contentHash"] = JToken.op_Implicit(yaFy3y6uDpvHV0faj.o4e9PDQRLHhH9d0Rb);
      IList<PackageDependency> txeI6x0gTzlrzz84e = yaFy3y6uDpvHV0faj.txeI6x0gTzlrzz84e;
      if ((txeI6x0gTzlrzz84e != null ? (((ICollection<PackageDependency>) txeI6x0gTzlrzz84e).Count > 0 ? 1 : 0) : 0) != 0)
      {
        IOrderedEnumerable<PackageDependency> orderedEnumerable = ((IEnumerable<PackageDependency>) yaFy3y6uDpvHV0faj.txeI6x0gTzlrzz84e).OrderBy<PackageDependency, string>((Func<PackageDependency, string>) (bJdYmTjHenHmTYWI9 => bJdYmTjHenHmTYWI9.Id), (IComparer<string>) StringComparer.Ordinal);
        jobject["dependencies"] = (JToken) \u0030fG62LUjkewuNbewi.bkGL2wMXrFSkXLmGb<PackageDependency>((IEnumerable<PackageDependency>) orderedEnumerable, new Func<PackageDependency, JProperty>(\u0030fG62LUjkewuNbewi.faCWY820tMEtyQycC));
      }
      return new JProperty(yaFy3y6uDpvHV0faj.L0k3DQW7WN8iWZMOQ, (object) jobject);
    }
  }
}
