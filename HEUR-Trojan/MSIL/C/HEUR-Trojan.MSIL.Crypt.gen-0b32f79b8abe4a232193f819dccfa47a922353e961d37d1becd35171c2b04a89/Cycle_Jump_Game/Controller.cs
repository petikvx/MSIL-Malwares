// Decompiled with JetBrains decompiler
// Type: Cycle_Jump_Game.Controller
// Assembly: cDisplayClas, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: 89FB05B9-6915-4070-92A1-63732D16ABE9
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.03\HEUR-Trojan.MSIL.Crypt.gen-0b32f79b8abe4a232193f819dccfa47a922353e961d37d1becd35171c2b04a89.exe

using System.Drawing;
using System.Windows.Forms;

namespace Cycle_Jump_Game
{
  internal class Controller
  {
    private ViewForm myForm;
    private Game15Logic game15;

    public Controller(ViewForm myForm, Game15Logic game15)
    {
      this.game15 = game15;
      this.myForm = myForm;
      game15.Rand(1000);
      myForm.DrawRand(game15.Arr15);
      myForm.KeyDown += new KeyEventHandler(this.ViewForm_KeyDown);
      Application.Run((Form) myForm);
    }

    private void ViewForm_KeyDown(object sender, KeyEventArgs e)
    {
      ViewForm viewForm1 = sender as ViewForm;
      Point zero1 = viewForm1.Zero;
      Point zero2;
      switch (e.KeyCode)
      {
        case Keys.Left:
          zero2 = viewForm1.Zero;
          if (zero2.Y - 1 >= 0)
          {
            viewForm1.Zero = this.game15.MoveLeft(zero1.X, zero1.Y);
            break;
          }
          break;
        case Keys.Up:
          zero2 = viewForm1.Zero;
          if (zero2.X - 1 >= 0)
          {
            viewForm1.Zero = this.game15.MoveUp(zero1.X, zero1.Y);
            break;
          }
          break;
        case Keys.Right:
          zero2 = viewForm1.Zero;
          if (zero2.Y + 1 < 4)
          {
            viewForm1.Zero = this.game15.MoveRight(zero1.X, zero1.Y);
            break;
          }
          break;
        case Keys.Down:
          zero2 = viewForm1.Zero;
          if (zero2.X + 1 < 4)
          {
            viewForm1.Zero = this.game15.MoveDown(zero1.X, zero1.Y);
            break;
          }
          break;
      }
      ViewForm viewForm2 = viewForm1;
      zero2 = viewForm1.Zero;
      int x = zero2.X;
      zero2 = viewForm1.Zero;
      int y = zero2.Y;
      viewForm2[x, y].Text = "";
      if (this.game15[zero1.X, zero1.Y] != 0)
        viewForm1[zero1.X, zero1.Y].Text = this.game15[zero1.X, zero1.Y].ToString();
      if (!this.game15.WinCheck())
        return;
      MessageBox.Show("you win");
    }
  }
}
