// Decompiled with JetBrains decompiler
// Type: Server.Forms.FormBlockClients
// Assembly: AsyncRAT, Version=0.5.7.0, Culture=neutral, PublicKeyToken=null
// MVID: 51786A10-CF9D-455B-B8A4-B82CB9EDE322
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.04\HEUR-HackTool.MSIL.Alien.gen-bb1f2c2c9b279790b67eaea6ab0bbce3a4d4432bbe1bd716750f2f9ba3337f7e.exe

using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Drawing;
using System.Windows.Forms;

namespace Server.Forms
{
  public class FormBlockClients : Form
  {
    private IContainer components;
    private GroupBox groupBox1;
    private ListBox listBlocked;
    private Button btnDelete;
    private Button btnAdd;
    private Label label1;
    public TextBox txtBlock;

    public FormBlockClients() => this.InitializeComponent();

    private void BtnAdd_Click(object sender, EventArgs e)
    {
      try
      {
        this.listBlocked.Items.Add((object) this.txtBlock.Text);
        this.txtBlock.Clear();
      }
      catch
      {
      }
    }

    private void BtnDelete_Click(object sender, EventArgs e)
    {
      try
      {
        for (int index = this.listBlocked.SelectedIndices.Count - 1; index >= 0; --index)
          this.listBlocked.Items.RemoveAt(this.listBlocked.SelectedIndices[index]);
      }
      catch
      {
      }
    }

    private void FormBlockClients_Load(object sender, EventArgs e)
    {
      try
      {
        this.listBlocked.Items.Clear();
        if (string.IsNullOrWhiteSpace(Server.Properties.Settings.Default.txtBlocked))
          return;
        string txtBlocked = Server.Properties.Settings.Default.txtBlocked;
        char[] chArray = new char[1]{ ',' };
        foreach (string str in txtBlocked.Split(chArray))
        {
          if (!string.IsNullOrWhiteSpace(str))
            this.listBlocked.Items.Add((object) str);
        }
      }
      catch
      {
      }
    }

    private void FormBlockClients_FormClosed(object sender, FormClosedEventArgs e)
    {
      try
      {
        lock (Server.Settings.Blocked)
        {
          Server.Settings.Blocked.Clear();
          List<string> values = new List<string>();
          foreach (string str in this.listBlocked.Items)
          {
            values.Add(str);
            Server.Settings.Blocked.Add(str);
          }
          Server.Properties.Settings.Default.txtBlocked = string.Join(",", (IEnumerable<string>) values);
          Server.Properties.Settings.Default.Save();
        }
      }
      catch
      {
      }
    }

    protected override void Dispose(bool disposing)
    {
      if (disposing && this.components != null)
        this.components.Dispose();
      base.Dispose(disposing);
    }

    private void InitializeComponent()
    {
      ComponentResourceManager componentResourceManager = new ComponentResourceManager(typeof (FormBlockClients));
      this.groupBox1 = new GroupBox();
      this.listBlocked = new ListBox();
      this.btnDelete = new Button();
      this.btnAdd = new Button();
      this.label1 = new Label();
      this.txtBlock = new TextBox();
      this.groupBox1.SuspendLayout();
      this.SuspendLayout();
      this.groupBox1.Controls.Add((Control) this.listBlocked);
      this.groupBox1.Controls.Add((Control) this.btnDelete);
      this.groupBox1.Controls.Add((Control) this.btnAdd);
      this.groupBox1.Controls.Add((Control) this.label1);
      this.groupBox1.Controls.Add((Control) this.txtBlock);
      this.groupBox1.Location = new Point(12, 12);
      this.groupBox1.Name = "groupBox1";
      this.groupBox1.Size = new Size(424, 355);
      this.groupBox1.TabIndex = 4;
      this.groupBox1.TabStop = false;
      this.groupBox1.Text = "Block By HWID or IP";
      this.listBlocked.DataBindings.Add(new Binding("Name", (object) Server.Properties.Settings.Default, "txtBlocked", true, DataSourceUpdateMode.OnPropertyChanged));
      this.listBlocked.FormattingEnabled = true;
      this.listBlocked.ItemHeight = 20;
      this.listBlocked.Location = new Point(6, 165);
      this.listBlocked.Name = Server.Properties.Settings.Default.txtBlocked;
      this.listBlocked.SelectionMode = SelectionMode.MultiSimple;
      this.listBlocked.Size = new Size(290, 184);
      this.listBlocked.TabIndex = 4;
      this.btnDelete.Location = new Point(352, 165);
      this.btnDelete.Name = "btnDelete";
      this.btnDelete.Size = new Size(57, 23);
      this.btnDelete.TabIndex = 3;
      this.btnDelete.Text = "-";
      this.btnDelete.UseVisualStyleBackColor = true;
      this.btnDelete.Click += new EventHandler(this.BtnDelete_Click);
      this.btnAdd.Location = new Point(352, 86);
      this.btnAdd.Name = "btnAdd";
      this.btnAdd.Size = new Size(57, 23);
      this.btnAdd.TabIndex = 2;
      this.btnAdd.Text = "+";
      this.btnAdd.UseVisualStyleBackColor = true;
      this.btnAdd.Click += new EventHandler(this.BtnAdd_Click);
      this.label1.AutoSize = true;
      this.label1.Location = new Point(6, 51);
      this.label1.Name = "label1";
      this.label1.Size = new Size(135, 20);
      this.label1.TabIndex = 1;
      this.label1.Text = "Insert HWID or IP";
      this.txtBlock.Location = new Point(10, 87);
      this.txtBlock.Name = "txtBlock";
      this.txtBlock.Size = new Size(286, 26);
      this.txtBlock.TabIndex = 0;
      this.AutoScaleDimensions = new SizeF(9f, 20f);
      this.AutoScaleMode = AutoScaleMode.Font;
      this.ClientSize = new Size(448, 379);
      this.Controls.Add((Control) this.groupBox1);
      this.Icon = (Icon) componentResourceManager.GetObject("$this.Icon");
      this.Name = nameof (FormBlockClients);
      this.StartPosition = FormStartPosition.CenterParent;
      this.Text = "Block Clients | AsyncRAT";
      this.FormClosed += new FormClosedEventHandler(this.FormBlockClients_FormClosed);
      this.Load += new EventHandler(this.FormBlockClients_Load);
      this.groupBox1.ResumeLayout(false);
      this.groupBox1.PerformLayout();
      this.ResumeLayout(false);
    }
  }
}
