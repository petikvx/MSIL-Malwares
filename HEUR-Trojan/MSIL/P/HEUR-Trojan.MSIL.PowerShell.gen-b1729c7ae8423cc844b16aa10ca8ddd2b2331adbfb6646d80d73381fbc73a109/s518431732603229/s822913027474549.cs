// Decompiled with JetBrains decompiler
// Type: s518431732603229.s822913027474549
// Assembly: s968508024776124, Version=2.0.47.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
// MVID: E3596912-35E7-405B-A05A-F5F12AB5E292
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.04\HEUR-Trojan.MSIL.PowerShell.gen-b1729c7ae8423cc844b16aa10ca8ddd2b2331adbfb6646d80d73381fbc73a109.exe

using s058168917651533;
using s077414222832753;
using s100454021393476;
using s209713647475233;
using s220824736514050;
using s284387309316892;
using s307803604527793;
using s340632873196112;
using s353195373616777;
using s356530178478151;
using s430663705211726;
using s432851493392539;
using s442252528567994;
using s456798297444311;
using s463576579707946;
using s476398261269100;
using s487578677884023;
using s528813736053581;
using s535820167059183;
using s551269714710412;
using s573174190489126;
using s590103588881529;
using s622674294077287;
using s651029396580935;
using s686708834606903;
using s719272214711671;
using s743898255106522;
using s863705558192595;
using s874166642857481;
using s928707304529159;
using s935466933889679;
using s962360155664524;
using System;
using System.Collections.Generic;

namespace s518431732603229
{
  public class s822913027474549
  {
    public bool s929217383491123;
    public bool s111788958755790 = true;
    public bool s210607162959410;
    private s893180362873945 s624261562292334;
    private GrowableArray<double> s347054526337459;
    private s279484925738041[] s158742669569410;
    private GrowableArray<List<s124232551204041>> s366164711289021;
    private s822913027474549.s099773549125804[] s225323922459100;
    private s124232551204041 s560531374625228;
    private s302029464250094 s342890240784513;
    private s953925013719849 s569804130457484;
    private s435790585148060 s000799747852974;
    private Dictionary<double, s275977756270514> s729464342224657;
    private s275977756270514 s164981649356285;
    private s275977756270514 s739243370745014;
    private s220899226225010 s367736770096268;

    public s822913027474549(s953925013719849 eventLog, s435790585148060 symbolReader)
    {
      this.s569804130457484 = eventLog;
      this.s000799747852974 = symbolReader;
      this.s225323922459100 = new s822913027474549.s099773549125804[eventLog.s132713297009023.s141151785930897];
      this.s929217383491123 = true;
      this.s210607162959410 = true;
    }

    public void s851555149620392(
      s302029464250094 s103340528054959,
      s473104975773947 s405141268041502 = null)
    {
      this.s342890240784513 = s103340528054959;
      this.s560531374625228 = new s124232551204041((s293547439506271) s103340528054959);
      this.s729464342224657 = new Dictionary<double, s275977756270514>(10);
      this.s164981649356285 = s103340528054959.s669246881012685.s092839873163377("UNMANAGED_CODE_TIME");
      this.s739243370745014 = s103340528054959.s669246881012685.s092839873163377("CPU_TIME");
      s993604466763239 source = s405141268041502 == null ? this.s569804130457484.s427461272038725.s300461368285923() : s405141268041502.s300461368285923();
      if (this.s210607162959410)
        this.s929217383491123 = true;
      if (this.s929217383491123)
      {
        this.s367736770096268 = new s220899226225010(source, this.s000799747852974);
        this.s367736770096268.s111049446127162 += (Action<s946499924469656, s034852122986107>) ((s828493344928500, s938644077024574) =>
        {
          s124232551204041 s560531374625228 = this.s560531374625228;
          s560531374625228.s084801687846570 = (float) (s828493344928500.s801763368107737 - s828493344928500.s123054722985396);
          s560531374625228.s413641156979027 = s828493344928500.s123054722985396;
          s560531374625228.s953068594617511 = this.s367736770096268.s813570766033951(this.s342890240784513, s828493344928500, this.s283519312826823(s938644077024574, s938644077024574.s294168149113671(), true));
          s275977756270514 s249187515290763 = this.s342890240784513.s669246881012685.s092839873163377("AWAIT_TIME");
          s560531374625228.s953068594617511 = this.s342890240784513.s669246881012685.s649303816154062(s249187515290763, s560531374625228.s953068594617511);
          this.s342890240784513.s229179402187166(s560531374625228);
          if (this.s158742669569410 == null)
            return;
          this.s457103764171398(s828493344928500, s938644077024574);
        });
        s727338593376591 s727338593376591 = new s727338593376591((s470725726477034) source);
        s727338593376591.s295862221401719 += new Action<s016585700558603>(this.s410966412262844);
        s727338593376591.s190451239879597 += new Action<s380368361434121>(this.s410966412262844);
        s727338593376591.s266472629079051 += new Action<s939059655648208>(this.s410966412262844);
        s727338593376591.s303673582263043 += new Action<s347325148631385>(this.s410966412262844);
        s727338593376591.s354824212716217 += new Action<s521475773088156>(this.s384761915697725);
      }
      if (this.s210607162959410)
      {
        this.s624261562292334 = new s893180362873945(source, this.s367736770096268);
        this.s158742669569410 = new s279484925738041[this.s569804130457484.s132713297009023.s141151785930897];
        this.s367736770096268.s472880049069720 += (Action<s946499924469656, s034852122986107>) ((s485505343506483, s677118599343744) =>
        {
          s279484925738041 s496745281938986 = this.s624261562292334.s683310054091943(s485505343506483.s261611955093733, s677118599343744);
          this.s282645666578994(s485505343506483.s261611955093733, s496745281938986, s677118599343744);
        });
        this.s367736770096268.s141768120640415 += (Action<s946499924469656, s034852122986107, s399735979708807>) ((s821927825135582, s466936098947780, s167935545695149) =>
        {
          s279484925738041 s496745281938986 = this.s624261562292334.s683310054091943(s167935545695149, s466936098947780);
          this.s282645666578994(s167935545695149, s496745281938986, s466936098947780);
        });
        this.s624261562292334.s985766746605060 += (Action<s279484925738041, s034852122986107>) ((s896766785042609, s036591760279898) =>
        {
          if (s896766785042609.s167907916999195 != null)
          {
            this.s282645666578994(s036591760279898.s294168149113671(), s896766785042609, s036591760279898);
          }
          else
          {
            this.s347054526337459.Set((int) s896766785042609.s725513090053148, -1.0);
            this.s158742669569410[(int) s036591760279898.s294168149113671().s519833341027850] = s896766785042609;
          }
        });
        this.s624261562292334.s158165747904478 += (Action<s279484925738041, s034852122986107>) ((s671289904670679, s379613941497415) =>
        {
          if (s671289904670679.s167907916999195 != null)
            return;
          double s877606929958520 = this.s347054526337459.Get((int) s671289904670679.s725513090053148);
          if (0.0 < s877606929958520)
            this.s331483056363667(s671289904670679, s877606929958520, s379613941497415);
          List<s124232551204041> s124232551204041List = this.s366164711289021.Get((int) s671289904670679.s725513090053148);
          if (s124232551204041List != null)
          {
            foreach (s124232551204041 s038351975629557 in s124232551204041List)
              this.s342890240784513.s229179402187166(s038351975629557);
            this.s366164711289021.Set((int) s671289904670679.s725513090053148, (List<s124232551204041>) null);
          }
          this.s347054526337459.Set((int) s671289904670679.s725513090053148, 0.0);
          this.s158742669569410[(int) s379613941497415.s294168149113671().s519833341027850] = (s279484925738041) null;
        });
      }
      source.s590853507783886.s063115370896926 += new Action<s696635378718225>(this.s410966412262844);
      source.s590853507783886.s155874810414582 += new Action<s533916356010803>(this.s410966412262844);
      new s721791185263115((s470725726477034) source).s075598013593125 += new Action<s423434614220401>(this.s410966412262844);
      if (this.s111788958755790)
        source.s172105390192914.s364739463586962 += (Action<s034852122986107>) (s927233901421756 =>
        {
          if (!s820276167648377.s195707778036609(s927233901421756.s066186047870744) || s927233901421756.s066186047870744 == s516912170260088.s038302504017622 && ((s076337548137908) 140 > s927233901421756.s228250182984697 || s927233901421756.s228250182984697 > (s076337548137908) 143) || s927233901421756.s066186047870744 == s721791185263115.s743597547096968 || s927233901421756.s066186047870744 == s727338593376591.s606827089803584 || s927233901421756.s228250182984697 == (s076337548137908) 65534)
            return;
          s399735979708807 s399735979708807 = s927233901421756.s294168149113671();
          if (s399735979708807 == null)
            return;
          s457867646003930 s506535691979223 = this.s178458788308822(s927233901421756, s399735979708807);
          string[] s219032973832450 = s927233901421756.s219032973832450;
          for (int s875929714672072 = 0; s875929714672072 < s219032973832450.Length; ++s875929714672072)
            s506535691979223 = this.s342890240784513.s669246881012685.s649303816154062(this.s342890240784513.s669246881012685.s092839873163377("EventData: " + s219032973832450[s875929714672072] + "=" + s927233901421756.s838058044206693(s875929714672072)), s506535691979223);
          s457867646003930 s183366479668561 = this.s342890240784513.s669246881012685.s649303816154062(this.s342890240784513.s669246881012685.s092839873163377("EventName: " + s927233901421756.s793685740620352 + "/" + s927233901421756.s463729521376906), s506535691979223);
          // ISSUE: reference to a compiler-generated method
          ((s259963864345048.s175390488612476) ref this.s225323922459100[(int) s399735979708807.s519833341027850]).s357202159763306(s927233901421756.s739924403627474, s183366479668561, s399735979708807, this, false);
        });
      source.s227650494626187();
      this.s342890240784513.s388497926082394();
      this.s225323922459100 = (s822913027474549.s099773549125804[]) null;
    }

    private void s457103764171398(
      s946499924469656 s052802038272694,
      s034852122986107 s407019287035825)
    {
      s279484925738041 s279484925738041 = this.s624261562292334.s884692504184197(s052802038272694);
      if (s279484925738041 == null)
        return;
      while (s279484925738041.s167907916999195 != null)
        s279484925738041 = s279484925738041.s167907916999195;
      if (0.0 <= this.s347054526337459.Get((int) s279484925738041.s725513090053148))
        this.s347054526337459.Set((int) s279484925738041.s725513090053148, s407019287035825.s739924403627474);
      List<s124232551204041> s124232551204041List = this.s366164711289021.Get((int) s279484925738041.s725513090053148);
      if (s124232551204041List == null)
        return;
      int index1;
      int index2;
      for (index1 = s124232551204041List.Count; 0 < index1; index1 = index2)
      {
        index2 = index1 - 1;
        s124232551204041 s124232551204041 = s124232551204041List[index2];
        if (s052802038272694.s123054722985396 > s124232551204041.s413641156979027 + (double) s124232551204041.s084801687846570)
          break;
      }
      int count = s124232551204041List.Count - index1;
      if (count <= 0)
        return;
      s124232551204041List.RemoveRange(index1, count);
    }

    private void s282645666578994(
      s399735979708807 s753827025360661,
      s279484925738041 s496745281938986,
      s034852122986107 s626788052770107)
    {
      if (s496745281938986 != null)
      {
        while (s496745281938986.s167907916999195 != null)
          s496745281938986 = s496745281938986.s167907916999195;
      }
      s279484925738041 s279484925738041 = this.s158742669569410[(int) s753827025360661.s519833341027850];
      if (s279484925738041 == s496745281938986)
        return;
      if (s279484925738041 != null)
      {
        double num1 = this.s347054526337459.Get((int) s279484925738041.s725513090053148);
        if (num1 < 0.0)
        {
          double num2 = num1 + 1.0;
          if (num2 == 0.0)
            num2 = s626788052770107.s739924403627474;
          this.s347054526337459.Set((int) s279484925738041.s725513090053148, num2);
        }
      }
      this.s158742669569410[(int) s753827025360661.s519833341027850] = s496745281938986;
      if (s496745281938986 == null)
        return;
      double s877606929958520 = this.s347054526337459.Get((int) s496745281938986.s725513090053148);
      if (0.0 < s877606929958520)
      {
        this.s331483056363667(s496745281938986, s877606929958520, s626788052770107);
        s877606929958520 = 0.0;
      }
      double num = s877606929958520 - 1.0;
      this.s347054526337459.Set((int) s496745281938986.s725513090053148, num);
    }

    private void s331483056363667(
      s279484925738041 s081170200348731,
      double s877606929958520,
      s034852122986107 s050149089704206)
    {
      if (s081170200348731.s389227787780665)
        return;
      double num = s050149089704206.s739924403627474 - s877606929958520;
      if (num < 1.0)
        return;
      s124232551204041 s124232551204041 = new s124232551204041((s293547439506271) this.s342890240784513);
      s124232551204041.s084801687846570 = (float) num;
      s124232551204041.s413641156979027 = s877606929958520;
      s457867646003930 s506535691979223 = this.s624261562292334.s583231651737669(this.s342890240784513, s081170200348731, s050149089704206.s497022301119579());
      s457867646003930 s457867646003930 = this.s342890240784513.s669246881012685.s649303816154062(this.s342890240784513.s669246881012685.s092839873163377("UNKNOWN_ASYNC"), s506535691979223);
      s124232551204041.s953068594617511 = s457867646003930;
      List<s124232551204041> s124232551204041List = this.s366164711289021.Get((int) s081170200348731.s725513090053148);
      if (s124232551204041List == null)
      {
        s124232551204041List = new List<s124232551204041>();
        this.s366164711289021.Set((int) s081170200348731.s725513090053148, s124232551204041List);
      }
      s124232551204041List.Add(s124232551204041);
    }

    private void s410966412262844(s034852122986107 s688033741945515)
    {
      s399735979708807 s399735979708807 = s688033741945515.s294168149113671();
      if (s399735979708807 == null)
        return;
      s457867646003930 s183366479668561 = this.s178458788308822(s688033741945515, s399735979708807);
      bool s972204740976905 = !(s688033741945515 is s423434614220401) || ((s423434614220401) s688033741945515).s425456987665750 == s125804412966528.Managed;
      // ISSUE: reference to a compiler-generated method
      ((s259963864345048.s175390488612476) ref this.s225323922459100[(int) s399735979708807.s519833341027850]).s357202159763306(s688033741945515.s739924403627474, s183366479668561, s399735979708807, this, s972204740976905);
    }

    private void s384761915697725(s034852122986107 s838493516805850)
    {
      if (this.s367736770096268 == null)
        return;
      s399735979708807 s399735979708807 = s838493516805850.s294168149113671();
      if (s399735979708807 == null)
        return;
      s457867646003930 s183366479668561 = this.s367736770096268.s813570766033951(this.s342890240784513, this.s367736770096268.s566699301308554(s399735979708807), this.s283519312826823(s838493516805850, s838493516805850.s294168149113671()));
      // ISSUE: reference to a compiler-generated method
      ((s259963864345048.s175390488612476) ref this.s225323922459100[(int) s399735979708807.s519833341027850]).s357202159763306(s838493516805850.s739924403627474, s183366479668561, s399735979708807, this, true);
    }

    private s457867646003930 s178458788308822(
      s034852122986107 s818908506769319,
      s399735979708807 s351109455956913)
    {
      return this.s367736770096268.s068220897381137(this.s342890240784513, s818908506769319, this.s283519312826823(s818908506769319, s351109455956913));
    }

    private Func<s399735979708807, s457867646003930> s283519312826823(
      s034852122986107 s025329292035540,
      s399735979708807 s160798501005146,
      bool s789137454368959 = false)
    {
      // ISSUE: variable of a compiler-generated type
      s822913027474549.s904899111955947 s904899111955947 = (s822913027474549.s904899111955947) new s822913027474549.s099773549125804();
      ((s822913027474549.s099773549125804) s904899111955947).s096800103389618 = this;
      // ISSUE: reference to a compiler-generated field
      s904899111955947.s275701377031324 = s160798501005146;
      // ISSUE: reference to a compiler-generated field
      s904899111955947.s274226433086236 = s789137454368959;
      // ISSUE: reference to a compiler-generated method
      return new Func<s399735979708807, s457867646003930>(s904899111955947.s966875649084742);
    }

    private struct s099773549125804
    {
      internal s457867646003930 s498010759612798;
      internal double s223792428875059;
      private s457867646003930 s847103996564388;
      public s822913027474549 s096800103389618;

      public void s058997896601677(
        double s742163465369490,
        s399735979708807 s739159850755314,
        s822913027474549 s615651833667928)
      {
        if (this.s223792428875059 <= 0.0)
          return;
        s124232551204041 s560531374625228 = s615651833667928.s560531374625228;
        s560531374625228.s084801687846570 = (float) (s742163465369490 - this.s223792428875059);
        s560531374625228.s413641156979027 = this.s223792428875059;
        s275977756270514 s739243370745014 = s615651833667928.s739243370745014;
        s560531374625228.s953068594617511 = this.s847103996564388;
        s560531374625228.s953068594617511 = s615651833667928.s342890240784513.s669246881012685.s649303816154062(s739243370745014, s560531374625228.s953068594617511);
        s615651833667928.s342890240784513.s229179402187166(s560531374625228);
      }

      public void s829291339178008(
        double s213098184310020,
        s399735979708807 s442867976338266,
        s822913027474549 s659492028113964)
      {
        // ISSUE: cast to a reference type
        // ISSUE: explicit reference operation
        // ISSUE: reference to a compiler-generated field
        if ((^(s259963864345048.s175390488612476&) ref this).s826900363023899 <= 0.0)
          return;
        s124232551204041 s560531374625228 = s659492028113964.s560531374625228;
        // ISSUE: cast to a reference type
        // ISSUE: explicit reference operation
        // ISSUE: reference to a compiler-generated field
        s560531374625228.s084801687846570 = (float) (s213098184310020 - (^(s259963864345048.s175390488612476&) ref this).s826900363023899);
        // ISSUE: cast to a reference type
        // ISSUE: explicit reference operation
        // ISSUE: reference to a compiler-generated field
        s560531374625228.s413641156979027 = (^(s259963864345048.s175390488612476&) ref this).s826900363023899;
        s275977756270514 s164981649356285 = s659492028113964.s164981649356285;
        s560531374625228.s953068594617511 = this.s498010759612798;
        s560531374625228.s953068594617511 = s659492028113964.s342890240784513.s669246881012685.s649303816154062(s164981649356285, s560531374625228.s953068594617511);
        s659492028113964.s342890240784513.s229179402187166(s560531374625228);
      }

      public bool s895608014180343 => double.IsNegativeInfinity((^(s259963864345048.s175390488612476&) ref this).s826900363023899);

      public bool s969891445500767 => (^(s259963864345048.s175390488612476&) ref this).s826900363023899 < 0.0 && !this.s895608014180343;

      public bool s897956238356876 => 0.0 < (^(s259963864345048.s175390488612476&) ref this).s826900363023899;

      public bool s532449693304781 => (^(s259963864345048.s175390488612476&) ref this).s826900363023899 == 0.0;

      public s099773549125804() => ((object) ref this).\u002Ector();
    }
  }
}
