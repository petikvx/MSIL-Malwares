// Decompiled with JetBrains decompiler
// Type: mmxAH.PathFinder
// Assembly: PermissionTokenFact, Version=1.0.2.2, Culture=neutral, PublicKeyToken=null
// MVID: 0E8B010F-DA1B-42FA-9C31-C1DCAF557A03
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.03\Trojan-Spy.Win32.Noon.bcqm-2f77bf5e4f961cc5be052ad8dc7fd08c90151230df1a0324df453d4e1d3a2056.exe

using System.Collections.Generic;

namespace mmxAH
{
  public class PathFinder
  {
    private GameEngine en;
    private List<short> doneLoc;
    private List<short> curLoc;
    private List<short> nextLoc;
    private List<short> res;

    public PathFinder(GameEngine eng) => this.en = eng;

    public List<short> Find(short startLoc, FuncBoolReturn checkFunc)
    {
      this.doneLoc = new List<short>();
      this.curLoc = new List<short>();
      this.res = new List<short>();
      this.curLoc.Add(startLoc);
      this.doneLoc.Add(startLoc);
      do
      {
        this.nextLoc = new List<short>();
        foreach (short index in this.curLoc)
        {
          if (checkFunc(index))
          {
            this.res.Add(index);
          }
          else
          {
            foreach (short linkedLoc in ((ArchemArea) this.en.locs[(int) index]).GetLinkedLocs())
            {
              if (!this.doneLoc.Contains(linkedLoc))
              {
                this.doneLoc.Add(linkedLoc);
                this.nextLoc.Add(linkedLoc);
              }
            }
          }
        }
        this.curLoc = this.nextLoc;
      }
      while (this.res.Count == 0 && this.curLoc.Count != 0);
      return this.res;
    }
  }
}
