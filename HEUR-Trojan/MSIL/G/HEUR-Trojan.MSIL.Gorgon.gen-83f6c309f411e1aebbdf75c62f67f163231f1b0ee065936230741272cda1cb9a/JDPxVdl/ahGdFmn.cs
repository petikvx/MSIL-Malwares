// Decompiled with JetBrains decompiler
// Type: JDPxVdl.ahGdFmn
// Assembly: gO77Fih, Version=16.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
// MVID: F43F05C3-DF79-4EF2-8C94-619BF1ED6D3E
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.03\HEUR-Trojan.MSIL.Gorgon.gen-83f6c309f411e1aebbdf75c62f67f163231f1b0ee065936230741272cda1cb9a.exe

using \u0030B1Uloa;
using \u0039rrGZD6;
using Ar8hHmr;
using IJFvG06;
using JHRZYjM;
using jz0haJe;
using li9OdoS;
using lmNcOuz;
using Microsoft;
using Microsoft.VisualStudio.Composition;
using Microsoft.VisualStudio.Telemetry;
using N00qQqs;
using OGyMgyW;
using qCz28SP;
using R4qHaNR;
using rLjl8I7;
using System;
using System.Collections.Generic;
using System.Collections.Immutable;
using System.Diagnostics;
using System.Globalization;
using System.IO;
using System.Linq;
using System.Reflection;
using System.Reflection.Metadata;
using System.Reflection.PortableExecutable;
using System.Runtime.CompilerServices;
using System.Text;
using System.Threading;
using System.Threading.Tasks;
using U8zsCil;
using wDXXQb8;
using wHAiWkK;
using xNMEDFl;

namespace JDPxVdl
{
  public sealed class ahGdFmn : IVsExportProviderFactory, IVsExportProviderFactoryHelper
  {
    internal const string tI5xtg7 = "Microsoft.VisualStudio.Default";
    internal const string iUGrsNK = "Microsoft.VisualStudio.Editor";
    private const string BOMeruN = ".cache";
    private const string oAIQt2s = ".catalogs";
    private const string LYN5kBg = ".external";
    private const string zMVNaUd = ".err";
    private const string \u0034ea3FLU = ".scan";
    private const string \u0031mNwgRH = ".delete";
    private static readonly byte[][] Rrl6n5Z = new byte[2][]
    {
      new byte[8]
      {
        (byte) 49,
        (byte) 191,
        (byte) 56,
        (byte) 86,
        (byte) 173,
        (byte) 54,
        (byte) 78,
        (byte) 53
      },
      new byte[8]
      {
        (byte) 183,
        (byte) 122,
        (byte) 92,
        (byte) 86,
        (byte) 25,
        (byte) 52,
        (byte) 224,
        (byte) 137
      }
    };
    private static readonly string[] qo4YYla = new string[1]
    {
      "Microsoft.VisualStudio.Shell.Interop.11.0"
    };
    private readonly Resolver sDOmuT3;
    private readonly TkQNtlR \u00337jD0ml;
    private readonly object ClPWP8f = new object();
    private readonly Dictionary<string, long> KVGRWGL = new Dictionary<string, long>();
    private readonly object RFnf1DB = new object();
    private readonly HashSet<string> c0A19mE = new HashSet<string>();
    private readonly bool iTFWOAN;
    private jUU2Be4 \u0032pEO9Pv;
    private string \u0033SmF6cL;
    private string RLeqxA3;
    private int \u00361HEhRc;
    private string h7NWPIm;
    private List<string> q5al9si;
    private HashSet<string> s6RrnPz;

    public ahGdFmn(jUU2Be4 componentModelHost, bool useSeparateAppDomain = false)
    {
      this.\u0032pEO9Pv = componentModelHost != null ? componentModelHost : throw new ArgumentNullException(nameof (componentModelHost));
      this.iTFWOAN = useSeparateAppDomain;
      this.\u0033SmF6cL = this.\u0032pEO9Pv.e1NwWY8;
      this.RLeqxA3 = Path.Combine(new DirectoryInfo(this.\u0033SmF6cL).Parent.FullName, "MEFCacheBackup");
      this.\u00337jD0ml = new TkQNtlR((IVsExportProviderFactoryHelper) this);
      this.sDOmuT3 = new Resolver((IAssemblyLoader) this.\u00337jD0ml);
    }

    public FIO9B6a \u0038ItE0w9 { get; private set; }

    public ImmutableDictionary<string, long> taEm5dE
    {
      get
      {
        lock (this.ClPWP8f)
          return ImmutableDictionary.CreateRange<string, long>((IEnumerable<KeyValuePair<string, long>>) this.KVGRWGL);
      }
    }

    public ImmutableHashSet<string> GNnOinP
    {
      get
      {
        lock (this.RFnf1DB)
          return ImmutableHashSet.CreateRange<string>((IEnumerable<string>) this.c0A19mE);
      }
    }

    public int NDu6B8T => this.\u00361HEhRc;

    private static long ZWkKncl => \u0036HFRYLK.fe05rpM(Assembly.GetExecutingAssembly().Location);

    private IVsExportProviderFactoryHelper MQLOVPn => (IVsExportProviderFactoryHelper) this;

    private IReadOnlyCollection<string> bqdQhZ3
    {
      get
      {
        if (this.q5al9si == null)
        {
          Stopwatch stopwatch = Stopwatch.StartNew();
          List<string> stringList = new List<string>();
          foreach (string str in this.\u0032pEO9Pv.Z2CqXBk.Distinct<string>((IEqualityComparer<string>) StringComparer.OrdinalIgnoreCase))
          {
            try
            {
              \u0036HFRYLK.fe05rpM(str);
              stringList.Add(str);
            }
            catch (Exception ex)
            {
              U1j2scS.CJDYFbi(this.\u0032pEO9Pv, ex, str);
            }
          }
          this.q5al9si = stringList;
          stopwatch.Stop();
          this.MQLOVPn.AddDurationToDictionary("Duration_GetComponentAssemblies", stopwatch.ElapsedMilliseconds);
        }
        return (IReadOnlyCollection<string>) this.q5al9si;
      }
    }

    [CLSCompliant(false)]
    public Task<IExportProviderFactory> GuaumkL(
      string S2sHErP,
      IProgress<DiscoveryProgress> ZKl3opc = null,
      bool WNPTMLn = true,
      CancellationToken _param4 = default (CancellationToken))
    {
      // ISSUE: variable of a compiler-generated type
      ahGdFmn.\u0035hUR6u7 stateMachine;
      // ISSUE: reference to a compiler-generated field
      stateMachine.n1fJo57 = this;
      // ISSUE: reference to a compiler-generated field
      stateMachine.YchFRoX = S2sHErP;
      // ISSUE: reference to a compiler-generated field
      stateMachine.SWdREv1 = ZKl3opc;
      // ISSUE: reference to a compiler-generated field
      stateMachine.N3Fyjrj = WNPTMLn;
      // ISSUE: reference to a compiler-generated field
      stateMachine.\u00386dKbQw = _param4;
      // ISSUE: reference to a compiler-generated field
      stateMachine.BuvPTIr = AsyncTaskMethodBuilder<IExportProviderFactory>.Create();
      // ISSUE: cast to a reference type
      // ISSUE: explicit reference operation
      // ISSUE: reference to a compiler-generated field
      (^(ahGdFmn.o9aOlYT&) ref stateMachine).fPZipNx = -1;
      // ISSUE: reference to a compiler-generated field
      stateMachine.BuvPTIr.Start<ahGdFmn.\u0035hUR6u7>(ref stateMachine);
      // ISSUE: reference to a compiler-generated field
      return stateMachine.BuvPTIr.Task;
    }

    [CLSCompliant(false)]
    public Task<IExportProviderFactory> yqIC0bv(
      string Unmjg4n,
      CancellationToken Mkr8ahj = default (CancellationToken))
    {
      // ISSUE: variable of a compiler-generated type
      ahGdFmn.opcCT8o stateMachine;
      // ISSUE: reference to a compiler-generated field
      stateMachine.\u003797r3P1 = this;
      // ISSUE: reference to a compiler-generated field
      stateMachine.NkmI6SX = Unmjg4n;
      // ISSUE: reference to a compiler-generated field
      stateMachine.mgwr8MA = Mkr8ahj;
      // ISSUE: reference to a compiler-generated field
      stateMachine.Xth8bPk = AsyncTaskMethodBuilder<IExportProviderFactory>.Create();
      // ISSUE: cast to a reference type
      // ISSUE: explicit reference operation
      // ISSUE: reference to a compiler-generated field
      (^(ahGdFmn.\u0035hUR6u7&) ref stateMachine).dqohPqR = -1;
      // ISSUE: reference to a compiler-generated field
      stateMachine.Xth8bPk.Start<ahGdFmn.opcCT8o>(ref stateMachine);
      // ISSUE: reference to a compiler-generated field
      return stateMachine.Xth8bPk.Task;
    }

    public long? RvL93jC(string vqBQD0Q)
    {
      Requires.NotNull<string>(vqBQD0Q, "catalogName");
      string str = ahGdFmn.KmXyQAW(this.\u0033SmF6cL, vqBQD0Q);
      return File.Exists(str) ? new long?(new FileInfo(str).Length) : new long?();
    }

    public void NXRsRnb(string _param1)
    {
      string[] strArray1 = new string[5]
      {
        ahGdFmn.KmXyQAW(this.\u0033SmF6cL, _param1),
        ahGdFmn.jxy9MtV(this.\u0033SmF6cL, _param1),
        ahGdFmn.WQCv4Fq(this.\u0033SmF6cL, _param1),
        ahGdFmn.a6InOMd(this.\u0033SmF6cL, _param1),
        ahGdFmn.IXlO7G0(this.\u0033SmF6cL, _param1)
      };
      string[] strArray2 = new string[5]
      {
        ahGdFmn.KmXyQAW(this.RLeqxA3, _param1),
        ahGdFmn.jxy9MtV(this.RLeqxA3, _param1),
        ahGdFmn.WQCv4Fq(this.RLeqxA3, _param1),
        ahGdFmn.a6InOMd(this.RLeqxA3, _param1),
        ahGdFmn.IXlO7G0(this.RLeqxA3, _param1)
      };
      if (Directory.Exists(this.RLeqxA3))
      {
        foreach (string BjnapT8 in strArray2)
          ahGdFmn.WILxca1(BjnapT8, (IVsExportProviderFactoryHelper) this);
      }
      else
      {
        try
        {
          Directory.CreateDirectory(this.RLeqxA3);
        }
        catch (Exception ex)
        {
          U1j2scS.CJDYFbi(this.\u0032pEO9Pv, ex, this.RLeqxA3);
        }
      }
      if (Directory.Exists(this.RLeqxA3))
      {
        foreach (string str in strArray1)
        {
          try
          {
            if (File.Exists(str))
              File.Copy(str, Path.Combine(this.RLeqxA3, Path.GetFileName(str)));
          }
          catch (Exception ex)
          {
            U1j2scS.CJDYFbi(this.\u0032pEO9Pv, ex, str);
          }
        }
      }
      foreach (string BjnapT8 in strArray1)
        ahGdFmn.WILxca1(BjnapT8, (IVsExportProviderFactoryHelper) this);
    }

    void IVsExportProviderFactoryHelper.c0pUPGN(
      string ILsp3zm,
      long WQVbGJe)
    {
      string key = ILsp3zm;
      int num = 1;
      lock (this.ClPWP8f)
      {
        for (; this.KVGRWGL.ContainsKey(key) && num < 11; ++num)
          key = string.Format("{0}{1}", (object) key, (object) num);
        if (this.KVGRWGL.ContainsKey(key))
          return;
        this.KVGRWGL[key] = WQVbGJe;
      }
    }

    void IVsExportProviderFactoryHelper.ybvbigz(string PMr0sLw)
    {
      lock (this.RFnf1DB)
      {
        if (this.c0A19mE.Contains(PMr0sLw))
          return;
        this.c0A19mE.Add(PMr0sLw);
      }
    }

    void IVsExportProviderFactoryHelper.xoDxUD8(
      Exception _param1,
      string N5zx50m)
    {
      U1j2scS.CJDYFbi(this.\u0032pEO9Pv, _param1, N5zx50m);
    }

    void IVsExportProviderFactoryHelper.O0HNQ5V(
      \u0037jxjFzS _param1,
      string hikjhdy,
      string vXUSc76,
      \u0033My3VAc[] _param4)
    {
      this.\u0032pEO9Pv.\u0031NgP40w(_param1, hikjhdy, vXUSc76, (IEnumerable<\u0033My3VAc>) _param4);
    }

    void IVsExportProviderFactoryHelper.nT41bqi() => this.\u0032pEO9Pv.\u0039bPR8In();

    private static bool ovtwK61(
      MetadataReader EwouzPj,
      CustomAttribute _param1,
      out StringHandle FtLaGfH,
      out StringHandle c49dc7f)
    {
      EntityHandle constructor = ((CustomAttribute) ref _param1).Constructor;
      HandleKind kind = ((EntityHandle) ref constructor).Kind;
      if (kind != 6)
      {
        if (kind == 10)
        {
          MemberReference memberReference = EwouzPj.GetMemberReference(MemberReferenceHandle.op_Explicit(constructor));
          EntityHandle parent = ((MemberReference) ref memberReference).Parent;
          if (((EntityHandle) ref parent).Kind == 1)
          {
            TypeReference typeReference = EwouzPj.GetTypeReference(TypeReferenceHandle.op_Explicit(parent));
            FtLaGfH = ((TypeReference) ref typeReference).Namespace;
            c49dc7f = ((TypeReference) ref typeReference).Name;
            return true;
          }
        }
        FtLaGfH = new StringHandle();
        c49dc7f = new StringHandle();
        return false;
      }
      MethodDefinition methodDefinition = EwouzPj.GetMethodDefinition(MethodDefinitionHandle.op_Explicit(constructor));
      TypeDefinition typeDefinition = EwouzPj.GetTypeDefinition(((MethodDefinition) ref methodDefinition).GetDeclaringType());
      FtLaGfH = ((TypeDefinition) ref typeDefinition).Namespace;
      c49dc7f = ((TypeDefinition) ref typeDefinition).Name;
      return true;
    }

    private static void qDS7uOb(
      MetadataReader AmY8lLk,
      CustomAttribute xtD0Muh,
      ref string OGKufrw)
    {
      EntityHandle constructor = ((CustomAttribute) ref xtD0Muh).Constructor;
      HandleKind kind = ((EntityHandle) ref constructor).Kind;
      BlobHandle signature;
      if (kind != 6)
      {
        if (kind != 10)
          return;
        MemberReference memberReference = AmY8lLk.GetMemberReference(MemberReferenceHandle.op_Explicit(constructor));
        signature = ((MemberReference) ref memberReference).Signature;
      }
      else
      {
        MethodDefinition methodDefinition = AmY8lLk.GetMethodDefinition(MethodDefinitionHandle.op_Explicit(constructor));
        signature = ((MethodDefinition) ref methodDefinition).Signature;
      }
      BlobReader blobReader1 = AmY8lLk.GetBlobReader(signature);
      BlobReader blobReader2 = AmY8lLk.GetBlobReader(((CustomAttribute) ref xtD0Muh).Value);
      if (((BlobReader) ref blobReader2).ReadUInt16() != (ushort) 1)
        return;
      SignatureHeader signatureHeader = ((BlobReader) ref blobReader1).ReadSignatureHeader();
      int num;
      if (((SignatureHeader) ref signatureHeader).Kind != null || ((SignatureHeader) ref signatureHeader).IsGeneric || !((BlobReader) ref blobReader1).TryReadCompressedInteger(ref num) || num < 1 || ((BlobReader) ref blobReader1).ReadSignatureTypeCode() != 1 || ((BlobReader) ref blobReader1).ReadSignatureTypeCode() != 14)
        return;
      OGKufrw = ((BlobReader) ref blobReader2).ReadSerializedString();
    }

    private static Task KfGYUMT(
      string Yrur6qk,
      string _param1,
      RuntimeComposition BqtBR3O,
      CancellationToken u0O6Pek)
    {
      // ISSUE: variable of a compiler-generated type
      ahGdFmn.WYP9FP9 stateMachine;
      // ISSUE: reference to a compiler-generated field
      stateMachine.BqQPOYD = Yrur6qk;
      // ISSUE: reference to a compiler-generated field
      stateMachine.JucxXfi = _param1;
      // ISSUE: reference to a compiler-generated field
      stateMachine.CgK9che = BqtBR3O;
      // ISSUE: reference to a compiler-generated field
      stateMachine.pO169cq = u0O6Pek;
      // ISSUE: reference to a compiler-generated field
      stateMachine.WItSs9N = AsyncTaskMethodBuilder.Create();
      // ISSUE: cast to a reference type
      // ISSUE: explicit reference operation
      // ISSUE: reference to a compiler-generated field
      (^(ahGdFmn.opcCT8o&) ref stateMachine).stYjVn0 = -1;
      // ISSUE: reference to a compiler-generated field
      stateMachine.WItSs9N.Start<ahGdFmn.WYP9FP9>(ref stateMachine);
      // ISSUE: reference to a compiler-generated field
      return stateMachine.WItSs9N.Task;
    }

    private static void sIn3JVH(
      string xQvY9b0,
      string JWMzkAd,
      ComposableCatalog nvuKAva,
      CompositionConfiguration TmuAFag,
      CancellationToken WKLO1kg)
    {
      string str1 = Path.Combine(Path.GetTempPath(), Path.GetRandomFileName());
      try
      {
        using (TextWriter textWriter = (TextWriter) new StreamWriter(str1))
        {
          if (nvuKAva.DiscoveredParts.DiscoveryErrors.Count > 0)
          {
            textWriter.WriteLine("----- Catalog construction errors -----");
            int num = 0;
            foreach (Exception discoveryError in nvuKAva.DiscoveredParts.DiscoveryErrors)
            {
              WKLO1kg.ThrowIfCancellationRequested();
              textWriter.WriteLine("Error #{0}", (object) ++num);
              textWriter.WriteLine((object) discoveryError);
              if (discoveryError.InnerException is ReflectionTypeLoadException innerException)
              {
                foreach (Exception loaderException in innerException.LoaderExceptions)
                  textWriter.WriteLine((object) loaderException);
              }
            }
          }
          int num1 = 1;
          foreach (IReadOnlyCollection<ComposedPartDiagnostic> compositionError in (IEnumerable<IReadOnlyCollection<ComposedPartDiagnostic>>) TmuAFag.CompositionErrors)
          {
            WKLO1kg.ThrowIfCancellationRequested();
            textWriter.WriteLine(string.Format((IFormatProvider) CultureInfo.CurrentCulture, "----- CompositionError level {0} ------", (object) num1++));
            foreach (ComposedPartDiagnostic composedPartDiagnostic in (IEnumerable<ComposedPartDiagnostic>) compositionError)
            {
              textWriter.WriteLine(composedPartDiagnostic.Message);
              foreach (ComposedPart part in (IEnumerable<ComposedPart>) composedPartDiagnostic.Parts)
                textWriter.WriteLine(string.Format((IFormatProvider) CultureInfo.CurrentCulture, "   part definition {0}", (object) part.Definition.Type));
              textWriter.WriteLine();
            }
          }
        }
        string str2 = ahGdFmn.a6InOMd(JWMzkAd, xQvY9b0);
        File.Delete(str2);
        File.Move(str1, str2);
      }
      catch
      {
        File.Delete(str1);
        throw;
      }
    }

    private static bool \u0030ueJk02(
      IReadOnlyCollection<string> xER9CEu,
      IReadOnlyCollection<string> sui7Nb6,
      IReadOnlyDictionary<string, JV1WxGp> KSS81U8,
      IReadOnlyDictionary<string, JV1WxGp> yrvS1uI)
    {
      if (xER9CEu != null && xER9CEu.Any<string>() || sui7Nb6 != null && sui7Nb6.Any<string>())
        return false;
      if (KSS81U8 == null || !KSS81U8.Any<KeyValuePair<string, JV1WxGp>>())
        return true;
      if (yrvS1uI == null || !yrvS1uI.Any<KeyValuePair<string, JV1WxGp>>())
        return false;
      foreach (KeyValuePair<string, JV1WxGp> keyValuePair in (IEnumerable<KeyValuePair<string, JV1WxGp>>) KSS81U8)
      {
        JV1WxGp jv1WxGp1 = keyValuePair.Value;
        JV1WxGp jv1WxGp2;
        \u0034GW7en3 obj1;
        \u0034GW7en3 obj2;
        if (!yrvS1uI.TryGetValue(keyValuePair.Key, out jv1WxGp2) || jv1WxGp1.kg2RNJv.TryGetValue(jv1WxGp1.mmDxEet, out obj1) && jv1WxGp2.kg2RNJv.TryGetValue(jv1WxGp2.mmDxEet, out obj2) && obj1.StICnaq != obj2.StICnaq || !jv1WxGp1.KWbr0KE.Equals(jv1WxGp2.KWbr0KE))
          return false;
      }
      return true;
    }

    private static ImmutableHashSet<string> pLV91N5(
      string KW9zMRW,
      IEnumerable<string> vvanfo1,
      IVsExportProviderFactoryHelper _param2,
      bool vwG4k9I = false)
    {
      Requires.NotNull<IEnumerable<string>>(vvanfo1, "allMefAssemblyPaths");
      Requires.NotNullOrEmpty(KW9zMRW, "catalogName");
      ImmutableHashSet<string>.Builder builder = ImmutableHashSet.CreateBuilder<string>((IEqualityComparer<string>) StringComparer.OrdinalIgnoreCase);
      foreach (string evSl3Zo in vvanfo1)
      {
        HashSet<string> stringSet;
        if (ahGdFmn.yF8gMN8(evSl3Zo, vwG4k9I, _param2, out stringSet) && stringSet.Contains(KW9zMRW))
          builder.Add(evSl3Zo);
      }
      return ImmutableHashSet.ToImmutableHashSet<string>((IEnumerable<string>) builder);
    }

    private static bool yF8gMN8(
      string evSl3Zo,
      bool MWb555g,
      IVsExportProviderFactoryHelper hz1aGwh,
      out HashSet<string> _param3)
    {
      _param3 = new HashSet<string>((IEqualityComparer<string>) StringComparer.OrdinalIgnoreCase);
      try
      {
        if (!File.Exists(evSl3Zo))
        {
          if (!MWb555g)
            return false;
          _param3.Add("Microsoft.VisualStudio.Default");
          return true;
        }
        using (FileStream fileStream = File.OpenRead(evSl3Zo))
        {
          using (PEReader peReader = new PEReader((Stream) fileStream))
          {
            MetadataReader metadataReader = PEReaderExtensions.GetMetadataReader(peReader);
            AssemblyDefinition assemblyDefinition = metadataReader.GetAssemblyDefinition();
            CustomAttributeHandleCollection customAttributes = ((AssemblyDefinition) ref assemblyDefinition).GetCustomAttributes();
            foreach (CustomAttributeHandle customAttributeHandle in customAttributes)
            {
              CustomAttribute customAttribute = metadataReader.GetCustomAttribute(customAttributeHandle);
              StringHandle FtLaGfH = new StringHandle();
              StringHandle c49dc7f = new StringHandle();
              if (ahGdFmn.ovtwK61(metadataReader, customAttribute, out FtLaGfH, out c49dc7f))
              {
                MetadataStringComparer stringComparer = metadataReader.StringComparer;
                if (((MetadataStringComparer) ref stringComparer).Equals(FtLaGfH, typeof (DqEqXnT).Namespace))
                {
                  stringComparer = metadataReader.StringComparer;
                  if (((MetadataStringComparer) ref stringComparer).Equals(c49dc7f, typeof (DqEqXnT).Name))
                  {
                    string OGKufrw = (string) null;
                    ahGdFmn.qDS7uOb(metadataReader, customAttribute, ref OGKufrw);
                    if (OGKufrw == "Microsoft.VisualStudio.Editor")
                      OGKufrw = "Microsoft.VisualStudio.Default";
                    if (OGKufrw != null)
                      _param3.Add(OGKufrw);
                  }
                }
              }
            }
            if (_param3.Count == 0)
              _param3.Add("Microsoft.VisualStudio.Default");
          }
        }
      }
      catch (FileNotFoundException ex)
      {
        return false;
      }
      catch (DirectoryNotFoundException ex)
      {
        return false;
      }
      catch (Exception ex)
      {
        hz1aGwh.ReportExceptionToHost(ex, evSl3Zo);
        return false;
      }
      return true;
    }

    private static Task ms8Yw46(
      string WENcOuv,
      string I7b5OEK,
      IReadOnlyDictionary<string, JV1WxGp> _param2,
      IProgress<DiscoveryProgress> ocvalry,
      CancellationToken Z5zsKLv)
    {
      // ISSUE: variable of a compiler-generated type
      ahGdFmn.uWTxka2 stateMachine;
      // ISSUE: reference to a compiler-generated field
      stateMachine.df2fUPk = WENcOuv;
      // ISSUE: reference to a compiler-generated field
      stateMachine.u6tyxoQ = I7b5OEK;
      // ISSUE: reference to a compiler-generated field
      stateMachine.\u0032BtR3db = _param2;
      // ISSUE: reference to a compiler-generated field
      stateMachine.UywIJ1h = ocvalry;
      // ISSUE: reference to a compiler-generated field
      stateMachine.UmcMRiw = Z5zsKLv;
      // ISSUE: reference to a compiler-generated field
      stateMachine.g9Y9fp4 = AsyncTaskMethodBuilder.Create();
      // ISSUE: cast to a reference type
      // ISSUE: explicit reference operation
      // ISSUE: reference to a compiler-generated field
      (^(ahGdFmn.WYP9FP9&) ref stateMachine).MfXvwd3 = -1;
      // ISSUE: reference to a compiler-generated field
      stateMachine.g9Y9fp4.Start<ahGdFmn.uWTxka2>(ref stateMachine);
      // ISSUE: reference to a compiler-generated field
      return stateMachine.g9Y9fp4.Task;
    }

    private static string dxGFnvr(string hcbrO6B, ProcessorArchitecture JmXkgrh, string FBzSHiL)
    {
      try
      {
        AssemblyName assemblyName = new AssemblyName(hcbrO6B);
        foreach (string str1 in ahGdFmn.qo4YYla)
        {
          if (str1.Equals(assemblyName.Name, StringComparison.OrdinalIgnoreCase))
          {
            string str2;
            return \u0036Di2BYV.OoV4Vfu(hcbrO6B, JmXkgrh, out str2) && !string.IsNullOrEmpty(str2) ? str2 : FBzSHiL;
          }
        }
      }
      catch (Exception ex)
      {
        return FBzSHiL;
      }
      return FBzSHiL;
    }

    private static Dictionary<string, List<string>> \u00380kSQsE(
      ComposableCatalog qSZy5A2)
    {
      Dictionary<string, List<string>> dictionary = new Dictionary<string, List<string>>();
      if (qSZy5A2.DiscoveredParts.DiscoveryErrors.Count > 0)
      {
        foreach (PartDiscoveryException discoveryError in qSZy5A2.DiscoveredParts.DiscoveryErrors)
        {
          if (((Exception) discoveryError).InnerException is FileNotFoundException innerException3)
          {
            if (!dictionary.ContainsKey(discoveryError.AssemblyPath))
              dictionary[discoveryError.AssemblyPath] = new List<string>();
            dictionary[discoveryError.AssemblyPath].Add(innerException3.FileName);
          }
          else if (((Exception) discoveryError).InnerException is FileLoadException innerException2)
          {
            if (!dictionary.ContainsKey(discoveryError.AssemblyPath))
              dictionary[discoveryError.AssemblyPath] = new List<string>();
            dictionary[discoveryError.AssemblyPath].Add(innerException2.FileName);
          }
          else if (((Exception) discoveryError).InnerException is ReflectionTypeLoadException innerException1)
          {
            foreach (Exception loaderException in innerException1.LoaderExceptions)
            {
              if (loaderException is FileNotFoundException notFoundException)
              {
                if (!dictionary.ContainsKey(discoveryError.AssemblyPath))
                  dictionary[discoveryError.AssemblyPath] = new List<string>();
                dictionary[discoveryError.AssemblyPath].Add(notFoundException.FileName);
              }
            }
          }
        }
      }
      return dictionary;
    }

    private static Task<ImmutableDictionary<string, JV1WxGp>> fSaIMW2(
      string hHZEMN6,
      string ruJdlmC,
      Resolver X1jFSrU,
      IProgress<DiscoveryProgress> PKcIuhs,
      IVsExportProviderFactoryHelper t1ovWAJ,
      CancellationToken _param5)
    {
      // ISSUE: variable of a compiler-generated type
      ahGdFmn.hCrJb4o stateMachine;
      // ISSUE: reference to a compiler-generated field
      stateMachine.wIqgIOz = hHZEMN6;
      // ISSUE: reference to a compiler-generated field
      stateMachine.ThKA06d = ruJdlmC;
      // ISSUE: reference to a compiler-generated field
      stateMachine.mj1rody = X1jFSrU;
      // ISSUE: reference to a compiler-generated field
      stateMachine.\u00392mwdab = PKcIuhs;
      // ISSUE: reference to a compiler-generated field
      stateMachine.nMCrWt0 = t1ovWAJ;
      // ISSUE: reference to a compiler-generated field
      stateMachine.dIz0taw = _param5;
      // ISSUE: reference to a compiler-generated field
      stateMachine.oJ5IBwU = AsyncTaskMethodBuilder<ImmutableDictionary<string, JV1WxGp>>.Create();
      // ISSUE: cast to a reference type
      // ISSUE: explicit reference operation
      // ISSUE: reference to a compiler-generated field
      (^(ahGdFmn.uWTxka2&) ref stateMachine).duC35o1 = -1;
      // ISSUE: reference to a compiler-generated field
      stateMachine.oJ5IBwU.Start<ahGdFmn.hCrJb4o>(ref stateMachine);
      // ISSUE: reference to a compiler-generated field
      return stateMachine.oJ5IBwU.Task;
    }

    private static ImmutableDictionary<string, JV1WxGp>.Builder vG8JEFF() => ImmutableDictionary.CreateBuilder<string, JV1WxGp>((IEqualityComparer<string>) StringComparer.OrdinalIgnoreCase);

    private static string KmXyQAW(string d4HyWnq, string HLsouCs) => Path.Combine(d4HyWnq, HLsouCs + ".cache");

    private static string jxy9MtV(string Js7VnbD, string N5w0zFe) => Path.Combine(Js7VnbD, N5w0zFe + ".catalogs");

    private static string WQCv4Fq(string um7mE2k, string wjpdfGD) => Path.Combine(um7mE2k, wjpdfGD + ".external");

    private static string IXlO7G0(string _param0, string _param1) => Path.Combine(_param0, _param1 + ".scan");

    private static string a6InOMd(string _param0, string tuJHS7o) => Path.Combine(_param0, tuJHS7o + ".err");

    private static void WILxca1(string BjnapT8, IVsExportProviderFactoryHelper _param1)
    {
      try
      {
        if (!File.Exists(BjnapT8))
          return;
        File.Delete(BjnapT8);
      }
      catch (Exception ex1)
      {
        try
        {
          if (!File.Exists(BjnapT8))
            return;
          File.Move(BjnapT8, ahGdFmn.\u00318rGJhn(BjnapT8));
        }
        catch (IOException ex2)
        {
          _param1?.ReportExceptionToHost((Exception) ex2, BjnapT8);
        }
      }
    }

    private static string \u00318rGJhn(string t1XfpYy) => t1XfpYy + "." + Path.GetRandomFileName() + ".delete";

    private static Task<IReadOnlyDictionary<string, JV1WxGp>> Sr9Abux(
      IReadOnlyCollection<string> I0McFS6,
      IProgress<DiscoveryProgress> yy3vjt7,
      Resolver K9cJBZH,
      IVsExportProviderFactoryHelper _param3,
      CancellationToken b4A7PVT)
    {
      // ISSUE: variable of a compiler-generated type
      ahGdFmn.uTV4MnF stateMachine;
      // ISSUE: reference to a compiler-generated field
      stateMachine.MUSUA4J = I0McFS6;
      // ISSUE: reference to a compiler-generated field
      stateMachine.PRaF5ND = yy3vjt7;
      // ISSUE: reference to a compiler-generated field
      stateMachine.C9WqEKu = K9cJBZH;
      // ISSUE: reference to a compiler-generated field
      stateMachine.h0vLB3d = _param3;
      // ISSUE: reference to a compiler-generated field
      stateMachine.tQrwuAL = b4A7PVT;
      // ISSUE: reference to a compiler-generated field
      stateMachine.uL0WRNg = AsyncTaskMethodBuilder<IReadOnlyDictionary<string, JV1WxGp>>.Create();
      // ISSUE: cast to a reference type
      // ISSUE: explicit reference operation
      // ISSUE: reference to a compiler-generated field
      (^(ahGdFmn.hppuZnd&) ref stateMachine).gZgBdBL = -1;
      // ISSUE: reference to a compiler-generated field
      stateMachine.uL0WRNg.Start<ahGdFmn.uTV4MnF>(ref stateMachine);
      // ISSUE: reference to a compiler-generated field
      return stateMachine.uL0WRNg.Task;
    }

    private void hcJBDQX(string hcVQOKb)
    {
      try
      {
        string path = ahGdFmn.a6InOMd(this.\u0033SmF6cL, hcVQOKb);
        if (File.Exists(path))
          this.h7NWPIm = File.ReadAllText(path);
        else
          this.h7NWPIm = "Error file does not exist";
      }
      catch (IOException ex)
      {
        if (this.\u0032pEO9Pv == null)
          return;
        U1j2scS.CJDYFbi(this.\u0032pEO9Pv, (Exception) ex, (string) null);
      }
    }

    private Task<IExportProviderFactory> U2AcWC9(
      string ezHMef4,
      CancellationToken lL05UwN)
    {
      // ISSUE: variable of a compiler-generated type
      ahGdFmn.JGYSWhk stateMachine;
      // ISSUE: reference to a compiler-generated field
      stateMachine.DBBISqx = this;
      // ISSUE: reference to a compiler-generated field
      stateMachine.nkq8ABb = ezHMef4;
      // ISSUE: reference to a compiler-generated field
      stateMachine.JfR32rl = lL05UwN;
      // ISSUE: reference to a compiler-generated field
      stateMachine.a5LGIw0 = AsyncTaskMethodBuilder<IExportProviderFactory>.Create();
      // ISSUE: cast to a reference type
      // ISSUE: explicit reference operation
      // ISSUE: reference to a compiler-generated field
      (^(ahGdFmn.uTV4MnF&) ref stateMachine).GVWqVlb = -1;
      // ISSUE: reference to a compiler-generated field
      stateMachine.a5LGIw0.Start<ahGdFmn.JGYSWhk>(ref stateMachine);
      // ISSUE: reference to a compiler-generated field
      return stateMachine.a5LGIw0.Task;
    }

    private bool \u0031XPvJZw(Exception VUoQsW1, string _param2)
    {
      // ISSUE: object of a compiler-generated type is created
      // ISSUE: variable of a compiler-generated type
      ahGdFmn.PwIn6X7 pwIn6X7 = (ahGdFmn.PwIn6X7) new ahGdFmn.JGYSWhk();
      // ISSUE: reference to a compiler-generated field
      ((ahGdFmn.JGYSWhk) pwIn6X7).w62g199 = this;
      // ISSUE: reference to a compiler-generated field
      pwIn6X7.gp4XUJt = _param2;
      if (VUoQsW1 is ArgumentException && VUoQsW1.Data != null && VUoQsW1.Data.Contains((object) "InvalidCompositionException"))
      {
        // ISSUE: reference to a compiler-generated method
        TelemetrySessionExtensions.PostFault(TelemetryService.DefaultSession, "vs/platform/extensibilityhosting/invalidcomposition", "Invalid MEF composition", VUoQsW1, new Func<IFaultUtility, int>(pwIn6X7.f2i6zLI));
      }
      return true;
    }

    private void Qp19lCa(string _param1, Dictionary<string, List<string>> kWjJaAM)
    {
      string str1 = ahGdFmn.IXlO7G0(this.\u0033SmF6cL, _param1);
      if (kWjJaAM == null || !kWjJaAM.Any<KeyValuePair<string, List<string>>>())
      {
        try
        {
          File.Delete(str1);
        }
        catch (Exception ex)
        {
          this.\u0032pEO9Pv.\u00340C4Zbq(\u0037jxjFzS.Error, "Unable to delete assembly scanning file.", str1);
        }
      }
      else
      {
        string str2 = Path.Combine(Path.GetTempPath(), Path.GetRandomFileName());
        try
        {
          using (FileStream fileStream = File.OpenWrite(str2))
          {
            using (StreamWriter streamWriter = new StreamWriter((Stream) fileStream))
            {
              foreach (KeyValuePair<string, List<string>> keyValuePair in kWjJaAM)
              {
                if (keyValuePair.Value != null && keyValuePair.Value.Any<string>())
                {
                  StringBuilder stringBuilder = new StringBuilder(keyValuePair.Key);
                  foreach (string str3 in keyValuePair.Value)
                  {
                    stringBuilder.Append(';');
                    stringBuilder.Append(str3);
                  }
                  streamWriter.WriteLine(stringBuilder.ToString());
                }
              }
            }
          }
          File.Delete(str1);
          File.Move(str2, str1);
        }
        catch
        {
          this.\u0032pEO9Pv.\u00340C4Zbq(\u0037jxjFzS.Error, "Error occurred while writing to 'scan cache' file.", str1);
          try
          {
            if (!File.Exists(str2))
              return;
            File.Delete(str2);
          }
          catch
          {
          }
        }
      }
    }

    private bool tJUdmqO(string EwowRnk, out object yuh7zym)
    {
      try
      {
        string path = ahGdFmn.WQCv4Fq(this.\u0033SmF6cL, EwowRnk);
        if (File.Exists(path))
        {
          using (FileStream input = File.OpenRead(path))
          {
            using (BinaryReader binaryReader = new BinaryReader((Stream) input))
            {
              int num = binaryReader.ReadInt32();
              for (int index = 0; index < num; ++index)
              {
                string hcbrO6B = binaryReader.ReadString();
                string str1 = binaryReader.ReadString();
                string str2 = binaryReader.ReadString();
                long ExpectedTimestamp = binaryReader.ReadInt64();
                Guid ExpectedMvid = new Guid(binaryReader.ReadString());
                ProcessorArchitecture processorArchitecture;
                ref ProcessorArchitecture local = ref processorArchitecture;
                if (!Enum.TryParse<ProcessorArchitecture>(str1, out local))
                  processorArchitecture = ProcessorArchitecture.None;
                int JmXkgrh = (int) processorArchitecture;
                string FBzSHiL = str2;
                string str3 = ahGdFmn.dxGFnvr(hcbrO6B, (ProcessorArchitecture) JmXkgrh, FBzSHiL);
                if (ExpectedTimestamp != \u0036HFRYLK.fe05rpM(str3) && ExpectedMvid != U1j2scS.\u0035w3yckb(str3))
                {
                  // ISSUE: object of a compiler-generated type is created
                  yuh7zym = (object) new \u0033hjCdFj<string, Guid, Guid, long, long>(str3, ExpectedMvid, U1j2scS.\u0035w3yckb(str3), ExpectedTimestamp, \u0036HFRYLK.fe05rpM(str3));
                  return false;
                }
              }
            }
          }
        }
      }
      catch (IOException ex)
      {
      }
      catch (UnauthorizedAccessException ex)
      {
      }
      yuh7zym = (object) null;
      return true;
    }

    private bool xUwaoxu(string ZQyu6sy)
    {
      try
      {
        string path = ahGdFmn.IXlO7G0(this.\u0033SmF6cL, ZQyu6sy);
        if (File.Exists(path))
        {
          using (FileStream fileStream = File.OpenRead(path))
          {
            using (StreamReader streamReader = new StreamReader((Stream) fileStream))
            {
              HashSet<string> source = new HashSet<string>((IEqualityComparer<string>) StringComparer.OrdinalIgnoreCase);
              string str;
              while ((str = streamReader.ReadLine()) != null)
              {
                string[] strArray = str.Split(';');
                if (strArray.Length > 1)
                {
                  string nsHRlnZ = strArray[0];
                  bool flag = true;
                  for (int index = 1; index < strArray.Length; ++index)
                  {
                    Assembly assembly = (Assembly) null;
                    string assemblyString = strArray[index];
                    try
                    {
                      assembly = Assembly.Load(assemblyString);
                    }
                    catch (Exception ex)
                    {
                      this.\u0032pEO9Pv.\u00340C4Zbq(\u0037jxjFzS.Error, "Still unable to load MEF component DLL: " + ex.Message, nsHRlnZ);
                    }
                    if (assembly == (Assembly) null)
                    {
                      flag = false;
                      break;
                    }
                  }
                  if (flag)
                    source.Add(nsHRlnZ);
                }
              }
              if (!source.Any<string>())
                return true;
              this.s6RrnPz = source;
              return false;
            }
          }
        }
      }
      catch (IOException ex)
      {
      }
      catch (UnauthorizedAccessException ex)
      {
      }
      return true;
    }

    private List<string> cmzwmgs(string[] H8Vuf9W) => new List<string>(this.\u0032pEO9Pv.oNBjgDM((IEnumerable<string>) H8Vuf9W));

    private bool Iv2r5No(string BnrLrIZ)
    {
      string str = string.Empty;
      TelemetryEvent telemetryEvent = new TelemetryEvent("vs/platform/extensibilityhosting/invalidatedcache");
      Stopwatch stopwatch = Stopwatch.StartNew();
      try
      {
        this.ZM94K3O();
        if (!this.xUwaoxu(BnrLrIZ))
        {
          str = "ValidateAndStoreAssembliesToScanFailed";
          return false;
        }
        string path = ahGdFmn.KmXyQAW(this.\u0033SmF6cL, BnrLrIZ);
        if (!File.Exists(path))
        {
          str = "CompositionCachePathDoesNotExist";
          return false;
        }
        DateTime lastWriteTime = File.GetLastWriteTime(path);
        long wE4Xkrm = this.\u0032pEO9Pv.wE4XKrm;
        if (wE4Xkrm > 0L && DateTime.FromFileTime(wE4Xkrm) > lastWriteTime)
        {
          str = "ClearCache";
          this.NXRsRnb(BnrLrIZ);
          return false;
        }
        long fileTime = this.\u0032pEO9Pv.\u0033Tx9kQI;
        if (fileTime >= 0L && DateTime.FromFileTime(fileTime) > lastWriteTime)
        {
          str = "ConfigurationChange";
          return false;
        }
        object yuh7zym;
        if (this.tJUdmqO(BnrLrIZ, out yuh7zym))
          return true;
        telemetryEvent.Properties["vs.platform.extensibilityhosting.invalidatedcache.diagnostics"] = (object) new TelemetryComplexProperty(yuh7zym);
        str = "ExternalAssembliesChanged";
        return false;
      }
      finally
      {
        stopwatch.Stop();
        this.MQLOVPn.AddDurationToDictionary("Duration_ValidateCache", stopwatch.ElapsedMilliseconds);
        if (!string.IsNullOrEmpty(str))
        {
          telemetryEvent.Properties["vs.platform.extensibilityhosting.invalidatedcache.reason"] = (object) str;
          TelemetryService.DefaultSession.PostEvent(telemetryEvent);
        }
      }
    }

    private void ZM94K3O()
    {
      if (Directory.Exists(this.\u0033SmF6cL))
      {
        foreach (string enumerateFile in Directory.EnumerateFiles(this.\u0033SmF6cL, "*.delete"))
        {
          try
          {
            File.Delete(enumerateFile);
          }
          catch
          {
          }
        }
      }
      if (!Directory.Exists(this.RLeqxA3))
        return;
      foreach (string enumerateFile in Directory.EnumerateFiles(this.RLeqxA3, "*.delete"))
      {
        try
        {
          File.Delete(enumerateFile);
        }
        catch
        {
        }
      }
    }

    [Serializable]
    private struct \u0030dFH71c
    {
      public int TPvBj5K;
      public FIO9B6a \u0037BYsd2u;
      public Dictionary<string, List<string>> MVKqjTg;
      private ahGdFmn ejHarcj;
    }

    private class ecKBYGr : cgmBMbq, IVsExportProviderFactoryHelper
    {
      private ahGdFmn.\u0034IFWXXV \u0034ppCEK9;
      private HashSet<string> tGM2Eyv;
      private HashSet<string> uWtxLD8;
      private string cG3hgGa;

      public string HCjTz4Y => ((ahGdFmn.\u0030dFH71c) this).ejHarcj.\u0033SmF6cL;

      public void \u0039Fd01cM(string Nbp8zAL, long Z0SLcfX) => ((IVsExportProviderFactoryHelper) ((ahGdFmn.\u0030dFH71c) this).ejHarcj).AddDurationToDictionary(Nbp8zAL, Z0SLcfX);

      public void HGxIJmZ(string EqQDnZc) => ((IVsExportProviderFactoryHelper) ((ahGdFmn.\u0030dFH71c) this).ejHarcj).ReportModifiedAssembly(EqQDnZc);

      public void cHDhhwB(Exception _param1, string qpuL0qn) => ((IVsExportProviderFactoryHelper) ((ahGdFmn.\u0030dFH71c) this).ejHarcj).ReportExceptionToHost(_param1, qpuL0qn);

      public void oqk15Lr(
        \u0037jxjFzS NxFLb6M,
        string AbHaHu6,
        string ztbWXgz,
        \u0033My3VAc[] ZdJnlYi)
      {
        ((ahGdFmn.\u0030dFH71c) this).ejHarcj.\u0032pEO9Pv.\u0031NgP40w(NxFLb6M, AbHaHu6, ztbWXgz, (IEnumerable<\u0033My3VAc>) ZdJnlYi);
      }

      public void aJBYk5T() => ((ahGdFmn.\u0030dFH71c) this).ejHarcj.\u0032pEO9Pv.\u0039bPR8In();

      public void xAchLQJ(string y8nmlUE) => ((ahGdFmn.\u0030dFH71c) this).ejHarcj.NXRsRnb(y8nmlUE);

      public List<string> \u00366YwqvK(List<string> C2vhPzl)
      {
        IEnumerable<IGrouping<bool, string>> source = C2vhPzl.GroupBy<string, bool>((Func<string, bool>) (pQwYoeo => this.tGM2Eyv.Contains(pQwYoeo)));
        string[] array = source.Where<IGrouping<bool, string>>((Func<IGrouping<bool, string>, bool>) (S9lGlGP => !S9lGlGP.Key)).SelectMany<IGrouping<bool, string>, string>((Func<IGrouping<bool, string>, IEnumerable<string>>) (bitf8lx => (IEnumerable<string>) bitf8lx)).Where<string>((Func<string, bool>) (qNCcYWX => !this.uWtxLD8.Contains(qNCcYWX))).ToArray<string>();
        IEnumerable<string> first = source.Where<IGrouping<bool, string>>((Func<IGrouping<bool, string>, bool>) (nhxQQ5Z => nhxQQ5Z.Key)).SelectMany<IGrouping<bool, string>, string>((Func<IGrouping<bool, string>, IEnumerable<string>>) (_param1 => (IEnumerable<string>) _param1));
        IEnumerable<string> strings = (IEnumerable<string>) this.mLMXDXF(array);
        IEnumerable<string> second = strings;
        List<string> stringList = new List<string>(first.Concat<string>(second));
        this.tGM2Eyv.UnionWith(strings);
        this.uWtxLD8.UnionWith(((IEnumerable<string>) array).Except<string>(strings, (IEqualityComparer<string>) StringComparer.OrdinalIgnoreCase));
        return stringList;
      }

      public Task<ahGdFmn.\u0030dFH71c> \u0031IC9zOg(
        string k74Wkqk,
        IEnumerable<string> wis2xxu,
        IProgress<DiscoveryProgress> oXEtDMF,
        HashSet<string> WB5sWhB)
      {
        DQGgdAm<ahGdFmn.\u0030dFH71c> Q8BvZYi = new DQGgdAm<ahGdFmn.\u0030dFH71c>(oXEtDMF);
        this.\u0034ppCEK9.NEHuYao(k74Wkqk, wis2xxu, WB5sWhB, Q8BvZYi, CultureInfo.CurrentUICulture);
        return Q8BvZYi.RN9nJ5G;
      }

      public Task<Dictionary<string, List<string>>> qeIDUXF(
        string fonfohA,
        string LU3TPlj,
        IProgress<DiscoveryProgress> GSEajx1)
      {
        DQGgdAm<Dictionary<string, List<string>>> JceUnQ3 = new DQGgdAm<Dictionary<string, List<string>>>(GSEajx1);
        this.\u0034ppCEK9.qneHvon(fonfohA, LU3TPlj, JceUnQ3, CultureInfo.CurrentUICulture);
        return JceUnQ3.RN9nJ5G;
      }

      private List<string> mLMXDXF(string[] _param1) => ((ahGdFmn.\u0030dFH71c) this).ejHarcj.cmzwmgs(_param1);

      [SpecialName]
      public IReadOnlyDictionary<string, hy0JkcH> get_AssembliesAndMetadata() => (IReadOnlyDictionary<string, hy0JkcH>) ((ahGdFmn.\u0034IFWXXV) this).\u00362Xp1Ud.\u0030s60yPL;
    }

    private class \u0034IFWXXV : cgmBMbq
    {
      private ahGdFmn.ecKBYGr SHCqmDe;
      private Dictionary<string, JV1WxGp> tNrdfuo;
      private TkQNtlR \u00362Xp1Ud;
      private Resolver lYbsLZx;
      public AppDomain cOomPbP;

      public IReadOnlyDictionary<string, hy0JkcH> OAS6oNe
      {
        [SpecialName] get => (IReadOnlyDictionary<string, hy0JkcH>) ((ahGdFmn.\u0034IFWXXV) this).\u00362Xp1Ud.\u0030s60yPL;
      }

      public bool UGVTNWV
      {
        get => this.\u00362Xp1Ud.ltyyZJY;
        set => this.\u00362Xp1Ud.ltyyZJY = value;
      }

      public void \u0031pK5oqa(string QwXV0jJ, ahGdFmn.ecKBYGr bumLX3m)
      {
        ((ahGdFmn.ecKBYGr) this).cG3hgGa = QwXV0jJ;
        this.SHCqmDe = bumLX3m;
        this.\u00362Xp1Ud = new TkQNtlR((IVsExportProviderFactoryHelper) bumLX3m);
        this.lYbsLZx = new Resolver((IAssemblyLoader) this.\u00362Xp1Ud);
        this.\u00362Xp1Ud.ltyyZJY = true;
      }

      public void L4FjlBE(Resolver _param1) => this.lYbsLZx = _param1;

      internal static void MV2Ik0C(IEnumerable<ComposableCatalog> Mhv1rds, string xtLT10d)
      {
        Dictionary<AssemblyName, string> dictionary = new Dictionary<AssemblyName, string>((IEqualityComparer<AssemblyName>) fDwNfbE.P8fsYkT);
        string folderPath = Environment.GetFolderPath(Environment.SpecialFolder.Windows);
        foreach (ComposableCatalog mhv1rd in Mhv1rds)
        {
          foreach (AssemblyName inputAssembly in (IEnumerable<AssemblyName>) mhv1rd.GetInputAssemblies())
          {
            byte[] publicKeyToken = inputAssembly.GetPublicKeyToken();
            foreach (IEnumerable<byte> first in ahGdFmn.Rrl6n5Z)
            {
              if (first.SequenceEqual<byte>((IEnumerable<byte>) publicKeyToken))
              {
                string str = U1j2scS.XbAvNfa(inputAssembly);
                if (str.StartsWith(folderPath, StringComparison.OrdinalIgnoreCase))
                  dictionary[inputAssembly] = str;
              }
            }
            foreach (string str1 in ahGdFmn.qo4YYla)
            {
              if (str1.Equals(inputAssembly.Name, StringComparison.OrdinalIgnoreCase))
              {
                string str2 = ahGdFmn.dxGFnvr(inputAssembly.FullName, inputAssembly.ProcessorArchitecture, string.Empty);
                if (string.IsNullOrEmpty(str2))
                  str2 = U1j2scS.XbAvNfa(inputAssembly);
                dictionary[inputAssembly] = str2;
                break;
              }
            }
          }
        }
        if (dictionary.Count <= 0)
          return;
        string str3 = Path.Combine(Path.GetTempPath(), Path.GetRandomFileName());
        try
        {
          using (FileStream output = File.OpenWrite(str3))
          {
            using (BinaryWriter binaryWriter = new BinaryWriter((Stream) output))
            {
              binaryWriter.Write(dictionary.Count);
              foreach (KeyValuePair<AssemblyName, string> keyValuePair in dictionary)
              {
                binaryWriter.Write(keyValuePair.Key.FullName);
                binaryWriter.Write(keyValuePair.Key.ProcessorArchitecture.ToString());
                binaryWriter.Write(keyValuePair.Value);
                binaryWriter.Write(\u0036HFRYLK.fe05rpM(keyValuePair.Value));
                binaryWriter.Write(U1j2scS.\u0035w3yckb(keyValuePair.Value).ToString());
              }
              binaryWriter.Flush();
            }
          }
          File.Delete(xtLT10d);
          File.Move(str3, xtLT10d);
        }
        catch
        {
          File.Delete(str3);
          throw;
        }
      }

      internal void NEHuYao(
        string xtNtbLw,
        IEnumerable<string> JiWui9w,
        HashSet<string> hGW9wKc,
        DQGgdAm<ahGdFmn.\u0030dFH71c> Q8BvZYi,
        CultureInfo lDENLAV)
      {
        // ISSUE: object of a compiler-generated type is created
        // ISSUE: variable of a compiler-generated type
        ahGdFmn.ecKBYGr.\u0035bPMxwx obj = new ahGdFmn.ecKBYGr.\u0035bPMxwx();
        // ISSUE: reference to a compiler-generated field
        obj.GIKR7kY = Q8BvZYi;
        // ISSUE: reference to a compiler-generated field
        ((ahGdFmn.\u0034IFWXXV.aHR6RYI) obj).nkqMnWT = lDENLAV;
        // ISSUE: reference to a compiler-generated field
        ((ahGdFmn.\u0034IFWXXV.aHR6RYI) obj).TxD9CVe = this;
        // ISSUE: reference to a compiler-generated field
        ((ahGdFmn.\u0034IFWXXV.aHR6RYI) obj).mIz5P82 = xtNtbLw;
        // ISSUE: reference to a compiler-generated field
        ((ahGdFmn.\u0034IFWXXV.aHR6RYI) obj).\u0032t2IQcQ = JiWui9w;
        // ISSUE: reference to a compiler-generated field
        ((ahGdFmn.\u0034IFWXXV.aHR6RYI) obj).cYE4qZl = hGW9wKc;
        // ISSUE: reference to a compiler-generated field
        // ISSUE: reference to a compiler-generated method
        ((ahGdFmn.\u0034IFWXXV.aHR6RYI) obj).zHQXYIB = new Progress<DiscoveryProgress>(new Action<DiscoveryProgress>(((ahGdFmn.\u0034IFWXXV.aHR6RYI) obj).oRltdhw));
        // ISSUE: reference to a compiler-generated method
        Task.Run(new Func<Task>(((ahGdFmn.\u0034IFWXXV.aHR6RYI) obj).SOqKHN2));
      }

      internal void qneHvon(
        string ppzyErl,
        string _param2,
        DQGgdAm<Dictionary<string, List<string>>> JceUnQ3,
        CultureInfo yZxqlkc)
      {
        // ISSUE: object of a compiler-generated type is created
        // ISSUE: variable of a compiler-generated type
        ahGdFmn.\u0034IFWXXV.aHR6RYI aHr6Ryi = new ahGdFmn.\u0034IFWXXV.aHR6RYI();
        // ISSUE: reference to a compiler-generated field
        aHr6Ryi.ZDoB7pi = yZxqlkc;
        // ISSUE: reference to a compiler-generated field
        ((ahGdFmn.\u0034IFWXXV.TkOeOoG) aHr6Ryi).\u00323DrKL0 = this;
        // ISSUE: reference to a compiler-generated field
        ((ahGdFmn.\u0034IFWXXV.TkOeOoG) aHr6Ryi).eVmi1I2 = _param2;
        // ISSUE: reference to a compiler-generated field
        ((ahGdFmn.\u0034IFWXXV.TkOeOoG) aHr6Ryi).gjJn6os = ppzyErl;
        // ISSUE: reference to a compiler-generated field
        ((ahGdFmn.\u0034IFWXXV.TkOeOoG) aHr6Ryi).IFLg75m = JceUnQ3;
        if (this.tNrdfuo == null)
          throw new InvalidOperationException();
        // ISSUE: reference to a compiler-generated method
        Task.Run(new Func<Task>(((ahGdFmn.\u0034IFWXXV.TkOeOoG) aHr6Ryi).\u0035Zz0ved));
      }

      private Task<ahGdFmn.\u0030dFH71c> \u0035b9gy6k(
        string MIUSV9A,
        IEnumerable<string> _param2,
        IProgress<DiscoveryProgress> r3V0oyH,
        HashSet<string> _param4,
        CancellationToken Ds52XYP)
      {
        // ISSUE: variable of a compiler-generated type
        ahGdFmn.\u0034IFWXXV.hYCCeRt stateMachine;
        // ISSUE: reference to a compiler-generated field
        stateMachine.WaNzcAi = this;
        // ISSUE: reference to a compiler-generated field
        stateMachine.mvxgKQ1 = MIUSV9A;
        // ISSUE: reference to a compiler-generated field
        stateMachine.Sk5mjzC = _param2;
        // ISSUE: reference to a compiler-generated field
        stateMachine.M5dUSXm = r3V0oyH;
        // ISSUE: reference to a compiler-generated field
        stateMachine.\u0030wk6LD7 = _param4;
        // ISSUE: reference to a compiler-generated field
        stateMachine.t4UAxNA = Ds52XYP;
        // ISSUE: reference to a compiler-generated field
        stateMachine.N3IE1Ka = AsyncTaskMethodBuilder<ahGdFmn.\u0030dFH71c>.Create();
        // ISSUE: cast to a reference type
        // ISSUE: explicit reference operation
        // ISSUE: reference to a compiler-generated field
        (^(ahGdFmn.\u0034IFWXXV.IjfZIOw&) ref stateMachine).bbpvqDY = -1;
        // ISSUE: reference to a compiler-generated field
        stateMachine.N3IE1Ka.Start<ahGdFmn.\u0034IFWXXV.hYCCeRt>(ref stateMachine);
        // ISSUE: reference to a compiler-generated field
        return stateMachine.N3IE1Ka.Task;
      }

      public \u0034IFWXXV()
      {
      }

      public \u0034IFWXXV()
      {
      }
    }
  }
}
