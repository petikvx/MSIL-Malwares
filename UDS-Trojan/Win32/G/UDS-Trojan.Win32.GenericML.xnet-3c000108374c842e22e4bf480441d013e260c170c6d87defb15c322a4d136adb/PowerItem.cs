// Decompiled with JetBrains decompiler
// Type: MiniGames_Team9.PowerItem
// Assembly: DependentHan, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: A86A1B94-F21E-4DD9-9B87-E146CFB070D9
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.07\UDS-Trojan.Win32.GenericML.xnet-3c000108374c842e22e4bf480441d013e260c170c6d87defb15c322a4d136adb.exe

using System;
using System.Drawing;
using System.Windows.Forms;
using System.Windows.Forms.Layout;

namespace MiniGames_Team9
{
  internal class PowerItem : Item
  {
    public PowerItem()
    {
    }

    public PowerItem(PictureBox map)
      : base(map)
    {
      this.timeToDes = 5;
      this.item.Tag = (object) "power";
    }

    public override void CreateItem(PictureBox Map)
    {
      this.timeToDes = 2;
      Random random = new Random();
      int x;
      int y;
      do
      {
        x = random.Next(1, 650);
        y = random.Next(33, 550);
      }
      while (this.IsLocationPlayer(x, y, Map));
      this.item.Parent = (Control) Map;
      this.item.BackColor = Color.Transparent;
      this.item.Location = new Point(x, y);
      Map.Controls.Add((Control) this.item);
      this.time.Interval = 1000;
      this.time.Tick += new EventHandler(((Item) this).tm_Tick);
      this.time.Start();
    }

    private bool IsLocationPlayer(int x, int y, PictureBox Map)
    {
      PictureBox pictureBox = (PictureBox) null;
      foreach (Control control in (ArrangedElementCollection) Map.Controls)
      {
        if (control is PictureBox && object.Equals(control.Tag, (object) "player"))
        {
          pictureBox = (PictureBox) control;
          break;
        }
      }
      return pictureBox != null && x == pictureBox.Left && y == pictureBox.Top;
    }
  }
}
