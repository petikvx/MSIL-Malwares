// Decompiled with JetBrains decompiler
// Type: .
// Assembly: file, Version=11.0.0.0, Culture=neutral, PublicKeyToken=71f2cf7c2509b8fe
// MVID: 1F473243-1123-401F-8099-7648B7C34C41
// Assembly location: C:\Users\Administrateur\Desktop\Virusshare-00005-msil\Trojan-Dropper.Win32.Injector.deqx-3dcf304237ebec8756d9362ccf0259126c1c62ff5c0b09096876be2cdc64ae5a.exe

using \u0001;
using \u0007;
using \u0008;
using \u000E;
using System;
using System.Net;
using System.Reflection;
using System.Security;
using System.Security.Permissions;
using System.Threading;
using System.Web.Services.Protocols;

namespace \u000E
{
  internal abstract class \u0004
  {
    [NonSerialized]
    internal static \u0001.\u0001 \u0001;
    public const string \u0001 = "{1fe9e38e-05cc-46a3-ae48-6cda8fb62056}";
    public const string \u0002 = "{395edd3b-130e-4160-bb08-6931086cea46}";
    private static readonly bool \u0001;
    private static readonly string \u0003;
    private static \u0004 \u0001;
    private IWebProxy \u0001;
    private EventHandler \u0001;
    private \u0008.\u0001 \u0001;

    public event EventHandler DebuggerLaunched
    {
      add
      {
        if (false)
          goto label_7;
label_1:
        EventHandler eventHandler1 = this.\u0001;
        EventHandler eventHandler2;
        if (true)
          eventHandler2 = eventHandler1;
label_2:
        if (true)
        {
          if (false)
            goto label_7;
        }
        else
          goto label_5;
label_4:
        EventHandler eventHandler3 = eventHandler2;
        EventHandler comparand;
        if (true)
          comparand = eventHandler3;
label_5:
        EventHandler eventHandler4 = (EventHandler) \u009D\u0004.\u0084\u0003((Delegate) comparand, (Delegate) value);
        if (true)
          goto label_11;
label_6:
        EventHandler eventHandler5;
        EventHandler eventHandler6 = Interlocked.CompareExchange<EventHandler>(ref this.\u0001, eventHandler5, comparand);
        if (true)
        {
          eventHandler2 = eventHandler6;
          goto label_7;
        }
        else
          goto label_7;
label_11:
        eventHandler5 = eventHandler4;
        goto label_6;
label_7:
        if (true)
        {
          if (true)
          {
            if (eventHandler2 != comparand)
              goto label_2;
          }
          else
            goto label_4;
        }
        else
          goto label_1;
      }
      remove
      {
        if (false)
          goto label_7;
label_1:
        EventHandler eventHandler1 = this.\u0001;
        EventHandler eventHandler2;
        if (true)
          eventHandler2 = eventHandler1;
label_2:
        if (true)
        {
          if (false)
            goto label_7;
        }
        else
          goto label_5;
label_4:
        EventHandler eventHandler3 = eventHandler2;
        EventHandler comparand;
        if (true)
          comparand = eventHandler3;
label_5:
        EventHandler eventHandler4 = (EventHandler) \u009D\u0004.\u0086\u0003((Delegate) comparand, (Delegate) value);
        if (true)
          goto label_11;
label_6:
        EventHandler eventHandler5;
        EventHandler eventHandler6 = Interlocked.CompareExchange<EventHandler>(ref this.\u0001, eventHandler5, comparand);
        if (true)
        {
          eventHandler2 = eventHandler6;
          goto label_7;
        }
        else
          goto label_7;
label_11:
        eventHandler5 = eventHandler4;
        goto label_6;
label_7:
        if (true)
        {
          if (true)
          {
            if (eventHandler2 != comparand)
              goto label_2;
          }
          else
            goto label_4;
        }
        else
          goto label_1;
      }
    }

    public event \u0008.\u0001 SendingReportFeedback
    {
      add
      {
        if (false)
          goto label_7;
label_1:
        \u0008.\u0001 obj1 = this.\u0001;
        \u0008.\u0001 obj2;
        if (true)
          obj2 = obj1;
label_2:
        if (true)
        {
          if (false)
            goto label_7;
        }
        else
          goto label_5;
label_4:
        \u0008.\u0001 obj3 = obj2;
        \u0008.\u0001 comparand;
        if (true)
          comparand = obj3;
label_5:
        \u0008.\u0001 obj4 = (\u0008.\u0001) \u009D\u0004.\u0084\u0003((Delegate) comparand, (Delegate) value);
        if (true)
          goto label_11;
label_6:
        \u0008.\u0001 obj5;
        \u0008.\u0001 obj6 = Interlocked.CompareExchange<\u0008.\u0001>(ref this.\u0001, obj5, comparand);
        if (true)
        {
          obj2 = obj6;
          goto label_7;
        }
        else
          goto label_7;
label_11:
        obj5 = obj4;
        goto label_6;
label_7:
        if (true)
        {
          if (true)
          {
            if (obj2 != comparand)
              goto label_2;
          }
          else
            goto label_4;
        }
        else
          goto label_1;
      }
      remove
      {
        if (false)
          goto label_7;
label_1:
        \u0008.\u0001 obj1 = this.\u0001;
        \u0008.\u0001 obj2;
        if (true)
          obj2 = obj1;
label_2:
        if (true)
        {
          if (false)
            goto label_7;
        }
        else
          goto label_5;
label_4:
        \u0008.\u0001 obj3 = obj2;
        \u0008.\u0001 comparand;
        if (true)
          comparand = obj3;
label_5:
        \u0008.\u0001 obj4 = (\u0008.\u0001) \u009D\u0004.\u0086\u0003((Delegate) comparand, (Delegate) value);
        if (true)
          goto label_11;
label_6:
        \u0008.\u0001 obj5;
        \u0008.\u0001 obj6 = Interlocked.CompareExchange<\u0008.\u0001>(ref this.\u0001, obj5, comparand);
        if (true)
        {
          obj2 = obj6;
          goto label_7;
        }
        else
          goto label_7;
label_11:
        obj5 = obj4;
        goto label_6;
label_7:
        if (true)
        {
          if (true)
          {
            if (obj2 != comparand)
              goto label_2;
          }
          else
            goto label_4;
        }
        else
          goto label_1;
      }
    }

    protected abstract void \u0002(\u0007.\u0006 e);

    protected abstract void \u0002(\u0004 e);

    protected abstract void \u0002(\u0007.\u000E e);

    [SecurityPermission(SecurityAction.Demand, UnmanagedCode = true)]
    public static void \u0002(\u0004 unhandledExceptionHandler)
    {
      if (unhandledExceptionHandler != null)
      {
        \u0004.\u0001 = unhandledExceptionHandler;
        \u0006\u0005.\u007E\u0094\u0003((object) \u0003\u0005.\u0091\u0003(), new UnhandledExceptionEventHandler(unhandledExceptionHandler.\u0002));
      }
      else
        goto label_3;
label_2:
      \u0001\u0007.\u001D\u000E(new ThreadExceptionEventHandler(unhandledExceptionHandler.\u0002));
label_3:
      if (false)
        goto label_2;
    }

    private static \u0004 Handler
    {
      get
      {
        if (false)
          goto label_7;
label_1:
        Type[] typeArray1;
        int index;
        if (\u0004.\u0001 == null)
        {
          Type[] typeArray2 = \u0099\u0005.\u007E\u0087\u0006((object) \u009F\u0005.\u008F\u0006());
          if (true)
            goto label_17;
label_3:
          if (true)
          {
            index = 0;
            goto label_14;
          }
          else
            goto label_14;
label_17:
          if (true)
            goto label_22;
label_18:
          if (false)
            goto label_5;
          else
            goto label_3;
label_22:
          typeArray1 = typeArray2;
          goto label_18;
        }
        else
          goto label_16;
label_5:
        Type type1;
        if (true)
        {
          if ((object) type1 == null || (object) \u001C\u0004.\u007E\u0096\u0004((object) type1) == null)
            goto label_12;
        }
        else
          goto label_1;
label_7:
        if ((object) \u001C\u0004.\u007E\u0096\u0004((object) type1) == (object) \u0087\u0005.\u0092\u0004(__typeref (\u0004)))
        {
          try
          {
            if (true)
            {
              if (true)
              {
                \u0004.\u0001 = (\u0004) \u0001\u0005.\u0089\u0003(type1, true);
                if (\u0004.\u0001 != null)
                  goto label_16;
              }
              else
                goto label_16;
            }
            else
              goto label_16;
          }
          catch
          {
          }
        }
label_12:
        int num1 = index;
        int num2 = 1;
label_13:
        int num3 = num1 + num2;
        if (true)
          index = num3;
label_14:
        int num4 = index;
        int length = typeArray1.Length;
        if (false)
        {
          num2 = length;
          num1 = num4;
          goto label_13;
        }
        else if (num4 < length)
        {
          Type type2 = typeArray1[index];
          if (true)
          {
            type1 = type2;
            goto label_5;
          }
          else
            goto label_5;
        }
label_16:
        return \u0004.\u0001;
      }
    }

    public static void \u0002(Exception exception, object[] objects)
    {
label_0:
      while (exception != null)
      {
label_1:
        if (exception is SecurityException)
        {
          int num;
          for (int index = \u0083\u0004.\u0090\u0002(\u0004.\u0003, \u0004.\u0001(3673)) ? 1 : 0; index != 0; index = num)
          {
            if (true)
            {
              if (true)
              {
                num = \u0004.Handler.\u0002((SecurityException) exception) ? 1 : 0;
                if (true)
                {
                  if (num != 0)
                  {
                    if (true)
                      return;
                    goto label_1;
                  }
                  else
                    break;
                }
              }
              else
                goto label_0;
            }
            else
              goto label_12;
          }
          break;
        }
        break;
      }
label_10:
      \u0004.\u0002(exception, objects);
      do
      {
        \u0004.Handler.\u0002(exception, false);
      }
      while (false);
label_12:
      if (false)
        goto label_10;
    }

    public static Exception \u0002(Exception exception, object[] objects)
    {
      \u0004.\u0003(exception, objects);
      return (Exception) new SoapException(\u0019\u0004.\u007E\u0017\u0003((object) exception), SoapException.ServerFaultCode);
    }

    public static void \u0003(Exception exception, object[] objects)
    {
      try
      {
        // ISSUE: type reference
        if ((object) \u001C\u0004.\u007E\u001C\u0003((object) exception) == (object) \u0087\u0005.\u0092\u0004(__typeref (Exception)) && \u0083\u0004.\u0090\u0002(\u0019\u0004.\u007E\u0017\u0003((object) exception), \u0004.\u0001(5579)))
          exception = \u0010\u0004.\u007E\u0019\u0003((object) exception);
        else
          \u0004.\u0002(exception, objects);
        \u0004.Handler.\u0002(exception, true);
      }
      catch
      {
      }
    }

    private void \u0002(object sender, ThreadExceptionEventArgs e)
    {
      try
      {
        Exception exception1;
        do
        {
          Exception exception2 = \u0010\u0004.\u007E\u0096((object) e);
          if (true)
            goto label_8;
label_1:
          continue;
label_8:
          exception1 = exception2;
          goto label_1;
        }
        while (false);
        Type type1 = \u001C\u0004.\u007E\u001C\u0003((object) exception1);
        if (true)
          goto label_9;
label_3:
        Type type2;
        if (\u0083\u0004.\u0090\u0002(\u0019\u0004.\u007E\u008B\u0004((object) type2), \u0004.\u0001(5592)) && \u0083\u0004.\u0090\u0002(\u0019\u0004.\u007E\u0094\u0004((object) type2), \u0004.\u0001(5617)))
        {
          Exception exception3 = (Exception) \u0092\u0005.\u007E\u0006\u0007((object) \u008B\u0005.\u007E\u009A\u0004((object) type2, \u0004.\u0001(5662)), (object) exception1);
          if (true)
            exception1 = exception3;
        }
        if (exception1 is SecurityException && \u0083\u0004.\u0090\u0002(\u0004.\u0003, \u0004.\u0001(3673)) && this.\u0002(exception1 as SecurityException))
          return;
        this.\u0002(exception1, true);
        return;
label_9:
        type2 = type1;
        goto label_3;
      }
      catch
      {
      }
    }

    private void \u0002(object sender, UnhandledExceptionEventArgs e)
    {
      try
      {
        if (\u0081\u0004.\u007E\u0015\u0005((object) e) is SecurityException)
        {
          while (true)
          {
            int num = \u0083\u0004.\u0090\u0002(\u0004.\u0003, \u0004.\u0001(3673)) ? 1 : 0;
            if (true)
            {
              if (num != 0 && this.\u0002(\u0081\u0004.\u007E\u0015\u0005((object) e) as SecurityException))
                num = 0;
              else
                goto label_7;
            }
            if (num == 0)
              break;
          }
          return;
        }
label_7:
        while (\u0081\u0004.\u007E\u0015\u0005((object) e) is Exception)
        {
          if (true)
          {
            this.\u0002((Exception) \u0081\u0004.\u007E\u0015\u0005((object) e), !\u000F\u0004.\u007E\u0016\u0005((object) e));
            break;
          }
        }
      }
      catch
      {
      }
    }

    public void \u0002(IWebProxy proxy) => this.\u0001 = proxy;

    protected virtual Guid \u0002() => Guid.Empty;

    private bool \u0002(SecurityException exception)
    {
      \u0007.\u000E e;
      if (true)
      {
        \u0007.\u000E obj = new \u0007.\u000E(exception);
        if (true)
          e = obj;
      }
      else
        goto label_5;
label_2:
      this.\u0002(e);
label_3:
      int num1 = e.ReportException ? 1 : 0;
label_4:
      if (num1 == 0)
      {
        if (!e.TryToContinue)
        {
          while (true)
          {
            if (true)
            {
              \u009E\u0006.\u001E\u000E();
              goto label_13;
            }
          }
          goto label_3;
        }
label_13:
        return true;
      }
label_5:
      if (true)
      {
        int num2 = 0;
        if (num2 != 0)
          return num2 != 0;
        if (true)
          return num2 != 0;
        num1 = num2;
        goto label_4;
      }
      else
        goto label_2;
    }

    [\u0007.\u0007("Unhandled Exception Encountered")]
    private void \u0002(Exception exception, bool canContinue)
    {
      \u0006.\u0001.\u0003(2U);
      Type type1 = \u001C\u0004.\u007E\u001C\u0003((object) exception);
      if (true)
        goto label_43;
label_1:
      Type type2;
      if (\u0083\u0004.\u0090\u0002(\u0019\u0004.\u007E\u008B\u0004((object) type2), \u0004.\u0001(5592)) && \u0083\u0004.\u0090\u0002(\u0019\u0004.\u007E\u0094\u0004((object) type2), \u0004.\u0001(5617)))
        exception = (Exception) \u0092\u0005.\u007E\u0006\u0007((object) \u008B\u0005.\u007E\u009A\u0004((object) type2, \u0004.\u0001(5662)), (object) exception);
label_3:
      if (true)
        goto label_44;
label_4:
      if (exception == null)
        return;
      if (exception is ThreadAbortException)
        return;
      bool flag;
      try
      {
        \u0002 obj1 = new \u0002(this.\u0002(), exception, this.\u0001);
        if (true)
          goto label_22;
label_8:
        \u0002 reportSender;
        reportSender.SendingReportFeedback += new \u0008.\u0001(this.\u0002);
        reportSender.DebuggerLaunched += new EventHandler(this.\u0002);
        reportSender.FatalException += new \u0005(this.\u0002);
        \u0007.\u0006 obj2 = new \u0007.\u0006(reportSender, exception);
        if (true)
          goto label_20;
label_9:
        \u0007.\u0006 e;
        if (\u0006.\u0007.\u0002() != null)
        {
          if (true)
            e.\u0002();
          else
            goto label_17;
        }
        if (!canContinue)
        {
          e.\u0002(false);
          e.TryToContinue = false;
          goto label_17;
        }
        else if (\u0004.\u0001)
          e.\u0002(false);
        else
          goto label_17;
label_16:
        e.TryToContinue = true;
label_17:
        this.\u0002(e);
        int num = !e.TryToContinue ? 1 : 0;
        if (true)
          goto label_21;
label_18:
        if (false)
          goto label_16;
        else
          goto label_25;
label_21:
        flag = num != 0;
        goto label_18;
label_20:
        e = obj2;
        goto label_9;
label_22:
        reportSender = obj1;
        goto label_8;
      }
      catch (ThreadAbortException ex)
      {
      }
      catch (Exception ex)
      {
        this.\u0002(new \u0004(ex));
      }
label_25:
      Assembly[] assemblyArray;
      int index;
      if (true)
      {
        if (!flag)
          return;
        assemblyArray = \u0004\u0005.\u007E\u0092\u0003((object) \u0003\u0005.\u0091\u0003());
        index = 0;
      }
      while (true)
      {
        if (true)
        {
          if (index < assemblyArray.Length)
          {
            Assembly assembly = assemblyArray[index];
            try
            {
              string str = \u0019\u0004.\u007E\u0084\u0006((object) assembly);
              if (\u0089\u0004.\u007E\u0097\u0002((object) str, \u0004.\u0001(5687)))
              {
                if (\u0089\u0004.\u007E\u009B\u0002((object) str, \u0004.\u0001(5712)))
                {
                  object obj3 = \u0006\u0006.\u007E\u0002\u0007((object) \u0007\u0006.\u007E\u0010\u0007((object) \u008D\u0005.\u007E\u009C\u0004((object) \u0098\u0005.\u007E\u0086\u0006((object) assembly, \u0004.\u0001(5745)), \u0004.\u0001(5782))), (object) null, (object[]) null);
                  object obj4 = \u0006\u0006.\u007E\u0002\u0007((object) \u0088\u0005.\u007E\u0097\u0004((object) \u001C\u0004.\u007E\u0082\u0002(obj3), \u0004.\u0001(5795), new Type[0]), obj3, (object[]) null);
                }
              }
            }
            catch
            {
            }
            if (true)
              ++index;
            else
              break;
          }
          else
            goto label_38;
        }
        else
          goto label_3;
      }
      return;
label_38:
      try
      {
        \u009E\u0006.\u001E\u000E();
        return;
      }
      catch
      {
        try
        {
          \u0015\u0005.\u0006\u0004(0);
          return;
        }
        catch
        {
          return;
        }
      }
label_44:
      flag = true;
      goto label_4;
label_43:
      type2 = type1;
      goto label_1;
    }

    private void \u0002(object sender, \u0004 fatalExceptionEventArgs) => this.\u0002(fatalExceptionEventArgs);

    private void \u0002(object sender, EventArgs eventArgs)
    {
      EventHandler eventHandler1;
      if (true)
      {
        EventHandler eventHandler2 = this.\u0001;
        if (true)
          eventHandler1 = eventHandler2;
      }
      if (eventHandler1 == null)
        return;
      \u001B\u0005.\u007E\u0013\u0004((object) eventHandler1, sender, eventArgs);
    }

    private void \u0002(object sender, \u0002 sendingReportFeedbackEventArgs)
    {
      \u0008.\u0001 obj1;
      if (true)
      {
        \u0008.\u0001 obj2 = this.\u0001;
        if (true)
          obj1 = obj2;
      }
      if (obj1 == null)
        return;
      obj1(sender, sendingReportFeedbackEventArgs);
    }

    static \u0004()
    {
      // ISSUE: type reference
      \u0003.\u0002(\u0087\u0005.\u0092\u0004(__typeref (\u0004)));
      \u0004.\u0001 = \u0008\u0005.\u009D\u0003(\u0004.\u0001(5808));
      \u0004.\u0003 = \u0004.\u0001(3673);
    }
  }
}
