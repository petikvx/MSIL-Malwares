// Decompiled with JetBrains decompiler
// Type: N00qQqs.TkQNtlR
// Assembly: gO77Fih, Version=16.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
// MVID: F43F05C3-DF79-4EF2-8C94-619BF1ED6D3E
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.03\HEUR-Trojan.MSIL.Gorgon.gen-83f6c309f411e1aebbdf75c62f67f163231f1b0ee065936230741272cda1cb9a.exe

using \u0039rrGZD6;
using JHRZYjM;
using Microsoft;
using Microsoft.VisualStudio.Composition;
using rLjl8I7;
using System;
using System.Collections.Generic;
using System.Collections.Immutable;
using System.Reflection;
using U8zsCil;
using wDXXQb8;
using xNMEDFl;

namespace N00qQqs
{
  internal class TkQNtlR : IAssemblyLoader
  {
    internal readonly Dictionary<AssemblyName, Assembly> BVLVYxi = new Dictionary<AssemblyName, Assembly>((IEqualityComparer<AssemblyName>) fDwNfbE.P8fsYkT);
    internal Dictionary<AssemblyName, long> fs5cRya = new Dictionary<AssemblyName, long>();
    private const string \u0038EqzwqQ = "VS/Platform/ExtensibilityHosting/MefCacheInvalidation";
    private const string \u0031L7LV9W = "VS.Platform.ExtensibilityHosting.MefCacheInvalidation";
    private const string \u0035cnJVMy = "Microsoft.VisualStudio.Composition";
    private readonly object \u0037H1oxLV = new object();
    private readonly IVsExportProviderFactoryHelper F2vDXjI;
    private readonly object KFRsLmQ = new object();
    private bool j4YFG1s;

    internal TkQNtlR(IVsExportProviderFactoryHelper factoryHelper)
    {
      Requires.NotNull<IVsExportProviderFactoryHelper>(factoryHelper, nameof (factoryHelper));
      this.F2vDXjI = factoryHelper;
    }

    internal Dictionary<string, hy0JkcH> \u0030s60yPL { get; } = new Dictionary<string, hy0JkcH>((IEqualityComparer<string>) StringComparer.OrdinalIgnoreCase);

    internal bool ltyyZJY { get; set; }

    public Assembly cYk3kaR(AssemblyName zBo5bv6)
    {
      // ISSUE: object of a compiler-generated type is created
      // ISSUE: variable of a compiler-generated type
      TkQNtlR.AUHOjKd auhOjKd = (TkQNtlR.AUHOjKd) new JV1WxGp.BTO7d7D();
      // ISSUE: reference to a compiler-generated field
      ((JV1WxGp.BTO7d7D) auhOjKd).cI1Mzdx = this;
      // ISSUE: reference to a compiler-generated field
      auhOjKd.Q8gQ4CX = zBo5bv6;
      // ISSUE: reference to a compiler-generated field
      Requires.NotNull<AssemblyName>(auhOjKd.Q8gQ4CX, "assemblyName");
      // ISSUE: reference to a compiler-generated field
      // ISSUE: reference to a compiler-generated method
      return this.BVLVYxi.sC7OfvE<AssemblyName, Assembly>(auhOjKd.Q8gQ4CX, this.\u0037H1oxLV, new Func<AssemblyName, Assembly>(auhOjKd.GWE2ZCs));
    }

    public Assembly JB5efGz(string XV2LcL3, string EuA8Vev)
    {
      Requires.NotNullOrEmpty(XV2LcL3, "assemblyFullName");
      AssemblyName zBo5bv6 = new AssemblyName(XV2LcL3);
      if (!string.IsNullOrEmpty(EuA8Vev))
        zBo5bv6.CodeBase = EuA8Vev;
      return this.cYk3kaR(zBo5bv6);
    }

    internal void \u0037wycBzN(ImmutableDictionary<string, JV1WxGp> hrpHFZn)
    {
      Requires.NotNull<ImmutableDictionary<string, JV1WxGp>>(hrpHFZn, "assemblyCatalogs");
      lock (this.\u0037H1oxLV)
      {
        foreach (JV1WxGp jv1WxGp in hrpHFZn.Values)
        {
          foreach (\u0034GW7en3 obj in jv1WxGp.kg2RNJv.Values)
            this.\u0030s60yPL[obj.qx5iGx7] = new hy0JkcH(obj.JADOrkn, obj.StICnaq);
        }
      }
    }

    internal void \u0037NCfzjX(IReadOnlyDictionary<string, hy0JkcH> fCULJby)
    {
      Requires.NotNull<IReadOnlyDictionary<string, hy0JkcH>>(fCULJby, "assemblies");
      lock (this.\u0037H1oxLV)
      {
        foreach (KeyValuePair<string, hy0JkcH> keyValuePair in (IEnumerable<KeyValuePair<string, hy0JkcH>>) fCULJby)
          this.\u0030s60yPL[keyValuePair.Key] = keyValuePair.Value;
      }
    }

    private void \u00371lC7Zl()
    {
      if (this.j4YFG1s)
        return;
      this.F2vDXjI.UpdateLastChangedTimestamp();
      this.F2vDXjI.DeleteCaches("Microsoft.VisualStudio.Default");
      this.j4YFG1s = true;
    }
  }
}
