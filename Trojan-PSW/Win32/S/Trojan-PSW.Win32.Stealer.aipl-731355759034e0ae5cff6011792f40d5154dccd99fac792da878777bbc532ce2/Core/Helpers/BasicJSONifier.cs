// Decompiled with JetBrains decompiler
// Type: Core.Helpers.BasicJSONifier
// Assembly: AnsiCharMarsha, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: 45449883-CB33-464D-BFFF-85C1D8F95247
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.03\Trojan-PSW.Win32.Stealer.aipl-731355759034e0ae5cff6011792f40d5154dccd99fac792da878777bbc532ce2.exe

using System.Text;

namespace Core.Helpers
{
  public class BasicJSONifier : IJSONifier
  {
    public string Id { get; set; }

    public string Text { get; set; }

    private bool FirstAdd { get; set; }

    public BasicJSONifier(string collectionName, string id, string text)
    {
      this.CollectionName = collectionName;
      this.Id = id;
      this.Text = text;
      this.FirstAdd = true;
      this.BuildTemplate();
    }

    public BasicJSONifier(
      string collectionName,
      string id,
      string text,
      string firstId,
      string firstText)
    {
      this.CollectionName = collectionName;
      this.Id = id;
      this.Text = text;
      this.FirstAdd = true;
      this.BuildTemplate();
      this.Add(firstId, firstText);
    }

    protected new void BuildTemplate()
    {
      StringBuilder stringBuilder = new StringBuilder();
      stringBuilder.Append("{");
      stringBuilder.AppendFormat("\"{1}\":\"{0}\",", (object) "{0}", (object) this.Text);
      stringBuilder.AppendFormat("\"{0}\":\"{1}\"", (object) this.Id, (object) "{1}");
      stringBuilder.Append("}");
      this.Template = stringBuilder.ToString();
      base.BuildTemplate();
    }

    public string AddReturn(string key, string value) => this.Builder.AppendFormat(this.Template, (object) value, (object) key).ToString();

    public void Add(string key, string value)
    {
      string str = this.Template.Replace("{0}", value).Replace("{1}", key);
      if (this.FirstAdd)
      {
        this.Builder.Append(str);
        this.FirstAdd = false;
      }
      else
        this.Builder.Append("," + str);
    }
  }
}
