// Decompiled with JetBrains decompiler
// Type: ZuMv92bMFAOGUppmM.zgYtHggT4yGmwhPWQ
// Assembly: bouNMGxVgGi4SRgWO, Version=3.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60
// MVID: 3F6A2AF1-3CCB-4F01-AA36-FA31C2E4CFE8
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.03\HEUR-Backdoor.MSIL.Agent.gen-bc408b9f362db28b2e931ff336ec5661cc0ce27b0cdc0ce215fec1b7381aca7f.exe

using \u0033eVYd5LIQhZ7rzGZ2;
using e4owxpznG46oSYMgq;
using fcxTd0CgJgB8stQvj;
using GUxwlAGXtz8Biqdzq;
using jlhFNVXvwEp5FRUh5;
using Microsoft.TemplateEngine.Abstractions;
using Microsoft.TemplateEngine.Core.Contracts;
using Microsoft.TemplateEngine.Utils;
using Newtonsoft.Json.Linq;
using PgLEPpSpDk54KWT6E;
using System;
using System.Collections.Generic;
using System.Text.RegularExpressions;
using zjOMGQo4U7RNSpo2h;

namespace ZuMv92bMFAOGUppmM
{
  public class zgYtHggT4yGmwhPWQ : IMacro, IIdentifiedComponent, IDeferredMacro
  {
    public Guid oyvDGSacaaP97IBLN => new Guid("8A4D4937-E23F-426D-8398-3BDBD1873ADB");

    public string udX9ydkqnSmUldfUj => "regex";

    public void U7weJnPMo8d2h2vjw(
      IEngineEnvironmentSettings Q6nscvoHpOBoG3wAL,
      IVariableCollection _param2,
      IMacroConfig hp1ZQx0PYqtd6SDDL,
      IParameterSet k07tKhVNab6MPKEg5,
      eudKo284TuJqIEahM gkBHum3NdAXHBVByD)
    {
      if (!(hp1ZQx0PYqtd6SDDL is qOXdW4yvwNzchIkgB oxdW4yvwNzchIkgB))
        throw new InvalidCastException("Couldn't cast the rawConfig as zgYtHggT4yGmwhPWQConfig");
      object obj1;
      object obj2;
      string input = ((IDictionary<string, object>) _param2).TryGetValue(oxdW4yvwNzchIkgB.ljArClk8F4QFpjxx2, out obj1) ? obj1?.ToString() ?? "" : (!RuntimeValueUtil.TryGetRuntimeValue(k07tKhVNab6MPKEg5, Q6nscvoHpOBoG3wAL, oxdW4yvwNzchIkgB.ljArClk8F4QFpjxx2, ref obj2, true) ? string.Empty : obj2.ToString());
      if (oxdW4yvwNzchIkgB.\u0039lHsoxGB535Be1yGQ != null)
      {
        foreach (KeyValuePair<string, string> keyValuePair in (IEnumerable<KeyValuePair<string, string>>) oxdW4yvwNzchIkgB.\u0039lHsoxGB535Be1yGQ)
          input = Regex.Replace(input, keyValuePair.Key, keyValuePair.Value);
      }
      ITemplateParameter itemplateParameter;
      ckgfOYwQVcmI3lHXN parameter;
      if (k07tKhVNab6MPKEg5.TryGetParameterDefinition(oxdW4yvwNzchIkgB.\u00389qJKiN4VetyF3Cl2, ref itemplateParameter))
      {
        parameter = (ckgfOYwQVcmI3lHXN) itemplateParameter;
        parameter.Cg57rESMJLQIVeHLw = true;
        if (string.IsNullOrEmpty(parameter.\u0038DBEv3DWcN5nNg1o1))
          parameter.\u0038DBEv3DWcN5nNg1o1 = oxdW4yvwNzchIkgB.NNF7d0dmPROOZ6rvW;
      }
      else
        parameter = new ckgfOYwQVcmI3lHXN()
        {
          Cg57rESMJLQIVeHLw = true,
          RWvAX7XIWjB7LsE1n = oxdW4yvwNzchIkgB.\u00389qJKiN4VetyF3Cl2,
          \u0038DBEv3DWcN5nNg1o1 = oxdW4yvwNzchIkgB.NNF7d0dmPROOZ6rvW
        };
      ((IDictionary<string, object>) _param2)[oxdW4yvwNzchIkgB.\u00389qJKiN4VetyF3Cl2] = (object) input;
      gkBHum3NdAXHBVByD((ITemplateParameter) parameter, input);
    }

    public IMacroConfig vBTWMA55QqPTYmHKy(
      IEngineEnvironmentSettings d8tYZDPxd3HtLT8if,
      IMacroConfig x2m1VUuTlaHppgb7L)
    {
      if (!(x2m1VUuTlaHppgb7L is KZUSKKOdswxWjB6He kzuskkOdswxWjB6He))
        throw new InvalidCastException("Couldn't cast the rawConfig as a GeneratedSymbolDeferredMacroConfig");
      JToken jtoken1;
      if (!kzuskkOdswxWjB6He.dYZjsKaakeS43shkR.TryGetValue("source", out jtoken1))
        throw new ArgumentNullException("source");
      string sourceVariable = ((object) jtoken1).ToString();
      List<KeyValuePair<string, string>> steps = new List<KeyValuePair<string, string>>();
      JToken jtoken2;
      if (kzuskkOdswxWjB6He.dYZjsKaakeS43shkR.TryGetValue("steps", out jtoken2))
      {
        foreach (JObject AxYz1PCII8bqfq9z9 in (JArray) jtoken2)
        {
          string key = ((JToken) AxYz1PCII8bqfq9z9).nVxA6yY1QJJUqxmoF("regex");
          string str = ((JToken) AxYz1PCII8bqfq9z9).nVxA6yY1QJJUqxmoF("replacement");
          steps.Add(new KeyValuePair<string, string>(key, str));
        }
      }
      return (IMacroConfig) new qOXdW4yvwNzchIkgB(kzuskkOdswxWjB6He.\u0036gh4E6uhQGL10SKFe, kzuskkOdswxWjB6He.xbfbgFpF57ZJB3TfG, sourceVariable, (IList<KeyValuePair<string, string>>) steps);
    }
  }
}
