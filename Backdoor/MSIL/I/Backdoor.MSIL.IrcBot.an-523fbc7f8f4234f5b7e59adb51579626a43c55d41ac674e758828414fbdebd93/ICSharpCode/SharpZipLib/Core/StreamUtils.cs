// Decompiled with JetBrains decompiler
// Type: ICSharpCode.SharpZipLib.Core.StreamUtils
// Assembly: TheBot, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: 7E6D888C-8D83-46CE-907A-18F99381A0FA
// Assembly location: C:\Users\Administrateur\Downloads\Virusshare-00008-msil\Backdoor.MSIL.IrcBot.an-523fbc7f8f4234f5b7e59adb51579626a43c55d41ac674e758828414fbdebd93.exe

using System;
using System.IO;

namespace ICSharpCode.SharpZipLib.Core
{
  public sealed class StreamUtils
  {
    public static void ReadFully(Stream stream, byte[] buffer) => StreamUtils.ReadFully(stream, buffer, 0, buffer.Length);

    public static void ReadFully(Stream stream, byte[] buffer, int offset, int count)
    {
      if (stream == null)
        throw new ArgumentNullException(\uE01B.\uE000("\uE71E\uE719\uE71F\uE708\uE70C\uE700", 59245));
      if (buffer == null)
        throw new ArgumentNullException(\uE01B.\uE000("\uEDC8\uEDDF\uEDCC\uEDCC\uEDCF\uEDD8", 60842));
      if (offset < 0 || offset > buffer.Length)
        throw new ArgumentOutOfRangeException(\uE01B.\uE000("\uF201\uF208\uF208\uF21D\uF20B\uF21A", 62062));
      if (count < 0 || offset + count > buffer.Length)
        throw new ArgumentOutOfRangeException(\uE01B.\uE000("\uED5B\uED57\uED4D\uED56\uED4C", 60728));
      int num;
      for (; count > 0; count -= num)
      {
        num = stream.Read(buffer, offset, count);
        if (num <= 0)
          throw new EndOfStreamException();
        offset += num;
      }
    }

    public static void Copy(Stream source, Stream destination, byte[] buffer)
    {
      if (source == null)
        throw new ArgumentNullException(\uE01B.\uE000("\uE45A\uE446\uE45C\uE45B\uE44A\uE44C", 58409));
      if (destination == null)
        throw new ArgumentNullException(\uE01B.\uE000("\uEA98\uEA99\uEA8F\uEA88\uEA95\uEA92\uEA9D\uEA88\uEA95\uEA93\uEA92", 60156));
      if (buffer == null)
        throw new ArgumentNullException(\uE01B.\uE000("\uEDC8\uEDDF\uEDCC\uEDCC\uEDCF\uEDD8", 60842));
      if (buffer.Length < 128)
        throw new ArgumentException(\uE01B.\uE000("\uE55C\uE56B\uE578\uE578\uE57B\uE56C\uE53E\uE577\uE56D\uE53E\uE56A\uE571\uE571\uE53E\uE56D\uE573\uE57F\uE572\uE572", 58654), \uE01B.\uE000("\uEDC8\uEDDF\uEDCC\uEDCC\uEDCF\uEDD8", 60842));
      bool flag = true;
      while (flag)
      {
        int count = source.Read(buffer, 0, buffer.Length);
        if (count > 0)
        {
          destination.Write(buffer, 0, count);
        }
        else
        {
          destination.Flush();
          flag = false;
        }
      }
    }

    public static void Copy(
      Stream source,
      Stream destination,
      byte[] buffer,
      ProgressHandler progressHandler,
      TimeSpan updateInterval,
      object sender,
      string name)
    {
      StreamUtils.Copy(source, destination, buffer, progressHandler, updateInterval, sender, name, -1L);
    }

    public static void Copy(
      Stream source,
      Stream destination,
      byte[] buffer,
      ProgressHandler progressHandler,
      TimeSpan updateInterval,
      object sender,
      string name,
      long fixedTarget)
    {
      if (source == null)
        throw new ArgumentNullException(\uE01B.\uE000("\uE45A\uE446\uE45C\uE45B\uE44A\uE44C", 58409));
      if (destination == null)
        throw new ArgumentNullException(\uE01B.\uE000("\uEA98\uEA99\uEA8F\uEA88\uEA95\uEA92\uEA9D\uEA88\uEA95\uEA93\uEA92", 60156));
      if (buffer == null)
        throw new ArgumentNullException(\uE01B.\uE000("\uEDC8\uEDDF\uEDCC\uEDCC\uEDCF\uEDD8", 60842));
      if (buffer.Length < 128)
        throw new ArgumentException(\uE01B.\uE000("\uE55C\uE56B\uE578\uE578\uE57B\uE56C\uE53E\uE577\uE56D\uE53E\uE56A\uE571\uE571\uE53E\uE56D\uE573\uE57F\uE572\uE572", 58654), \uE01B.\uE000("\uEDC8\uEDDF\uEDCC\uEDCC\uEDCF\uEDD8", 60842));
      if (progressHandler == null)
        throw new ArgumentNullException(\uE01B.\uE000("\uE7B6\uE7B4\uE7A9\uE7A1\uE7B4\uE7A3\uE7B5\uE7B5\uE78E\uE7A7\uE7A8\uE7A2\uE7AA\uE7A3\uE7B4", 59334));
      bool flag1 = true;
      DateTime now = DateTime.Now;
      long processed = 0;
      long target = 0;
      if (fixedTarget >= 0L)
        target = fixedTarget;
      else if (source.CanSeek)
        target = source.Length - source.Position;
      ProgressEventArgs e1 = new ProgressEventArgs(name, processed, target);
      progressHandler(sender, e1);
      bool flag2 = true;
      while (flag1)
      {
        int count = source.Read(buffer, 0, buffer.Length);
        if (count > 0)
        {
          processed += (long) count;
          flag2 = false;
          destination.Write(buffer, 0, count);
        }
        else
        {
          destination.Flush();
          flag1 = false;
        }
        if (DateTime.Now - now > updateInterval)
        {
          flag2 = true;
          now = DateTime.Now;
          ProgressEventArgs e2 = new ProgressEventArgs(name, processed, target);
          progressHandler(sender, e2);
          flag1 = e2.ContinueRunning;
        }
      }
      if (flag2)
        return;
      ProgressEventArgs e3 = new ProgressEventArgs(name, processed, target);
      progressHandler(sender, e3);
    }

    private StreamUtils()
    {
    }
  }
}
