// Decompiled with JetBrains decompiler
// Type: mmxAH.EffMonsterApears
// Assembly: X509Ut, Version=1.0.2.2, Culture=neutral, PublicKeyToken=null
// MVID: 1E869FE1-6699-4C5A-A346-E3A268AF0CFF
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.03\Trojan-Spy.Win32.Noon.bcql-59417b76e826677caae54470d776ac97355fea2080e278b08439fa5229cc46a3.exe

namespace mmxAH
{
  public class EffMonsterApears : Effect
  {
    public EffMonsterApears(GameEngine eng)
      : base(eng)
    {
    }

    public override void Execute(Func f, byte pInvnum = 40)
    {
      base.Execute(f, pInvnum);
      MonsterIndivid monsterIndivid = this.en.MonstersCup.Draw();
      if (monsterIndivid != null)
      {
        monsterIndivid.SetRPAfterEncounter(new Func(this.Clear));
        monsterIndivid.BeginEncounter();
      }
      else
        this.en.ga.Awekeen();
    }

    private void Clear()
    {
      if (this.en.curs.curFight != null)
      {
        this.en.MonstersCup.Add(this.en.curs.curFight);
        this.en.curs.curFight = (MonsterIndivid) null;
      }
      this.rp();
    }
  }
}
