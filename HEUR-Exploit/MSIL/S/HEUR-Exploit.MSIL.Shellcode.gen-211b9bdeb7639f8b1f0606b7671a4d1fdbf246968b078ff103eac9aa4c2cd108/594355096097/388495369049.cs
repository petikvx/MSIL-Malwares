// Decompiled with JetBrains decompiler
// Type: 594355096097.388495369049
// Assembly: 190180155270, Version=7.6.1.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35
// MVID: 20B0A582-54C5-4C64-BCB9-2AC73608F590
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.03\HEUR-Exploit.MSIL.Shellcode.gen-211b9bdeb7639f8b1f0606b7671a4d1fdbf246968b078ff103eac9aa4c2cd108.exe

using \u003056364933363;
using \u003083977589061;
using \u003110445016287;
using \u003398049663276;
using \u003475310219084;
using \u003534647440872;
using \u003594355096097;
using \u003610305698080;
using \u003715672977127;
using Microsoft.ProgramSynthesis.Utils;
using Microsoft.ProgramSynthesis.Wrangling.Logging;
using System;
using System.Collections.Generic;
using System.Diagnostics;
using System.Linq;

namespace \u003594355096097
{
  public sealed class \u003388495369049
  {
    private readonly List<IColumnInfo> \u003714847028982;

    public IReadOnlyList<IColumnInfo> \u003979235074706 => (IReadOnlyList<IColumnInfo>) this.\u003714847028982;

    public ILogger \u003605681907940 { get; }

    public string \u003802003884444 { get; }

    public \u003388495369049(
      IEnumerable<IColumnInfo> columnInfo,
      ILogger logger = null,
      string sessionType = null)
    {
      this.\u003714847028982 = columnInfo.ToList<IColumnInfo>();
      this.\u003605681907940 = logger;
      this.\u003802003884444 = sessionType;
    }

    public void \u003085049590429() => this.\u003714847028982.ForEach((Action<IColumnInfo>) (_param1 => _param1.ResetDataStream()));

    private void \u003268862412486(
      ILogger _param1,
      string _param2,
      int? _param3,
      IEnumerable<string> _param4,
      double _param5,
      double _param6,
      Guid _param7)
    {
      if (string.IsNullOrEmpty(_param2))
        _param2 = "GenericDetectTypesSession";
      List<KeyValuePair<string, double>> keyValuePairList1 = new List<KeyValuePair<string, double>>()
      {
        KVP.Create<string, double>("LearnTime", _param5),
        KVP.Create<string, double>("NumInputColumns", _param6)
      };
      List<KeyValuePair<string, string>> keyValuePairList2 = new List<KeyValuePair<string, string>>()
      {
        KVP.Create<string, string>("SessionType", _param2),
        KVP.Create<string, string>("Id", _param7.ToString())
      };
      if (_param3.HasValue)
        keyValuePairList2.Add(KVP.Create<string, string>("PythonNRows", _param3.Value.ToString()));
      if (_param4 != null)
        keyValuePairList2.Add(KVP.Create<string, string>("PythonNamesOfTypesToDetect", string.Join(", ", _param4)));
      _param1.TrackEvent("DetectTypesEvent", (IReadOnlyCollection<KeyValuePair<string, double>>) keyValuePairList1, (IReadOnlyCollection<KeyValuePair<string, string>>) keyValuePairList2, (IReadOnlyCollection<KeyValuePair<string, string>>) new KeyValuePair<string, string>[0]);
    }

    public \u003590324994887 \u003465871186869(
      ILogger _param1_1,
      int? _param2,
      IEnumerable<string> _param3,
      Func<IRichDataType, IRichDataType> _param4 = null,
      Guid? _param5 = null)
    {
      // ISSUE: object of a compiler-generated type is created
      // ISSUE: variable of a compiler-generated type
      \u003388495369049.\u003517256904805 obj1 = (\u003388495369049.\u003517256904805) new \u003388495369049.\u003869190444258();
      // ISSUE: reference to a compiler-generated field
      ((\u003388495369049.\u003869190444258) obj1).\u003279937888424 = _param3;
      _param4 = _param4 ?? (Func<IRichDataType, IRichDataType>) (_param1_2 => _param1_2);
      Stopwatch stopwatch = Stopwatch.StartNew();
      // ISSUE: reference to a compiler-generated field
      IEnumerable<string> source = ((\u003388495369049.\u003869190444258) obj1).\u003279937888424;
      // ISSUE: reference to a compiler-generated method
      Func<List<IRichDataType>> func = (source != null ? (!source.Any<string>() ? 1 : 0) : 1) == 0 ? new Func<List<IRichDataType>>(obj1.\u003699693955378) : (Func<List<IRichDataType>>) (() => new List<IRichDataType>()
      {
        (IRichDataType) new \u003477499562484(),
        (IRichDataType) new \u003418950873144(),
        (IRichDataType) new \u003415651442941(),
        (IRichDataType) new \u003804667841946()
      });
      List<KeyValuePair<IColumnInfo, IRichDataType>> detectedTypes = new List<KeyValuePair<IColumnInfo, IRichDataType>>(this.\u003714847028982.Count);
      Guid guid = _param5 ?? Guid.NewGuid();
      foreach (IColumnInfo key in this.\u003714847028982)
      {
        if (!key.UseColumnForLearning)
        {
          detectedTypes.Add(new KeyValuePair<IColumnInfo, IRichDataType>(key, (IRichDataType) null));
        }
        else
        {
          \u003195906101425 obj2 = new \u003195906101425((IEnumerable<IRichDataType>) func());
          IEnumerable<string> strings = _param2.HasValue ? key.Data.Take<string>(_param2.Value) : key.Data;
          IRichDataType richDataType = _param4(obj2.\u003053663824544(strings, (IRichDataType) new \u003804667841946(), key.TrueLength, _param1_1, new Guid?(guid)));
          detectedTypes.Add(new KeyValuePair<IColumnInfo, IRichDataType>(key, richDataType));
        }
      }
      stopwatch.Stop();
      if (_param1_1 != null)
      {
        // ISSUE: reference to a compiler-generated field
        this.\u003268862412486(_param1_1, this.\u003802003884444, _param2, ((\u003388495369049.\u003869190444258) obj1).\u003279937888424, StopwatchUtils.ElapsedMillisecondsAsDouble(stopwatch), (double) this.\u003714847028982.Count, guid);
      }
      return new \u003590324994887(_param1_1, (IEnumerable<KeyValuePair<IColumnInfo, IRichDataType>>) detectedTypes);
    }

    private static IEnumerable<IRichDataType> \u003812325740490(
      IEnumerable<string> _param0)
    {
      // ISSUE: object of a compiler-generated type is created
      // ISSUE: variable of a compiler-generated type
      \u003388495369049.\u003517256904805 obj = new \u003388495369049.\u003517256904805(-2);
      // ISSUE: reference to a compiler-generated field
      ((\u003388495369049.\u003238171626529) obj).\u003166677141974 = _param0;
      return (IEnumerable<IRichDataType>) obj;
    }
  }
}
