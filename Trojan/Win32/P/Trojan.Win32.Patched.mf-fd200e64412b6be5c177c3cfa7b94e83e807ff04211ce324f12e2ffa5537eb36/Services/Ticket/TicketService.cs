// Decompiled with JetBrains decompiler
// Type: Bmc.Services.Ticket.TicketService
// Assembly: ticketservice, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: 3DFB8186-7053-43AF-8B45-70866071B1F2
// Assembly location: C:\Users\Administrateur\Downloads\Virusshare-00001-msil\Trojan.Win32.Patched.mf-fd200e64412b6be5c177c3cfa7b94e83e807ff04211ce324f12e2ffa5537eb36.exe

using Bmc.RegistryAccess;
using System;
using System.ServiceProcess;
using System.Threading;

namespace Bmc.Services.Ticket
{
  internal class TicketService : RemoteServiceBase
  {
    public static readonly TimeSpan WAIT_AFTER_KILL = TimeSpan.FromMilliseconds(10000.0);

    private static void Main() => ServiceBase.Run(new ServiceBase[1]
    {
      (ServiceBase) new TicketService()
    });

    public TicketService() => this.ServiceName = Constants.SERVICE_NAME;

    protected override void OnStart(string[] args) => this.OnStart((FIELD) 6, Constants.URI, typeof (TicketServer));

    protected override void OnStop()
    {
      TicketServer.Instance.KillAll();
      Thread.Sleep(TicketService.WAIT_AFTER_KILL);
      base.OnStop();
    }
  }
}
