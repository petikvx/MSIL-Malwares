// Decompiled with JetBrains decompiler
// Type: System.ServiceModel.WebScriptServiceHost
// Assembly: Microsoft.Transactions.Bridge, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: 51116F84-6FE2-4BD6-A908-2C88E06F45BB
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.07\HEUR-Trojan.MSIL.Picsys.gen-d64123468b2dcb11e9205288e0a6cb144a448944457a708807b7345a8a766675.exe

using System.Collections.ObjectModel;
using System.ServiceModel.Channels;
using System.ServiceModel.Description;
using System.ServiceModel.Web;

namespace System.ServiceModel
{
  internal class WebScriptServiceHost : ServiceHost
  {
    private static readonly string WebScriptEndpointKind = "webScriptEndpoint";

    public WebScriptServiceHost(System.Type serviceType, params Uri[] baseAddresses)
      : base(serviceType, baseAddresses)
    {
    }

    protected override void OnOpening()
    {
      // ISSUE: reference to a compiler-generated method
      // ISSUE: reference to a compiler-generated method
      WebServiceHost.AddAutomaticWebHttpBindingEndpoints((ServiceHost) this, this.ImplementedContracts, SR2.GetString(SR2.JsonWebScriptServiceHostOneServiceContract, (object) this.ImplementedContracts.Count), SR2.GetString(SR2.JsonWebScriptServiceHostAtLeastOneServiceContract), WebScriptServiceHost.WebScriptEndpointKind);
      foreach (ServiceEndpoint endpoint in (Collection<ServiceEndpoint>) this.Description.Endpoints)
      {
        if (endpoint.Binding != null && endpoint.Binding.CreateBindingElements().Find<WebMessageEncodingBindingElement>() != null && endpoint.Behaviors.Find<WebHttpBehavior>() == null)
        {
          ConfigLoader.LoadDefaultEndpointBehaviors(endpoint);
          if (endpoint.Behaviors.Find<WebHttpBehavior>() == null)
            endpoint.Behaviors.Add((IEndpointBehavior) new WebScriptEnablingBehavior());
        }
      }
      base.OnOpening();
    }
  }
}
