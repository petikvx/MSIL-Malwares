// Decompiled with JetBrains decompiler
// Type: .
// Assembly: ccy, Version=0.0.0.0, Culture=neutral, PublicKeyToken=cc6f4431894d1c97
// MVID: 2A74CDCD-1E5F-40DD-90C8-12E38E6596C8
// Assembly location: C:\Users\Administrateur\Downloads\Virusshare-00007-msil\Trojan.Win32.Jorik.Llac.cfi-7d3f633a775aae62503ba637b47672afca334a930966f3c35ac40563155370b2.exe

using \u0001;
using \u0006;
using System;
using System.Collections.Generic;
using System.IO;
using System.Runtime.InteropServices;
using System.Security.Cryptography;
using System.Security.Principal;
using System.Text;
using System.Xml;

namespace \u0007
{
  internal class \u0001 : \u0004.\u0004
  {
    [NonSerialized]
    internal new static \u0001.\u0001 \u0001;
    private \u0003 \u0001;
    private byte[] \u0001;

    static \u0001() => \u0002.\u0002(typeof (\u0007.\u0001));

    public \u0001([In] \u0003 obj0) => this.\u0001 = obj0;

    private void \u0002()
    {
      ulong[] numArray1;
      if (this.\u0001 != null || this.\u0001.\u0002())
      {
        if (true)
          return;
      }
      else
      {
        ulong[] numArray2 = this.\u0001.\u0002();
        if (true)
          numArray1 = numArray2;
      }
      Dictionary<string, ulong> dictionary1;
      do
      {
        Dictionary<string, ulong> dictionary2 = this.\u0001.\u0002();
        if (true)
          goto label_48;
label_2:
        continue;
label_48:
        dictionary1 = dictionary2;
        goto label_2;
      }
      while (false);
      MemoryStream memoryStream = new MemoryStream();
      MemoryStream w;
      if (true)
        w = memoryStream;
      XmlTextWriter xmlTextWriter = new XmlTextWriter((Stream) w, (Encoding) new UTF8Encoding(false));
      if (true)
        goto label_50;
label_3:
      XmlWriter xmlWriter1;
      xmlWriter1.WriteStartDocument();
      \u0006.\u0001 obj1 = new \u0006.\u0001(xmlWriter1, \u0007.\u0001.\u0001(2482));
      if (true)
        goto label_51;
label_4:
      \u0006.\u0001 obj2;
      try
      {
        do
        {
          xmlWriter1.WriteAttributeString(\u0007.\u0001.\u0001(2499), \u0007.\u0001.\u0001(1451).ToUpper());
          XmlWriter xmlWriter2 = xmlWriter1;
          string localName = \u0007.\u0001.\u0001(2516);
          DateTime now = DateTime.Now;
          if (true)
            goto label_40;
label_5:
          DateTime dateTime;
          string str1 = dateTime.ToString(\u0007.\u0001.\u0001(2529));
          xmlWriter2.WriteAttributeString(localName, str1);
          xmlWriter1.WriteAttributeString(\u0007.\u0001.\u0001(2534), Guid.NewGuid().ToString(\u0007.\u0001.\u0001(2547)));
          SecurityIdentifier user = WindowsIdentity.GetCurrent().User;
          MD5CryptoServiceProvider cryptoServiceProvider = new MD5CryptoServiceProvider();
          string str2;
          try
          {
            str2 = new Guid(cryptoServiceProvider.ComputeHash(Encoding.Unicode.GetBytes(user.ToString()))).ToString();
          }
          finally
          {
            do
            {
              cryptoServiceProvider?.Dispose();
            }
            while (false);
          }
          xmlWriter1.WriteAttributeString(\u0007.\u0001.\u0001(2552), str2);
          using (new \u0006.\u0001(xmlWriter1, \u0007.\u0001.\u0001(2561)))
            xmlWriter1.WriteAttributeString(\u0007.\u0001.\u0001(2578), \u0007.\u0001.\u0001(2587));
          using (new \u0006.\u0001(xmlWriter1, \u0007.\u0001.\u0001(2592)))
          {
            int index = 0;
            while (true)
            {
              int num = index;
              if (true)
                goto label_23;
label_21:
              index = num;
              continue;
label_23:
              int length = numArray1.Length;
              if (num < length)
              {
                if (numArray1[index] > 0UL)
                {
                  xmlWriter1.WriteStartElement(\u0007.\u0001.\u0001(2605));
                  xmlWriter1.WriteAttributeString(\u0007.\u0001.\u0001(2618), index.ToString());
                  xmlWriter1.WriteAttributeString(\u0007.\u0001.\u0001(2578), numArray1[index].ToString());
                  xmlWriter1.WriteEndElement();
                }
                num = index + 1;
                goto label_21;
              }
              else
                break;
            }
          }
          continue;
label_40:
          dateTime = now;
          goto label_5;
        }
        while (false);
        using (new \u0006.\u0001(xmlWriter1, \u0007.\u0001.\u0001(2623)))
        {
          do
          {
            if (true)
            {
              foreach (KeyValuePair<string, ulong> keyValuePair in dictionary1)
              {
                if (keyValuePair.Value > 0UL)
                {
                  xmlWriter1.WriteStartElement(\u0007.\u0001.\u0001(2605));
                  xmlWriter1.WriteAttributeString(\u0007.\u0001.\u0001(2644), keyValuePair.Key);
                  xmlWriter1.WriteAttributeString(\u0007.\u0001.\u0001(2578), keyValuePair.Value.ToString());
                  xmlWriter1.WriteEndElement();
                }
              }
            }
          }
          while (false);
        }
      }
      finally
      {
        while (obj2 != null)
        {
          if (true)
          {
            obj2.Dispose();
            break;
          }
        }
      }
      xmlWriter1.WriteEndDocument();
      xmlWriter1.Flush();
      w.Flush();
      this.\u0001 = w.ToArray();
      this.\u0001 = (\u0003) null;
      return;
label_51:
      obj2 = obj1;
      goto label_4;
label_50:
      xmlWriter1 = (XmlWriter) xmlTextWriter;
      goto label_3;
    }

    public void \u0003()
    {
      this.\u0002();
      this.\u0002(this.\u0001, \u0004.\u0004.\u0001.\u0001);
    }
  }
}
