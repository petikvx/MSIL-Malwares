// Decompiled with JetBrains decompiler
// Type: lo
// Assembly: XobniService, Version=1.8.3.7917, Culture=neutral, PublicKeyToken=6298d2d1fcfb5d85
// MVID: EA9F7D71-4A8D-4739-A320-5F01FC76E972
// Assembly location: C:\Users\Administrateur\Downloads\Virusshare-00000-msil\Trojan.Win32.Patched.mf-01164dae267b1f13c988de64e7fce38753b97528a3dc3fe730e191fc953c65ba.exe

using System;
using System.IO;
using System.Threading;
using XobniLogging;

internal class lo
{
  private lq a;
  private lq b;

  internal lo()
  {
    this.a = new lq("Global\\XobniRegSvrSpecialRequest", EventResetMode.AutoReset);
    this.b = new lq("Global\\XobniRegSvrSpecialResponse", EventResetMode.ManualReset);
  }

  internal void b() => this.a.a(new q8(this.a));

  internal void c()
  {
    this.a.f();
    this.b.f();
  }

  private void a()
  {
    try
    {
      ady.a(Level.Debug, "Received request to register redemption");
      string path1 = gs.a();
      ady.a(Level.Debug, "Installation path is " + path1);
      string str = Path.Combine(path1, "XobniRdo.dll");
      ady.a(Level.Debug, "XobniRdo path is " + str);
      if (!File.Exists(str))
        throw new Exception("XobniRdo doesn't exist or path is incorrect");
      eh.b(str);
      this.b.c();
    }
    catch (Exception ex)
    {
      ady.a(Level.Exception, "RegisterRedemptionRequest", ex);
    }
  }
}
