// Decompiled with JetBrains decompiler
// Type: MiniGames_Team9.LoadingGame
// Assembly: IdentityRefere, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: 9F5D51E6-71BD-43F4-AA35-8F19B20FF789
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.07\UDS-Trojan.Win32.GenericML.xnet-3cda0e34cd6f8adaabeeeb6e8bd08d80ba8d758bb3218c8058cd88353d253b61.exe

using System;
using System.Drawing;
using System.Windows.Forms;

namespace MiniGames_Team9
{
  internal class LoadingGame
  {
    private Xetang frmGame;
    private Timer timerback = new Timer();
    private Timer timerball = new Timer();
    private Timer timerrocket = new Timer();
    private PictureBox screen;
    private PictureBox ball;
    private PictureBox rocket;
    private Panel linerocket;
    private Panel cover;
    private Label loading;
    private Label introduction;
    private int wd = 0;
    private int down = 1;
    private int lt = 5;
    private int rocktop = -1;

    public LoadingGame()
    {
    }

    public LoadingGame(Xetang frmGame) => this.frmGame = frmGame;

    private void InitControls()
    {
      PictureBox pictureBox1 = new PictureBox();
      pictureBox1.BackColor = Color.Black;
      pictureBox1.Size = new Size(785, 610);
      this.screen = pictureBox1;
      PictureBox pictureBox2 = new PictureBox();
      pictureBox2.Size = new Size(6, 6);
      pictureBox2.Location = new Point(104, 315);
      pictureBox2.SizeMode = PictureBoxSizeMode.Zoom;
      this.ball = pictureBox2;
      PictureBox pictureBox3 = new PictureBox();
      pictureBox3.Size = new Size(64, 64);
      pictureBox3.Location = new Point(104, 330);
      pictureBox3.SizeMode = PictureBoxSizeMode.Zoom;
      this.rocket = pictureBox3;
      Panel panel1 = new Panel();
      panel1.Size = new Size(104, 4);
      panel1.Location = new Point(341, 320);
      panel1.BackColor = Color.Blue;
      this.linerocket = panel1;
      Panel panel2 = new Panel();
      panel2.Size = new Size(104, 89);
      panel2.Location = new Point(341, 321);
      panel2.BackColor = Color.Transparent;
      this.cover = panel2;
      Label label1 = new Label();
      label1.Font = new Font("Times New Roman", 10f);
      label1.Location = new Point(10, 10);
      label1.ForeColor = Color.Yellow;
      label1.Text = "Game loading...";
      this.loading = label1;
      Label label2 = new Label();
      label2.Font = new Font("Times New Roman", 12f, FontStyle.Italic);
      label2.Location = new Point(141, 421);
      label2.ForeColor = Color.White;
      label2.Text = "Thế chiến 3, thứ 6 ngày 13/1/2050. Quân địch đã xâm chiếm thành phố chúng ta...";
      label2.AutoSize = true;
      label2.TextAlign = ContentAlignment.MiddleCenter;
      this.introduction = label2;
      this.cover.Parent = (Control) this.screen;
      this.frmGame.Controls.Add((Control) this.screen);
      this.screen.BringToFront();
      this.screen.Controls.Add((Control) this.ball);
      this.screen.Controls.Add((Control) this.rocket);
      this.screen.Controls.Add((Control) this.linerocket);
      this.screen.Controls.Add((Control) this.cover);
      this.screen.Controls.Add((Control) this.loading);
      this.cover.BringToFront();
      this.loading.BringToFront();
      this.loading.Parent = (Control) this.cover;
      this.cover.Controls.Add((Control) this.loading);
    }

    public void InitEvents()
    {
      this.InitControls();
      this.timerback.Tick += new EventHandler(this.animationLine);
      this.timerball.Tick += new EventHandler(this.animationBall);
      this.timerrocket.Tick += new EventHandler(this.animationRocket);
      this.MakeScreen();
    }

    private void MakeScreen()
    {
      this.linerocket.Height = 1;
      this.linerocket.Width = 0;
      this.linerocket.Left = 141;
      this.ball.Top = 262;
      this.ball.Visible = false;
      this.ball.BringToFront();
      this.rocket.Height = 64;
      this.rocket.Top = 320;
      this.rocket.Visible = false;
      this.timerback.Interval = 30;
      this.timerball.Interval = 40;
      this.timerrocket.Interval = 10;
      this.timerback.Start();
    }

    private void animationLine(object sender, EventArgs e)
    {
      this.linerocket.Width += this.wd;
      this.screen.Controls.Add((Control) this.introduction);
      if (this.linerocket.Width < 1)
        this.wd = 5;
      if (this.linerocket.Width <= 504)
        return;
      this.timerback.Stop();
      this.timerrocket.Start();
    }

    private void animationBall(object sender, EventArgs e)
    {
      this.ball.Top += this.down;
      if (this.ball.Top < 265)
      {
        this.ball.Visible = true;
        this.down = 1;
      }
      if (this.ball.Top <= 305)
        return;
      this.timerball.Interval = 10;
      this.ball.Visible = false;
      this.down = 5;
      this.rocket.Left += 5;
      if (this.rocket.Left > 504)
      {
        this.linerocket.Width -= this.lt;
        this.linerocket.Left += this.lt;
        this.introduction.Location = new Point(321, 421);
        this.introduction.Text = "Chúc bạn may mắn...";
        if (this.linerocket.Left > 670)
        {
          this.down = 1;
          this.timerball.Stop();
          this.DestroyScreen();
        }
      }
    }

    private void animationRocket(object sender, EventArgs e)
    {
      this.rocket.Top += this.rocktop;
      if (this.rocket.Top > 318)
      {
        this.rocket.Visible = true;
        this.rocktop = -5;
      }
      if (this.rocket.Top >= 250)
        return;
      this.rocktop = -1;
      this.introduction.Location = new Point(200, 421);
      this.introduction.Text = "Bạn là người mang sứ mệnh bảo vệ thành phố, hãy cố gắng bạn nhé...";
      this.timerrocket.Stop();
      this.timerball.Start();
    }

    private void DestroyScreen()
    {
      this.frmGame.Controls.Remove((Control) this.screen);
      this.frmGame.isStart = true;
      this.frmGame.GameStart();
    }
  }
}
