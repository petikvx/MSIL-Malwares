// Decompiled with JetBrains decompiler
// Type: System.ServiceModel.Configuration.InternalEnumValidator
// Assembly: Microsoft.Transactions.Bridge, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: 51116F84-6FE2-4BD6-A908-2C88E06F45BB
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.07\HEUR-Trojan.MSIL.Picsys.gen-d64123468b2dcb11e9205288e0a6cb144a448944457a708807b7345a8a766675.exe

using System.ComponentModel;
using System.Configuration;
using System.Reflection;

namespace System.ServiceModel.Configuration
{
  internal class InternalEnumValidator : ConfigurationValidatorBase
  {
    private Type enumHelperType;
    private MethodInfo isDefined;

    public InternalEnumValidator(Type enumHelperType)
    {
      this.enumHelperType = enumHelperType;
      this.isDefined = this.enumHelperType.GetMethod("IsDefined", BindingFlags.Static | BindingFlags.Public | BindingFlags.NonPublic);
    }

    public override bool CanValidate(Type type) => this.isDefined != (MethodInfo) null;

    public override void Validate(object value)
    {
      if (!(bool) this.isDefined.Invoke((object) null, new object[1]
      {
        value
      }))
      {
        ParameterInfo[] parameters = this.isDefined.GetParameters();
        throw DiagnosticUtility.ExceptionUtility.ThrowHelperError((Exception) new InvalidEnumArgumentException(nameof (value), (int) value, parameters[0].ParameterType));
      }
    }
  }
}
