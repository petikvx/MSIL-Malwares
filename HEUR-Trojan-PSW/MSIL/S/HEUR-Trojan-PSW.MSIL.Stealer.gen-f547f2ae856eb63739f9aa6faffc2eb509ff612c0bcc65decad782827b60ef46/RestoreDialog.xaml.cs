// Decompiled with JetBrains decompiler
// Type: RemnantSaveManager.RestoreDialog
// Assembly: RemnantSaveManager, Version=1.99.0.0, Culture=neutral, PublicKeyToken=null
// MVID: 99FD4FCE-DABC-49CD-8C69-1190642E25EA
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.04\HEUR-Trojan-PSW.MSIL.Stealer.gen-f547f2ae856eb63739f9aa6faffc2eb509ff612c0bcc65decad782827b60ef46.exe

using System;
using System.CodeDom.Compiler;
using System.ComponentModel;
using System.Diagnostics;
using System.Globalization;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Markup;

namespace RemnantSaveManager
{
  public partial class RestoreDialog : Window, IComponentConnector
  {
    private SaveBackup _saveBackup;
    private RemnantSave _activeSave;
    internal Button btnCharacter;
    internal Button btnWorld;
    internal Button btnCancel;
    internal Label txtSave;
    internal Button btnAll;
    private bool _contentLoaded;

    public string Result { get; set; }

    public RestoreDialog(MainWindow mw, SaveBackup sb, RemnantSave @as)
    {
      this.InitializeComponent();
      this.txtSave.Content = (object) string.Format("Save Name:\t{0}\nSave Date:\t{1}", (object) sb.Name, (object) sb.SaveDate.ToString((IFormatProvider) CultureInfo.CurrentCulture));
      this._saveBackup = sb;
      this._activeSave = @as;
    }

    private void btnCharacter_Click(object sender, RoutedEventArgs e)
    {
      this.Result = "Character";
      this.DialogResult = new bool?(true);
      this.Close();
    }

    private void btnWorld_Click(object sender, RoutedEventArgs e)
    {
      if (this._saveBackup.Save.Characters.Count != this._activeSave.Characters.Count && MessageBox.Show("The active save has a different number of characters than the backup worlds you are restoring. This may result in unexpected behavior. Proceed?", "Character Mismatch", MessageBoxButton.YesNo, MessageBoxImage.Exclamation, MessageBoxResult.No) == MessageBoxResult.No)
      {
        this.DialogResult = new bool?(false);
        this.Close();
      }
      else
      {
        this.Result = "World";
        this.DialogResult = new bool?(true);
        this.Close();
      }
    }

    private void btnAll_Click(object sender, RoutedEventArgs e)
    {
      this.Result = "All";
      this.DialogResult = new bool?(true);
      this.Close();
    }

    [DebuggerNonUserCode]
    [GeneratedCode("PresentationBuildTasks", "4.0.0.0")]
    public void InitializeComponent()
    {
      if (this._contentLoaded)
        return;
      this._contentLoaded = true;
      Application.LoadComponent((object) this, new Uri("/RemnantSaveManager;component/restoredialog.xaml", UriKind.Relative));
    }

    [DebuggerNonUserCode]
    [GeneratedCode("PresentationBuildTasks", "4.0.0.0")]
    [EditorBrowsable(EditorBrowsableState.Never)]
    void IComponentConnector.Connect(int connectionId, object target)
    {
      switch (connectionId)
      {
        case 1:
          this.btnCharacter = (Button) target;
          this.btnCharacter.Click += new RoutedEventHandler(this.btnCharacter_Click);
          break;
        case 2:
          this.btnWorld = (Button) target;
          this.btnWorld.Click += new RoutedEventHandler(this.btnWorld_Click);
          break;
        case 3:
          this.btnCancel = (Button) target;
          break;
        case 4:
          this.txtSave = (Label) target;
          break;
        case 5:
          this.btnAll = (Button) target;
          this.btnAll.Click += new RoutedEventHandler(this.btnAll_Click);
          break;
        default:
          this._contentLoaded = true;
          break;
      }
    }
  }
}
