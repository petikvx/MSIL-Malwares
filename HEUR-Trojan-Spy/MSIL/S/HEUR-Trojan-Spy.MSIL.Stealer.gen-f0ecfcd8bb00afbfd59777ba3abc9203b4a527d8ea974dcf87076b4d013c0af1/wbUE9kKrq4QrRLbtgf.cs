// Decompiled with JetBrains decompiler
// Type: Xq8heDpTCPJayNT7lI.wbUE9kKrq4QrRLbtgf
// Assembly: StaticArrayInitTypeSiz, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: F19BBEE0-E53D-4450-9FD0-690E55E6EA19
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.03\HEUR-Trojan-Spy.MSIL.Stealer.gen-f0ecfcd8bb00afbfd59777ba3abc9203b4a527d8ea974dcf87076b4d013c0af1.exe

using System;
using System.Collections.Generic;
using System.Globalization;
using System.IO;
using System.Runtime.CompilerServices;
using System.Runtime.InteropServices;
using System.Text.RegularExpressions;
using System.Threading;
using System.Xml.XPath;

namespace Xq8heDpTCPJayNT7lI
{
  public class wbUE9kKrq4QrRLbtgf : FoH0Bh0VIkuJ4EU5Tk
  {
    private static string PBWXlOoSGv;
    private static readonly Uri w6vXpKqHNY;
    private static readonly TimeSpan o4MX6LVI1e;
    private static readonly Dictionary<int, Dictionary<int, wbUE9kKrq4QrRLbtgf.K45cbAid0A8tfLgo5s>> gWtXAVfLO3;
    private static readonly Regex k3dXHZ0dTJ;
    public static readonly wbUE9kKrq4QrRLbtgf XobXXeaeiQ;
    private static wbUE9kKrq4QrRLbtgf nYtjIsdZyjKCdPhkbGC;

    private wbUE9kKrq4QrRLbtgf()
    {
      NxX2fTcxLE28NYvGZm.dOE6C8et8tGSe();
      // ISSUE: explicit constructor call
      base.\u002Ector();
    }

    private static string gcHHWfrueq(int _param0)
    {
      string str;
      if (_param0 == -1)
      {
        str = "prices-all.xml";
      }
      else
      {
        bool flag = _param0 == -2;
        int num = 1;
        if (wbUE9kKrq4QrRLbtgf.lZZ1ycdtD2deKQHEh4i() != null)
          goto label_6;
label_1:
        while (true)
        {
          switch (num)
          {
            case 1:
              if (flag)
              {
                str = "prices-chs.xml";
                num = wbUE9kKrq4QrRLbtgf.lZZ1ycdtD2deKQHEh4i() == null ? 0 : 0;
                continue;
              }
              goto label_7;
            default:
              goto label_8;
          }
        }
label_7:
        str = string.Format("prices-{0}.xml", (object) _param0);
        goto label_8;
label_6:
        num = 0;
        goto label_1;
      }
label_8:
      return str;
    }

    private static Uri cfvHhL6TMq(int _param0) => new Uri(wbUE9kKrq4QrRLbtgf.w6vXpKqHNY, wbUE9kKrq4QrRLbtgf.gcHHWfrueq(_param0));

    private static int fshHN0dvnT(string _param0)
    {
      int num1;
      if (!(_param0 == "all"))
      {
        bool flag = _param0 == "chs";
        int num2 = 1;
        if (wbUE9kKrq4QrRLbtgf.L7bSU4dyBLmCqxQHWYf())
          goto label_4;
label_1:
        while (true)
        {
          switch (num2)
          {
            case 1:
              if (!flag)
              {
                num1 = int.Parse(_param0, (IFormatProvider) CultureInfo.InvariantCulture);
                num2 = wbUE9kKrq4QrRLbtgf.L7bSU4dyBLmCqxQHWYf() ? 0 : 0;
                continue;
              }
              goto label_2;
            default:
              goto label_6;
          }
        }
label_2:
        num1 = -2;
        goto label_6;
label_4:
        num2 = 1;
        goto label_1;
      }
      else
        goto label_7;
label_6:
      return num1;
label_7:
      num1 = -1;
      goto label_6;
    }

    private static Dictionary<int, wbUE9kKrq4QrRLbtgf.K45cbAid0A8tfLgo5s> SJjHSbImA4(
      string _param0)
    {
      Dictionary<int, wbUE9kKrq4QrRLbtgf.K45cbAid0A8tfLgo5s> dictionary = new Dictionary<int, wbUE9kKrq4QrRLbtgf.K45cbAid0A8tfLgo5s>();
      using (FileStream fileStream = File.OpenRead(_param0))
      {
        XPathNodeIterator xpathNodeIterator = new XPathDocument((Stream) fileStream).CreateNavigator().Select("/eveapi/result/rowset[@name = 'prices']/row");
        while (xpathNodeIterator.MoveNext())
        {
          int key = int.Parse(xpathNodeIterator.Current.SelectSingleNode("@typeID").Value, (IFormatProvider) CultureInfo.InvariantCulture);
          dictionary[key] = new wbUE9kKrq4QrRLbtgf.K45cbAid0A8tfLgo5s()
          {
            TUjX1ZyJRt = Decimal.Parse(xpathNodeIterator.Current.SelectSingleNode("@avg").Value, (IFormatProvider) CultureInfo.InvariantCulture),
            MO8XfWvcBb = Decimal.Parse(xpathNodeIterator.Current.SelectSingleNode("@median").Value, (IFormatProvider) CultureInfo.InvariantCulture),
            C21XO9KWtE = long.Parse(xpathNodeIterator.Current.SelectSingleNode("@vol").Value, (IFormatProvider) CultureInfo.InvariantCulture),
            WMqXMEslWS = Decimal.Parse(xpathNodeIterator.Current.SelectSingleNode("@lo").Value, (IFormatProvider) CultureInfo.InvariantCulture),
            Sn3XumvSpP = Decimal.Parse(xpathNodeIterator.Current.SelectSingleNode("@hi").Value, (IFormatProvider) CultureInfo.InvariantCulture),
            DBNXDyPoaG = DateTime.Parse(xpathNodeIterator.Current.SelectSingleNode("@first").Value, (IFormatProvider) CultureInfo.InvariantCulture),
            HnnXdpfbwB = DateTime.Parse(xpathNodeIterator.Current.SelectSingleNode("@last").Value, (IFormatProvider) CultureInfo.InvariantCulture)
          };
        }
      }
      return dictionary;
    }

    private void boGHRBN054(int _param1, int _param2)
    {
      // ISSUE: reference to a compiler-generated field
      EventHandler<hMF0tyIVakkUChcCjf> rm3X9yGiYu = this.RM3X9yGiYU;
      if (rm3X9yGiYu == null)
        return;
      rm3X9yGiYu((object) this, new hMF0tyIVakkUChcCjf(_param1, _param2));
    }

    private kFEUcmqe6LYj4ZtZTT mlLHEjrd9R(int _param1)
    {
      // ISSUE: object of a compiler-generated type is created
      // ISSUE: variable of a compiler-generated type
      wbUE9kKrq4QrRLbtgf.iM8kjwT04OoVPVVF3N m8kjwT04OoVpvvF3N = new wbUE9kKrq4QrRLbtgf.iM8kjwT04OoVPVVF3N();
      // ISSUE: reference to a compiler-generated field
      m8kjwT04OoVpvvF3N.SSSXUfEMP8 = _param1;
      int num1 = 1;
      if (wbUE9kKrq4QrRLbtgf.lZZ1ycdtD2deKQHEh4i() == null)
        goto label_2;
label_1:
      int num2;
      num1 = num2;
label_2:
      bool flag;
      string str1;
      string str2;
      while (true)
      {
        switch (num1)
        {
          case 1:
            // ISSUE: reference to a compiler-generated field
            str2 = (string) wbUE9kKrq4QrRLbtgf.LTFnkjdXsbo74G7YYUV((object) wbUE9kKrq4QrRLbtgf.PBWXlOoSGv, (object) wbUE9kKrq4QrRLbtgf.gcHHWfrueq(m8kjwT04OoVpvvF3N.SSSXUfEMP8));
            // ISSUE: reference to a compiler-generated field
            str1 = wbUE9kKrq4QrRLbtgf.cfvHhL6TMq(m8kjwT04OoVpvvF3N.SSSXUfEMP8).ToString();
            Directory.CreateDirectory(wbUE9kKrq4QrRLbtgf.PBWXlOoSGv);
            flag = wbUE9kKrq4QrRLbtgf.DWL5AYdFuTqh2DSTK4P((object) (kFEUcmqe6LYj4ZtZTT) wbUE9kKrq4QrRLbtgf.zw9RRUdRvm6B4UpPE8u((object) str2, wbUE9kKrq4QrRLbtgf.o4MX6LVI1e)) != 0;
            if (wbUE9kKrq4QrRLbtgf.lZZ1ycdtD2deKQHEh4i() == null)
            {
              num1 = 0;
              continue;
            }
            goto label_1;
          default:
            goto label_3;
        }
      }
label_3:
      if (flag)
        this.boGHRBN054(0, 1);
      // ISSUE: reference to a compiler-generated method
      return J6iPDbgMshEgTWP2Pf.aadHt6DFmE(str1, str2, wbUE9kKrq4QrRLbtgf.o4MX6LVI1e, new GOfqNtt5HGIITAXOqc(m8kjwT04OoVpvvF3N.f1IXeXAoyU));
    }

    private Decimal cLiHJrll2D(int _param1, int _param2, Are6o23pDhgqA19g4D _param3)
    {
      Decimal num1;
      if (this.jV1HzjCJyI((IEnumerable<int>) new int[1]
      {
        _param1
      }, _param2, _param3).TryGetValue(_param1, out num1))
        return num1;
      int num2 = 0;
      if (wbUE9kKrq4QrRLbtgf.lZZ1ycdtD2deKQHEh4i() != null)
        goto label_5;
label_1:
      switch (num2)
      {
        default:
          throw new aR0KcYorM6GlSWvaL4((QWeNKvnAXIDOynweRL) 0, "No price for typeID " + _param1.ToString());
      }
label_5:
      num2 = 0;
      goto label_1;
    }

    private Dictionary<int, Decimal> jV1HzjCJyI(
      IEnumerable<int> _param1,
      int _param2,
      Are6o23pDhgqA19g4D _param3)
    {
      Dictionary<int, Decimal> dictionary1 = new Dictionary<int, Decimal>();
      kFEUcmqe6LYj4ZtZTT feUcmqe6Lyj4ZtZtt = this.mlLHEjrd9R(_param2);
      lock (wbUE9kKrq4QrRLbtgf.gWtXAVfLO3)
      {
        Dictionary<int, wbUE9kKrq4QrRLbtgf.K45cbAid0A8tfLgo5s> dictionary2;
        if (!wbUE9kKrq4QrRLbtgf.gWtXAVfLO3.TryGetValue(_param2, out dictionary2))
          throw new aR0KcYorM6GlSWvaL4((QWeNKvnAXIDOynweRL) 1, "No prices available for region " + _param2.ToString(), feUcmqe6Lyj4ZtZtt.uy3AFmvLjU());
        foreach (int key in _param1)
        {
          wbUE9kKrq4QrRLbtgf.K45cbAid0A8tfLgo5s k45cbAid0A8tfLgo5s;
          if (dictionary2.TryGetValue(key, out k45cbAid0A8tfLgo5s))
          {
            switch (_param3)
            {
              case Are6o23pDhgqA19g4D.Mean:
                dictionary1[key] = k45cbAid0A8tfLgo5s.TUjX1ZyJRt;
                break;
              case Are6o23pDhgqA19g4D.Median:
                dictionary1[key] = k45cbAid0A8tfLgo5s.MO8XfWvcBb;
                break;
              case Are6o23pDhgqA19g4D.High:
                dictionary1[key] = k45cbAid0A8tfLgo5s.Sn3XumvSpP;
                break;
              case Are6o23pDhgqA19g4D.Low:
                dictionary1[key] = k45cbAid0A8tfLgo5s.WMqXMEslWS;
                break;
              default:
                throw new ApplicationException("Unknown stat " + _param3.ToString());
            }
          }
        }
      }
      return dictionary1;
    }

    [CompilerGenerated]
    [SpecialName]
    public void EAlaJ2Cdrp(EventHandler<hMF0tyIVakkUChcCjf> _param1)
    {
      // ISSUE: reference to a compiler-generated field
      EventHandler<hMF0tyIVakkUChcCjf> eventHandler = this.RM3X9yGiYU;
      EventHandler<hMF0tyIVakkUChcCjf> comparand;
      do
      {
        comparand = eventHandler;
        // ISSUE: reference to a compiler-generated field
        eventHandler = Interlocked.CompareExchange<EventHandler<hMF0tyIVakkUChcCjf>>(ref this.RM3X9yGiYU, comparand + _param1, comparand);
      }
      while (eventHandler != comparand);
    }

    [CompilerGenerated]
    [SpecialName]
    public void RRqa2hfHyl(EventHandler<hMF0tyIVakkUChcCjf> _param1)
    {
      // ISSUE: reference to a compiler-generated field
      EventHandler<hMF0tyIVakkUChcCjf> eventHandler = this.RM3X9yGiYU;
      EventHandler<hMF0tyIVakkUChcCjf> comparand;
      do
      {
        comparand = eventHandler;
        // ISSUE: reference to a compiler-generated field
        eventHandler = Interlocked.CompareExchange<EventHandler<hMF0tyIVakkUChcCjf>>(ref this.RM3X9yGiYU, comparand - _param1, comparand);
      }
      while (eventHandler != comparand);
    }

    public void OLmaKJXG1m()
    {
      if (wbUE9kKrq4QrRLbtgf.cJ4bRWdwvsBU0QHP0Mq((object) wbUE9kKrq4QrRLbtgf.PBWXlOoSGv))
      {
        lock (wbUE9kKrq4QrRLbtgf.gWtXAVfLO3)
        {
          foreach (string file in Directory.GetFiles(wbUE9kKrq4QrRLbtgf.PBWXlOoSGv))
          {
            Match match = wbUE9kKrq4QrRLbtgf.k3dXHZ0dTJ.Match(Path.GetFileName(file));
            if (match.Success)
              goto label_10;
            else
              goto label_6;
label_4:
            int num1;
            int num2 = num1;
label_5:
            switch (num2)
            {
              case 1:
                try
                {
                  int key = wbUE9kKrq4QrRLbtgf.fshHN0dvnT(match.Groups[1].Value);
                  wbUE9kKrq4QrRLbtgf.gWtXAVfLO3[key] = wbUE9kKrq4QrRLbtgf.SJjHSbImA4(file);
                }
                catch (Exception ex)
                {
                }
                break;
            }
label_6:
            if (wbUE9kKrq4QrRLbtgf.lZZ1ycdtD2deKQHEh4i() == null)
            {
              num2 = 0;
              goto label_5;
            }
            else
              goto label_4;
label_10:
            num2 = 1;
            if (wbUE9kKrq4QrRLbtgf.lZZ1ycdtD2deKQHEh4i() == null)
              goto label_5;
            else
              goto label_4;
          }
        }
      }
      else
      {
        int num3 = 0;
        if (!wbUE9kKrq4QrRLbtgf.L7bSU4dyBLmCqxQHWYf())
          goto label_22;
label_1:
        switch (num3)
        {
          case 0:
            return;
          default:
            return;
        }
label_22:
        int num4;
        num3 = num4;
        goto label_1;
      }
    }

    public void sjdaVCDTbL()
    {
    }

    public Decimal DUsaED2QC2(int _param1, Are6o23pDhgqA19g4D _param2) => this.WNgaFqBCRV(_param1, -1, _param2);

    public Decimal Mg8auy5aW2(int _param1, Are6o23pDhgqA19g4D _param2) => this.WNgaFqBCRV(_param1, -2, _param2);

    public Decimal WNgaFqBCRV(int _param1, int _param2, Are6o23pDhgqA19g4D _param3) => this.cLiHJrll2D(_param1, _param2, _param3);

    public Dictionary<int, Decimal> SJ7aIsNnAK(
      IEnumerable<int> _param1,
      Are6o23pDhgqA19g4D _param2)
    {
      return this.XQvaO9ibn4(_param1, -1, _param2);
    }

    public Dictionary<int, Decimal> GDfa8pJVOQ(
      IEnumerable<int> _param1,
      Are6o23pDhgqA19g4D _param2)
    {
      return this.XQvaO9ibn4(_param1, -2, _param2);
    }

    public Dictionary<int, Decimal> XQvaO9ibn4(
      IEnumerable<int> _param1,
      int _param2,
      Are6o23pDhgqA19g4D _param3)
    {
      return this.jV1HzjCJyI(_param1, _param2, _param3);
    }

    static wbUE9kKrq4QrRLbtgf()
    {
      int num1 = 1;
label_1:
      int num2 = num1;
      while (true)
      {
        switch (num2)
        {
          case 1:
            NxX2fTcxLE28NYvGZm.dOE6C8et8tGSe();
            if (true)
            {
              num2 = 0;
              continue;
            }
            goto label_1;
          default:
            goto label_4;
        }
      }
label_4:
      wbUE9kKrq4QrRLbtgf.PBWXlOoSGv = Path.Combine(J6iPDbgMshEgTWP2Pf.BewHeteFps(), "zofu");
      wbUE9kKrq4QrRLbtgf.w6vXpKqHNY = new Uri("http://eve.no-ip.de/prices/30d/");
      wbUE9kKrq4QrRLbtgf.o4MX6LVI1e = TimeSpan.FromHours(4.0);
      wbUE9kKrq4QrRLbtgf.gWtXAVfLO3 = new Dictionary<int, Dictionary<int, wbUE9kKrq4QrRLbtgf.K45cbAid0A8tfLgo5s>>();
      wbUE9kKrq4QrRLbtgf.k3dXHZ0dTJ = new Regex("^prices-(\\d+|all|chs)\\.xml$");
      wbUE9kKrq4QrRLbtgf.XobXXeaeiQ = new wbUE9kKrq4QrRLbtgf();
    }

    internal static bool L7bSU4dyBLmCqxQHWYf() => wbUE9kKrq4QrRLbtgf.nYtjIsdZyjKCdPhkbGC == null;

    internal static wbUE9kKrq4QrRLbtgf lZZ1ycdtD2deKQHEh4i() => wbUE9kKrq4QrRLbtgf.nYtjIsdZyjKCdPhkbGC;

    internal static object LTFnkjdXsbo74G7YYUV([In] object obj0, [In] object obj1) => (object) Path.Combine((string) obj0, (string) obj1);

    internal static object zw9RRUdRvm6B4UpPE8u([In] object obj0, TimeSpan _param1) => (object) J6iPDbgMshEgTWP2Pf.t2mHOkK0j3((string) obj0, _param1);

    internal static DV4WTAsIc1WQBXhuQc DWL5AYdFuTqh2DSTK4P([In] object obj0) => ((kFEUcmqe6LYj4ZtZTT) obj0).sQOAox7AGf();

    internal static bool cJ4bRWdwvsBU0QHP0Mq([In] object obj0) => Directory.Exists((string) obj0);

    private class K45cbAid0A8tfLgo5s
    {
      public Decimal TUjX1ZyJRt;
      public Decimal MO8XfWvcBb;
      public long C21XO9KWtE;
      public Decimal WMqXMEslWS;
      public Decimal Sn3XumvSpP;
      public DateTime DBNXDyPoaG;
      public DateTime HnnXdpfbwB;
      internal static wbUE9kKrq4QrRLbtgf.K45cbAid0A8tfLgo5s ibU40Ed5p7sHytiPGJb;

      public K45cbAid0A8tfLgo5s()
      {
        wbUE9kKrq4QrRLbtgf.K45cbAid0A8tfLgo5s.lUtlGyd1SfXxQYRXXBf();
        // ISSUE: explicit constructor call
        base.\u002Ector();
      }

      internal static void lUtlGyd1SfXxQYRXXBf() => NxX2fTcxLE28NYvGZm.dOE6C8et8tGSe();

      internal static bool ueXWvYdoyt7A068O4M4() => wbUE9kKrq4QrRLbtgf.K45cbAid0A8tfLgo5s.ibU40Ed5p7sHytiPGJb == null;

      internal static wbUE9kKrq4QrRLbtgf.K45cbAid0A8tfLgo5s YnfND4dM3m5Utnc79ei() => wbUE9kKrq4QrRLbtgf.K45cbAid0A8tfLgo5s.ibU40Ed5p7sHytiPGJb;
    }
  }
}
