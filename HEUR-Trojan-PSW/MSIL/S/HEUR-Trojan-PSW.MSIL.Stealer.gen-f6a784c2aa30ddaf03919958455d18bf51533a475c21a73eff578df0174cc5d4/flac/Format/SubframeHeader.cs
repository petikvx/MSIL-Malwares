// Decompiled with JetBrains decompiler
// Type: flac.Format.SubframeHeader
// Assembly: STAThreadAttrib, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: 6EE3DE1A-E148-4FBA-A193-65BEA1824C00
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.04\HEUR-Trojan-PSW.MSIL.Stealer.gen-f6a784c2aa30ddaf03919958455d18bf51533a475c21a73eff578df0174cc5d4.exe

namespace flac.Format
{
  public class SubframeHeader
  {
    private const int SUBFRAME_TYPE_BITS_COUNT = 6;
    private const sbyte WASTED_BITS_EXIST_FLAG = 1;
    private sbyte subframeType_;
    private sbyte wastedBitsPerSampleFlag_;
    private int unaryWastedBitsPerSampleCount_;

    public int SubframeType => (int) this.subframeType_;

    public void Read(FlacStream stream)
    {
      Validation.IsReserved(stream.Reader.ReadBit() == (sbyte) 0);
      this.subframeType_ = stream.Reader.ReadBitsAsSByte(6);
      this.wastedBitsPerSampleFlag_ = stream.Reader.ReadBit();
      this.unaryWastedBitsPerSampleCount_ = 0;
      if (this.wastedBitsPerSampleFlag_ != (sbyte) 1)
        return;
      this.unaryWastedBitsPerSampleCount_ = stream.Reader.GetUnaryBitStreamLength();
    }

    public void Write(FlacStream stream)
    {
      stream.Writer.WriteBit((sbyte) 0);
      stream.Writer.WriteBits((int) this.subframeType_, 6);
      stream.Writer.WriteBit(this.wastedBitsPerSampleFlag_);
      if (this.wastedBitsPerSampleFlag_ != (sbyte) 1)
        return;
      stream.Writer.WriteUnaryBitStream(this.unaryWastedBitsPerSampleCount_);
    }
  }
}
