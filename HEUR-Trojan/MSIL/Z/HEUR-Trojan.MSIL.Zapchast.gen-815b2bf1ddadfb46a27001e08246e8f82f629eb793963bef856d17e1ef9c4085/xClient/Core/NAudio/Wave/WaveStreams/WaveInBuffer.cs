// Decompiled with JetBrains decompiler
// Type: xClient.Core.NAudio.Wave.WaveStreams.WaveInBuffer
// Assembly: $77-Venom, Version=2.1.0.0, Culture=neutral, PublicKeyToken=null
// MVID: DC8E8704-647D-4CA7-99AB-BB7BE936B486
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.03\HEUR-Trojan.MSIL.Zapchast.gen-815b2bf1ddadfb46a27001e08246e8f82f629eb793963bef856d17e1ef9c4085.exe

using System;
using System.Runtime.InteropServices;

namespace xClient.Core.NAudio.Wave.WaveStreams
{
  internal class WaveInBuffer : IDisposable
  {
    private readonly ㄇ\uF112穧箰咽\u31DC첞闩倕\uFFFD鵊\uE0C8糒믕㞠픟\u1AEF囲妛ꗢ header;
    private readonly int bufferSize;
    private readonly byte[] buffer;
    private GCHandle hBuffer;
    private IntPtr waveInHandle;
    private GCHandle hHeader;
    private GCHandle hThis;

    public WaveInBuffer(IntPtr waveInHandle, int bufferSize)
    {
      this.bufferSize = bufferSize;
      this.buffer = new byte[bufferSize];
      this.hBuffer = GCHandle.Alloc((object) this.buffer, GCHandleType.Pinned);
      this.waveInHandle = waveInHandle;
      this.header = new ㄇ\uF112穧箰咽\u31DC첞闩倕\uFFFD鵊\uE0C8糒믕㞠픟\u1AEF囲妛ꗢ();
      this.hHeader = GCHandle.Alloc((object) this.header, GCHandleType.Pinned);
      this.header.䦯ဩ륚䗪읖针ೂ爮\uF381ぇ퀾\u2532끸鳶ᄲ\u2831첊\uFAEC⵿\uF0F3 = this.hBuffer.AddrOfPinnedObject();
      this.header.蕳\uA4ABㄚ姣醪칎\u208B\u2205\u230D圖\u2433萖刯\uFFFD냫챤\u21F8㜮\u0BC5졟 = bufferSize;
      this.header.ᦒ\uEAEA銄眡鿂䖮\uEA4A\u087Cञ愽䬒똵ମጂ擌铫ꖛ\uFFFD瀱ॆ = 1;
      this.hThis = GCHandle.Alloc((object) this);
      this.header.\uE217\uF382ꕐ禤棣\uF695ऽ讏ꅆ䔘閖㸾\u2545㡌୫塊\u27D4먰扵ᯁ = (IntPtr) this.hThis;
      㵼眢謟ᱥ︦\u2B28؄秀ᶙᨱ벁蕿\uF60C校쌎흭ä䌾嶆\uE399.定뙟乗廓囿ꮆ\uEE08\u2A64윪웧晪鯫\u2AE1堢蝹\u258C\u0D56뱴ꗂ뺽(\uF22A폆幏\u2D77\uE703ꂀ䀣켨钕䠢㥧\u2D2Aი鄠쩘뢚놇燀쁱䧢.\u2BE2闫甍\uE885香\uE1D2\uE8AE\u29FAꇵ\uE9D6ꛊꄰ\uFFFD\uF054ﾔ寱疇䄂雧瞇(waveInHandle, this.header, Marshal.SizeOf((object) this.header)), "waveInPrepareHeader");
    }

    public void Reuse()
    {
      㵼眢謟ᱥ︦\u2B28؄秀ᶙᨱ벁蕿\uF60C校쌎흭ä䌾嶆\uE399.定뙟乗廓囿ꮆ\uEE08\u2A64윪웧晪鯫\u2AE1堢蝹\u258C\u0D56뱴ꗂ뺽(\uF22A폆幏\u2D77\uE703ꂀ䀣켨钕䠢㥧\u2D2Aი鄠쩘뢚놇燀쁱䧢.雀檑䂜翜\uFFFD링鵍礻臓\uE125䇆\uF20D䛽訖\u3208휡壘輔뇍\uE98F(this.waveInHandle, this.header, Marshal.SizeOf((object) this.header)), "waveUnprepareHeader");
      㵼眢謟ᱥ︦\u2B28؄秀ᶙᨱ벁蕿\uF60C校쌎흭ä䌾嶆\uE399.定뙟乗廓囿ꮆ\uEE08\u2A64윪웧晪鯫\u2AE1堢蝹\u258C\u0D56뱴ꗂ뺽(\uF22A폆幏\u2D77\uE703ꂀ䀣켨钕䠢㥧\u2D2Aი鄠쩘뢚놇燀쁱䧢.\u2BE2闫甍\uE885香\uE1D2\uE8AE\u29FAꇵ\uE9D6ꛊꄰ\uFFFD\uF054ﾔ寱疇䄂雧瞇(this.waveInHandle, this.header, Marshal.SizeOf((object) this.header)), "waveInPrepareHeader");
      㵼眢謟ᱥ︦\u2B28؄秀ᶙᨱ벁蕿\uF60C校쌎흭ä䌾嶆\uE399.定뙟乗廓囿ꮆ\uEE08\u2A64윪웧晪鯫\u2AE1堢蝹\u258C\u0D56뱴ꗂ뺽(\uF22A폆幏\u2D77\uE703ꂀ䀣켨钕䠢㥧\u2D2Aი鄠쩘뢚놇燀쁱䧢.꾥\uEEFD㣓闟㨨給濷籡᮷ﶈ憩ഏ\u0D74\uE37E礈ꎖĕ銾\u2907漢(this.waveInHandle, this.header, Marshal.SizeOf((object) this.header)), "waveInAddBuffer");
    }

    ~WaveInBuffer() => this.Dispose(false);

    public void Dispose()
    {
      GC.SuppressFinalize((object) this);
      this.Dispose(true);
    }

    protected void Dispose(bool disposing)
    {
      int num1 = disposing ? 1 : 0;
      if (this.waveInHandle != IntPtr.Zero)
      {
        int num2 = (int) \uF22A폆幏\u2D77\uE703ꂀ䀣켨钕䠢㥧\u2D2Aი鄠쩘뢚놇燀쁱䧢.雀檑䂜翜\uFFFD링鵍礻臓\uE125䇆\uF20D䛽訖\u3208휡壘輔뇍\uE98F(this.waveInHandle, this.header, Marshal.SizeOf((object) this.header));
        this.waveInHandle = IntPtr.Zero;
      }
      if (this.hHeader.IsAllocated)
        this.hHeader.Free();
      if (this.hBuffer.IsAllocated)
        this.hBuffer.Free();
      if (!this.hThis.IsAllocated)
        return;
      this.hThis.Free();
    }

    public byte[] Data => this.buffer;

    public bool Done => (this.header.\u27DD騝醝폆\u08DF㘮\u2AC3ᛞ䊜杨\u255E\uF7AA\u2B7E怪\uFFFD곫蛄濮뫣墘 & 쩷\uFFFD嗆\u2585\u2780肾些姂쨮鬏ᤱ\u2231\uFFFD뀻츬쭆ꅒ韄\uF2F2ൌ.㵍奊峩誰쾲仗\u2B27殩뙇殺㿕랐淢\u2319景롧\uE31A鬥\uFFFD䟕) == 쩷\uFFFD嗆\u2585\u2780肾些姂쨮鬏ᤱ\u2231\uFFFD뀻츬쭆ꅒ韄\uF2F2ൌ.㵍奊峩誰쾲仗\u2B27殩뙇殺㿕랐淢\u2319景롧\uE31A鬥\uFFFD䟕;

    public bool InQueue => (this.header.\u27DD騝醝폆\u08DF㘮\u2AC3ᛞ䊜杨\u255E\uF7AA\u2B7E怪\uFFFD곫蛄濮뫣墘 & 쩷\uFFFD嗆\u2585\u2780肾些姂쨮鬏ᤱ\u2231\uFFFD뀻츬쭆ꅒ韄\uF2F2ൌ.䜫\uE6F3牬\uFFFDꬭ컝\u25DDꁆ\uE91A\uEFB9啾゙ჟ\u245Bﴉᷯ㕚\u00B6\u2BE8ᛵ) == 쩷\uFFFD嗆\u2585\u2780肾些姂쨮鬏ᤱ\u2231\uFFFD뀻츬쭆ꅒ韄\uF2F2ൌ.䜫\uE6F3牬\uFFFDꬭ컝\u25DDꁆ\uE91A\uEFB9啾゙ჟ\u245Bﴉᷯ㕚\u00B6\u2BE8ᛵ;

    public int BytesRecorded => this.header.䄴䟰\uF7D8锘\u294E誄耈\uF7D8㙰鬁䐁餍欖윇댱\u33C9璲꽄ꂊ餺;

    public int BufferSize => this.bufferSize;
  }
}
