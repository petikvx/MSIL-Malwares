// Decompiled with JetBrains decompiler
// Type: org.lb.lbvm.runtime.CallStack
// Assembly: GCCollectionMo, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: 3A5CAC9E-800C-431E-83D8-5129C6781923
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.01-msil\Trojan-PSW.Win32.Stealer.aezg-0c850189152813ace3063af65fad784dace09ebd9778423c04aa0881b0d0cc09.exe

using org.lb.lbvm.exceptions;

namespace org.lb.lbvm.runtime
{
  internal sealed class CallStack
  {
    private readonly int[] ipStack = new int[1024];
    private readonly int[] numberOfParametersStack = new int[1024];
    private int count;

    public void Push(int ip, int numberOfParameters)
    {
      if (this.count == this.ipStack.Length - 1)
        throw new RuntimeException("Call stack overflow");
      this.ipStack[this.count] = ip;
      this.numberOfParametersStack[this.count] = numberOfParameters;
      ++this.count;
    }

    public void Pop()
    {
      if (this.count == 0)
        throw new RuntimeException("Call stack underflow");
      --this.count;
    }

    public int GetLastIp() => this.ipStack[this.count - 1];

    public int GetLastNumberOfParameters() => this.numberOfParametersStack[this.count - 1];

    public int Count() => this.count;
  }
}
