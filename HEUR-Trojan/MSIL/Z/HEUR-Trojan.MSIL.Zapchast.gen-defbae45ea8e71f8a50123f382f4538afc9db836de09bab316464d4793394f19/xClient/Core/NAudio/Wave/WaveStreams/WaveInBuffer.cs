// Decompiled with JetBrains decompiler
// Type: xClient.Core.NAudio.Wave.WaveStreams.WaveInBuffer
// Assembly: $77-Venom, Version=2.1.0.0, Culture=neutral, PublicKeyToken=null
// MVID: DC8E8704-647D-4CA7-99AB-BB7BE936B486
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.01-msil\HEUR-Trojan.MSIL.Zapchast.gen-defbae45ea8e71f8a50123f382f4538afc9db836de09bab316464d4793394f19.exe

using System;
using System.Runtime.InteropServices;

namespace xClient.Core.NAudio.Wave.WaveStreams
{
  internal class WaveInBuffer : IDisposable
  {
    private readonly 㛚殰Ὀ璟ᵟ뽏\uE205虡\uAAD7\u1B4F谰\uA62E\uF60Eㄻ\uF8D0䵬㯗뎁稍\u0087 header;
    private readonly int bufferSize;
    private readonly byte[] buffer;
    private GCHandle hBuffer;
    private IntPtr waveInHandle;
    private GCHandle hHeader;
    private GCHandle hThis;

    public WaveInBuffer(IntPtr waveInHandle, int bufferSize)
    {
      this.bufferSize = bufferSize;
      this.buffer = new byte[bufferSize];
      this.hBuffer = GCHandle.Alloc((object) this.buffer, GCHandleType.Pinned);
      this.waveInHandle = waveInHandle;
      this.header = new 㛚殰Ὀ璟ᵟ뽏\uE205虡\uAAD7\u1B4F谰\uA62E\uF60Eㄻ\uF8D0䵬㯗뎁稍\u0087();
      this.hHeader = GCHandle.Alloc((object) this.header, GCHandleType.Pinned);
      this.header.䖇顜緪\u259F딜薔\uE37F輀募\u32B6흷ḉ鍶ྠᘭ㟞\u26E2뷆\uE51B䌪 = this.hBuffer.AddrOfPinnedObject();
      this.header.萢틟갽똕뻵\u2F92\uF358\uE7BD群뱜䯰蔕袆샸\uFFFD\uF004\u18FE\uE270飃\uE234 = bufferSize;
      this.header.맷侃㣒\uFFFD飼䔀\u0530ҧ浰\uF2B5幧ᥝ뤿楾态叜胏侷\u038Bㆉ = 1;
      this.hThis = GCHandle.Alloc((object) this);
      this.header.芪\u227D鳓ܡ虜\u0FDA\uE58Cꌛ\uE3CD\uFFFD\uE2EE妜疸\uF002ﰣ痝긑䅳鱾\u2E6C = (IntPtr) this.hThis;
      ᔦ\uF14B̔촮\u2743븮浘蓧ꡆ烋枿䨿\u269E逇埓뼌붬额\uFFFD鬊.嘐颋뇶鯿쏃輊\uF479ذ\uE5DB媩\uE8D4\uFFFDጘ\u20A3냪䊏ᆶ\uF4DF\uF761\uF74B(巛퀝폳\uF0DE\uE025晱舘헸\u201D橑䭫ඏﭓ\u135C퉺㥵哸睎絳잧.喐就泔涪뒕\uF8E6闵邀뛑땬뼠ᴯ\u0991蝶ꞵ숆\uF593\u24DAܰ\uFFFD(waveInHandle, this.header, Marshal.SizeOf((object) this.header)), "waveInPrepareHeader");
    }

    public void Reuse()
    {
      ᔦ\uF14B̔촮\u2743븮浘蓧ꡆ烋枿䨿\u269E逇埓뼌붬额\uFFFD鬊.嘐颋뇶鯿쏃輊\uF479ذ\uE5DB媩\uE8D4\uFFFDጘ\u20A3냪䊏ᆶ\uF4DF\uF761\uF74B(巛퀝폳\uF0DE\uE025晱舘헸\u201D橑䭫ඏﭓ\u135C퉺㥵哸睎絳잧.䝙き\u2886鐭䑍験\u1CC0単ꉜனﳃ킄\u320C确謨뤉䐨ᾶ\uF855壚(this.waveInHandle, this.header, Marshal.SizeOf((object) this.header)), "waveUnprepareHeader");
      ᔦ\uF14B̔촮\u2743븮浘蓧ꡆ烋枿䨿\u269E逇埓뼌붬额\uFFFD鬊.嘐颋뇶鯿쏃輊\uF479ذ\uE5DB媩\uE8D4\uFFFDጘ\u20A3냪䊏ᆶ\uF4DF\uF761\uF74B(巛퀝폳\uF0DE\uE025晱舘헸\u201D橑䭫ඏﭓ\u135C퉺㥵哸睎絳잧.喐就泔涪뒕\uF8E6闵邀뛑땬뼠ᴯ\u0991蝶ꞵ숆\uF593\u24DAܰ\uFFFD(this.waveInHandle, this.header, Marshal.SizeOf((object) this.header)), "waveInPrepareHeader");
      ᔦ\uF14B̔촮\u2743븮浘蓧ꡆ烋枿䨿\u269E逇埓뼌붬额\uFFFD鬊.嘐颋뇶鯿쏃輊\uF479ذ\uE5DB媩\uE8D4\uFFFDጘ\u20A3냪䊏ᆶ\uF4DF\uF761\uF74B(巛퀝폳\uF0DE\uE025晱舘헸\u201D橑䭫ඏﭓ\u135C퉺㥵哸睎絳잧.\uE977ᝇ蟓ꪭ\uE9AC焺꼖鳣麍ꭾ修聄\uEBA4齦ლ腽裡\uFFFD㺀䚒(this.waveInHandle, this.header, Marshal.SizeOf((object) this.header)), "waveInAddBuffer");
    }

    ~WaveInBuffer() => this.Dispose(false);

    public void Dispose()
    {
      GC.SuppressFinalize((object) this);
      this.Dispose(true);
    }

    protected void Dispose(bool disposing)
    {
      int num1 = disposing ? 1 : 0;
      if (this.waveInHandle != IntPtr.Zero)
      {
        int num2 = (int) 巛퀝폳\uF0DE\uE025晱舘헸\u201D橑䭫ඏﭓ\u135C퉺㥵哸睎絳잧.䝙き\u2886鐭䑍験\u1CC0単ꉜனﳃ킄\u320C确謨뤉䐨ᾶ\uF855壚(this.waveInHandle, this.header, Marshal.SizeOf((object) this.header));
        this.waveInHandle = IntPtr.Zero;
      }
      if (this.hHeader.IsAllocated)
        this.hHeader.Free();
      if (this.hBuffer.IsAllocated)
        this.hBuffer.Free();
      if (!this.hThis.IsAllocated)
        return;
      this.hThis.Free();
    }

    public byte[] Data => this.buffer;

    public bool Done => (this.header.귆垶츖竞ᰢ痹\u3396ථǏ옂\uFFFDꔺ䰳窓ᴨᵟ鄀䊘젽됥 & 饻䴥苗ꯋ䯫\u2806\uE5B4\u24EE\uF362橅\uFFFD\uF5CF딂ᓼ\uF159䧡ᖍ昸\u2F0C茆.\uEDF8\u0E70ভ麥\uF14E鍥騇\u25EE矿攞艑쓷ș\u09D3囨撍晩\u0871룔\uE9FF) == 饻䴥苗ꯋ䯫\u2806\uE5B4\u24EE\uF362橅\uFFFD\uF5CF딂ᓼ\uF159䧡ᖍ昸\u2F0C茆.\uEDF8\u0E70ভ麥\uF14E鍥騇\u25EE矿攞艑쓷ș\u09D3囨撍晩\u0871룔\uE9FF;

    public bool InQueue => (this.header.귆垶츖竞ᰢ痹\u3396ථǏ옂\uFFFDꔺ䰳窓ᴨᵟ鄀䊘젽됥 & 饻䴥苗ꯋ䯫\u2806\uE5B4\u24EE\uF362橅\uFFFD\uF5CF딂ᓼ\uF159䧡ᖍ昸\u2F0C茆.\uEB06\u02F1閻Ҏꮬ䑔ᝀ\u20F2뼥䊧蔦ӄ㢇켜廳Ꝑ쑚햳\uE206\uF1E4) == 饻䴥苗ꯋ䯫\u2806\uE5B4\u24EE\uF362橅\uFFFD\uF5CF딂ᓼ\uF159䧡ᖍ昸\u2F0C茆.\uEB06\u02F1閻Ҏꮬ䑔ᝀ\u20F2뼥䊧蔦ӄ㢇켜廳Ꝑ쑚햳\uE206\uF1E4;

    public int BytesRecorded => this.header.즃螳煦虗箨έᢸܘ緐\uF346풶\uFFFDᙐ싈硓껏Ꮏ碨\uE55F膹;

    public int BufferSize => this.bufferSize;
  }
}
