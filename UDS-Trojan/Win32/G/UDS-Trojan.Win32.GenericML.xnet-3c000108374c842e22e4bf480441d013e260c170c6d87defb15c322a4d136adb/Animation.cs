// Decompiled with JetBrains decompiler
// Type: MiniGames_Team9.Animation
// Assembly: DependentHan, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: A86A1B94-F21E-4DD9-9B87-E146CFB070D9
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.07\UDS-Trojan.Win32.GenericML.xnet-3c000108374c842e22e4bf480441d013e260c170c6d87defb15c322a4d136adb.exe

using System;
using System.Drawing;
using System.Windows.Forms;

namespace MiniGames_Team9
{
  internal class Animation
  {
    public int speed = 29;
    private int i = 0;
    private PictureBox animation = new PictureBox();
    private Timer tm = new Timer();
    private PictureBox Map = new PictureBox();
    private Figure attcker;

    public Animation()
    {
    }

    public Animation(PictureBox Map) => this.Map = Map;

    public Animation(PictureBox Map, Figure att)
    {
      this.Map = Map;
      this.attcker = att;
    }

    private static Image[] list => new Image[0];

    private static Image[] listSpawn => new Image[0];

    public void MakeAnimation(Point vt)
    {
      this.animation.SizeMode = PictureBoxSizeMode.AutoSize;
      this.animation.Location = new Point(vt.X, vt.Y);
      this.tm.Interval = this.speed;
      this.tm.Tick += new EventHandler(this.tm_Tick);
      this.tm.Start();
    }

    private void tm_Tick(object sender, EventArgs e)
    {
      if (this.i < 20)
      {
        this.animation.Image = Animation.list[this.i];
        this.animation.BackColor = Color.Transparent;
        this.animation.Parent = (Control) this.Map;
        this.animation.BringToFront();
        this.Map.Controls.Add((Control) this.animation);
      }
      ++this.i;
      if (this.i != 20)
        return;
      this.tm.Stop();
      this.tm.Dispose();
      this.animation.Dispose();
      this.tm = (Timer) null;
      this.animation = (PictureBox) null;
    }

    public void MakeSpawn(Point vt)
    {
      this.animation.SizeMode = PictureBoxSizeMode.AutoSize;
      this.animation.Location = new Point(vt.X, vt.Y);
      this.tm.Interval = !Xetang.isFirst ? 30 : 180;
      this.tm.Tick += new EventHandler(this.tmSpawn_Tick);
      this.tm.Start();
      this.i = 0;
      this.animation.Tag = (object) "Spawn";
    }

    private void tmSpawn_Tick(object sender, EventArgs e)
    {
      if (this.i < 20)
      {
        this.animation.Image = Animation.listSpawn[this.i % 5];
        this.animation.BackColor = Color.Transparent;
        this.animation.Parent = (Control) this.Map;
        this.animation.BringToFront();
        this.Map.Controls.Add((Control) this.animation);
      }
      ++this.i;
      if (this.i != 20)
        return;
      this.attcker.MakeAvatar();
      this.attcker.locked = false;
      this.tm.Stop();
      this.tm.Dispose();
      this.animation.Dispose();
      this.tm = (Timer) null;
      this.animation = (PictureBox) null;
    }
  }
}
