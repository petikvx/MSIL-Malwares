// Decompiled with JetBrains decompiler
// Type: ie89oe1093.5157oa1811
// Assembly: ao2u718188, Version=0.17.1.12262, Culture=neutral, PublicKeyToken=31bf3856ad364e35
// MVID: 3DF97629-1C85-445F-828B-3AC8EB815CA9
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.04\HEUR-Trojan-Spy.Win32.Noon.pef-d62a3041e22e26079b63e219db0e298b85ae3894521afe783190b1b5f3fa388f.exe

using \u00306uo1e5904;
using \u0032a360iaooi;
using \u003424u4a4i22;
using \u00355oe2u6i33;
using \u0035a6974u213;
using Microsoft.ApplicationInsights.Channel;
using Microsoft.ApplicationInsights.Extensibility;
using Microsoft.ApplicationInsights.Extensibility.Implementation.Tracing;
using System;
using System.Collections.Generic;
using System.Globalization;
using System.Threading;
using System.Threading.Tasks;
using ue7345a32o;

namespace ie89oe1093
{
  public sealed class \u0035157oa1811 : ITelemetryChannel, IDisposable, ISupportConfiguration
  {
    internal readonly TelemetryBuffer ooi51o6243;
    internal \u0036361a60298 \u0039eo1e4o7oe;
    private readonly \u0038989oi11i5 e9a9392ei4;
    private bool \u00391iieaaiu8;
    private int ue9781828a;
    private int \u003690o761302;
    private \u003806e2uuo0o \u0031oa9iuii2a;

    public \u0035157oa1811(string storageFolderName, int sendersCount = 3)
    {
      this.ooi51o6243 = new TelemetryBuffer();
      this.\u0031oa9iuii2a = (\u003806e2uuo0o) new ooe0i71e11(storageFolderName);
      this.\u0039eo1e4o7oe = (\u0036361a60298) new \u0035157oa1811((ooe0i71e11) this.\u0031oa9iuii2a, sendersCount);
      this.e9a9392ei4 = (\u0038989oi11i5) new \u003806e2uuo0o((ooe0i71e11) this.\u0031oa9iuii2a, this.ooi51o6243);
      this.\u003916u0aieoe = \u0033457o91ea7.\u0039u51uui516("2\u0011l,0U?}\u0005|c>45\u0006\f|x\rjg*\u0011\r},*\u0004\u0016>\fwr \0}}\u0017-b9#&\u0013\u000E", "rM0tkG8zI7eeyoXM75Vl9kJP4hqXK");
    }

    public string \u0038i4203o71o => this.\u0039eo1e4o7oe.\u00310oie6ou95;

    public bool o0ua2611ue
    {
      get => this.\u00391iieaaiu8;
      set
      {
        if (value == this.\u00391iieaaiu8)
          return;
        if (value)
        {
          this.\u003690o761302 = this.ooi51o6243.Capacity;
          this.ooi51o6243.Capacity = 1;
        }
        else
          this.ooi51o6243.Capacity = this.\u003690o761302;
        this.\u00391iieaaiu8 = value;
      }
    }

    public TimeSpan i4a7829oa5
    {
      get => this.\u0039eo1e4o7oe.ooao97a8uo;
      set => this.\u0039eo1e4o7oe.ooao97a8uo = value;
    }

    public TimeSpan \u003446oa7e080
    {
      get => this.e9a9392ei4.\u00300ee3ee2au;
      set => this.e9a9392ei4.\u00300ee3ee2au = value;
    }

    public string \u003916u0aieoe
    {
      get => this.e9a9392ei4.\u0039e39eaou30.ToString();
      set => this.e9a9392ei4.\u0039e39eaou30 = new Uri(value ?? \u0033457o91ea7.\u0039u51uui516("2\u0011l,0U?}\u0005|c>45\u0006\f|x\rjg*\u0011\r},*\u0004\u0016>\fwr \0}}\u0017-b9#&\u0013\u000E", "rM0tkG8zI7eeyoXM75Vl9kJP4hqXK"));
    }

    public int \u00377563ue4au
    {
      get => this.ooi51o6243.Capacity;
      set => this.ooi51o6243.Capacity = value;
    }

    public ulong \u0038iae1e815e
    {
      get => ((\u003CModule\u003E) this.\u0031oa9iuii2a).get_CapacityInBytes();
      set => this.\u0031oa9iuii2a.iou2iou8o2 = value;
    }

    public uint \u0030570u75e79
    {
      get => this.\u0031oa9iuii2a.e4a75u5309;
      set => this.\u0031oa9iuii2a.e4a75u5309 = value;
    }

    [Obsolete("This value is now obsolete and will be removed in next release. Currently it does nothing.")]
    public double e21uaiioi9 { get; set; }

    [Obsolete("This value is now obsolete and will be removed in next release, use FlushInterval instead.")]
    public double \u0035e14oou1u5
    {
      get => (double) this.e9a9392ei4.\u00300ee3ee2au.Seconds;
      set => this.e9a9392ei4.\u00300ee3ee2au = TimeSpan.FromSeconds(value);
    }

    [Obsolete("This value is now obsolete and will be removed in next release. Currently it does nothing.")]
    public int \u003932988eo39 { get; set; }

    [Obsolete("This value is now obsolete and will be removed in next release, use the sendersCount parameter in the constructor instead.")]
    public int \u0031oi9iiai04 { get; set; }

    public void \u0034u68uoo248()
    {
      if (Interlocked.Increment(ref this.ue9781828a) != 1)
        return;
      if (this.\u0039eo1e4o7oe != null)
        this.\u0039eo1e4o7oe.\u003757oo810i0();
      if (this.e9a9392ei4 == null)
        return;
      this.e9a9392ei4.\u003561e60ei81();
    }

    public void \u0036835a57069(ITelemetry _param1) => this.ooi51o6243.Enqueue(_param1);

    public void \u0032e875iae4o() => this.e9a9392ei4.i8e7o401ei();

    public void \u0033i88770oo6(TelemetryConfiguration a5a9a92162)
    {
    }

    internal \u0035157oa1811(ooe0i71e11 storage, int sendersCount, bool createSenders = true)
    {
      // ISSUE: object of a compiler-generated type is created
      // ISSUE: variable of a compiler-generated type
      \u0036361a60298.\u0033153e0o466 obj = (\u0036361a60298.\u0033153e0o466) new \u0037u0520a894<,>();
      // ISSUE: reference to a compiler-generated field
      obj.\u0034085565au9 = sendersCount;
      ((\u0036361a60298) this).\u003583ei8oiu7 = new List<\u00348u8a77i8e>();
      // ISSUE: explicit constructor call
      base.\u002Ector();
      // ISSUE: reference to a compiler-generated field
      obj.\u00350193e81i4 = (\u0036361a60298) this;
      ((\u0036361a60298) this).\u0032eui05ua22 = storage;
      ((\u0036361a60298) this).\u00386aa184oio = new CancellationTokenSource();
      ((\u0036361a60298) this).\u00377043a1ai3 = new AutoResetEvent(false);
      try
      {
        ((\u0036361a60298) this).\u0032263ia1i1e = new Mutex(false, ((\u0036361a60298) this).\u0032eui05ua22.\u003244i397600);
      }
      catch (Exception ex)
      {
        string str = string.Format((IFormatProvider) CultureInfo.InvariantCulture, \u0033457o91ea7.\u0039u51uui516("\n\0j/*\u001Cd7\u000F|(\u0019#&\u001E\u0016rt\n0t1XXZ!0\u001C\u0006>El3c\f\u007F<\u0012k?823P\u0011wx^)d7\a\0&`\"@\u001E", "rM0tkG8zI7eeyoXM75Vl9kJP4hqXK"), new object[1]
        {
          (object) ex
        });
        CoreEventSource.Log.LogVerbose(str, \u0033457o91ea7.\u0039u51uui516("\u0013\v{31\u001Du1\u0015", "rM0tkG8zI7eeyoXM75Vl9kJP4hqXK"));
      }
      if (!createSenders)
        return;
      // ISSUE: reference to a compiler-generated method
      Task.Factory.StartNew(new Action(obj.iiu8954121), TaskCreationOptions.LongRunning).ContinueWith((Action<Task>) (_param0 =>
      {
        string str = string.Format((IFormatProvider) CultureInfo.InvariantCulture, \u0033457o91ea7.\u0039u51uui516("\n\0j/*\u001Cd7\u000F|(\u0019#&\u001E\u0016rt\n0t1XXI.1\u0011\r>\t}8c\nh1\u0004o9$>)P\fq==6t\"\u0016\u001DO%7\u0014\u0006(\u0016\"|8_m", "rM0tkG8zI7eeyoXM75Vl9kJP4hqXK"), new object[1]
        {
          (object) _param0.Exception
        });
        CoreEventSource.Log.LogVerbose(str, \u0033457o91ea7.\u0039u51uui516("\u0013\v{31\u001Du1\u0015", "rM0tkG8zI7eeyoXM75Vl9kJP4hqXK"));
      }), TaskContinuationOptions.OnlyOnFaulted);
    }
  }
}
