// Decompiled with JetBrains decompiler
// Type: s179458635260178.s126519166327702
// Assembly: s968508024776124, Version=2.0.47.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
// MVID: E3596912-35E7-405B-A05A-F5F12AB5E292
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.04\HEUR-Trojan.MSIL.PowerShell.gen-b1729c7ae8423cc844b16aa10ca8ddd2b2331adbfb6646d80d73381fbc73a109.exe

using s009907969975747;
using s418410312208900;
using s423715911845194;
using s528813736053581;
using s551269714710412;
using s610860560643463;
using s962360155664524;
using System;
using System.Collections.Generic;

namespace s179458635260178
{
  public abstract class s126519166327702
  {
    protected internal ITraceParserServices source;
    private GrowableArray<s126519166327702.s479723979284502> s999644377840609;
    private string s866846513588680;

    public s470725726477034 s672631221215182 => (s470725726477034) this.source;

    public virtual event Action<s034852122986107> s364739463586962
    {
      add => this.s133247404668355((Func<string, string, s600954608090611>) null, value);
      remove => this.s501107068468313<s034852122986107>(value);
    }

    public void s311173790373482<T>(string s035409497672769, Action<T> s514358377984964) where T : s034852122986107
    {
      // ISSUE: object of a compiler-generated type is created
      // ISSUE: variable of a compiler-generated type
      s126519166327702.s321061500941426<T> s321061500941426 = new s126519166327702.s321061500941426<T>();
      // ISSUE: reference to a compiler-generated field
      s321061500941426.eventName = s035409497672769;
      // ISSUE: reference to a compiler-generated field
      if (s321061500941426.eventName == null)
      {
        this.s123965400394690<T>(s514358377984964);
      }
      else
      {
        // ISSUE: reference to a compiler-generated method
        this.s015260310460036<T>(new Predicate<string>(s321061500941426.\u003CAddCallbackForEvent\u003Eb__0), s514358377984964);
      }
    }

    public virtual void s123965400394690<T>(Action<T> s650904197454137) where T : s034852122986107 => this.s158691545573506<T>((Predicate<string>) null, (object) null, s650904197454137);

    public virtual void s015260310460036<T>(
      Predicate<string> s804980331431236,
      Action<T> s344497298813941)
      where T : s034852122986107
    {
      this.s158691545573506<T>(s804980331431236, (object) null, s344497298813941);
    }

    public void s158691545573506<T>(
      Predicate<string> s109725035825810,
      object s505642518517170,
      Action<T> s881550007168518)
      where T : s034852122986107
    {
      // ISSUE: object of a compiler-generated type is created
      // ISSUE: variable of a compiler-generated type
      s126519166327702.s996483655137170<T> s996483655137170 = new s126519166327702.s996483655137170<T>();
      // ISSUE: reference to a compiler-generated field
      s996483655137170.\u003C\u003E4__this = this;
      // ISSUE: reference to a compiler-generated field
      s996483655137170.eventNameFilter = s109725035825810;
      if (this.GetProviderName() == null)
        throw new InvalidOperationException("Need to use AddCalbackForProviderEvents for Event Parsers that handle more than one provider");
      // ISSUE: reference to a compiler-generated method
      Func<string, string, s600954608090611> func = new Func<string, string, s600954608090611>(s996483655137170.\u003CAddCallbackForEvents\u003Eb__0);
      // ISSUE: reference to a compiler-generated field
      // ISSUE: object of a compiler-generated type is created
      s996483655137170.newSubscription = (s126519166327702.s479723979284502) new s302986156607931.s772984586975943(func, (Delegate) s881550007168518, s505642518517170);
      // ISSUE: reference to a compiler-generated field
      this.s999644377840609.Add(s996483655137170.newSubscription);
      // ISSUE: reference to a compiler-generated field
      s996483655137170.templateState = this.s509298839279904;
      // ISSUE: reference to a compiler-generated method
      this.s944072452776731(func, new Action<s034852122986107>(s996483655137170.\u003CAddCallbackForEvents\u003Eb__1));
    }

    public void s416497288056006(
      string s244325990435063,
      string s455327822308084,
      Action<s034852122986107> s288037758554598)
    {
      // ISSUE: object of a compiler-generated type is created
      // ISSUE: variable of a compiler-generated type
      s126519166327702.s493920945964466 s493920945964466 = (s126519166327702.s493920945964466) new s126519166327702.s996483655137170<>();
      // ISSUE: reference to a compiler-generated field
      ((s126519166327702.s996483655137170<>) s493920945964466).s249759641374297 = s244325990435063;
      // ISSUE: reference to a compiler-generated field
      s493920945964466.s532077213006235 = s455327822308084;
      // ISSUE: reference to a compiler-generated method
      this.s133247404668355(new Func<string, string, s600954608090611>(s493920945964466.s052065424600586), s288037758554598);
    }

    public virtual void s133247404668355(
      Func<string, string, s600954608090611> s402882736343280,
      Action<s034852122986107> s507899913497289)
    {
      this.s478238798304755(s402882736343280, (object) null, s507899913497289);
    }

    public virtual void s478238798304755(
      Func<string, string, s600954608090611> s184532644315943,
      object s172557140325927,
      Action<s034852122986107> s121921667374883)
    {
      // ISSUE: object of a compiler-generated type is created
      // ISSUE: variable of a compiler-generated type
      s126519166327702.s719728307875047 s719728307875047 = (s126519166327702.s719728307875047) new s126519166327702.s493920945964466();
      // ISSUE: reference to a compiler-generated field
      ((s126519166327702.s493920945964466) s719728307875047).s971974001205532 = this;
      // ISSUE: reference to a compiler-generated field
      // ISSUE: object of a compiler-generated type is created
      s719728307875047.s632165026098004 = (s126519166327702.s479723979284502) new s302986156607931.s772984586975943(s184532644315943, (Delegate) s121921667374883, s172557140325927);
      // ISSUE: reference to a compiler-generated field
      this.s999644377840609.Add(s719728307875047.s632165026098004);
      // ISSUE: reference to a compiler-generated field
      s719728307875047.s936718501689872 = this.s509298839279904;
      // ISSUE: reference to a compiler-generated method
      this.s944072452776731(s184532644315943, new Action<s034852122986107>(s719728307875047.s000500643302627));
    }

    public virtual void s501107068468313<T>(Action<T> s003372709764748, object s920106386017730 = null) where T : s034852122986107
    {
      for (int index = 0; index < this.s999644377840609.Count; ++index)
      {
        s126519166327702.s479723979284502 s479723979284502 = this.s999644377840609[index];
        if ((s920106386017730 == null || s479723979284502.s367540476677164 == s920106386017730) && (s003372709764748 == null || object.Equals((object) s479723979284502.s727464498187776, (object) s003372709764748)))
        {
          foreach (s034852122986107 s034852122986107 in s479723979284502.s188028702585000)
          {
            if (s034852122986107.s966949059091664 != Guid.Empty)
              this.source.UnregisterEventTemplate(s034852122986107.s282757928832612, (int) s034852122986107.s770722554724548, s034852122986107.s966949059091664);
            if (s034852122986107.s228250182984697 != s076337548137908.Illegal)
              this.source.UnregisterEventTemplate(s034852122986107.s282757928832612, (int) s034852122986107.s228250182984697, s034852122986107.s066186047870744);
          }
          this.s999644377840609.RemoveRange(index, 1);
        }
      }
    }

    public virtual bool s059222011177211 => true;

    protected s126519166327702(s470725726477034 source, bool dontRegister = false)
    {
      this.source = (ITraceParserServices) source;
      this.s866846513588680 = "parsers\\" + this.GetType().FullName;
      if (dontRegister)
        return;
      this.source.RegisterParser(this);
    }

    protected abstract string GetProviderName();

    protected internal object s509298839279904
    {
      get
      {
        object stateObject;
        ((s470725726477034) this.source).s177805615221944.TryGetValue(this.s866846513588680, out stateObject);
        return stateObject;
      }
      set => ((s470725726477034) this.source).s177805615221944[this.s866846513588680] = value;
    }

    protected internal abstract void s944072452776731(
      Func<string, string, s600954608090611> s474021047595613,
      Action<s034852122986107> s741878339645221);

    internal virtual s600954608090611 s335464334632004(
      s034852122986107 s853178440688833,
      bool s589211913472275)
    {
      s600954608090611 s600954608090611_1 = s600954608090611.RejectProvider;
      object s509298839279904 = this.s509298839279904;
      for (int index = 0; index < this.s999644377840609.Count; ++index)
      {
        s126519166327702.s479723979284502 s768572892030044 = this.s999644377840609[index];
        if (((s958455347864096.s550974825087331) s768572892030044).s890790992259847 != null)
        {
          s600954608090611 s600954608090611_2 = ((s958455347864096.s550974825087331) s768572892030044).s890790992259847(s853178440688833.s793685740620352, s853178440688833.s463729521376906);
          if (s600954608090611_2 != s600954608090611.RejectProvider)
          {
            if (s600954608090611_1 == s600954608090611.RejectProvider)
              s600954608090611_1 = s600954608090611.RejectEvent;
            if (s600954608090611_2 == s600954608090611.RejectEvent)
              continue;
          }
          else
            continue;
        }
        s600954608090611_1 = s600954608090611.AcceptEvent;
        this.s190063323323967(s768572892030044, s853178440688833, s509298839279904, s589211913472275);
      }
      return s600954608090611_1;
    }

    private void s190063323323967(
      s126519166327702.s479723979284502 s768572892030044,
      s034852122986107 s220245004285950,
      object s165471304339412,
      bool s477572485479114)
    {
      s034852122986107 s034852122986107_1 = s220245004285950.s994455335614443();
      s034852122986107_1.s581831629251144(s165471304339412);
      s034852122986107_1.s282757928832612 = s768572892030044.s727464498187776;
      if (s477572485479114)
      {
        for (int index = 0; index < s768572892030044.s188028702585000.Count; ++index)
        {
          s034852122986107 s034852122986107_2 = s768572892030044.s188028702585000[index];
          if (s034852122986107_2.s077932656217594(s034852122986107_1))
          {
            this.source.UnregisterEventTemplate(s034852122986107_2.s282757928832612, (int) s034852122986107_2.s228250182984697, s034852122986107_2.s066186047870744);
            if (s034852122986107_2.s966949059091664 != Guid.Empty)
              this.source.UnregisterEventTemplate(s034852122986107_2.s282757928832612, (int) s034852122986107_2.s770722554724548, s034852122986107_2.s966949059091664);
            s768572892030044.s188028702585000[index] = s034852122986107_1;
          }
        }
      }
      else
        s768572892030044.s188028702585000.Add(s034852122986107_1);
      this.source.RegisterEventTemplate(s034852122986107_1);
    }

    private class s479723979284502
    {
      internal Delegate s727464498187776;
      internal object s367540476677164;
      internal GrowableArray<s034852122986107> s188028702585000;
      public string s995934142021457;
    }
  }
}
