// Decompiled with JetBrains decompiler
// Type: bLdC9B7viaFerfYoW.XMyGg1r7YYHH1Cd7R
// Assembly: bouNMGxVgGi4SRgWO, Version=3.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60
// MVID: 3F6A2AF1-3CCB-4F01-AA36-FA31C2E4CFE8
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.03\HEUR-Backdoor.MSIL.Agent.gen-bc408b9f362db28b2e931ff336ec5661cc0ce27b0cdc0ce215fec1b7381aca7f.exe

using \u0033eVYd5LIQhZ7rzGZ2;
using f8MTx7wFiNqHdp2Y9;
using fcxTd0CgJgB8stQvj;
using GUxwlAGXtz8Biqdzq;
using jlhFNVXvwEp5FRUh5;
using Microsoft.TemplateEngine.Abstractions;
using Microsoft.TemplateEngine.Core.Contracts;
using Microsoft.TemplateEngine.Utils;
using mmj8LmwakVR77fB3X;
using Newtonsoft.Json.Linq;
using PgLEPpSpDk54KWT6E;
using System;
using System.Collections.Generic;
using System.Text.RegularExpressions;

namespace bLdC9B7viaFerfYoW
{
  public class XMyGg1r7YYHH1Cd7R : IMacro, IIdentifiedComponent, IDeferredMacro
  {
    public Guid LL7QcXfOFV3sLG1Ia => new Guid("AA5957B0-07B1-4B68-847F-83713973E86F");

    public string LU1Qmw0zW5zmKbYcM => "regexMatch";

    public void oG3cH57DmRQuaE0PN(
      IEngineEnvironmentSettings GBnRrTDI2KEQpRFvj,
      IVariableCollection zV4W8OhMuawjmmX4x,
      IMacroConfig R8ZtYegOGjKh6dex6,
      IParameterSet _param4,
      eudKo284TuJqIEahM wJjq4ineOUYm7f9pc)
    {
      if (!(R8ZtYegOGjKh6dex6 is \u0033GdsLyfY3AmfpsZ93 gdsLyfY3AmfpsZ93))
        throw new InvalidCastException("Couldn't cast the rawConfig as XMyGg1r7YYHH1Cd7RConfig");
      object obj1;
      object obj2;
      string input = ((IDictionary<string, object>) zV4W8OhMuawjmmX4x).TryGetValue(gdsLyfY3AmfpsZ93.BIkbaCTApyqnyjNs9, out obj1) ? obj1?.ToString() ?? string.Empty : (RuntimeValueUtil.TryGetRuntimeValue(_param4, GBnRrTDI2KEQpRFvj, gdsLyfY3AmfpsZ93.BIkbaCTApyqnyjNs9, ref obj2, true) ? obj2.ToString() : string.Empty);
      bool flag = false;
      try
      {
        flag = Regex.IsMatch(input, gdsLyfY3AmfpsZ93.iU91Qxj1Ve5QKgooy);
      }
      catch (ArgumentException ex)
      {
        GBnRrTDI2KEQpRFvj.Host.LogDiagnosticMessage(string.Format(ZF0BEIzg49cvah6mJ.\u0035RURpf0N6IecBD4Vb, (object) gdsLyfY3AmfpsZ93.iU91Qxj1Ve5QKgooy), "Authoring", new string[1]
        {
          ex.ToString()
        });
      }
      ITemplateParameter itemplateParameter;
      ckgfOYwQVcmI3lHXN parameter;
      if (_param4.TryGetParameterDefinition(gdsLyfY3AmfpsZ93.gWQo3MQ7pW4tv3QMP, ref itemplateParameter))
      {
        parameter = (ckgfOYwQVcmI3lHXN) itemplateParameter;
        parameter.Cg57rESMJLQIVeHLw = true;
        if (string.IsNullOrEmpty(parameter.\u0038DBEv3DWcN5nNg1o1))
          parameter.\u0038DBEv3DWcN5nNg1o1 = gdsLyfY3AmfpsZ93.xcoYaJcGuOp0HZWAO;
      }
      else
        parameter = new ckgfOYwQVcmI3lHXN()
        {
          Cg57rESMJLQIVeHLw = true,
          RWvAX7XIWjB7LsE1n = gdsLyfY3AmfpsZ93.gWQo3MQ7pW4tv3QMP,
          \u0038DBEv3DWcN5nNg1o1 = gdsLyfY3AmfpsZ93.xcoYaJcGuOp0HZWAO
        };
      ((IDictionary<string, object>) zV4W8OhMuawjmmX4x)[gdsLyfY3AmfpsZ93.gWQo3MQ7pW4tv3QMP] = (object) flag;
      wJjq4ineOUYm7f9pc((ITemplateParameter) parameter, flag.ToString());
    }

    public IMacroConfig \u0035K3Sfc2coJfG0Qqqh(
      IEngineEnvironmentSettings pOLV2IJGAKqraUMYO,
      IMacroConfig b5u3ah3J9JL0nrhcJ)
    {
      if (!(b5u3ah3J9JL0nrhcJ is KZUSKKOdswxWjB6He kzuskkOdswxWjB6He))
        throw new InvalidCastException("Couldn't cast the rawConfig as a GeneratedSymbolDeferredMacroConfig");
      JToken jtoken1;
      if (!kzuskkOdswxWjB6He.dYZjsKaakeS43shkR.TryGetValue("source", out jtoken1))
        throw new ArgumentNullException("source");
      string sourceVariable = ((object) jtoken1).ToString();
      JToken jtoken2;
      if (!kzuskkOdswxWjB6He.dYZjsKaakeS43shkR.TryGetValue("pattern", out jtoken2))
        throw new ArgumentNullException("pattern");
      string pattern = ((object) jtoken2).ToString();
      if (kzuskkOdswxWjB6He.xbfbgFpF57ZJB3TfG != null && !string.Equals(kzuskkOdswxWjB6He.xbfbgFpF57ZJB3TfG, "bool", StringComparison.OrdinalIgnoreCase))
        pOLV2IJGAKqraUMYO.Host.LogDiagnosticMessage(ZF0BEIzg49cvah6mJ.JgWazPHRM7ogaG9UH, "Authoring", new string[0]);
      return (IMacroConfig) new \u0033GdsLyfY3AmfpsZ93(kzuskkOdswxWjB6He.\u0036gh4E6uhQGL10SKFe, kzuskkOdswxWjB6He.xbfbgFpF57ZJB3TfG, sourceVariable, pattern);
    }
  }
}
