// Decompiled with JetBrains decompiler
// Type: ub7Ca2UAzDvyr.EiJ5pMu5PAuU3
// Assembly: Udby4Jt48oXkJ, Version=3.17.2.31, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
// MVID: 37899E89-D673-4F5B-A193-2E4DF6A54096
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.03\HEUR-Trojan.MSIL.Gorgon.gen-bf535869266eca7a958714acade2ede1bff0e73f0aaa2702f389ededee6a8d6a.exe

using bu8pNrX0TZwPh;
using C5vXuJJXlKLsz;
using hujG0QbsYScYh;
using JHVbkHiTkalVc;
using OojYDHmXRse47;
using System;
using System.Globalization;
using System.Runtime.CompilerServices;
using System.Threading.Tasks;
using u1QgJKQJKYhz7;
using wRO897uUcpmYd;

namespace ub7Ca2UAzDvyr
{
  internal class EiJ5pMu5PAuU3 : vmgkKHlLDILn4
  {
    private readonly z8o7PXRejwg2z RwVznzt43AHPR;

    public EiJ5pMu5PAuU3(z7eJc8CpoGMSq requestData, z8o7PXRejwg2z userAssertion)
      : base(requestData)
    {
      this.RwVznzt43AHPR = userAssertion != null ? userAssertion : throw new ArgumentNullException(nameof (userAssertion));
      this.\u0037hhgMEalYqxkj = userAssertion.Vc9BD3fOH2YjM;
      this.CacheQueryData.iXpNmrLD7Vgn4 = ihsplD1QXK7uN.MSuw3KhqLAYoY(userAssertion.GfMEMr7DZMhJm);
      this.xngTL11QRuwcB.\u0031CII3TGnWWaPA.moZ2DmWwVvE2r(this.xngTL11QRuwcB, string.Format((IFormatProvider) CultureInfo.InvariantCulture, "Username provided in user assertion - " + string.IsNullOrEmpty(this.\u0037hhgMEalYqxkj).ToString()), "E:\\A\\_work\\115\\s\\src\\Microsoft.IdentityModel.Clients.ActiveDirectory\\Internal\\Flows\\EiJ5pMu5PAuU3.cs");
      this.wv77vsl2OHrKS = true;
    }

    protected override Task<OHG1qpDK4Ko7V> SendTokenRequestAsync()
    {
      // ISSUE: variable of a compiler-generated type
      EiJ5pMu5PAuU3.\u0035WBjpbIL6zBiF stateMachine;
      // ISSUE: reference to a compiler-generated field
      stateMachine.CI1Sl9Ziyt7Kn = this;
      // ISSUE: reference to a compiler-generated field
      stateMachine.r2SSFaPkUhCiY = AsyncTaskMethodBuilder<OHG1qpDK4Ko7V>.Create();
      // ISSUE: cast to a reference type
      // ISSUE: explicit reference operation
      // ISSUE: reference to a compiler-generated field
      (^(jgpVPznpNOOOs.VquQzlPmWj7eP&) ref stateMachine).ESDYihrC9M12H = -1;
      // ISSUE: reference to a compiler-generated field
      stateMachine.r2SSFaPkUhCiY.Start<EiJ5pMu5PAuU3.\u0035WBjpbIL6zBiF>(ref stateMachine);
      // ISSUE: reference to a compiler-generated field
      return stateMachine.r2SSFaPkUhCiY.Task;
    }

    protected override void AddAditionalRequestParameters(dooNxm6mSPOHK requestParameters)
    {
      requestParameters["grant_type"] = "urn:ietf:params:oauth:grant-type:jwt-bearer";
      requestParameters["assertion"] = this.RwVznzt43AHPR.GfMEMr7DZMhJm;
      requestParameters["requested_token_use"] = "on_behalf_of";
      requestParameters["scope"] = "openid";
    }
  }
}
