// Decompiled with JetBrains decompiler
// Type: Dbasic.KeyWords.CkwControl
// Assembly: B4Pruntime, Version=1.0.3056.20520, Culture=neutral, PublicKeyToken=null
// MVID: BED81B59-7EDE-4B04-983E-56C0010CF881
// Assembly location: C:\Users\Administrateur\Downloads\Virusshare-00007-msil\Trojan-SMS.WinCE.Redoc.b-18cd0a1680457d7a4ff64f016ab2639c9c89d57bf8a7f51328c2d40bef9526f0.exe

using Dbasic.Controls;

namespace Dbasic.KeyWords
{
  public class CkwControl : CkeyWords
  {
    public CkwControl(CRunner CRunner)
      : base(CRunner)
    {
    }

    public override MethodReturn Method(Place place, ref Locals locals)
    {
      ++place.WordI;
      int wordI = place.WordI;
      RunReturn runReturn = this.CRunner.RunCode(place, true, true, ref locals);
      place = runReturn.place;
      string lower = runReturn.vString.ToLower(CRunner.cul);
      CControls cControl = ((WrapControl) this.CRunner.htControls[(object) lower]).cControl;
      if (this.CRunner.nextWord(true, ref place).Value == ",")
        place.WordI += 2;
      bool assign;
      if (wordI == 1)
      {
        assign = true;
      }
      else
      {
        Word word = this.CRunner.GetWord(place.LineI, wordI - 2);
        assign = word.KeyWord == 5 || word.Value == "then" || word.Value == "else";
      }
      return cControl.Run(lower, place, assign, ref locals);
    }
  }
}
