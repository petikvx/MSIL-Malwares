// Decompiled with JetBrains decompiler
// Type: HospitalMgmtSys.Presentaion_Layer.CreateUser
// Assembly: HospitalMgmtSys, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: DCB6B3B1-E0A6-4826-8B58-606618F1AB2B
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.03\HEUR-Trojan.MSIL.Bingoml.gen-9cb0764ab0006460601b25b788c41cf1cd05b40ae92e5928ff13cd8267591767.exe

using HospitalMgmtSys.Data_Layer;
using HospitalMgmtSys.Repository_Layer;
using System;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Windows.Forms;

namespace HospitalMgmtSys.Presentaion_Layer
{
  public class CreateUser : UserControl
  {
    private const string sql = "select * from person, employee\n                                        FULL OUTER JOIN doctor\n                                        on employee.empid = doctor.empid\n                                        where employee.personid = person.personid and employee.designation != 'Manager'\n                                        and employee.empid not in (select login.empid from login)";
    private IContainer components = (IContainer) null;
    private DataGridView dgvEmpInfo;
    private TableLayoutPanel tableLayoutPanel1;
    private Label label1;
    private Label lblPassword;
    private GroupBox groupBox1;
    private Button btnCreate;
    private TextBox txtPassword;
    private TextBox txtUsername;
    private GroupBox groupBox2;
    private TextBox txtDesignation;
    private TextBox txtEmployeeID;
    private Label label5;
    private Label label6;
    private Button btnClear;
    private DataGridViewTextBoxColumn pid;
    private DataGridViewTextBoxColumn pname;
    private DataGridViewTextBoxColumn gender;
    private DataGridViewTextBoxColumn age;
    private DataGridViewTextBoxColumn bloodgrp;
    private DataGridViewTextBoxColumn phone;
    private DataGridViewTextBoxColumn empId;
    private DataGridViewTextBoxColumn salary;
    private DataGridViewTextBoxColumn Designation;
    private DataGridViewTextBoxColumn docid;
    private DataGridViewTextBoxColumn specialty;
    private DataGridViewTextBoxColumn availableday;

    public CreateUser()
    {
      this.InitializeComponent();
      this.PopulateEmpTable();
    }

    private void PopulateEmpTable(string query = "select * from person, employee\n                                        FULL OUTER JOIN doctor\n                                        on employee.empid = doctor.empid\n                                        where employee.personid = person.personid and employee.designation != 'Manager'\n                                        and employee.empid not in (select login.empid from login)")
    {
      DataSet dataSet = DataAccess.GetDataSet("select * from person, employee\n                                        FULL OUTER JOIN doctor\n                                        on employee.empid = doctor.empid\n                                        where employee.personid = person.personid and employee.designation != 'Manager'\n                                        and employee.empid not in (select login.empid from login)");
      this.dgvEmpInfo.AutoGenerateColumns = false;
      this.dgvEmpInfo.DataSource = (object) dataSet.Tables[0];
    }

    private void dgvEmpInfo_DoubleClick(object sender, EventArgs e)
    {
      this.txtEmployeeID.Text = this.dgvEmpInfo.CurrentRow.Cells["empId"].Value.ToString();
      this.txtDesignation.Text = this.dgvEmpInfo.CurrentRow.Cells["Designation"].Value.ToString();
    }

    private void btnCreate_Click(object sender, EventArgs e)
    {
      this.CheckIfValuePresentInTextField();
      int int32 = Convert.ToInt32(this.txtEmployeeID.Text);
      string text1 = this.txtUsername.Text;
      string text2 = this.txtPassword.Text;
      string text3 = this.txtDesignation.Text;
      try
      {
        LoginVerification.CreateLogin(text1, text2, text3, int32);
        int num = (int) MessageBox.Show("Account created");
        this.PopulateEmpTable();
      }
      catch (Exception ex)
      {
        int num = (int) MessageBox.Show(ex.Message);
      }
    }

    private void ClearAll()
    {
      this.txtUsername.Text = string.Empty;
      this.txtPassword.Text = string.Empty;
      this.txtEmployeeID.Text = string.Empty;
      this.txtDesignation.Text = string.Empty;
    }

    private void CheckIfValuePresentInTextField()
    {
      try
      {
        if (this.txtUsername.Text == string.Empty)
          throw new Exception("Username Empty");
        if (this.txtPassword.Text == string.Empty)
          throw new Exception("Password Empty");
        if (this.txtDesignation.Text == string.Empty)
          throw new Exception("Select Employee from table");
        if (this.txtEmployeeID.Text == string.Empty)
          throw new Exception("Select Employee from table");
      }
      catch (Exception ex)
      {
        int num = (int) MessageBox.Show(ex.Message);
      }
    }

    private void CreateUser_VisibleChanged(object sender, EventArgs e)
    {
      this.ClearAll();
      this.PopulateEmpTable();
    }

    private void btnClear_Click(object sender, EventArgs e) => this.ClearAll();

    protected override void Dispose(bool disposing)
    {
      if (disposing && this.components != null)
        this.components.Dispose();
      base.Dispose(disposing);
    }

    private void InitializeComponent()
    {
      this.dgvEmpInfo = new DataGridView();
      this.tableLayoutPanel1 = new TableLayoutPanel();
      this.label1 = new Label();
      this.lblPassword = new Label();
      this.groupBox1 = new GroupBox();
      this.btnCreate = new Button();
      this.txtPassword = new TextBox();
      this.txtUsername = new TextBox();
      this.groupBox2 = new GroupBox();
      this.txtDesignation = new TextBox();
      this.txtEmployeeID = new TextBox();
      this.label5 = new Label();
      this.label6 = new Label();
      this.btnClear = new Button();
      this.pid = new DataGridViewTextBoxColumn();
      this.pname = new DataGridViewTextBoxColumn();
      this.gender = new DataGridViewTextBoxColumn();
      this.age = new DataGridViewTextBoxColumn();
      this.bloodgrp = new DataGridViewTextBoxColumn();
      this.phone = new DataGridViewTextBoxColumn();
      this.empId = new DataGridViewTextBoxColumn();
      this.salary = new DataGridViewTextBoxColumn();
      this.Designation = new DataGridViewTextBoxColumn();
      this.docid = new DataGridViewTextBoxColumn();
      this.specialty = new DataGridViewTextBoxColumn();
      this.availableday = new DataGridViewTextBoxColumn();
      ((ISupportInitialize) this.dgvEmpInfo).BeginInit();
      this.tableLayoutPanel1.SuspendLayout();
      this.groupBox1.SuspendLayout();
      this.groupBox2.SuspendLayout();
      this.SuspendLayout();
      this.dgvEmpInfo.AllowUserToAddRows = false;
      this.dgvEmpInfo.AllowUserToDeleteRows = false;
      this.dgvEmpInfo.AllowUserToResizeColumns = false;
      this.dgvEmpInfo.AllowUserToResizeRows = false;
      this.dgvEmpInfo.AutoSizeColumnsMode = DataGridViewAutoSizeColumnsMode.AllCells;
      this.dgvEmpInfo.ColumnHeadersHeightSizeMode = DataGridViewColumnHeadersHeightSizeMode.AutoSize;
      this.dgvEmpInfo.Columns.AddRange((DataGridViewColumn) this.pid, (DataGridViewColumn) this.pname, (DataGridViewColumn) this.gender, (DataGridViewColumn) this.age, (DataGridViewColumn) this.bloodgrp, (DataGridViewColumn) this.phone, (DataGridViewColumn) this.empId, (DataGridViewColumn) this.salary, (DataGridViewColumn) this.Designation, (DataGridViewColumn) this.docid, (DataGridViewColumn) this.specialty, (DataGridViewColumn) this.availableday);
      this.dgvEmpInfo.Dock = DockStyle.Fill;
      this.dgvEmpInfo.Location = new Point(3, 2);
      this.dgvEmpInfo.Margin = new Padding(3, 2, 3, 2);
      this.dgvEmpInfo.MultiSelect = false;
      this.dgvEmpInfo.Name = "dgvEmpInfo";
      this.dgvEmpInfo.ReadOnly = true;
      this.dgvEmpInfo.RowTemplate.Height = 28;
      this.dgvEmpInfo.SelectionMode = DataGridViewSelectionMode.CellSelect;
      this.dgvEmpInfo.Size = new Size(1056, 250);
      this.dgvEmpInfo.TabIndex = 1;
      this.dgvEmpInfo.TabStop = false;
      this.dgvEmpInfo.DoubleClick += new EventHandler(this.dgvEmpInfo_DoubleClick);
      this.tableLayoutPanel1.ColumnCount = 1;
      this.tableLayoutPanel1.ColumnStyles.Add(new ColumnStyle(SizeType.Percent, 50f));
      this.tableLayoutPanel1.Controls.Add((Control) this.dgvEmpInfo, 0, 0);
      this.tableLayoutPanel1.Location = new Point(21, 352);
      this.tableLayoutPanel1.Name = "tableLayoutPanel1";
      this.tableLayoutPanel1.RowCount = 1;
      this.tableLayoutPanel1.RowStyles.Add(new RowStyle(SizeType.Percent, 50f));
      this.tableLayoutPanel1.Size = new Size(1062, 254);
      this.tableLayoutPanel1.TabIndex = 2;
      this.label1.AutoSize = true;
      this.label1.Font = new Font("Microsoft Sans Serif", 12f, FontStyle.Regular, GraphicsUnit.Point, (byte) 0);
      this.label1.Location = new Point(25, 53);
      this.label1.Name = "label1";
      this.label1.Size = new Size(102, 25);
      this.label1.TabIndex = 3;
      this.label1.Text = "Username";
      this.lblPassword.AutoSize = true;
      this.lblPassword.Font = new Font("Microsoft Sans Serif", 12f, FontStyle.Regular, GraphicsUnit.Point, (byte) 0);
      this.lblPassword.Location = new Point(25, 130);
      this.lblPassword.Name = "lblPassword";
      this.lblPassword.Size = new Size(98, 25);
      this.lblPassword.TabIndex = 3;
      this.lblPassword.Text = "Password";
      this.groupBox1.Controls.Add((Control) this.btnCreate);
      this.groupBox1.Controls.Add((Control) this.txtPassword);
      this.groupBox1.Controls.Add((Control) this.txtUsername);
      this.groupBox1.Controls.Add((Control) this.lblPassword);
      this.groupBox1.Controls.Add((Control) this.label1);
      this.groupBox1.Location = new Point(24, 44);
      this.groupBox1.Name = "groupBox1";
      this.groupBox1.Size = new Size(442, 237);
      this.groupBox1.TabIndex = 4;
      this.groupBox1.TabStop = false;
      this.groupBox1.Text = "Login Credentials";
      this.btnCreate.Location = new Point(313, 195);
      this.btnCreate.Name = "btnCreate";
      this.btnCreate.Size = new Size(98, 36);
      this.btnCreate.TabIndex = 8;
      this.btnCreate.Text = "Cre&ate";
      this.btnCreate.UseVisualStyleBackColor = true;
      this.btnCreate.Click += new EventHandler(this.btnCreate_Click);
      this.txtPassword.Font = new Font("Microsoft Sans Serif", 12f, FontStyle.Regular, GraphicsUnit.Point, (byte) 0);
      this.txtPassword.Location = new Point(162, (int) sbyte.MaxValue);
      this.txtPassword.Name = "txtPassword";
      this.txtPassword.Size = new Size(249, 30);
      this.txtPassword.TabIndex = 7;
      this.txtUsername.Font = new Font("Microsoft Sans Serif", 12f, FontStyle.Regular, GraphicsUnit.Point, (byte) 0);
      this.txtUsername.Location = new Point(162, 50);
      this.txtUsername.Name = "txtUsername";
      this.txtUsername.Size = new Size(249, 30);
      this.txtUsername.TabIndex = 6;
      this.groupBox2.Controls.Add((Control) this.txtDesignation);
      this.groupBox2.Controls.Add((Control) this.txtEmployeeID);
      this.groupBox2.Controls.Add((Control) this.label5);
      this.groupBox2.Controls.Add((Control) this.label6);
      this.groupBox2.Location = new Point(619, 44);
      this.groupBox2.Name = "groupBox2";
      this.groupBox2.Size = new Size(461, 237);
      this.groupBox2.TabIndex = 4;
      this.groupBox2.TabStop = false;
      this.groupBox2.Text = "Employee Info";
      this.txtDesignation.Enabled = false;
      this.txtDesignation.Font = new Font("Microsoft Sans Serif", 12f, FontStyle.Regular, GraphicsUnit.Point, (byte) 0);
      this.txtDesignation.Location = new Point(182, 50);
      this.txtDesignation.Name = "txtDesignation";
      this.txtDesignation.Size = new Size(249, 30);
      this.txtDesignation.TabIndex = 4;
      this.txtEmployeeID.Enabled = false;
      this.txtEmployeeID.Font = new Font("Microsoft Sans Serif", 12f, FontStyle.Regular, GraphicsUnit.Point, (byte) 0);
      this.txtEmployeeID.Location = new Point(182, (int) sbyte.MaxValue);
      this.txtEmployeeID.Name = "txtEmployeeID";
      this.txtEmployeeID.Size = new Size(249, 30);
      this.txtEmployeeID.TabIndex = 4;
      this.label5.AutoSize = true;
      this.label5.Font = new Font("Microsoft Sans Serif", 12f, FontStyle.Regular, GraphicsUnit.Point, (byte) 0);
      this.label5.Location = new Point(29, 130);
      this.label5.Name = "label5";
      this.label5.Size = new Size(123, 25);
      this.label5.TabIndex = 3;
      this.label5.Text = "Employee ID";
      this.label6.AutoSize = true;
      this.label6.Font = new Font("Microsoft Sans Serif", 12f, FontStyle.Regular, GraphicsUnit.Point, (byte) 0);
      this.label6.Location = new Point(29, 53);
      this.label6.Name = "label6";
      this.label6.Size = new Size(115, 25);
      this.label6.TabIndex = 3;
      this.label6.Text = "Designation";
      this.btnClear.Location = new Point(957, 314);
      this.btnClear.Name = "btnClear";
      this.btnClear.Size = new Size(123, 32);
      this.btnClear.TabIndex = 9;
      this.btnClear.Text = "Clea&r";
      this.btnClear.UseVisualStyleBackColor = true;
      this.btnClear.Click += new EventHandler(this.btnClear_Click);
      this.pid.DataPropertyName = "personid";
      this.pid.HeaderText = "Person ID";
      this.pid.Name = "pid";
      this.pid.ReadOnly = true;
      this.pid.Visible = false;
      this.pid.Width = 99;
      this.pname.DataPropertyName = "name";
      this.pname.HeaderText = "Name";
      this.pname.Name = "pname";
      this.pname.ReadOnly = true;
      this.pname.Width = 74;
      this.gender.DataPropertyName = "gender";
      this.gender.HeaderText = "Gender";
      this.gender.Name = "gender";
      this.gender.ReadOnly = true;
      this.gender.Width = 85;
      this.age.DataPropertyName = "age";
      this.age.HeaderText = "Age";
      this.age.Name = "age";
      this.age.ReadOnly = true;
      this.age.Width = 62;
      this.bloodgrp.DataPropertyName = "bloodgroup";
      this.bloodgrp.HeaderText = "BloodGroup";
      this.bloodgrp.Name = "bloodgrp";
      this.bloodgrp.ReadOnly = true;
      this.bloodgrp.Width = 113;
      this.phone.DataPropertyName = "phone";
      this.phone.HeaderText = "PhoneNumber";
      this.phone.Name = "phone";
      this.phone.ReadOnly = true;
      this.phone.Width = 128;
      this.empId.DataPropertyName = "empid";
      this.empId.HeaderText = "EmpID";
      this.empId.Name = "empId";
      this.empId.ReadOnly = true;
      this.empId.Visible = false;
      this.empId.Width = 78;
      this.salary.DataPropertyName = "salary";
      this.salary.HeaderText = "Salary";
      this.salary.Name = "salary";
      this.salary.ReadOnly = true;
      this.salary.Width = 77;
      this.Designation.DataPropertyName = "designation";
      this.Designation.HeaderText = "Designation";
      this.Designation.Name = "Designation";
      this.Designation.ReadOnly = true;
      this.Designation.Width = 112;
      this.docid.DataPropertyName = "doctorid";
      this.docid.HeaderText = "DocID";
      this.docid.Name = "docid";
      this.docid.ReadOnly = true;
      this.docid.Visible = false;
      this.docid.Width = 75;
      this.specialty.DataPropertyName = "specialty";
      this.specialty.HeaderText = "Specialty";
      this.specialty.Name = "specialty";
      this.specialty.ReadOnly = true;
      this.specialty.Width = 94;
      this.availableday.AutoSizeMode = DataGridViewAutoSizeColumnMode.Fill;
      this.availableday.DataPropertyName = "availabledays";
      this.availableday.HeaderText = "AvailableDays";
      this.availableday.Name = "availableday";
      this.availableday.ReadOnly = true;
      this.AutoScaleDimensions = new SizeF(8f, 16f);
      this.AutoScaleMode = AutoScaleMode.Font;
      this.Controls.Add((Control) this.btnClear);
      this.Controls.Add((Control) this.groupBox2);
      this.Controls.Add((Control) this.groupBox1);
      this.Controls.Add((Control) this.tableLayoutPanel1);
      this.Name = nameof (CreateUser);
      this.Size = new Size(1100, 623);
      this.VisibleChanged += new EventHandler(this.CreateUser_VisibleChanged);
      ((ISupportInitialize) this.dgvEmpInfo).EndInit();
      this.tableLayoutPanel1.ResumeLayout(false);
      this.groupBox1.ResumeLayout(false);
      this.groupBox1.PerformLayout();
      this.groupBox2.ResumeLayout(false);
      this.groupBox2.PerformLayout();
      this.ResumeLayout(false);
    }
  }
}
