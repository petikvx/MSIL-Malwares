// Decompiled with JetBrains decompiler
// Type: Microsoft.Kofe.Engine.E941D6CC6
// Assembly: C5C480410, Version=14.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
// MVID: BF642EC0-3F36-4177-B782-3E478BED34CB
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2021.12-msil\HEUR-Trojan-Ransom.MSIL.Purgen.gen-36035b1a4995acb201c2b2160000d4477a31a2222c3f6bdc25a32d53d930bcfd.exe

using Microsoft.Kofe.IJDWP;
using Microsoft.VisualStudio.Debugger.Interop;
using System;

namespace Microsoft.Kofe.Engine
{
  internal class E941D6CC6 : IDebugModule2, IDebugModule3
  {
    public readonly IJdwpClass A1F5DE617;

    public E941D6CC6(IJdwpClass module) => this.A1F5DE617 = module;

    int IDebugModule2.B455A4E1B(
      enum_MODULE_INFO_FIELDS A85EBF78A,
      MODULE_INFO[] A3AD27B84)
    {
      try
      {
        MODULE_INFO moduleInfo = new MODULE_INFO();
        if ((A85EBF78A & 1) != null)
        {
          moduleInfo.m_bstrName = this.A1F5DE617.Name;
          ref enum_MODULE_INFO_FIELDS local = ref moduleInfo.dwValidFields;
          // ISSUE: cast to a reference type
          // ISSUE: explicit reference operation
          // ISSUE: cast to a reference type
          // ISSUE: explicit reference operation
          ^(int&) ref local = ^(int&) ref local | 1;
        }
        if ((A85EBF78A & 2) != null)
        {
          moduleInfo.m_bstrUrl = this.A1F5DE617.Name;
          ref enum_MODULE_INFO_FIELDS local = ref moduleInfo.dwValidFields;
          // ISSUE: cast to a reference type
          // ISSUE: explicit reference operation
          // ISSUE: cast to a reference type
          // ISSUE: explicit reference operation
          ^(int&) ref local = ^(int&) ref local | 2;
        }
        if ((A85EBF78A & 16) != null)
        {
          moduleInfo.m_addrLoadAddress = this.A1F5DE617.BaseAddress;
          ref enum_MODULE_INFO_FIELDS local = ref moduleInfo.dwValidFields;
          // ISSUE: cast to a reference type
          // ISSUE: explicit reference operation
          // ISSUE: cast to a reference type
          // ISSUE: explicit reference operation
          ^(int&) ref local = ^(int&) ref local | 16;
        }
        if ((A85EBF78A & 32) != null)
        {
          moduleInfo.m_addrPreferredLoadAddress = this.A1F5DE617.BaseAddress;
          ref enum_MODULE_INFO_FIELDS local = ref moduleInfo.dwValidFields;
          // ISSUE: cast to a reference type
          // ISSUE: explicit reference operation
          // ISSUE: cast to a reference type
          // ISSUE: explicit reference operation
          ^(int&) ref local = ^(int&) ref local | 32;
        }
        if ((A85EBF78A & 64) != null)
        {
          moduleInfo.m_dwSize = this.A1F5DE617.Size;
          ref enum_MODULE_INFO_FIELDS local = ref moduleInfo.dwValidFields;
          // ISSUE: cast to a reference type
          // ISSUE: explicit reference operation
          // ISSUE: cast to a reference type
          // ISSUE: explicit reference operation
          ^(int&) ref local = ^(int&) ref local | 64;
        }
        if ((A85EBF78A & 128) != null)
        {
          moduleInfo.m_dwLoadOrder = (uint) this.A1F5DE617.GetLoadOrder();
          ref enum_MODULE_INFO_FIELDS local = ref moduleInfo.dwValidFields;
          // ISSUE: cast to a reference type
          // ISSUE: explicit reference operation
          // ISSUE: cast to a reference type
          // ISSUE: explicit reference operation
          ^(int&) ref local = ^(int&) ref local | 128;
        }
        if ((A85EBF78A & 512) != null)
        {
          moduleInfo.m_bstrUrlSymbolLocation = string.Empty;
          ref enum_MODULE_INFO_FIELDS local = ref moduleInfo.dwValidFields;
          // ISSUE: cast to a reference type
          // ISSUE: explicit reference operation
          // ISSUE: cast to a reference type
          // ISSUE: explicit reference operation
          ^(int&) ref local = ^(int&) ref local | 512;
        }
        if ((A85EBF78A & 1024) != null)
        {
          moduleInfo.m_dwModuleFlags = (enum_MODULE_FLAGS) 0;
          if (((IJdwpReferenceType) this.A1F5DE617).SymbolsLoaded)
          {
            ref enum_MODULE_FLAGS local = ref moduleInfo.m_dwModuleFlags;
            // ISSUE: cast to a reference type
            // ISSUE: explicit reference operation
            // ISSUE: cast to a reference type
            // ISSUE: explicit reference operation
            ^(int&) ref local = ^(int&) ref local | 2;
          }
          ref enum_MODULE_INFO_FIELDS local1 = ref moduleInfo.dwValidFields;
          // ISSUE: cast to a reference type
          // ISSUE: explicit reference operation
          // ISSUE: cast to a reference type
          // ISSUE: explicit reference operation
          ^(int&) ref local1 = ^(int&) ref local1 | 1024;
        }
        A3AD27B84[0] = moduleInfo;
        return 0;
      }
      catch (ComponentException ex)
      {
        return ((Exception) ex).HResult;
      }
      catch (Exception ex)
      {
        return A09717160.ABD5D2EFF(ex);
      }
    }

    int IDebugModule2.E1E2936AC(string B5C7F70E3, out string F96802C89)
    {
      F96802C89 = (string) null;
      return 1;
    }

    int IDebugModule3.F1ACA8318(string E6FEB6680, out string DC253BCE8) => throw new NotImplementedException();

    int IDebugModule3.F0E78FDF7(
      enum_MODULE_INFO_FIELDS AF63BBA4B,
      MODULE_INFO[] D4A4610AD)
    {
      return ((IDebugModule2) this).GetInfo(AF63BBA4B, D4A4610AD);
    }

    int IDebugModule3.B19896FD4(
      enum_SYMBOL_SEARCH_INFO_FIELDS ECC700732,
      MODULE_SYMBOL_SEARCH_INFO[] B9A40401B)
    {
      B9A40401B[0] = new MODULE_SYMBOL_SEARCH_INFO();
      B9A40401B[0].dwValidFields = 1U;
      if (((IJdwpReferenceType) this.A1F5DE617).SymbolsLoaded)
      {
        string str = "Symbols Loaded - " + ((IJdwpReferenceType) this.A1F5DE617).GetSourceFile();
        B9A40401B[0].bstrVerboseSearchInfo = str;
      }
      else
      {
        string str = "Symbols not loaded";
        B9A40401B[0].bstrVerboseSearchInfo = str;
      }
      return 0;
    }

    int IDebugModule3.FE63E4762(out int FC7806A25)
    {
      FC7806A25 = 1;
      return 0;
    }

    int IDebugModule3.AC2DFE284()
    {
      ((IJdwpReferenceType) this.A1F5DE617).GetSourceFile();
      return 0;
    }

    int IDebugModule3.FFC27BAA2(int EDAB74F21) => throw new NotImplementedException();
  }
}
