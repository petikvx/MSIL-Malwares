// Decompiled with JetBrains decompiler
// Type: NS002.c000020
// Assembly: Worker-0, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: 6E50A6D0-CF23-40BF-9617-750EB84D00C0
// Assembly location: C:\Users\Administrateur\Downloads\ransomware_new\HEUR-Trojan-Ransom.Win32.Generic-122df846a943e419c3a31f65b6e67e7570134612b2dfd45638e0edd23e214036.exe

using System;
using System.Collections;
using System.Collections.Generic;
using System.IO;

namespace NS002
{
  public sealed class c000020 : IEnumerable<string>, IEnumerable
  {
    private Dictionary<ulong, c00001f> qtZUksETBbF;
    private Dictionary<ulong, c00001f> mnZZceqskl;
    private readonly string f00005b;

    public c000020(string p0) => this.f00005b = p0;

    IEnumerator IEnumerable.GetEnumerator() => (IEnumerator) this.GetEnumerator();

    public IEnumerator<string> GetEnumerator() => (IEnumerator<string>) new c000020.c000021(0)
    {
      gplEhxQobOrveX = this
    };

    private void m00002e()
    {
      if (this.qtZUksETBbF != null)
        return;
      new IwzaWmnwcnlB().CJkuFhqIgKwiFDo(this.f00005b, (HashSet<string>) null, out this.qtZUksETBbF, out this.mnZZceqskl);
    }

    private sealed class c000021 : IEnumerator<string>, IDisposable, IEnumerator
    {
      private string xClkVbBcLPvY;
      private int HwFJIqNfCurva;
      public c000020 gplEhxQobOrveX;
      public List<string> f00005c;
      public c00001f BYVnaUtKFbbqL;
      public c00001f f00005d;
      public int IqvnbmFiJKIU;
      public string aVVmAgxYobe;
      public Dictionary<ulong, c00001f>.ValueCollection.Enumerator lBtZnOPJiu;

      bool IEnumerator.MoveNext()
      {
        // ISSUE: fault handler
        try
        {
          switch (this.HwFJIqNfCurva)
          {
            case 0:
              this.HwFJIqNfCurva = -1;
              this.gplEhxQobOrveX.m00002e();
              this.f00005c = new List<string>();
              this.lBtZnOPJiu = this.gplEhxQobOrveX.qtZUksETBbF.Values.GetEnumerator();
              this.HwFJIqNfCurva = 1;
              break;
            case 2:
              this.HwFJIqNfCurva = 1;
              break;
            default:
label_10:
              return false;
          }
          while (this.lBtZnOPJiu.MoveNext())
          {
            this.BYVnaUtKFbbqL = this.lBtZnOPJiu.Current;
            this.f00005c.Clear();
            this.f00005d = this.BYVnaUtKFbbqL;
            this.IqvnbmFiJKIU = -1;
            do
            {
              if (this.f00005d.ParentFrn != 0UL)
                goto label_5;
label_4:
              this.f00005d = !this.gplEhxQobOrveX.qtZUksETBbF.ContainsKey(this.f00005d.ParentFrn) ? (!this.gplEhxQobOrveX.mnZZceqskl.ContainsKey(this.f00005d.ParentFrn) ? (c00001f) null : this.gplEhxQobOrveX.mnZZceqskl[this.f00005d.ParentFrn]) : this.gplEhxQobOrveX.qtZUksETBbF[this.f00005d.ParentFrn];
              continue;
label_5:
              this.f00005c.Add(this.f00005d.Name);
              goto label_4;
            }
            while (this.f00005d != null && ++this.IqvnbmFiJKIU < 1000);
            if (this.f00005c.Count != 0)
            {
              this.f00005c.Reverse();
              this.aVVmAgxYobe = this.gplEhxQobOrveX.f00005b + (object) '\\' + Path.Combine(this.f00005c.ToArray());
              this.xClkVbBcLPvY = this.aVVmAgxYobe;
              this.HwFJIqNfCurva = 2;
              return true;
            }
          }
          this.m00002f();
          goto label_10;
        }
        __fault
        {
          this.System\u002EIDisposable\u002EDispose();
        }
      }

      string IEnumerator<string>.Current => this.xClkVbBcLPvY;

      void IEnumerator.Reset() => throw new NotSupportedException();

      void IDisposable.Dispose()
      {
        switch (this.HwFJIqNfCurva)
        {
          case 1:
          case 2:
            try
            {
            }
            finally
            {
              this.m00002f();
            }
            break;
        }
      }

      object IEnumerator.Current => (object) this.xClkVbBcLPvY;

      public c000021(int p0) => this.HwFJIqNfCurva = p0;

      private void m00002f()
      {
        this.HwFJIqNfCurva = -1;
        this.lBtZnOPJiu.Dispose();
      }
    }
  }
}
