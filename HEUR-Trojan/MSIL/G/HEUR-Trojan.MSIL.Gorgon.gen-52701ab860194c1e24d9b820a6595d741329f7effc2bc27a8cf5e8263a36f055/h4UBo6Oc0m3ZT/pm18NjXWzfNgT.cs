// Decompiled with JetBrains decompiler
// Type: h4UBo6Oc0m3ZT.pm18NjXWzfNgT
// Assembly: 6xHrFwRAI8cwf, Version=5.6.0.5, Culture=neutral, PublicKeyToken=31bf3856ad364e35
// MVID: D0CFE593-D471-48A8-93C1-A7D99C557285
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.03\HEUR-Trojan.MSIL.Gorgon.gen-52701ab860194c1e24d9b820a6595d741329f7effc2bc27a8cf5e8263a36f055.exe

using NuGet.Packaging.Core;
using NuGet.Versioning;
using System;
using System.Collections.Generic;
using System.Linq;
using UmijEqiMYGIft;
using XRP64mXd3d1uD;

namespace h4UBo6Oc0m3ZT
{
  public class pm18NjXWzfNgT : IComparer<h9CthcyNW15VS>
  {
    private readonly LBFengGh2fvlZ Jh8HDqkHjZVPP;
    private readonly HashSet<PackageIdentity> GrHsQJUOIskAm;
    private readonly HashSet<string> tUgHmXjfd1mba;
    private readonly IVersionComparer gxDEtdzw1tnaN;
    private readonly PackageIdentityComparer o0b79jlny6V4m;
    private readonly Dictionary<string, NuGetVersion> X2DOmRx1UGlMh;

    public pm18NjXWzfNgT(
      LBFengGh2fvlZ dependencyBehavior,
      HashSet<PackageIdentity> preferredVersions,
      HashSet<string> targetIds)
    {
      this.Jh8HDqkHjZVPP = dependencyBehavior;
      this.GrHsQJUOIskAm = preferredVersions;
      this.tUgHmXjfd1mba = targetIds;
      this.gxDEtdzw1tnaN = VersionComparer.Default;
      this.o0b79jlny6V4m = PackageIdentity.Comparer;
      this.X2DOmRx1UGlMh = new Dictionary<string, NuGetVersion>();
      if (this.X2DOmRx1UGlMh == null)
        return;
      foreach (PackageIdentity packageIdentity in this.GrHsQJUOIskAm)
      {
        if (SemanticVersion.op_Inequality((SemanticVersion) packageIdentity.Version, (SemanticVersion) null))
          this.X2DOmRx1UGlMh.Add(packageIdentity.Id, packageIdentity.Version);
      }
    }

    public int V0QiL2t9yolp7(h9CthcyNW15VS xiiIyoEh0GFig, h9CthcyNW15VS M5juWhiPG4SWE)
    {
      if (xiiIyoEh0GFig == M5juWhiPG4SWE)
        return 0;
      bool flag1 = xiiIyoEh0GFig.\u0030lMv0Sgo77FLh;
      bool flag2 = M5juWhiPG4SWE.\u0030lMv0Sgo77FLh;
      if (flag1 && !flag2)
        return -1;
      if (!flag1 & flag2)
        return 1;
      if (flag1 & flag2)
        return 0;
      if (this.GrHsQJUOIskAm != null)
      {
        bool flag3 = ((IEnumerable<PackageIdentity>) this.GrHsQJUOIskAm).Contains<PackageIdentity>((PackageIdentity) xiiIyoEh0GFig, (IEqualityComparer<PackageIdentity>) this.o0b79jlny6V4m);
        bool flag4 = ((IEnumerable<PackageIdentity>) this.GrHsQJUOIskAm).Contains<PackageIdentity>((PackageIdentity) M5juWhiPG4SWE, (IEqualityComparer<PackageIdentity>) this.o0b79jlny6V4m);
        if (flag3 && !flag4)
          return -1;
        if (!flag3 & flag4)
          return 1;
      }
      if (xiiIyoEh0GFig.Listed && !M5juWhiPG4SWE.Listed)
        return -1;
      if (!xiiIyoEh0GFig.Listed && M5juWhiPG4SWE.Listed)
        return 1;
      NuGetVersion version1 = ((PackageIdentity) xiiIyoEh0GFig).Version;
      NuGetVersion version2 = ((PackageIdentity) M5juWhiPG4SWE).Version;
      LBFengGh2fvlZ lbFengGh2fvlZ = this.Jh8HDqkHjZVPP;
      if (this.tUgHmXjfd1mba.Contains<string>(((PackageIdentity) xiiIyoEh0GFig).Id, (IEqualityComparer<string>) StringComparer.OrdinalIgnoreCase))
        lbFengGh2fvlZ = LBFengGh2fvlZ.Highest;
      if (lbFengGh2fvlZ != LBFengGh2fvlZ.Highest && lbFengGh2fvlZ != LBFengGh2fvlZ.Ignore)
      {
        NuGetVersion y = (NuGetVersion) null;
        if (this.X2DOmRx1UGlMh.TryGetValue(((PackageIdentity) xiiIyoEh0GFig).Id, out y))
        {
          bool flag5 = ((IComparer<SemanticVersion>) this.gxDEtdzw1tnaN).Compare((SemanticVersion) version1, (SemanticVersion) y) < 0;
          bool flag6 = ((IComparer<SemanticVersion>) this.gxDEtdzw1tnaN).Compare((SemanticVersion) version2, (SemanticVersion) y) < 0;
          if (flag5 && !flag6)
            return 1;
          if (!flag5 & flag6)
            return -1;
          if (flag5 & flag6)
            return -1 * ((IComparer<SemanticVersion>) this.gxDEtdzw1tnaN).Compare((SemanticVersion) version1, (SemanticVersion) version2);
        }
      }
      switch (lbFengGh2fvlZ)
      {
        case LBFengGh2fvlZ.Ignore:
        case LBFengGh2fvlZ.Highest:
          return -1 * ((IComparer<SemanticVersion>) this.gxDEtdzw1tnaN).Compare((SemanticVersion) version1, (SemanticVersion) version2);
        case LBFengGh2fvlZ.Lowest:
          return ((IComparer<SemanticVersion>) this.gxDEtdzw1tnaN).Compare((SemanticVersion) version1, (SemanticVersion) version2);
        case LBFengGh2fvlZ.HighestPatch:
          if (((IEqualityComparer<SemanticVersion>) this.gxDEtdzw1tnaN).Equals((SemanticVersion) version1, (SemanticVersion) version2))
            return 0;
          return ((IEnumerable<h9CthcyNW15VS>) new h9CthcyNW15VS[2]
          {
            xiiIyoEh0GFig,
            M5juWhiPG4SWE
          }).OrderBy<h9CthcyNW15VS, int>((Func<h9CthcyNW15VS, int>) (Yd6yEYkEb66YX => ((SemanticVersion) ((PackageIdentity) Yd6yEYkEb66YX).Version).Major)).ThenBy<h9CthcyNW15VS, int>((Func<h9CthcyNW15VS, int>) (ZOkyKJgAuxdmb => ((SemanticVersion) ((PackageIdentity) ZOkyKJgAuxdmb).Version).Minor)).ThenByDescending<h9CthcyNW15VS, int>((Func<h9CthcyNW15VS, int>) (NDO619dTVVlxr => ((SemanticVersion) ((PackageIdentity) NDO619dTVVlxr).Version).Patch)).FirstOrDefault<h9CthcyNW15VS>() != xiiIyoEh0GFig ? 1 : -1;
        case LBFengGh2fvlZ.HighestMinor:
          if (((IEqualityComparer<SemanticVersion>) this.gxDEtdzw1tnaN).Equals((SemanticVersion) version1, (SemanticVersion) version2))
            return 0;
          return ((IEnumerable<h9CthcyNW15VS>) new h9CthcyNW15VS[2]
          {
            xiiIyoEh0GFig,
            M5juWhiPG4SWE
          }).OrderBy<h9CthcyNW15VS, int>((Func<h9CthcyNW15VS, int>) (JicbOuVw5ze1n => ((SemanticVersion) ((PackageIdentity) JicbOuVw5ze1n).Version).Major)).ThenByDescending<h9CthcyNW15VS, int>((Func<h9CthcyNW15VS, int>) (IcvPGkP18Av0a => ((SemanticVersion) ((PackageIdentity) IcvPGkP18Av0a).Version).Minor)).ThenByDescending<h9CthcyNW15VS, int>((Func<h9CthcyNW15VS, int>) (_param1 => ((SemanticVersion) ((PackageIdentity) _param1).Version).Patch)).FirstOrDefault<h9CthcyNW15VS>() != xiiIyoEh0GFig ? 1 : -1;
        default:
          return ((IComparer<SemanticVersion>) this.gxDEtdzw1tnaN).Compare((SemanticVersion) version1, (SemanticVersion) version2);
      }
    }
  }
}
