// Decompiled with JetBrains decompiler
// Type: FormState.StateMachineOld
// Assembly: Interna, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: 443E8749-461D-4E08-9210-1C57029CD0B8
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.02-msil\HEUR-Trojan.MSIL.Crypt.gen-0703de1e7a681eeac51ea409b707c66a2494735fe462e6aabc07972b556056f5.exe

using System;
using System.Collections.Generic;
using System.Windows.Forms;

namespace FormState
{
  public class StateMachineOld
  {
    private static StateMachineOld instance;
    private static frmMain _owner;
    private static Dictionary<string, Form> _forms;
    private static Stack<Form> _stack;

    public StateMachineOld()
    {
      StateMachineOld._forms = new Dictionary<string, Form>();
      StateMachineOld._stack = new Stack<Form>();
    }

    public static StateMachineOld Instance(frmMain owner)
    {
      if (StateMachineOld.instance == null)
      {
        StateMachineOld.instance = new StateMachineOld();
        StateMachineOld._owner = owner;
        StateMachineOld._owner.tsBack.Click += new EventHandler(StateMachineOld.Back_Click);
      }
      return StateMachineOld.instance;
    }

    public static StateMachineOld Instance()
    {
      if (StateMachineOld.instance == null)
        StateMachineOld.instance = new StateMachineOld();
      if (StateMachineOld._owner == null)
        throw new Exception("I need an owner, please call that instance first");
      return StateMachineOld.instance;
    }

    public void AddForm(string Name, Form frm)
    {
    }

    public void Navigate(string Name)
    {
    }

    private void Navigate(Form frm)
    {
      frm.MdiParent = (Form) StateMachineOld._owner;
      frm.Dock = DockStyle.Fill;
      frm.FormBorderStyle = FormBorderStyle.None;
      frm.Show();
      frm.BringToFront();
      StateMachineOld._owner.tsBack.Visible = this.CanGoBack();
    }

    private bool CanGoBack() => StateMachineOld._stack.Count > 0;

    private static void Back_Click(object sender, EventArgs e)
    {
      Form frm = StateMachineOld._stack.Pop();
      StateMachineOld.instance.Navigate(frm);
    }
  }
}
