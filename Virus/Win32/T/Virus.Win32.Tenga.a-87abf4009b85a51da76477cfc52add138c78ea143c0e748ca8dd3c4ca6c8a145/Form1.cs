// Decompiled with JetBrains decompiler
// Type: DtkGurmePdaPrn.Form1
// Assembly: DtkGurmePdaPrn, Version=5.4.0.0, Culture=neutral, PublicKeyToken=null
// MVID: 7BDD7619-5E52-421F-B089-BC167104A209
// Assembly location: C:\Users\Administrateur\Downloads\Virusshare-00009-msil\Virus.Win32.Tenga.a-87abf4009b85a51da76477cfc52add138c78ea143c0e748ca8dd3c4ca6c8a145.exe

using DtkNetDBSDK;
using DtkNetSDK;
using mdlPrint;
using System;
using System.Collections;
using System.ComponentModel;
using System.Drawing;
using System.IO;
using System.Threading;
using System.Windows.Forms;

namespace DtkGurmePdaPrn
{
  public class Form1 : Form
  {
    private IContainer components;
    private System.Windows.Forms.Timer tmr;
    private NotifyIcon notifyIcon1;
    private ContextMenuStrip contextMenuStrip1;
    private ToolStripMenuItem ayarlarToolStripMenuItem;
    private ToolStripMenuItem çıkışToolStripMenuItem;
    private Button button1;
    private Panel panel1;
    private TextBox textBox1;
    private bool isFirst = true;

    protected override void Dispose(bool disposing)
    {
      if (disposing && this.components != null)
        this.components.Dispose();
      base.Dispose(disposing);
    }

    private void InitializeComponent()
    {
      this.components = (IContainer) new Container();
      ComponentResourceManager componentResourceManager = new ComponentResourceManager(typeof (Form1));
      this.tmr = new System.Windows.Forms.Timer(this.components);
      this.notifyIcon1 = new NotifyIcon(this.components);
      this.contextMenuStrip1 = new ContextMenuStrip(this.components);
      this.ayarlarToolStripMenuItem = new ToolStripMenuItem();
      this.çıkışToolStripMenuItem = new ToolStripMenuItem();
      this.button1 = new Button();
      this.panel1 = new Panel();
      this.textBox1 = new TextBox();
      this.contextMenuStrip1.SuspendLayout();
      this.SuspendLayout();
      this.tmr.Interval = 1000;
      this.tmr.Tick += new EventHandler(this.tmr_Tick);
      this.notifyIcon1.BalloonTipIcon = ToolTipIcon.Info;
      this.notifyIcon1.BalloonTipText = "Datakod GURME PDA Yazdırma Servisi";
      this.notifyIcon1.BalloonTipTitle = "Datakod GURME PDA Yazdırma Servisi";
      this.notifyIcon1.ContextMenuStrip = this.contextMenuStrip1;
      this.notifyIcon1.Icon = (Icon) componentResourceManager.GetObject("notifyIcon1.Icon");
      this.notifyIcon1.Text = "Datakod GURME PDA Yazdırma Servisi";
      this.notifyIcon1.Visible = true;
      this.notifyIcon1.DoubleClick += new EventHandler(this.notifyIcon1_DoubleClick_1);
      this.contextMenuStrip1.Items.AddRange(new ToolStripItem[2]
      {
        (ToolStripItem) this.ayarlarToolStripMenuItem,
        (ToolStripItem) this.çıkışToolStripMenuItem
      });
      this.contextMenuStrip1.Name = "contextMenuStrip1";
      this.contextMenuStrip1.Size = new Size(122, 48);
      this.ayarlarToolStripMenuItem.Name = "ayarlarToolStripMenuItem";
      this.ayarlarToolStripMenuItem.Size = new Size(121, 22);
      this.ayarlarToolStripMenuItem.Text = "Ayarlar...";
      this.ayarlarToolStripMenuItem.Click += new EventHandler(this.ayarlarToolStripMenuItem_Click);
      this.çıkışToolStripMenuItem.Name = "çıkışToolStripMenuItem";
      this.çıkışToolStripMenuItem.Size = new Size(121, 22);
      this.çıkışToolStripMenuItem.Text = "Çıkış";
      this.çıkışToolStripMenuItem.Click += new EventHandler(this.çıkışToolStripMenuItem_Click);
      this.button1.Location = new Point(128, 12);
      this.button1.Name = "button1";
      this.button1.Size = new Size(282, 35);
      this.button1.TabIndex = 1;
      this.button1.Text = "Durdur";
      this.button1.UseVisualStyleBackColor = true;
      this.button1.Click += new EventHandler(this.button1_Click);
      this.panel1.Location = new Point(234, 53);
      this.panel1.Name = "panel1";
      this.panel1.Size = new Size(76, 30);
      this.panel1.TabIndex = 2;
      this.textBox1.Location = new Point(12, 107);
      this.textBox1.Multiline = true;
      this.textBox1.Name = "textBox1";
      this.textBox1.Size = new Size(507, 159);
      this.textBox1.TabIndex = 3;
      this.AutoScaleDimensions = new SizeF(6f, 13f);
      this.AutoScaleMode = AutoScaleMode.Font;
      this.ClientSize = new Size(531, 278);
      this.Controls.Add((Control) this.textBox1);
      this.Controls.Add((Control) this.panel1);
      this.Controls.Add((Control) this.button1);
      this.Icon = (Icon) componentResourceManager.GetObject("$this.Icon");
      this.MaximizeBox = false;
      this.Name = nameof (Form1);
      this.ShowInTaskbar = false;
      this.Text = "Datakod GURME PDA Yazdırma Servisi";
      this.Load += new EventHandler(this.Form1_Load);
      this.Paint += new PaintEventHandler(this.Form1_Paint);
      this.FormClosing += new FormClosingEventHandler(this.Form1_FormClosing);
      this.Resize += new EventHandler(this.Form1_Resize);
      this.contextMenuStrip1.ResumeLayout(false);
      this.ResumeLayout(false);
      this.PerformLayout();
    }

    public Form1() => this.InitializeComponent();

    public void Calistir_Timer()
    {
      this.tmr.Enabled = false;
      if (this.textBox1.Lines.Length > 1000)
        this.textBox1.Text = "";
      string[] files1 = Directory.GetFiles("C:\\DATAKOD", "*.cst");
      StreamReader streamReader1;
      if (files1.Length > 0)
      {
        for (int index = 0; index < files1.Length; ++index)
        {
          try
          {
            StreamReader streamReader2 = File.OpenText(files1[index]);
            string pSirketKod = streamReader2.ReadLine();
            int int32 = Convert.ToInt32(streamReader2.ReadLine());
            string pRaporDosya = streamReader2.ReadLine();
            string pYazici = streamReader2.ReadLine();
            string pParam1 = streamReader2.ReadLine();
            string pParam2 = streamReader2.ReadLine();
            string pParam3 = streamReader2.ReadLine();
            string pParam4 = streamReader2.ReadLine();
            string pParam5 = streamReader2.ReadLine();
            string pParam6 = streamReader2.ReadLine();
            streamReader2.Close();
            try
            {
              streamReader2.Dispose();
            }
            catch
            {
            }
            streamReader1 = (StreamReader) null;
            if (this.Yazdir_Custom(pSirketKod, int32, pRaporDosya, pYazici, pParam1, pParam2, pParam3, pParam4, pParam5, pParam6))
              File.Delete(files1[index]);
            Thread.Sleep(400);
            if (File.Exists(files1[index]))
              this.textBox1.Text += " SORUN VAR!!!!!!!!";
          }
          catch
          {
          }
        }
      }
      string[] files2 = Directory.GetFiles("C:\\DATAKOD", "*.ifo");
      if (files2.Length > 0)
      {
        for (int index = 0; index < files2.Length; ++index)
        {
          try
          {
            StreamReader streamReader3 = File.OpenText(files2[index]);
            string pSirketKod = streamReader3.ReadLine();
            int int32 = Convert.ToInt32(streamReader3.ReadLine());
            string pFisNo = streamReader3.ReadLine();
            string pRaporDosya = streamReader3.ReadLine();
            streamReader3.Close();
            try
            {
              streamReader3.Dispose();
            }
            catch
            {
            }
            streamReader1 = (StreamReader) null;
            if (this.Yazdir_AdisInfo(pSirketKod, int32, pFisNo, pRaporDosya))
              File.Delete(files2[index]);
            Thread.Sleep(400);
            if (File.Exists(files2[index]))
            {
              TextBox textBox1 = this.textBox1;
              textBox1.Text = textBox1.Text + pFisNo + " SORUN VAR!!!!!!!!";
            }
          }
          catch
          {
          }
        }
      }
      string[] files3 = Directory.GetFiles("C:\\DATAKOD", "*.ifp");
      if (files3.Length > 0)
      {
        for (int index = 0; index < files3.Length; ++index)
        {
          try
          {
            StreamReader streamReader4 = File.OpenText(files3[index]);
            bool flag = this.Yazdir_AdisInfoIptal(streamReader4.ReadLine(), Convert.ToInt32(streamReader4.ReadLine()), streamReader4.ReadLine(), streamReader4.ReadLine());
            streamReader4.Close();
            try
            {
              streamReader4.Dispose();
            }
            catch
            {
            }
            streamReader1 = (StreamReader) null;
            Thread.Sleep(400);
            if (flag)
              File.Delete(files3[index]);
          }
          catch
          {
          }
        }
      }
      string[] files4 = Directory.GetFiles("C:\\DATAKOD", "*.ads");
      if (files4.Length > 0)
      {
        for (int index = 0; index < files4.Length; ++index)
        {
          try
          {
            StreamReader streamReader5 = File.OpenText(files4[index]);
            bool flag = this.Yazdir_Adisyon(streamReader5.ReadLine(), Convert.ToInt32(streamReader5.ReadLine()), streamReader5.ReadLine(), streamReader5.ReadLine(), streamReader5.ReadLine());
            streamReader5.Close();
            try
            {
              streamReader5.Dispose();
            }
            catch
            {
            }
            streamReader1 = (StreamReader) null;
            Thread.Sleep(400);
            if (flag)
              File.Delete(files4[index]);
          }
          catch
          {
          }
        }
      }
      this.tmr.Enabled = true;
    }

    public bool Yazdir_Custom(
      string pSirketKod,
      int pSubeKod,
      string pRaporDosya,
      string pYazici,
      string pParam1,
      string pParam2,
      string pParam3,
      string pParam4,
      string pParam5,
      string pParam6)
    {
      bool flag = false;
      try
      {
        TextBox textBox1 = this.textBox1;
        textBox1.Text = textBox1.Text + string.Format("{0:dd.MM.yy HH:mm}", (object) DateTime.Now) + "_YAZ_1::" + (object) Convert.ToChar(13) + (object) Convert.ToChar(10);
        TNetKernel tnetKernel = new TNetKernel(true);
        TNetSirket tnetSirket = tnetKernel.yeniSirket(pSirketKod, pSubeKod, "DATAKOD", "b1998_DTKDDD");
        INetSorgu inetSorgu = new INetSorgu(tnetSirket.NetBaglanti);
        if (pRaporDosya != "" && File.Exists(pRaporDosya))
        {
          TPrint tprint = new TPrint();
          tprint.raporDosya = pRaporDosya;
          if (pParam1 != "")
          {
            tprint.degiskenList.Add((object) "Param1");
            tprint.degerList.Add((object) ("'" + pParam1 + "'"));
          }
          if (pParam2 != "")
          {
            tprint.degiskenList.Add((object) "Param2");
            tprint.degerList.Add((object) ("'" + pParam2 + "'"));
          }
          if (pParam3 != "")
          {
            tprint.degiskenList.Add((object) "Param3");
            tprint.degerList.Add((object) ("'" + pParam3 + "'"));
          }
          if (pParam4 != "")
          {
            tprint.degiskenList.Add((object) "Param4");
            tprint.degerList.Add((object) ("'" + pParam4 + "'"));
          }
          if (pParam5 != "")
          {
            tprint.degiskenList.Add((object) "Param5");
            tprint.degerList.Add((object) ("'" + pParam5 + "'"));
          }
          if (pParam6 != "")
          {
            if (pParam6.IndexOf("@") == -1)
            {
              tprint.degiskenList.Add((object) "Param6");
              tprint.degerList.Add((object) ("'" + pParam6 + "'"));
            }
            else
            {
              tprint.degiskenList.Add((object) "Param6");
              tprint.degerList.Add((object) ("'" + pParam6.Substring(0, pParam6.IndexOf("@") - 1) + "'"));
              if (pParam6.IndexOf("&") == -1)
              {
                string str = pParam6.Substring(pParam6.IndexOf("@") + 1);
                tprint.degiskenList.Add((object) "Param7");
                tprint.degerList.Add((object) ("'" + str + "'"));
              }
              else
              {
                string str1 = pParam6.Substring(pParam6.IndexOf("@") + 1, pParam6.IndexOf("&") - 1);
                tprint.degiskenList.Add((object) "Param7");
                tprint.degerList.Add((object) ("'" + str1 + "'"));
                string str2 = pParam6.Substring(pParam6.IndexOf("&") + 1);
                tprint.degiskenList.Add((object) "Param8");
                tprint.degerList.Add((object) ("'" + str2 + "'"));
              }
            }
          }
          if (pYazici != "")
            tprint.yaziciAdi = pYazici;
          tprint.connStr = tnetSirket.NetBaglanti.BaglantiStr;
          tprint.Hazirla_Rapor();
          tprint.Yazdir_Rapor();
          tprint.Dispose();
        }
        flag = true;
        inetSorgu?.Dispose();
        tnetSirket?.Dispose();
        tnetKernel.Bosalt_Kernel();
        tnetKernel?.Dispose();
      }
      catch (Exception ex)
      {
        TextBox textBox1 = this.textBox1;
        textBox1.Text = textBox1.Text + "ERR_1:::" + ex.Message + (object) Convert.ToChar(13) + (object) Convert.ToChar(10);
      }
      return flag;
    }

    public bool Yazdir_AdisInfo(
      string pSirketKod,
      int pSubeKod,
      string pFisNo,
      string pRaporDosya)
    {
      bool flag = false;
      try
      {
        TextBox textBox1 = this.textBox1;
        textBox1.Text = textBox1.Text + string.Format("{0:dd.MM.yy HH:mm}", (object) DateTime.Now) + "_YAZ_1::" + pFisNo + (object) Convert.ToChar(13) + (object) Convert.ToChar(10);
        TNetKernel tnetKernel = new TNetKernel(true);
        TNetSirket tnetSirket = tnetKernel.yeniSirket(pSirketKod, pSubeKod, "DATAKOD", "b1998_DTKDDD");
        INetSorgu inetSorgu = new INetSorgu(tnetSirket.NetBaglanti);
        if (pRaporDosya != "" && File.Exists(pRaporDosya))
        {
          ArrayList arrayList = new ArrayList();
          inetSorgu.Sorgu_Ac("EXEC func_AlAdisStokYazici '" + tnetSirket.BayiKod + "','" + pFisNo + "'," + pSubeKod.ToString() + ",'',0");
          while (inetSorgu.KayitSonraki())
          {
            string str = "";
            if (inetSorgu.DegerAl("OKod1S").ToString() != "")
              str = inetSorgu.DegerAl("OKod1S").ToString();
            else if (inetSorgu.DegerAl("DepoOKod1S").ToString() != "")
              str = inetSorgu.DegerAl("DepoOKod1S").ToString();
            else if (inetSorgu.DegerAl("Depo2OKod1S").ToString() != "")
              str = inetSorgu.DegerAl("Depo2OKod1S").ToString();
            if (arrayList.IndexOf((object) str) == -1)
              arrayList.Add((object) str);
          }
          inetSorgu.Kapat();
          for (int index = 0; index < arrayList.Count; ++index)
          {
            TPrint tprint = new TPrint()
            {
              raporDosya = pRaporDosya,
              degiskenList = {
                (object) "FisNo"
              },
              degerList = {
                (object) ("'" + pFisNo + "'")
              }
            };
            tprint.degiskenList.Add((object) "Yazici");
            tprint.degerList.Add((object) ("'" + arrayList[index].ToString() + "'"));
            tprint.degiskenList.Add((object) "Iptal");
            tprint.degerList.Add((object) "''");
            tprint.yaziciAdi = arrayList[index].ToString();
            tprint.connStr = tnetSirket.NetBaglanti.BaglantiStr;
            tprint.Hazirla_Rapor();
            tprint.Yazdir_Rapor();
            tprint.Dispose();
          }
          arrayList.Clear();
        }
        tnetSirket.TransactionBaslat();
        INetProc inetProc = new INetProc(tnetSirket.NetBaglanti);
        inetProc.Hazirla("func_YazdirAdisInfo");
        inetProc.Parametre_Ekle("@BayiKod", (TDataTip) 200, 15, (object) "");
        inetProc.Parametre_Ekle("@FisNo", (TDataTip) 200, 15, (object) pFisNo);
        inetProc.Parametre_Ekle("@SubeKod", (TDataTip) 3, (object) pSubeKod);
        inetProc.Calistir();
        inetProc.Dispose();
        tnetSirket.TransactionOnayla();
        flag = true;
        inetSorgu?.Dispose();
        tnetSirket?.Dispose();
        tnetKernel.Bosalt_Kernel();
        tnetKernel?.Dispose();
      }
      catch (Exception ex)
      {
        TextBox textBox1 = this.textBox1;
        textBox1.Text = textBox1.Text + "ERR_1::" + pFisNo + ":" + ex.Message + (object) Convert.ToChar(13) + (object) Convert.ToChar(10);
      }
      return flag;
    }

    public bool Yazdir_AdisInfoIptal(
      string pSirketKod,
      int pSubeKod,
      string pFisNo,
      string pRaporDosya)
    {
      bool flag = false;
      try
      {
        TextBox textBox1_1 = this.textBox1;
        string text = textBox1_1.Text;
        TextBox textBox1_2 = this.textBox1;
        object[] objArray = new object[6]
        {
          (object) textBox1_2.Text,
          (object) string.Format("{0:dd.MM.yy HH:mm}", (object) DateTime.Now),
          (object) "_YAZ_2::",
          (object) pFisNo,
          (object) Convert.ToChar(13),
          (object) Convert.ToChar(10)
        };
        string str1;
        string str2 = str1 = string.Concat(objArray);
        textBox1_2.Text = str1;
        string str3 = str2;
        textBox1_1.Text = text + str3;
        TNetKernel tnetKernel = new TNetKernel(true);
        TNetSirket tnetSirket = tnetKernel.yeniSirket(pSirketKod, pSubeKod, "DATAKOD", "b1998_DTKDDD");
        INetSorgu inetSorgu = new INetSorgu(tnetSirket.NetBaglanti);
        if (pRaporDosya != "" && File.Exists(pRaporDosya))
        {
          ArrayList arrayList = new ArrayList();
          inetSorgu.Sorgu_Ac("EXEC func_AlAdisStokYazici '" + tnetSirket.BayiKod + "','" + pFisNo + "'," + pSubeKod.ToString() + ",'',1");
          while (inetSorgu.KayitSonraki())
          {
            string str4 = "";
            if (inetSorgu.DegerAl("OKod1S").ToString() != "")
              str4 = inetSorgu.DegerAl("OKod1S").ToString();
            else if (inetSorgu.DegerAl("DepoOKod1S").ToString() != "")
              str4 = inetSorgu.DegerAl("DepoOKod1S").ToString();
            else if (inetSorgu.DegerAl("Depo2OKod1S").ToString() != "")
              str4 = inetSorgu.DegerAl("Depo2OKod1S").ToString();
            if (arrayList.IndexOf((object) str4) == -1)
              arrayList.Add((object) str4);
          }
          for (int index = 0; index < arrayList.Count; ++index)
          {
            TPrint tprint = new TPrint()
            {
              raporDosya = pRaporDosya,
              degiskenList = {
                (object) "FisNo"
              },
              degerList = {
                (object) ("'" + pFisNo + "'")
              }
            };
            tprint.degiskenList.Add((object) "Yazici");
            tprint.degerList.Add((object) ("'" + arrayList[index].ToString() + "'"));
            tprint.degiskenList.Add((object) "Iptal");
            tprint.degerList.Add((object) "'X'");
            tprint.yaziciAdi = arrayList[index].ToString();
            tprint.connStr = tnetSirket.NetBaglanti.BaglantiStr;
            tprint.Hazirla_Rapor();
            tprint.Yazdir_Rapor();
            tprint.Dispose();
          }
          arrayList.Clear();
        }
        inetSorgu.Sorgu_Calistir("UPDATE TblBelgeDetay SET Miktar2 = 0  WHERE FisNo = '" + pFisNo + "'   AND SebepKod <> ''    AND BelgeTip = 'X'    AND BelgeTur = '2' ");
        inetSorgu.Kapat();
        inetSorgu.Dispose();
        flag = true;
        tnetSirket?.Dispose();
        tnetKernel.Bosalt_Kernel();
        tnetKernel?.Dispose();
      }
      catch (Exception ex)
      {
        TextBox textBox1 = this.textBox1;
        textBox1.Text = textBox1.Text + "ERR_2::" + pFisNo + ":" + ex.Message + (object) Convert.ToChar(13) + (object) Convert.ToChar(10);
      }
      return flag;
    }

    public bool Yazdir_Adisyon(
      string pSirketKod,
      int pSubeKod,
      string pFisNo,
      string pRaporDosya,
      string pYazici)
    {
      bool flag = false;
      try
      {
        TextBox textBox1 = this.textBox1;
        textBox1.Text = textBox1.Text + string.Format("{0:dd.MM.yy HH:mm}", (object) DateTime.Now) + "_YAZ_3::" + pFisNo + (object) Convert.ToChar(13) + (object) Convert.ToChar(10);
        TNetKernel tnetKernel = new TNetKernel(true);
        TNetSirket tnetSirket = tnetKernel.yeniSirket(pSirketKod, pSubeKod, "DATAKOD", "b1998_DTKDDD");
        TGurmeParam tgurmeParam = new TGurmeParam(tnetSirket);
        tgurmeParam.Al_Parametre();
        string adisyonYaziciAdi = tgurmeParam.Adisyon_YaziciAdi;
        if (tgurmeParam.Adisyon_Dizayn != "")
        {
          if (File.Exists(tgurmeParam.Adisyon_Dizayn))
          {
            INetSorgu inetSorgu = new INetSorgu(tnetSirket.NetBaglanti);
            inetSorgu.Sorgu_Ac("SELECT M.OKod1S FROM TblBelge B   LEFT JOIN TblMasa M ON (M.BayiKod = B.BayiKod AND M.MasaKod = B.Acklm1)  WHERE B.BayiKod = '" + tnetSirket.BayiKod + "'   AND B.SubeKod = " + tnetSirket.SubeKod.ToString() + "   AND B.FisNo = '" + pFisNo + "'   AND B.BelgeTip = 'X'    AND B.BelgeTur = '2' ");
            if (inetSorgu.KayitSonraki() && inetSorgu.DegerAl("OKod1S").ToString() != "")
              adisyonYaziciAdi = inetSorgu.DegerAl("OKod1S").ToString();
            inetSorgu.Kapat();
            TPrint tprint = new TPrint()
            {
              raporDosya = tgurmeParam.Adisyon_Dizayn,
              yaziciAdi = adisyonYaziciAdi,
              degiskenList = {
                (object) "FisNo"
              },
              degerList = {
                (object) ("'" + pFisNo + "'")
              }
            };
            tprint.yaziciAdi = adisyonYaziciAdi;
            tprint.connStr = tnetSirket.NetBaglanti.BaglantiStr;
            TBelge tbelge = new TBelge(tnetSirket);
            tbelge.Kayit_Ac(pFisNo, (TFisBelgeTip) 6, (TFisBelgeTur) 2);
            tbelge.IsYazdir = true;
            tbelge.PTarih = DateTime.Now;
            tbelge.Kayit_Duzelt(true);
            tbelge.Dispose();
            inetSorgu.Kapat();
            inetSorgu.Dispose();
            tprint.yaziciAdi = adisyonYaziciAdi;
            tprint.Hazirla_Rapor();
            tprint.yaziciAdi = adisyonYaziciAdi;
            tprint.Yazdir_Rapor();
            tprint.Dispose();
            flag = true;
          }
          else
            flag = true;
        }
        else
          flag = true;
        tnetSirket?.Dispose();
        tnetKernel.Bosalt_Kernel();
        tnetKernel?.Dispose();
      }
      catch (Exception ex)
      {
        TextBox textBox1 = this.textBox1;
        textBox1.Text = textBox1.Text + "ERR_3::" + pFisNo + ":" + ex.Message + (object) Convert.ToChar(13) + (object) Convert.ToChar(10);
      }
      return flag;
    }

    private void Form1_Resize(object sender, EventArgs e)
    {
      if (FormWindowState.Minimized != this.WindowState)
        return;
      this.Hide();
    }

    private void ayarlarToolStripMenuItem_Click(object sender, EventArgs e)
    {
      this.Show();
      this.WindowState = FormWindowState.Normal;
    }

    private void çıkışToolStripMenuItem_Click(object sender, EventArgs e) => this.Close();

    private void tmr_Tick(object sender, EventArgs e)
    {
      this.Calistir_Timer();
      if (this.panel1.BackColor == Color.Black)
        this.panel1.BackColor = Color.Red;
      else
        this.panel1.BackColor = Color.Black;
    }

    private void button1_Click(object sender, EventArgs e)
    {
      if (this.tmr.Enabled)
      {
        this.button1.Text = "Başlat";
        this.tmr.Enabled = false;
        this.WindowState = FormWindowState.Minimized;
      }
      else
      {
        this.button1.Text = "Durdur";
        this.tmr.Enabled = true;
        this.WindowState = FormWindowState.Minimized;
      }
    }

    private void Form1_FormClosing(object sender, FormClosingEventArgs e)
    {
    }

    private void Form1_Load(object sender, EventArgs e) => this.tmr.Enabled = true;

    private void notifyIcon1_DoubleClick_1(object sender, EventArgs e)
    {
      this.Show();
      this.WindowState = FormWindowState.Normal;
    }

    private void Form1_Paint(object sender, PaintEventArgs e)
    {
      if (!this.isFirst)
        return;
      this.isFirst = false;
      this.WindowState = FormWindowState.Minimized;
      this.Hide();
    }
  }
}
