// Decompiled with JetBrains decompiler
// Type: myApp.InstanceUnique
// Assembly: Svchost, Version=1.0.3797.25400, Culture=neutral, PublicKeyToken=null
// MVID: E157A03A-FE69-4E7B-AD46-73B5B6218564
// Assembly location: C:\Users\Administrateur\Downloads\Virusshare-00006-msil\Backdoor.MSIL.IrcBot.fy-ac791d112cad6f2a883c24cb5a554f1a826fa0afc8bb0e0be6dada5ff2c5a16d.exe

using System;
using System.Threading;

namespace myApp
{
  internal class InstanceUnique : IDisposable
  {
    private readonly Mutex _mMutex;
    private bool _mMutexOwned;

    public InstanceUnique(string name)
    {
      this._mMutex = new Mutex(false, name);
      this._mMutexOwned = false;
    }

    public void Dispose()
    {
      if (!this._mMutexOwned)
        return;
      this._mMutex.ReleaseMutex();
    }

    public bool IsRunning()
    {
      this._mMutexOwned = this._mMutex.WaitOne(0, true);
      return !this._mMutexOwned;
    }
  }
}
