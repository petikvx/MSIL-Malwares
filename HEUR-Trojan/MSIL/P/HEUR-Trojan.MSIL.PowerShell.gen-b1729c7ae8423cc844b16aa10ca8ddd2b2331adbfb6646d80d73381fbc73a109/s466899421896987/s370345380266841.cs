// Decompiled with JetBrains decompiler
// Type: s466899421896987.s370345380266841
// Assembly: s968508024776124, Version=2.0.47.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
// MVID: E3596912-35E7-405B-A05A-F5F12AB5E292
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.04\HEUR-Trojan.MSIL.PowerShell.gen-b1729c7ae8423cc844b16aa10ca8ddd2b2331adbfb6646d80d73381fbc73a109.exe

using s111377166353221;
using s528813736053581;
using s873795964751567;
using System;
using System.Collections.Generic;
using System.Runtime.InteropServices;

namespace s466899421896987
{
  internal struct s370345380266841 : IDisposable
  {
    private Dictionary<s370345380266841.s870729316666474, ushort> s283376344493920;
    private Dictionary<Guid, ushort> s623572183220091;

    public unsafe void s332283293464676(
      s134995860702422.s648877553938236* s630958549481063)
    {
      if (s630958549481063->s934424027936993 == (ushort) 0)
        return;
      this.s807719907931373(s630958549481063);
    }

    public unsafe void s091031820654218()
    {
      if (this.s283376344493920 == null)
        return;
      foreach (KeyValuePair<s370345380266841.s870729316666474, ushort> keyValuePair in this.s283376344493920)
        Marshal.FreeHGlobal((IntPtr) (void*) keyValuePair.Key.s647453830311318);
      this.s283376344493920 = (Dictionary<s370345380266841.s870729316666474, ushort>) null;
      this.s623572183220091 = (Dictionary<Guid, ushort>) null;
    }

    private unsafe void s807719907931373(
      s134995860702422.s648877553938236* s443472640961716)
    {
      s134995860702422.s042871462687652* s884679247404646 = s443472640961716->s884679247404646;
      for (s134995860702422.s042871462687652* s042871462687652Ptr = s443472640961716->s884679247404646 + s443472640961716->s934424027936993; s884679247404646 < s042871462687652Ptr; ++s884679247404646)
      {
        if (s884679247404646->s270740346342371 == (ushort) 11)
          ((s134995860702422.s728170393225391*) s443472640961716)->s870227314561507.s301818044239639 = this.s818438514983854(s443472640961716, s884679247404646);
      }
    }

    private unsafe ushort s818438514983854(
      s134995860702422.s648877553938236* s181805032485323,
      s134995860702422.s042871462687652* s468488291494320)
    {
      if (this.s283376344493920 == null)
      {
        this.s283376344493920 = new Dictionary<s370345380266841.s870729316666474, ushort>();
        this.s623572183220091 = new Dictionary<Guid, ushort>();
      }
      s370345380266841.s870729316666474 key;
      // ISSUE: explicit constructor call
      ((s134995860702422.s587787545948605) ref key).\u002Ector(&((s134995860702422.s728170393225391*) s181805032485323)->s870227314561507.s865414040669856, ((s134995860702422.s728170393225391*) s181805032485323)->s870227314561507.s611740701286585, (byte*) s468488291494320->s566029008717659, (int) s468488291494320->s711754183083976);
      ushort num;
      if (!this.s283376344493920.TryGetValue(key, out num))
      {
        if (!this.s623572183220091.TryGetValue(((s134995860702422.s728170393225391*) s181805032485323)->s870227314561507.s865414040669856, out num))
          num = (ushort) 65280;
        --num;
        this.s623572183220091[((s134995860702422.s728170393225391*) s181805032485323)->s870227314561507.s865414040669856] = num;
        if (num == (ushort) 0)
          throw new InvalidOperationException("Error ran out of TraceLogging Event IDs for provider " + (object) ((s134995860702422.s728170393225391*) s181805032485323)->s870227314561507.s865414040669856);
        int s880868092334945 = key.s499498100100531 + 3 & -4;
        byte* numPtr = (byte*) (void*) Marshal.AllocHGlobal(s880868092334945 + sizeof (Guid));
        // ISSUE: cast to a reference type
        // ISSUE: explicit reference operation
        (^(s134995860702422.s538871105697333&) ref key).s647453830311318 = (Guid*) numPtr;
        *key.s647453830311318 = ((s134995860702422.s728170393225391*) s181805032485323)->s870227314561507.s865414040669856;
        byte* s618938079492730 = numPtr + sizeof (Guid);
        s034852122986107.s168111251497767((IntPtr) (void*) key.s096578310153736, (IntPtr) (void*) s618938079492730, s880868092334945);
        key.s096578310153736 = s618938079492730;
        this.s283376344493920.Add(key, num);
      }
      return num;
    }

    private struct s870729316666474 : IEquatable<s370345380266841.s870729316666474>
    {
      public unsafe byte* s096578310153736;
      public int s499498100100531;
      public byte s324362194555865;
      public s244709160700278 s765791709258419;

      public virtual unsafe int s094404626234483()
      {
        // ISSUE: cast to a reference type
        // ISSUE: explicit reference operation
        int num = this.s499498100100531 + (^(s134995860702422.s538871105697333&) ref this).s647453830311318->GetHashCode();
        if (4 <= this.s499498100100531)
          num += *(int*) this.s096578310153736;
        return num;
      }

      public unsafe bool s267201343939406(s370345380266841.s870729316666474 s878495857779973)
      {
        // ISSUE: cast to a reference type
        // ISSUE: explicit reference operation
        if (this.s499498100100531 != s878495857779973.s499498100100531 || *(^(s134995860702422.s538871105697333&) ref this).s647453830311318 != *s878495857779973.s647453830311318 || (int) this.s324362194555865 != (int) s878495857779973.s324362194555865)
          return false;
        byte* s096578310153736_1 = s878495857779973.s096578310153736;
        byte* numPtr = this.s096578310153736 + this.s499498100100531;
        for (byte* s096578310153736_2 = this.s096578310153736; s096578310153736_2 < numPtr; ++s096578310153736_2)
        {
          if ((int) *s096578310153736_2 != (int) *s096578310153736_1)
            return false;
          ++s096578310153736_1;
        }
        return true;
      }

      public s870729316666474() => ((object) ref this).\u002Ector();
    }
  }
}
