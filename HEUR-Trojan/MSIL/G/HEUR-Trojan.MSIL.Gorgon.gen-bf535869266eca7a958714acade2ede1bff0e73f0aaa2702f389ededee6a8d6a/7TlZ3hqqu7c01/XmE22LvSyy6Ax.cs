// Decompiled with JetBrains decompiler
// Type: 7TlZ3hqqu7c01.XmE22LvSyy6Ax
// Assembly: Udby4Jt48oXkJ, Version=3.17.2.31, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
// MVID: 37899E89-D673-4F5B-A193-2E4DF6A54096
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.03\HEUR-Trojan.MSIL.Gorgon.gen-bf535869266eca7a958714acade2ede1bff0e73f0aaa2702f389ededee6a8d6a.exe

using \u0037TlZ3hqqu7c01;
using bu8pNrX0TZwPh;
using hujG0QbsYScYh;
using OojYDHmXRse47;
using qCZWYBioj9oGa;
using RyoVh3LEVVetm;
using System;
using System.Runtime.CompilerServices;
using System.Text;
using System.Threading.Tasks;
using u1QgJKQJKYhz7;
using UsYvc6my5CXWe;

namespace \u0037TlZ3hqqu7c01
{
  internal class XmE22LvSyy6Ax : vmgkKHlLDILn4
  {
    private readonly wvvZ5em0NCA6X \u0034g41s10cqwwWh;
    private z8o7PXRejwg2z iX4MAkdKJQ2ge;

    public XmE22LvSyy6Ax(z7eJc8CpoGMSq requestData, wvvZ5em0NCA6X userCredential)
      : base(requestData)
    {
      if (userCredential == null)
        throw new ArgumentNullException(nameof (userCredential));
      if (requestData.\u0036ttRNCcehmULN.NyQUHwnQg72Kv == kb6kJoyftgn0H.ADFS)
        this.wv77vsl2OHrKS = true;
      this.\u0034g41s10cqwwWh = userCredential;
      this.\u0037hhgMEalYqxkj = this.\u0034g41s10cqwwWh.C4zHQTLCFu0sH;
    }

    public XmE22LvSyy6Ax(z7eJc8CpoGMSq requestData, z8o7PXRejwg2z userAssertion)
      : base(requestData)
    {
      if (userAssertion == null)
        throw new ArgumentNullException(nameof (userAssertion));
      this.iX4MAkdKJQ2ge = !string.IsNullOrWhiteSpace(userAssertion.qR85VDyvOIgz1) ? userAssertion : throw new ArgumentException("credential.AssertionType cannot be empty", nameof (userAssertion));
    }

    protected override Task PreRunAsync()
    {
      // ISSUE: variable of a compiler-generated type
      XmE22LvSyy6Ax.efYz7HIQSlg1D stateMachine;
      // ISSUE: reference to a compiler-generated field
      stateMachine.v1ZvAK7uxN9LU = this;
      // ISSUE: reference to a compiler-generated field
      stateMachine.\u003786ANUz7c5PRB = AsyncTaskMethodBuilder.Create();
      // ISSUE: cast to a reference type
      // ISSUE: explicit reference operation
      // ISSUE: reference to a compiler-generated field
      (^(N6EwWx4HZlhQk.bDvjCs92vS2w6&) ref stateMachine).IFtUsAoKEuL6D = -1;
      // ISSUE: reference to a compiler-generated field
      stateMachine.\u003786ANUz7c5PRB.Start<XmE22LvSyy6Ax.efYz7HIQSlg1D>(ref stateMachine);
      // ISSUE: reference to a compiler-generated field
      return stateMachine.\u003786ANUz7c5PRB.Task;
    }

    protected override Task PreTokenRequest()
    {
      // ISSUE: variable of a compiler-generated type
      XmE22LvSyy6Ax.UOibUSZTyrgb1 stateMachine;
      // ISSUE: reference to a compiler-generated field
      stateMachine.DIeeu4UTrqSV5 = this;
      // ISSUE: reference to a compiler-generated field
      stateMachine.ZNYdDINyOT0la = AsyncTaskMethodBuilder.Create();
      // ISSUE: cast to a reference type
      // ISSUE: explicit reference operation
      // ISSUE: reference to a compiler-generated field
      (^(XmE22LvSyy6Ax.efYz7HIQSlg1D&) ref stateMachine).tNK9hP7pcSp5w = -1;
      // ISSUE: reference to a compiler-generated field
      stateMachine.ZNYdDINyOT0la.Start<XmE22LvSyy6Ax.UOibUSZTyrgb1>(ref stateMachine);
      // ISSUE: reference to a compiler-generated field
      return stateMachine.ZNYdDINyOT0la.Task;
    }

    protected override void AddAditionalRequestParameters(dooNxm6mSPOHK requestParameters)
    {
      if (this.iX4MAkdKJQ2ge != null)
      {
        requestParameters["grant_type"] = this.iX4MAkdKJQ2ge.qR85VDyvOIgz1;
        requestParameters["assertion"] = Convert.ToBase64String(Encoding.UTF8.GetBytes(this.iX4MAkdKJQ2ge.GfMEMr7DZMhJm));
      }
      else
        this.\u0034g41s10cqwwWh.\u00375tPG34L1g8ZV(requestParameters);
      requestParameters["scope"] = "openid";
    }

    private bool \u0037Rjtc3TEW8eUH() => this.iX4MAkdKJQ2ge == null && !this.wv77vsl2OHrKS;
  }
}
