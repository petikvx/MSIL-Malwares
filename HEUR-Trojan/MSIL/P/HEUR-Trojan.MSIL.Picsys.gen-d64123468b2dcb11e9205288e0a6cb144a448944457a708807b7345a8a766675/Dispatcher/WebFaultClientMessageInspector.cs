// Decompiled with JetBrains decompiler
// Type: System.ServiceModel.Dispatcher.WebFaultClientMessageInspector
// Assembly: Microsoft.Transactions.Bridge, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: 51116F84-6FE2-4BD6-A908-2C88E06F45BB
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.07\HEUR-Trojan.MSIL.Picsys.gen-d64123468b2dcb11e9205288e0a6cb144a448944457a708807b7345a8a766675.exe

using System.Net;
using System.ServiceModel.Channels;

namespace System.ServiceModel.Dispatcher
{
  internal class WebFaultClientMessageInspector : IClientMessageInspector
  {
    public virtual void AfterReceiveReply(ref Message reply, object correlationState)
    {
      if (reply == null)
        return;
      HttpResponseMessageProperty property = (HttpResponseMessageProperty) reply.Properties[HttpResponseMessageProperty.Name];
      if (property != null && property.StatusCode == HttpStatusCode.InternalServerError)
        throw DiagnosticUtility.ExceptionUtility.ThrowHelperError((Exception) new CommunicationException(property.StatusDescription));
    }

    public object BeforeSendRequest(ref Message request, IClientChannel channel) => (object) null;
  }
}
