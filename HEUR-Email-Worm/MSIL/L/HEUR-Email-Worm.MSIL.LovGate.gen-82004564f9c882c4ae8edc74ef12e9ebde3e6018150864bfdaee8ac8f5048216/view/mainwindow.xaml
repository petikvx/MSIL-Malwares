<Window x:Class="CiscoAnyconnectControl.UI.View.MainWindow"
        xmlns:controls="clr-namespace:CiscoAnyconnectControl.UI.View.Controls"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:CiscoAnyconnectControl.UI"
        xmlns:vm="clr-namespace:CiscoAnyconnectControl.UI.ViewModel"
        Loaded="Window_Loaded" Closing="Window_Closing" Title="Cisco Anyconnect Control" Height="289.023"
        Width="399.221" MinHeight="275" MinWidth="400">
  <FrameworkElement.Resources>
    <ResourceDictionary x:Name="ResDict">
      <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="Controls/Resources/LoadingArcs.xaml"/>
      </ResourceDictionary.MergedDictionaries>
      <SolidColorBrush x:Key="AccentColorBrush" Color="#CC69C0E6"/>
      <Style TargetType="{x:Type Label}">
        <Setter Property="FrameworkElement.Height" Value="18"/>
        <Setter Property="Control.Padding" Value="0, 0, 0, 0"/>
      </Style>
      <vm:VpnStatusViewModel x:Key="VpnStatus"/>
      <vm:VpnDataViewModel x:Key="VpnData"/>
      <vm:SettingsViewModel x:Key="Settings"/>
      <vm:DebugViewModel x:Key="DebugBindings"/>
    </ResourceDictionary>
  </FrameworkElement.Resources>
  <DockPanel>
    <Menu DockPanel.Dock="Top">
      <MenuItem Header="Debug">
        <MenuItem Header="Open Process Directory"
                  Command="{Binding Source={StaticResource DebugBindings}, Path=OpenExplorerInProcDir}"/>
        <MenuItem Header="Restart background Service" IsEnabled="false"
                  Command="{Binding Source={StaticResource DebugBindings}, Path=RestartServiceCommand}"/>
        <MenuItem Header="Start background Service" IsEnabled="false"
                  Command="{Binding Source={StaticResource DebugBindings}, Path=StartServiceCommand}"/>
        <MenuItem Header="Stop background Service" IsEnabled="false"
                  Command="{Binding Source={StaticResource DebugBindings}, Path=StopServiceCommand}"/>
      </MenuItem>
    </Menu>
    <Grid>
      <DockPanel ZIndex="100" Background="#C0000000" Visibility="Collapsed">
        <Grid>
          <Grid.RowDefinitions>
            <RowDefinition/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition/>
          </Grid.RowDefinitions>
          <controls:LoadingIndicator Grid.Row="1" Style="{StaticResource LoadingIndicatorArcsStyleKey}" IsActive="false"/>
          <Label Grid.Row="2" Content="Connecting to Service ..." HorizontalAlignment="Center"
                 VerticalAlignment="Center" Margin="0,5,0,0"
                 Foreground="{Binding Source={StaticResource AccentColorBrush}}"/>
        </Grid>
      </DockPanel>
      <Grid Margin="8" ZIndex="0" IsEnabled="true">
        <Grid.ColumnDefinitions>
          <ColumnDefinition Width="1*"/>
          <ColumnDefinition Width="10"/>
          <ColumnDefinition Width="1*"/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
          <RowDefinition Height="Auto"/>
          <RowDefinition Height="1*"/>
          <RowDefinition Height="Auto"/>
          <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <GridSplitter Grid.Column="1" Grid.Row="1" HorizontalAlignment="Center" VerticalAlignment="Stretch" Width="1"
                      Margin="0,5"/>
        <Grid Row="1" Column="0">
          <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="2*"/>
            <RowDefinition Height="2*"/>
            <RowDefinition Height="3*"/>
          </Grid.RowDefinitions>
          <Label Grid.Row="0" Content="Connection:" HorizontalAlignment="Left" VerticalAlignment="Top"
                 FontWeight="Bold"/>
          <Grid Row="1" Column="0">
            <Grid.RowDefinitions>
              <RowDefinition Height="1*"/>
              <RowDefinition Height="Auto"/>
              <RowDefinition Height="Auto"/>
              <RowDefinition Height="1*"/>
            </Grid.RowDefinitions>
            <Label Grid.Row="1" HorizontalAlignment="Left" VerticalAlignment="Center" Content="Server Address: "
                   FontWeight="DemiBold"/>
            <TextBox Grid.Row="2" HorizontalAlignment="Stretch" VerticalAlignment="Center"
                     Text="{Binding Source={StaticResource VpnData}, Path=Address, Mode=TwoWay}"/>
          </Grid>
          <Grid Row="2" Column="0">
            <Grid.RowDefinitions>
              <RowDefinition Height="1*"/>
              <RowDefinition Height="Auto"/>
              <RowDefinition Height="Auto"/>
              <RowDefinition Height="1*"/>
            </Grid.RowDefinitions>
            <Label Grid.Row="1" HorizontalAlignment="Left" VerticalAlignment="Center" Content="Group: "
                   FontWeight="DemiBold"/>
            <Grid Row="2" Column="0">
              <Grid.ColumnDefinitions>
                <ColumnDefinition/>
                <ColumnDefinition Width="40"/>
              </Grid.ColumnDefinitions>
              <TextBox Grid.Column="0" HorizontalAlignment="Stretch" VerticalAlignment="Center" IsEnabled="false"
                       Margin="0,0,5,0" Text="{Binding Source={StaticResource VpnData}, Path=Group, Mode=OneWay}"/>
              <Button Grid.Column="1" HorizontalAlignment="Stretch" VerticalAlignment="Center" Content="Delete"
                      Height="18" Command="{Binding Source={StaticResource VpnData}, Path=RemoveGroup, Mode=OneWay}"
                      IsEnabled="{Binding Source={StaticResource VpnData}, Path=IsRemoveProfileButtonEnabled}"/>
            </Grid>
          </Grid>
          <Grid Row="3" Column="0">
            <Grid.RowDefinitions>
              <RowDefinition Height="1*"/>
              <RowDefinition Height="Auto"/>
              <RowDefinition Height="Auto"/>
              <RowDefinition Height="Auto"/>
              <RowDefinition Height="Auto"/>
              <RowDefinition Height="1*"/>
            </Grid.RowDefinitions>
            <Label Grid.Row="1" HorizontalAlignment="Left" VerticalAlignment="Center" Content="Login: "
                   FontWeight="DemiBold"/>
            <TextBox Grid.Row="3" HorizontalAlignment="Stretch" VerticalAlignment="Center"
                     Text="{Binding Source={StaticResource VpnData}, Path=Username, Mode=TwoWay}"/>
            <PasswordBox PasswordChanged="PwdVpnPassword_PasswordChanged" Name="PwdVpnPassword" Grid.Row="4"
                         HorizontalAlignment="Stretch" VerticalAlignment="Center" Margin="0,5,0,0"/>
          </Grid>
        </Grid>
        <Grid Row="2" Column="0" ColumnSpan="3" Margin="0,0,0,-5">
          <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="1*"/>
          </Grid.ColumnDefinitions>
          <Label Grid.Column="0" Margin="0,0,5,0"
                 Content="{Binding Path=Status, Source={StaticResource VpnStatus}, Mode=OneWay}"/>
          <Label Grid.Column="1" Margin="0,0,5,0"
                 Content="{Binding Path=TimeConnected, Source={StaticResource VpnStatus}, Mode=OneWay}"/>
          <Canvas Name="CanvasStatus" Grid.Column="2" VerticalAlignment="Stretch" Margin="0,0,5,0"
                  Background="{Binding Path=Color, Source={StaticResource VpnStatus}, Mode=OneWay}"
                  Width="{Binding ElementName=CanvasStatus, Path=ActualHeight, Mode=OneWay}"/>
          <Button Click="BtnAction_Click" Name="BtnAction" Grid.Column="4" HorizontalAlignment="Right"
                  VerticalAlignment="Center" Width="125"
                  Content="{Binding Source={StaticResource VpnStatus}, Path=ActionButtonText, Mode=OneWay}"
                  IsEnabled="{Binding Source={StaticResource VpnStatus}, Path=ActionButtonEnabled, Mode=OneWay}"/>
        </Grid>
        <Label Grid.Row="3" Grid.ColumnSpan="3" Grid.Column="0" FontStyle="Italic" Margin="0,5,0,0"
               HorizontalAlignment="Center"
               Content="{Binding Path=Message, Source={StaticResource VpnStatus}, Mode=OneWay}"/>
        <Grid Row="1" Column="2">
          <Grid.RowDefinitions>
            <RowDefinition/>
            <RowDefinition/>
            <RowDefinition/>
            <RowDefinition/>
            <RowDefinition/>
            <RowDefinition/>
          </Grid.RowDefinitions>
          <CheckBox Unchecked="CbSavePassword_Unchecked" Name="CbSavePassword" Grid.Row="0" HorizontalAlignment="Left"
                    VerticalAlignment="Center" Content="Save Password"
                    IsChecked="{Binding Source={StaticResource Settings}, Path=SavePassword, Mode=TwoWay}"/>
          <CheckBox Grid.Row="1" HorizontalAlignment="Left" VerticalAlignment="Center"
                    Content="Connect on System Startup"
                    IsEnabled="{Binding ElementName=CbSavePassword, Path=IsChecked, Mode=OneWay}"
                    IsChecked="{Binding Source={StaticResource Settings}, Path=ConnectOnSystemStartup, Mode=TwoWay}"/>
          <CheckBox Grid.Row="2" HorizontalAlignment="Left" VerticalAlignment="Center"
                    Content="Reconnect on connection loss"
                    IsEnabled="{Binding ElementName=CbSavePassword, Path=IsChecked, Mode=OneWay}"
                    IsChecked="{Binding Source={StaticResource Settings}, Path=ReconnectOnConnectionLoss, Mode=TwoWay}"/>
          <CheckBox Grid.Row="3" HorizontalAlignment="Left" VerticalAlignment="Center"
                    Content="Start GUI (in tray) on logon"
                    IsChecked="{Binding Source={StaticResource Settings}, Path=StartGuiOnLogon, Mode=TwoWay}"/>
          <CheckBox Grid.Row="4" HorizontalAlignment="Left" VerticalAlignment="Center" Content="Close to tray"
                    IsChecked="{Binding Source={StaticResource Settings}, Path=CloseToTray, Mode=TwoWay}"/>
          <Grid Row="5">
            <Grid.ColumnDefinitions>
              <ColumnDefinition Width="Auto"/>
              <ColumnDefinition Width="Auto"/>
              <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            <CheckBox Grid.Column="0" HorizontalAlignment="Left" VerticalAlignment="Center"
                      Content="Notify after 09:50 with msgbox"
                      IsChecked="{Binding Source={StaticResource Settings}, Path=NotifyAfterX, Mode=TwoWay}"/>
          </Grid>
        </Grid>
      </Grid>
    </Grid>
  </DockPanel>
</Window>