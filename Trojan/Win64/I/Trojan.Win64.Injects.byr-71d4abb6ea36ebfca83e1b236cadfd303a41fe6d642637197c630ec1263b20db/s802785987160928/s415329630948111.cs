// Decompiled with JetBrains decompiler
// Type: s802785987160928.s415329630948111
// Assembly: s802785987160928, Version=1.0.0.0, Culture=neutral, PublicKeyToken=8d3bb6c79cff225a
// MVID: E562BAAF-678F-45B2-A19A-CFBF160B1BAF
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.04\Trojan.Win64.Injects.byr-71d4abb6ea36ebfca83e1b236cadfd303a41fe6d642637197c630ec1263b20db.exe

using MySql.Data.MySqlClient;
using s846666779387925;
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Data.Common;
using System.Drawing;
using System.IO;
using System.Windows.Forms;

namespace s802785987160928
{
  public class s415329630948111 : Form
  {
    public static List<s258223356635522> s928192170255059 = new List<s258223356635522>();
    private MySqlConnection s738940319185150;
    private IContainer s565603255991196 = (IContainer) null;
    private Panel s491373775046144;
    private Button s185134927494502;
    private s304900391744180 s175897121541920;
    private s866957524928984 s364337090242369;

    public s415329630948111() => this.s840679523941629();

    private void s064328811273832(object s339945395501099, EventArgs s333208019654959)
    {
      if (this.s185134927494502.Text.Contains("Tambah"))
      {
        this.s185134927494502.Text = "Tampil Film";
        ((DbConnection) this.s738940319185150).Close();
        this.s364337090242369.s398508326152184((s806370984010767) 1);
      }
      else
      {
        this.s185134927494502.Text = "Tambah Film";
        this.s175897121541920.BringToFront();
        this.s025669029922997();
      }
    }

    private void s101330859077532(object s594005388587774, EventArgs s815162738458010) => this.s175897121541920.BringToFront();

    public void s817221161878466()
    {
      if (((DbConnection) this.s738940319185150).State == ConnectionState.Open)
      {
        ((DbConnection) this.s738940319185150).Close();
        ((DbConnection) this.s738940319185150).Open();
      }
      if (((DbConnection) this.s738940319185150).State == ConnectionState.Open)
        return;
      ((DbConnection) this.s738940319185150).Open();
    }

    public void s025669029922997()
    {
      this.s817221161878466();
      s415329630948111.s928192170255059.Clear();
      this.s175897121541920.s066136551425033.Controls.Clear();
      MySqlCommand mySqlCommand = new MySqlCommand();
      mySqlCommand.Connection = this.s738940319185150;
      ((DbCommand) mySqlCommand).CommandText = "SELECT id_film,judul,sinopsis,gambar FROM daftar_film";
      MySqlDataAdapter mySqlDataAdapter = new MySqlDataAdapter(mySqlCommand);
      DataTable dataTable = new DataTable();
      ((DbDataAdapter) mySqlDataAdapter).Fill(dataTable);
      for (int index = 0; index < dataTable.Rows.Count; ++index)
      {
        s258223356635522 s258223356635522 = new s258223356635522();
        s258223356635522.s391017595919685 = dataTable.Rows[index][0].ToString();
        s258223356635522.s452378806233956 = dataTable.Rows[index][1].ToString();
        s258223356635522.s161734551314709 = dataTable.Rows[index][2].ToString();
        MemoryStream memoryStream = new MemoryStream((byte[]) dataTable.Rows[index][3]);
        s258223356635522.s359052413464730 = Image.FromStream((Stream) memoryStream);
        s258223356635522.s655278634781442 = new Action<string>(this.s531871435057039);
        s258223356635522.s820531860866087 = new Action<string>(this.s701976668708165);
        s415329630948111.s928192170255059.Add(s258223356635522);
      }
      this.s175897121541920.s066136551425033.Controls.AddRange((Control[]) s415329630948111.s928192170255059.ToArray());
    }

    private void s789723504828780()
    {
      this.s364337090242369.s423044696079554 = new Action(this.s365268978998061);
      this.s364337090242369.s723996552614040 = new Action<string>(this.s543667214638867);
      this.s364337090242369.s740197016068005 = new Action(this.s547496824098256);
    }

    private void s942524033341379(object s478085771761249, EventArgs s212939198547269)
    {
      this.s738940319185150 = new MySqlConnection("Server=localhost;Database=bioskop_tixket_id;Uid=root;Pwd=;");
      try
      {
        this.s817221161878466();
        Console.WriteLine("Connection Berhasil dibuka!!!");
      }
      catch (MySqlException ex)
      {
        int num = (int) MessageBox.Show("Error: " + ((Exception) ex).Message);
      }
      this.s025669029922997();
      this.s789723504828780();
    }

    private void s547496824098256()
    {
      OpenFileDialog openFileDialog1 = new OpenFileDialog();
      openFileDialog1.Filter = "Choose Image(*.jpg; *.png)|*.jpg; *.png";
      OpenFileDialog openFileDialog2 = openFileDialog1;
      if (openFileDialog2.ShowDialog() != DialogResult.OK)
        return;
      this.s364337090242369.s877917307957219 = Image.FromFile(openFileDialog2.FileName);
    }

    private void s365268978998061()
    {
      this.s817221161878466();
      MySqlCommand mySqlCommand = new MySqlCommand();
      mySqlCommand.Connection = this.s738940319185150;
      ((DbCommand) mySqlCommand).CommandText = "INSERT INTO daftar_film (id_film,judul,sinopsis,gambar,nama_bioskop,lokasi,harga,jadwal_tayang,durasi_film_menit) values (@id_film,@judul,@sinopsis,@gambar,@nama_bioskop,@lokasi,@harga,@jadwal_tayang,@durasi_film_menit)";
      mySqlCommand.Parameters.AddWithValue("@id_film", (object) ((s211470961819288) this.s364337090242369).get_IdFilm());
      mySqlCommand.Parameters.AddWithValue("@judul", (object) this.s364337090242369.s990800795196354);
      mySqlCommand.Parameters.AddWithValue("@sinopsis", (object) this.s364337090242369.s707160492471190);
      MemoryStream memoryStream = new MemoryStream();
      this.s364337090242369.s877917307957219.Save((Stream) memoryStream, this.s364337090242369.s877917307957219.RawFormat);
      byte[] array = memoryStream.ToArray();
      mySqlCommand.Parameters.AddWithValue("@gambar", (object) array);
      mySqlCommand.Parameters.AddWithValue("@nama_bioskop", (object) this.s364337090242369.s138646769157279);
      mySqlCommand.Parameters.AddWithValue("@lokasi", (object) this.s364337090242369.s222462034774597);
      mySqlCommand.Parameters.AddWithValue("@harga", (object) this.s364337090242369.s281592660726502);
      mySqlCommand.Parameters.AddWithValue("@jadwal_tayang", (object) this.s364337090242369.s356678471303916);
      mySqlCommand.Parameters.AddWithValue("@durasi_film_menit", (object) this.s364337090242369.s954045003829736);
      try
      {
        int num1 = ((DbCommand) mySqlCommand).ExecuteNonQuery();
        if (num1 > 0)
        {
          int num2 = (int) MessageBox.Show("Data berhasil dimasukkan!!!");
          Console.WriteLine("{0} row/rows affected", (object) num1);
        }
        else
        {
          int num3 = (int) MessageBox.Show("Data tidak berhasil diinput, Try Again!!!");
        }
      }
      catch (MySqlException ex)
      {
        int num = (int) MessageBox.Show("Error Data tidak berhasil diInput\n" + ((Exception) ex).Message);
      }
      ((DbConnection) this.s738940319185150).Close();
    }

    private void s701976668708165(string s074149649111793)
    {
      try
      {
        this.s817221161878466();
        MySqlCommand mySqlCommand = new MySqlCommand();
        mySqlCommand.Connection = this.s738940319185150;
        ((DbCommand) mySqlCommand).CommandText = "DELETE FROM daftar_film WHERE id_film = @idFilm";
        mySqlCommand.Parameters.AddWithValue("@idFilm", (object) s074149649111793);
        int num = ((DbCommand) mySqlCommand).ExecuteNonQuery();
        ((DbConnection) this.s738940319185150).Close();
        if (num <= 0 || MessageBox.Show(string.Format("data dengan id {0} berhasil dihapus", (object) s074149649111793)) != DialogResult.OK)
          return;
        this.s025669029922997();
      }
      catch (MySqlException ex)
      {
        int num = (int) MessageBox.Show("Error: " + ((Exception) ex).Message);
      }
    }

    private void s531871435057039(string s732740939304279)
    {
      try
      {
        this.s817221161878466();
        this.s185134927494502.Text = "Tampil Film";
        this.s364337090242369.s398508326152184((s806370984010767) 0);
        MySqlCommand mySqlCommand = new MySqlCommand();
        mySqlCommand.Connection = this.s738940319185150;
        ((DbCommand) mySqlCommand).CommandText = "SELECT id_film,judul,sinopsis,gambar,nama_bioskop,lokasi,harga,jadwal_tayang,durasi_film_menit FROM daftar_film WHERE id_film = @idFilm";
        mySqlCommand.Parameters.AddWithValue("@idFilm", (object) s732740939304279);
        MySqlDataReader mySqlDataReader = mySqlCommand.ExecuteReader();
        if (!((DbDataReader) mySqlDataReader).Read())
          return;
        this.s364337090242369.s808378448190414 = ((DbDataReader) mySqlDataReader)["id_film"].ToString();
        this.s364337090242369.s990800795196354 = ((DbDataReader) mySqlDataReader)["judul"].ToString();
        this.s364337090242369.s707160492471190 = ((DbDataReader) mySqlDataReader)["sinopsis"].ToString();
        this.s364337090242369.s138646769157279 = ((DbDataReader) mySqlDataReader)["nama_bioskop"].ToString();
        this.s364337090242369.s222462034774597 = ((DbDataReader) mySqlDataReader)["lokasi"].ToString();
        this.s364337090242369.s281592660726502 = (int) ((DbDataReader) mySqlDataReader)["harga"];
        this.s364337090242369.s356678471303916 = (DateTime) ((DbDataReader) mySqlDataReader)["jadwal_tayang"];
        this.s364337090242369.s954045003829736 = (int) ((DbDataReader) mySqlDataReader)["durasi_film_menit"];
        this.s364337090242369.s877917307957219 = Image.FromStream((Stream) new MemoryStream((byte[]) ((DbDataReader) mySqlDataReader)["gambar"]));
      }
      catch (MySqlException ex)
      {
        int num = (int) MessageBox.Show("Error: " + ((Exception) ex).Message);
      }
    }

    private void s543667214638867(string s399551258391607)
    {
      this.s817221161878466();
      MySqlCommand mySqlCommand = new MySqlCommand("UPDATE daftar_film SET judul = @judul,sinopsis = @sinopsis,gambar = @gambar,nama_bioskop = @nama_bioskop,lokasi = @lokasi,harga = @harga,jadwal_tayang = @jadwal_tayang,durasi_film_menit = @durasi_film_menit WHERE id_film = @id_film", this.s738940319185150);
      mySqlCommand.Parameters.AddWithValue("@id_film", (object) s399551258391607);
      mySqlCommand.Parameters.AddWithValue("@judul", (object) this.s364337090242369.s990800795196354);
      mySqlCommand.Parameters.AddWithValue("@sinopsis", (object) this.s364337090242369.s707160492471190);
      MemoryStream memoryStream = new MemoryStream();
      this.s364337090242369.s877917307957219.Save((Stream) memoryStream, this.s364337090242369.s877917307957219.RawFormat);
      byte[] array = memoryStream.ToArray();
      mySqlCommand.Parameters.AddWithValue("@gambar", (object) array);
      mySqlCommand.Parameters.AddWithValue("@nama_bioskop", (object) this.s364337090242369.s138646769157279);
      mySqlCommand.Parameters.AddWithValue("@lokasi", (object) this.s364337090242369.s222462034774597);
      mySqlCommand.Parameters.AddWithValue("@harga", (object) this.s364337090242369.s281592660726502);
      mySqlCommand.Parameters.AddWithValue("@jadwal_tayang", (object) this.s364337090242369.s356678471303916);
      mySqlCommand.Parameters.AddWithValue("@durasi_film_menit", (object) this.s364337090242369.s954045003829736);
      try
      {
        int num1 = ((DbCommand) mySqlCommand).ExecuteNonQuery();
        if (num1 > 0)
        {
          int num2 = (int) MessageBox.Show("Data berhasil diperbaharui!!!");
          Console.WriteLine("{0} row/rows affected", (object) num1);
        }
        else
        {
          int num3 = (int) MessageBox.Show("Data tidak berhasil diperbaharui, Try Again!!!");
        }
      }
      catch (MySqlException ex)
      {
        int num = (int) MessageBox.Show("Error Data tidak berhasil diperbaharui\n" + ((Exception) ex).Message);
      }
      ((DbConnection) this.s738940319185150).Close();
    }

    protected override void Dispose(bool disposing)
    {
      if (disposing && this.s565603255991196 != null)
        this.s565603255991196.Dispose();
      base.Dispose(disposing);
    }

    private void s840679523941629()
    {
      this.s491373775046144 = new Panel();
      this.s364337090242369 = new s866957524928984();
      this.s175897121541920 = new s304900391744180();
      this.s185134927494502 = new Button();
      this.s491373775046144.SuspendLayout();
      this.SuspendLayout();
      this.s491373775046144.Controls.Add((Control) this.s364337090242369);
      this.s491373775046144.Controls.Add((Control) this.s175897121541920);
      this.s491373775046144.Location = new Point(12, 54);
      this.s491373775046144.Name = "panel1";
      this.s491373775046144.Size = new Size(1045, 476);
      this.s491373775046144.TabIndex = 2;
      this.s364337090242369.s740197016068005 = (Action) null;
      this.s364337090242369.s954045003829736 = 0;
      this.s364337090242369.s877917307957219 = (Image) null;
      this.s364337090242369.s281592660726502 = 1000;
      this.s364337090242369.s808378448190414 = (string) null;
      this.s364337090242369.s423044696079554 = (Action) null;
      this.s364337090242369.s356678471303916 = new DateTime(2019, 6, 19, 0, 0, 0, 0);
      this.s364337090242369.s990800795196354 = (string) null;
      this.s364337090242369.Location = new Point(0, 0);
      this.s364337090242369.s222462034774597 = (string) null;
      this.s364337090242369.s138646769157279 = (string) null;
      this.s364337090242369.Name = "tambahFilmControl1";
      this.s364337090242369.s707160492471190 = (string) null;
      this.s364337090242369.Size = new Size(1045, 476);
      this.s364337090242369.TabIndex = 1;
      this.s175897121541920.BorderStyle = BorderStyle.FixedSingle;
      this.s175897121541920.Location = new Point(0, 0);
      this.s175897121541920.Name = "daftarFilmControl1";
      this.s175897121541920.Size = new Size(1045, 476);
      this.s175897121541920.TabIndex = 0;
      this.s185134927494502.Location = new Point(926, 11);
      this.s185134927494502.Name = "tambahFilmButton";
      this.s185134927494502.Size = new Size(131, 37);
      this.s185134927494502.TabIndex = 3;
      this.s185134927494502.Text = "Tambah Film";
      this.s185134927494502.UseVisualStyleBackColor = true;
      this.s185134927494502.Click += new EventHandler(this.s064328811273832);
      this.AutoScaleDimensions = new SizeF(8f, 16f);
      this.AutoScaleMode = AutoScaleMode.Font;
      this.ClientSize = new Size(1072, 542);
      this.Controls.Add((Control) this.s185134927494502);
      this.Controls.Add((Control) this.s491373775046144);
      this.Name = nameof (s415329630948111);
      this.StartPosition = FormStartPosition.CenterScreen;
      this.Text = "Admin Tixket ID";
      this.Load += new EventHandler(this.s101330859077532);
      this.Shown += new EventHandler(this.s942524033341379);
      this.s491373775046144.ResumeLayout(false);
      this.ResumeLayout(false);
    }
  }
}
