// Decompiled with JetBrains decompiler
// Type: Quasar.Client.IpGeoLocation.GeoInformationFactory
// Assembly: Client, Version=1.4.0.0, Culture=neutral, PublicKeyToken=null
// MVID: 73C3C7FC-0EA2-48C4-8CEF-33A8CFDA287C
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.03\Trojan-PSW.MSIL.Agent.anew-0b84e664c8b592aa0220d52841629b2accb41f1f624720331000ab5f2f0ed628.exe

using System;

namespace Quasar.Client.IpGeoLocation
{
  public static class GeoInformationFactory
  {
    private static readonly GeoInformationRetriever Retriever = new GeoInformationRetriever();
    private static GeoInformation _geoInformation;
    private static DateTime _lastSuccessfulLocation = new DateTime(1, 1, 1, 0, 0, 0, DateTimeKind.Utc);
    private const int MINIMUM_VALID_TIME = 720;

    public static GeoInformation GetGeoInformation()
    {
      TimeSpan timeSpan = new TimeSpan(DateTime.UtcNow.Ticks - GeoInformationFactory._lastSuccessfulLocation.Ticks);
      if (GeoInformationFactory._geoInformation == null || timeSpan.TotalMinutes > 720.0)
      {
        GeoInformationFactory._geoInformation = GeoInformationFactory.Retriever.Retrieve();
        GeoInformationFactory._lastSuccessfulLocation = DateTime.UtcNow;
      }
      return GeoInformationFactory._geoInformation;
    }
  }
}
