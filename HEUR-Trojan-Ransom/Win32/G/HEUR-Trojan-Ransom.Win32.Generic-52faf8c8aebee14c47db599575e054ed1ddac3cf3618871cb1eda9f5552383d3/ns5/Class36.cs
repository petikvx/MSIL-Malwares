// Decompiled with JetBrains decompiler
// Type: ns5.Class36
// Assembly: TRM, Version=1.0.4536.20171, Culture=neutral, PublicKeyToken=null
// MVID: 5378125D-FDDB-423C-BA19-B4FB92E2596B
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.07\HEUR-Trojan-Ransom.Win32.Generic-52faf8c8aebee14c47db599575e054ed1ddac3cf3618871cb1eda9f5552383d3.exe

using ns0;
using ns1;
using ns2;
using ns4;
using ns7;
using System;
using System.Collections;
using System.Collections.Generic;
using System.ComponentModel;
using System.Runtime.CompilerServices;
using System.Runtime.InteropServices;

namespace ns5
{
  internal sealed class Class36 : IEnumerable<Class0>, IDisposable, IEnumerable
  {
    private IntPtr intptr_0 = IntPtr.Zero;
    private Dictionary<Class40, List<Class0>> dictionary_0;
    private List<Class40> list_0;

    [SpecialName]
    public Dictionary<Class40, List<Class0>> method_0() => this.dictionary_0;

    public void method_1()
    {
      if (!(this.intptr_0 != IntPtr.Zero))
        return;
      Class38.FreeLibrary(this.intptr_0);
      this.intptr_0 = IntPtr.Zero;
    }

    public void method_2(string string_0)
    {
      this.method_1();
      this.list_0 = new List<Class40>();
      this.dictionary_0 = new Dictionary<Class40, List<Class0>>();
      this.intptr_0 = Class38.LoadLibraryEx(string_0, IntPtr.Zero, 3U);
      if (IntPtr.Zero == this.intptr_0)
        throw new Win32Exception(Marshal.GetLastWin32Error());
      if (!Class38.EnumResourceTypesW(this.intptr_0, new Class38.Delegate2(this.method_3), IntPtr.Zero))
        throw new Win32Exception(Marshal.GetLastWin32Error());
    }

    private bool method_3(IntPtr intptr_1, IntPtr intptr_2, IntPtr intptr_3)
    {
      this.list_0.Add(new Class40(intptr_2));
      if (!Class38.EnumResourceNamesW(intptr_1, intptr_2, new Class38.Delegate3(this.method_4), IntPtr.Zero))
        throw new Win32Exception(Marshal.GetLastWin32Error());
      return true;
    }

    private bool method_4(IntPtr intptr_1, IntPtr intptr_2, IntPtr intptr_3, IntPtr intptr_4)
    {
      if (!Class38.EnumResourceLanguagesW(intptr_1, intptr_2, intptr_3, new Class38.Delegate4(this.method_6), IntPtr.Zero))
        throw new Win32Exception(Marshal.GetLastWin32Error());
      return true;
    }

    protected Class0 method_5(
      IntPtr intptr_1,
      IntPtr intptr_2,
      Class40 class40_0,
      Class40 class40_1,
      ushort ushort_0,
      int int_0)
    {
      if (class40_0.method_3())
      {
        switch (class40_0.method_2())
        {
          case Class38.Enum6.const_5:
            return (Class0) new Class2(intptr_1, intptr_2, class40_0, class40_1, ushort_0, int_0);
          case Class38.Enum6.const_12:
            return (Class0) new Class6(intptr_1, intptr_2, class40_0, class40_1, ushort_0, int_0);
          case Class38.Enum6.const_13:
            return (Class0) new Class1(intptr_1, intptr_2, class40_0, class40_1, ushort_0, int_0);
        }
      }
      return (Class0) new Class7(intptr_1, intptr_2, class40_0, class40_1, ushort_0, int_0);
    }

    private bool method_6(
      IntPtr intptr_1,
      IntPtr intptr_2,
      IntPtr intptr_3,
      ushort ushort_0,
      IntPtr intptr_4)
    {
      List<Class0> class0List = (List<Class0>) null;
      Class40 class40 = new Class40(intptr_2);
      if (!this.dictionary_0.TryGetValue(class40, out class0List))
      {
        class0List = new List<Class0>();
        this.dictionary_0[class40] = class0List;
      }
      Class40 class40_1 = new Class40(intptr_3);
      IntPtr resourceExW = Class38.FindResourceExW(intptr_1, intptr_2, intptr_3, ushort_0);
      IntPtr intptr_2_1 = Class38.LoadResource(intptr_1, resourceExW);
      int int_0 = Class38.SizeofResource(intptr_1, resourceExW);
      class0List.Add(this.method_5(intptr_1, intptr_2_1, class40, class40_1, ushort_0, int_0));
      return true;
    }

    void IDisposable.Dispose() => this.method_1();

    public List<Class0> this[Class38.Enum6 enum6_0]
    {
      get => this.dictionary_0[new Class40(enum6_0)];
      set => this.dictionary_0[new Class40(enum6_0)] = value;
    }

    public List<Class0> this[string string_0]
    {
      get => this.dictionary_0[new Class40(string_0)];
      set => this.dictionary_0[new Class40(string_0)] = value;
    }

    public IEnumerator<Class0> System\u002ECollections\u002EGeneric\u002EIEnumerable\u003Cns0\u002EClass0\u003E\u002EGetEnumerator()
    {
      Dictionary<Class40, List<Class0>>.Enumerator enumerator1 = this.dictionary_0.GetEnumerator();
      while (enumerator1.MoveNext())
      {
        List<Class0>.Enumerator enumerator2 = enumerator1.Current.Value.GetEnumerator();
        while (enumerator2.MoveNext())
          yield return enumerator2.Current;
      }
    }

    IEnumerator IEnumerable.GetEnumerator() => (IEnumerator) this.System\u002ECollections\u002EGeneric\u002EIEnumerable\u003Cns0\u002EClass0\u003E\u002EGetEnumerator();
  }
}
