// Decompiled with JetBrains decompiler
// Type: System.ServiceModel.Web.AspNetCacheProfileAttribute
// Assembly: Microsoft.Transactions.Bridge, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: 51116F84-6FE2-4BD6-A908-2C88E06F45BB
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.07\HEUR-Trojan.MSIL.Picsys.gen-d64123468b2dcb11e9205288e0a6cb144a448944457a708807b7345a8a766675.exe

using System.Runtime.InteropServices;
using System.ServiceModel.Activation;
using System.ServiceModel.Channels;
using System.ServiceModel.Description;
using System.ServiceModel.Dispatcher;

namespace System.ServiceModel.Web
{
  [AttributeUsage(AttributeTargets.Method)]
  [ComVisible(false)]
  public sealed class AspNetCacheProfileAttribute : Attribute, IOperationBehavior
  {
    private string cacheProfileName;

    public AspNetCacheProfileAttribute(string cacheProfileName) => this.cacheProfileName = cacheProfileName;

    public string CacheProfileName => this.cacheProfileName;

    public void AddBindingParameters(
      OperationDescription operationDescription,
      BindingParameterCollection bindingParameters)
    {
    }

    public void ApplyClientBehavior(
      OperationDescription operationDescription,
      ClientOperation clientOperation)
    {
    }

    public void ApplyDispatchBehavior(
      OperationDescription operationDescription,
      DispatchOperation dispatchOperation)
    {
      if (!AspNetEnvironment.Current.AspNetCompatibilityEnabled)
        throw DiagnosticUtility.ExceptionUtility.ThrowHelperError((Exception) new NotSupportedException(SR2.CacheProfileOnlySupportedInAspNetCompatibilityMode));
      if (operationDescription.Behaviors.Find<WebGetAttribute>() == null)
        throw DiagnosticUtility.ExceptionUtility.ThrowHelperError((Exception) new InvalidOperationException(SR2.CacheProfileAttributeOnlyWithGet));
      dispatchOperation.ParameterInspectors.Add((IParameterInspector) new CachingParameterInspector(this.cacheProfileName));
    }

    public void Validate(OperationDescription operationDescription)
    {
    }
  }
}
