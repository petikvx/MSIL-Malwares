// Decompiled with JetBrains decompiler
// Type: 06SHG3HN5mSWG62Xz.gDq1vIDk8VrN1jgDE
// Assembly: bouNMGxVgGi4SRgWO, Version=3.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60
// MVID: 3F6A2AF1-3CCB-4F01-AA36-FA31C2E4CFE8
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.03\HEUR-Backdoor.MSIL.Agent.gen-bc408b9f362db28b2e931ff336ec5661cc0ce27b0cdc0ce215fec1b7381aca7f.exe

using \u00318z60kDzt4MVopVwC;
using \u0033eVYd5LIQhZ7rzGZ2;
using fcxTd0CgJgB8stQvj;
using GUxwlAGXtz8Biqdzq;
using jlhFNVXvwEp5FRUh5;
using Microsoft.TemplateEngine.Abstractions;
using Microsoft.TemplateEngine.Core.Contracts;
using Newtonsoft.Json.Linq;
using PgLEPpSpDk54KWT6E;
using System;
using System.Collections.Generic;

namespace \u00306SHG3HN5mSWG62Xz
{
  public class gDq1vIDk8VrN1jgDE : IMacro, IIdentifiedComponent, IDeferredMacro
  {
    public string \u0038pt5A6jEkCp67F69t => "coalesce";

    public Guid CNoOL4cOSpMCjDEK5 => new Guid("11C6EACF-8D24-42FD-8FC6-84063FCD8F14");

    public IMacroConfig s0a0XOu7wGgHQveca(
      IEngineEnvironmentSettings _param1,
      IMacroConfig slvUGatn0d2kbZpgQ)
    {
      if (!(slvUGatn0d2kbZpgQ is KZUSKKOdswxWjB6He kzuskkOdswxWjB6He))
        throw new InvalidCastException("Couldn't cast the rawConfig as a GeneratedSymbolDeferredMacroConfig");
      string sourceVariableName = (string) null;
      JToken jtoken1;
      if (kzuskkOdswxWjB6He.dYZjsKaakeS43shkR.TryGetValue("sourceVariableName", out jtoken1) && jtoken1.Type == 8)
        sourceVariableName = ((object) jtoken1).ToString();
      string defaultValue = (string) null;
      JToken jtoken2;
      if (kzuskkOdswxWjB6He.dYZjsKaakeS43shkR.TryGetValue("defaultValue", out jtoken2) && jtoken2.Type == 8)
        defaultValue = ((object) jtoken2).ToString();
      string fallbackVariableName = (string) null;
      JToken jtoken3;
      if (kzuskkOdswxWjB6He.dYZjsKaakeS43shkR.TryGetValue("fallbackVariableName", out jtoken3) && jtoken3.Type == 8)
        fallbackVariableName = ((object) jtoken3).ToString();
      return (IMacroConfig) new CxudqPeosUw4LX9yh(kzuskkOdswxWjB6He.\u0036gh4E6uhQGL10SKFe, kzuskkOdswxWjB6He.xbfbgFpF57ZJB3TfG, sourceVariableName, defaultValue, fallbackVariableName);
    }

    public void lpjuaDFoJD6gsRiuA(
      IEngineEnvironmentSettings k1Om5ALHPDKivshEK,
      IVariableCollection wqWyuyrboxcJ3ui7d,
      IMacroConfig WqJbjiPdZ3M4JTy1z,
      IParameterSet NoupOcb5DFkL6Tq5F,
      eudKo284TuJqIEahM hCT4ZuYNvYCz9hfzv)
    {
      if (!(WqJbjiPdZ3M4JTy1z is CxudqPeosUw4LX9yh cxudqPeosUw4Lx9yh))
        throw new InvalidCastException("Unable to cast config as a gDq1vIDk8VrN1jgDEConfig");
      object obj1 = (object) null;
      string str = cxudqPeosUw4Lx9yh.UW9W1V80JT7wk1nsE;
      object obj2;
      if (((IDictionary<string, object>) wqWyuyrboxcJ3ui7d).TryGetValue(cxudqPeosUw4Lx9yh.A8dZjHPLFMsJkoQN5, out obj2) && !object.Equals(obj2 ?? (object) string.Empty, (object) (cxudqPeosUw4Lx9yh.ZZpzkJ9YNqa02MRtd ?? string.Empty)))
      {
        obj1 = obj2;
        ITemplateParameter itemplateParameter;
        if (NoupOcb5DFkL6Tq5F.TryGetParameterDefinition(cxudqPeosUw4Lx9yh.A8dZjHPLFMsJkoQN5, ref itemplateParameter))
          str = itemplateParameter.DataType;
      }
      else if (!((IDictionary<string, object>) wqWyuyrboxcJ3ui7d).TryGetValue(cxudqPeosUw4Lx9yh.\u0034VVAegRB27iiudL68, out obj1))
      {
        k1Om5ALHPDKivshEK.Host.LogDiagnosticMessage("Unable to find a variable to fall back to called " + cxudqPeosUw4Lx9yh.\u0034VVAegRB27iiudL68, "Authoring", new string[2]
        {
          cxudqPeosUw4Lx9yh.A8dZjHPLFMsJkoQN5,
          cxudqPeosUw4Lx9yh.ZZpzkJ9YNqa02MRtd
        });
        obj1 = (object) cxudqPeosUw4Lx9yh.ZZpzkJ9YNqa02MRtd;
      }
      else
      {
        ITemplateParameter itemplateParameter;
        if (NoupOcb5DFkL6Tq5F.TryGetParameterDefinition(cxudqPeosUw4Lx9yh.\u0034VVAegRB27iiudL68, ref itemplateParameter))
          str = itemplateParameter.DataType;
      }
      ITemplateParameter itemplateParameter1;
      ckgfOYwQVcmI3lHXN parameter;
      if (NoupOcb5DFkL6Tq5F.TryGetParameterDefinition(WqJbjiPdZ3M4JTy1z.VariableName, ref itemplateParameter1))
      {
        parameter = (ckgfOYwQVcmI3lHXN) itemplateParameter1;
        parameter.Cg57rESMJLQIVeHLw = true;
        if (string.IsNullOrEmpty(parameter.\u0038DBEv3DWcN5nNg1o1))
          parameter.\u0038DBEv3DWcN5nNg1o1 = str;
      }
      else
        parameter = new ckgfOYwQVcmI3lHXN()
        {
          Cg57rESMJLQIVeHLw = true,
          RWvAX7XIWjB7LsE1n = WqJbjiPdZ3M4JTy1z.VariableName,
          \u0038DBEv3DWcN5nNg1o1 = str
        };
      ((IDictionary<string, object>) wqWyuyrboxcJ3ui7d)[WqJbjiPdZ3M4JTy1z.VariableName] = (object) obj1?.ToString();
      hCT4ZuYNvYCz9hfzv((ITemplateParameter) parameter, obj1?.ToString());
    }
  }
}
