// Decompiled with JetBrains decompiler
// Type: SmartAssembly.SmartExceptionsWithUI.SecurityExceptionForm
// Assembly: o4tdggb3, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: FA0844EB-EF82-404C-B76C-C092ABDB9392
// Assembly location: C:\Users\Administrateur\Downloads\Virusshare.00090-msil\Trojan-Ransom.Win32.Blocker.bzqq-b74e3dc76fae79b75c26f27ecb85aae1eae4082a42bfa080f7805f32dedc9d67.exe

using SmartAssembly.SmartExceptionsCore;
using SmartAssembly.SmartExceptionsCore.UI;
using System;
using System.ComponentModel;
using System.Drawing;
using System.Text;
using System.Windows.Forms;

namespace SmartAssembly.SmartExceptionsWithUI
{
  [DesignerCategory("Code")]
  internal class SecurityExceptionForm : Form
  {
    private const string ApplicationName = "{1fe9e38e-05cc-46a3-ae48-6cda8fb62056}";
    private SecurityExceptionEventArgs1 securityExceptionEventArgs = (SecurityExceptionEventArgs1) null;
    private PoweredBy1 powered = new PoweredBy1();
    private Button continueButton = new Button();
    private Button quitButton = new Button();
    private HeaderControl1 headerControl = new HeaderControl1(string.Format("{0} attempted to perform an operation not allowed by the security policy.", (object) "server2"));
    private AutoHeightLabel1 errorMessage = new AutoHeightLabel1();

    private void InitializeComponent()
    {
      this.SuspendLayout();
      this.quitButton.Anchor = AnchorStyles.Bottom | AnchorStyles.Right;
      this.quitButton.FlatStyle = FlatStyle.System;
      this.quitButton.Size = new Size(100, 24);
      this.quitButton.Location = new Point(408 - this.quitButton.Width, 188);
      this.quitButton.TabIndex = 0;
      this.quitButton.Text = "&Quit";
      this.quitButton.Click += new EventHandler(this.OnQuitClick);
      this.continueButton.Anchor = AnchorStyles.Bottom | AnchorStyles.Right;
      this.continueButton.FlatStyle = FlatStyle.System;
      this.continueButton.Size = new Size(100, 24);
      this.continueButton.Location = new Point(this.quitButton.Left - this.continueButton.Width - 6, 188);
      this.continueButton.TabIndex = 1;
      this.continueButton.Text = "&Continue";
      this.continueButton.Click += new EventHandler(this.OnContinueClick);
      this.powered.Anchor = AnchorStyles.Bottom | AnchorStyles.Left;
      this.powered.SetBounds(6, 186, 120, 32);
      this.headerControl.IconState = IconState1.Warning;
      this.errorMessage.Anchor = AnchorStyles.Top | AnchorStyles.Left | AnchorStyles.Right;
      this.errorMessage.Location = new Point(20, 72);
      this.errorMessage.Size = new Size(382, 13);
      this.AutoScaleBaseSize = new Size(5, 13);
      this.ClientSize = new Size(418, 224);
      this.ControlBox = false;
      this.Controls.AddRange(new Control[5]
      {
        (Control) this.powered,
        (Control) this.continueButton,
        (Control) this.quitButton,
        (Control) this.headerControl,
        (Control) this.errorMessage
      });
      this.FormBorderStyle = FormBorderStyle.FixedSingle;
      this.MaximizeBox = false;
      this.MinimizeBox = false;
      this.ShowInTaskbar = false;
      this.StartPosition = FormStartPosition.CenterScreen;
      this.ResumeLayout(false);
    }

    private void OnContinueClick(object sender, EventArgs e)
    {
      this.securityExceptionEventArgs.TryToContinue = true;
      this.Close();
    }

    private void OnQuitClick(object sender, EventArgs e)
    {
      this.securityExceptionEventArgs.TryToContinue = false;
      this.Close();
    }

    public SecurityExceptionForm(
      SecurityExceptionEventArgs1 securityExceptionEventArgs)
    {
      this.InitializeComponent();
      this.Icon = Win321.GetApplicationIcon();
      this.Text = "server2";
      if (this.Text.Length == 0)
        this.Text = "Security error";
      this.securityExceptionEventArgs = securityExceptionEventArgs;
      if (!securityExceptionEventArgs.CanContinue)
        this.continueButton.Visible = false;
      if (securityExceptionEventArgs.SecurityMessage.Length > 0)
      {
        this.errorMessage.Text = securityExceptionEventArgs.SecurityMessage;
      }
      else
      {
        StringBuilder stringBuilder = new StringBuilder();
        stringBuilder.Append(string.Format("{0} attempted to perform an operation not allowed by the security policy. To grant this application the required permission, contact your system administrator, or use the Microsoft .NET Framework Configuration tool.\n\n", (object) "server2"));
        if (securityExceptionEventArgs.CanContinue)
          stringBuilder.Append("If you click Continue, the application will ignore this error and attempt to continue. If you click Quit, the application will close immediately.\n\n");
        stringBuilder.Append(securityExceptionEventArgs.SecurityException.Message);
        this.errorMessage.Text = stringBuilder.ToString();
      }
      int height = this.errorMessage.Bottom + 60;
      if (height <= this.ClientSize.Height)
        return;
      this.ClientSize = new Size(this.ClientSize.Width, height);
    }
  }
}
