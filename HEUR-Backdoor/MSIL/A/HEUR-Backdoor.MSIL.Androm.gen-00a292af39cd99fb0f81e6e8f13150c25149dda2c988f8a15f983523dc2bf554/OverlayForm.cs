// Decompiled with JetBrains decompiler
// Type: MaterialSurface.OverlayForm
// Assembly: PropagationFl, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: 45597167-9313-4C0B-891A-DAD42EC632D8
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.07\HEUR-Backdoor.MSIL.Androm.gen-00a292af39cd99fb0f81e6e8f13150c25149dda2c988f8a15f983523dc2bf554.exe

using System;
using System.Drawing;
using System.Windows.Forms;

namespace MaterialSurface
{
  internal class OverlayForm : Form
  {
    private OverlayForm()
    {
    }

    public OverlayForm(Form parent, Form child, float opacity = 0.65f, int offSet = 5, bool blackOut = true)
    {
      OverlayForm overlayForm = this;
      this.DoubleBuffered = true;
      this.ControlBox = false;
      this.StartPosition = FormStartPosition.Manual;
      this.FormBorderStyle = FormBorderStyle.None;
      this.AllowTransparency = true;
      this.ShowInTaskbar = false;
      this.Opacity = (double) opacity;
      if (blackOut)
      {
        this.BackColor = Color.Black;
      }
      else
      {
        this.BackColor = Color.White;
        this.Opacity = 0.10000000149011612;
      }
      this.Size = parent.Size;
      this.Location = parent.Location;
      if (parent.FormBorderStyle != 0)
      {
        this.Location = new Point(this.Location.X + 7, this.Location.Y);
        this.Width -= 14;
        this.Height -= 7;
      }
      this.Enabled = false;
      this.Owner = parent;
      this.Activated += (EventHandler) ((s, e) => child.Activate());
      child.StartPosition = FormStartPosition.Manual;
      child.Owner = parent;
      child.ShowInTaskbar = false;
      child.Location = new Point(this.Location.X + this.Width / 2 - child.Width / 2, this.Location.Y + this.Height / 2 - child.Height / 2 - offSet);
      child.FormClosed += (FormClosedEventHandler) ((s, e) =>
      {
        overlayForm.Close();
        parent.Activate();
      });
      this.Show();
    }
  }
}
