// Decompiled with JetBrains decompiler
// Type: Cradiator.Model.BuildBusterFullNameDecorator
// Assembly: EvidenceTypeDescript, Version=2.1.0.0, Culture=neutral, PublicKeyToken=null
// MVID: B50F5F07-D63E-4094-B80D-E78774C87D41
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.02-msil\HEUR-Trojan.MSIL.Crypt.gen-c59c8e3be7ec42553ff6af2588e3bcd0569e9467dbb9307218fb8724e02739f2.exe

using Cradiator.Config;
using System.Collections.Generic;

namespace Cradiator.Model
{
  public class BuildBusterFullNameDecorator : IBuildBuster, IConfigObserver
  {
    private readonly IBuildBuster _buildBuster;
    private IDictionary<string, string> _usernameMap;

    public BuildBusterFullNameDecorator([InjectBuildBuster] IBuildBuster buildBuster, IConfigSettings configSettings)
    {
      this._buildBuster = buildBuster;
      this._usernameMap = configSettings.UsernameMap;
      configSettings.AddObserver((IConfigObserver) this);
    }

    public string FindBreaker(string sentence)
    {
      string key = this._buildBuster.FindBreaker(sentence);
      if (this._usernameMap.ContainsKey(key))
        key = this._usernameMap[key];
      return key;
    }

    public void ConfigUpdated(ConfigSettings newSettings) => this._usernameMap = newSettings.UsernameMap;
  }
}
