// Decompiled with JetBrains decompiler
// Type: 9ai6642097984904i.u635245a5i9io965i
// Assembly: e52a71747iaa0aa11, Version=2.1.0.0, Culture=neutral, PublicKeyToken=cac503e1823ce71c
// MVID: 0D894068-CF68-44D1-88F9-023D8A694267
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.06\HEUR-Trojan.MSIL.Crypt.gen-32d8b52e3461f3cf3cd3f6811df29ca82987bb597ad104f4ff2e7064dbd625ad.exe

using \u00396u54o009o2511uie;
using \u0039ai6642097984904i;
using ao0474769aa563834;
using Microsoft;
using Microsoft.VisualStudio.Threading;
using System;
using System.Buffers;
using System.Collections.Generic;
using System.IO;
using System.IO.Pipelines;
using System.Runtime.CompilerServices;
using System.Threading;
using System.Threading.Tasks;

namespace \u0039ai6642097984904i
{
  internal class u635245a5i9io965i : PipeReader
  {
    private readonly object \u00377590o8oi1a451u38;
    private readonly Stream \u00344aui8091i29u3691;
    private readonly int \u00360oeuo6e7148i0ea2;
    private readonly \u00383o1ao6a3o902a986<byte> \u00350772o26i5484i070;
    private SequencePosition u6ai3i27ea59iu347;
    private CancellationTokenSource \u0032au46i7au5oe43aa8;
    private bool \u0038ee8a1594oi89u255;
    private Exception \u0033uaa0911eo34037u6;
    private bool \u003639uu6370o208oua9;
    private Exception o8147o652o6e988ee;
    private List<(Action<Exception, object>, object)> \u00336o49a60uua07901i;

    public virtual void \u0032oeoeu99oui283350(SequencePosition i44ua40i26eioi4i6) => this.AdvanceTo(i44ua40i26eioi4i6, i44ua40i26eioi4i6);

    public virtual void \u003875auo03305ia5aii(
      SequencePosition eeiu6ou67823o47ai,
      SequencePosition _param2)
    {
      lock (this.\u00377590o8oi1a451u38)
      {
        this.\u00350772o26i5484i070.AdvanceTo(eeiu6ou67823o47ai);
        this.u6ai3i27ea59iu347 = _param2;
      }
    }

    public virtual void e5e78u2725i5i3428() => this.\u0032au46i7au5oe43aa8?.Cancel();

    public virtual void e1e08454oee1e2598(Exception _param1 = null)
    {
      lock (this.\u00377590o8oi1a451u38)
      {
        this.\u0038ee8a1594oi89u255 = true;
        this.\u0033uaa0911eo34037u6 = _param1;
        this.\u00350772o26i5484i070.Reset();
      }
    }

    public virtual void \u003127293534e092o86u(Action<Exception, object> _param1, object _param2)
    {
      bool flag;
      lock (this.\u00377590o8oi1a451u38)
      {
        if (this.\u003639uu6370o208oua9)
        {
          flag = true;
        }
        else
        {
          flag = false;
          if (this.\u00336o49a60uua07901i == null)
            this.\u00336o49a60uua07901i = new List<(Action<Exception, object>, object)>();
          this.\u00336o49a60uua07901i.Add((_param1, _param2));
        }
      }
      if (!flag)
        return;
      _param1(this.o8147o652o6e988ee, _param2);
    }

    public virtual ValueTask<ReadResult> uaooi34ou803u5o53(
      CancellationToken _param1 = default (CancellationToken))
    {
      // ISSUE: variable of a compiler-generated type
      u635245a5i9io965i.\u0036i96ii44646o88708 obj;
      // ISSUE: reference to a compiler-generated field
      obj.i5831oe3eie90a64o = this;
      // ISSUE: reference to a compiler-generated field
      obj.\u00335e93iu8e2o0657o4 = _param1;
      // ISSUE: reference to a compiler-generated field
      obj.o78o4o39uoe609617 = AsyncValueTaskMethodBuilder<ReadResult>.Create();
      // ISSUE: reference to a compiler-generated field
      obj.e51365a88i2i03055 = -1;
      // ISSUE: reference to a compiler-generated field
      obj.o78o4o39uoe609617.Start<u635245a5i9io965i.\u0036i96ii44646o88708>(ref obj);
      // ISSUE: reference to a compiler-generated field
      return obj.o78o4o39uoe609617.Task;
    }

    public virtual bool oeo644i2746eo7i60(out ReadResult a3i9e94267981i059)
    {
      lock (this.\u00377590o8oi1a451u38)
      {
        Verify.Operation(!this.\u0038ee8a1594oi89u255, "Reading is already completed.");
        ReadOnlySequence<byte> readOnlySequence = this.\u00350772o26i5484i070.\u00375ioi381887e70e48;
        if (readOnlySequence.Length > 0L)
        {
          readOnlySequence = this.\u00350772o26i5484i070.\u00375ioi381887e70e48;
          SequencePosition end = readOnlySequence.End;
          if (!((SequencePosition) ref end).Equals(this.u6ai3i27ea59iu347))
          {
            a3i9e94267981i059 = new ReadResult((ReadOnlySequence<byte>) this.\u00350772o26i5484i070, false, this.\u003639uu6370o208oua9);
            return true;
          }
        }
        a3i9e94267981i059 = new ReadResult();
        return false;
      }
    }

    private void \u0035a170u94513iioaoa(Exception i97i541oi0a542aua = null)
    {
      List<(Action<Exception, object>, object)> valueTupleList = (List<(Action<Exception, object>, object)>) null;
      lock (this.\u00377590o8oi1a451u38)
      {
        if (!this.\u003639uu6370o208oua9)
        {
          this.\u003639uu6370o208oua9 = true;
          this.o8147o652o6e988ee = i97i541oi0a542aua;
          valueTupleList = this.\u00336o49a60uua07901i;
          this.\u00336o49a60uua07901i = (List<(Action<Exception, object>, object)>) null;
        }
      }
      if (valueTupleList == null)
        return;
      foreach ((Action<Exception, object>, object) valueTuple in valueTupleList)
      {
        try
        {
          valueTuple.Item1(i97i541oi0a542aua, valueTuple.Item2);
        }
        catch
        {
        }
      }
    }

    internal u635245a5i9io965i(Stream stream)
    {
      ((i1a063i8u85i4607e) this).i0iaiau824oe6374o = new object();
      ((i1a063i8u85i4607e) this).\u00318i3a2a52381o6598 = new \u00383o1ao6a3o902a986<byte>();
      ((i1a063i8u85i4607e) this).\u0030766196i4u85a666i = new AsyncSemaphore(1);
      // ISSUE: explicit constructor call
      ((PipeWriter) this).\u002Ector();
      Requires.NotNull<Stream>(stream, nameof (stream));
      Requires.Argument(stream.CanWrite, nameof (stream), "Stream must be writable.");
      ((i1a063i8u85i4607e) this).\u00340870ua47522582i7 = stream;
    }
  }
}
