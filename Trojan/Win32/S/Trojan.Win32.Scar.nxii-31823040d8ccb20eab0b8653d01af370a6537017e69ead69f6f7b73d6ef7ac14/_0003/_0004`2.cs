// Decompiled with JetBrains decompiler
// Type: .
// Assembly: BitGenerator, Version=37.0.2.5583, Culture=neutral, PublicKeyToken=70e4c26ef2031892
// MVID: D3922F89-E00A-4D10-8BC9-9309D5539F14
// Assembly location: C:\Users\Administrateur\Downloads\VirusShare_CryptoRansom_20160715-msil\Trojan.Win32.Scar.nxii-31823040d8ccb20eab0b8653d01af370a6537017e69ead69f6f7b73d6ef7ac14.exe

using \u0012;
using System;
using System.Collections.Generic;
using System.Runtime.InteropServices;
using System.Threading;

namespace \u0003
{
  internal sealed class \u0004<\u0001, \u0002>
  {
    private readonly object \u0001 = new object();
    private Dictionary<\u0001, \u0002> \u0001;
    private readonly Func<\u0001, \u0002> \u0001;

    public \u0004([In] Func<\u0001, \u0002> obj0)
    {
      this.\u0001 = obj0 != null ? (object) obj0 : throw new ArgumentNullException(\u001C.\u0001(4053));
      this.\u0001 = (object) new Dictionary<\u0001, \u0002>();
    }

    public \u0002 \u0001([In] \u0001 obj0)
    {
      \u0002 obj;
      return !((Dictionary<\u0001, \u0002>) this.\u0001).TryGetValue(obj0, out obj) ? this.\u0002(obj0) : obj;
    }

    private \u0002 \u0002([In] \u0001 obj0)
    {
      \u0002 obj1 = ((Func<\u0001, \u0002>) this.\u0001)(obj0);
      \u0002 obj2;
      if (true)
        obj2 = obj1;
      object obj3 = this.\u0001;
      object obj4 = obj3;
      if (true)
        goto label_11;
label_1:
      try
      {
        if (this.\u0001 == null)
        {
          this.\u0001 = (object) new Dictionary<\u0001, \u0002>();
          ((Dictionary<\u0001, \u0002>) this.\u0001)[obj0] = obj2;
        }
        else
        {
          \u0002 obj5;
          while (!((Dictionary<\u0001, \u0002>) this.\u0001).TryGetValue(obj0, out obj5))
          {
            Dictionary<\u0001, \u0002> dictionary = new Dictionary<\u0001, \u0002>((IDictionary<\u0001, \u0002>) this.\u0001);
            dictionary[obj0] = obj2;
            if (true)
            {
              Thread.MemoryBarrier();
              this.\u0001 = (object) dictionary;
              goto label_7;
            }
          }
          return obj5;
        }
label_7:
        return obj2;
      }
      finally
      {
        Monitor.Exit(obj3);
      }
label_11:
      Monitor.Enter(obj4);
      goto label_1;
    }
  }
}
