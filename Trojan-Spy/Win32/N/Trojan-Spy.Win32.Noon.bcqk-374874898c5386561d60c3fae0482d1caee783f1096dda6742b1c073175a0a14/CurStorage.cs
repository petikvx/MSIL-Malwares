// Decompiled with JetBrains decompiler
// Type: mmxAH.CurStorage
// Assembly: IAsyncLocalValue, Version=1.0.2.2, Culture=neutral, PublicKeyToken=null
// MVID: 5C4F3FBF-C751-4B18-BBEA-B1DDBC6F76B9
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.03\Trojan-Spy.Win32.Noon.bcqk-374874898c5386561d60c3fae0482d1caee783f1096dda6742b1c073175a0a14.exe

using System.Collections.Generic;

namespace mmxAH
{
  public class CurStorage
  {
    private GameEngine en;
    public MonsterIndivid curFight = (MonsterIndivid) null;
    public MythosEnv curEnv = (MythosEnv) null;
    public MythosRumor curRumor = (MythosRumor) null;
    public MythosCard resolvingMythos = (MythosCard) null;
    public List<OWEncCard> resolvingOW;
    public List<ArcEncCard> resolvingArch;

    public CurStorage(GameEngine eng)
    {
      this.en = eng;
      this.resolvingOW = new List<OWEncCard>();
      this.resolvingArch = new List<ArcEncCard>();
    }

    public void Reset()
    {
      if (this.curFight != null)
        this.en.MonstersCup.Add(this.curFight);
      this.curFight = (MonsterIndivid) null;
      if (this.resolvingMythos != null)
        this.en.mythosDeck.Add(this.resolvingMythos);
      this.resolvingMythos = (MythosCard) null;
      if (this.curEnv != null)
      {
        this.curEnv.Stop();
        this.en.mythosDeck.Add((MythosCard) this.curEnv);
      }
      this.curEnv = (MythosEnv) null;
      if (this.curRumor != null)
      {
        this.curRumor.Reset();
        this.en.mythosDeck.Add((MythosCard) this.curRumor);
      }
      this.curRumor = (MythosRumor) null;
      this.DiscardEncounters();
    }

    public void DiscardEncounters()
    {
      foreach (OWEncCard c in this.resolvingOW)
        this.en.owEnc.Discard(c);
      foreach (ArcEncCard arcEncCard in this.resolvingArch)
        arcEncCard.Discard();
      this.resolvingOW.Clear();
      this.resolvingArch.Clear();
    }
  }
}
