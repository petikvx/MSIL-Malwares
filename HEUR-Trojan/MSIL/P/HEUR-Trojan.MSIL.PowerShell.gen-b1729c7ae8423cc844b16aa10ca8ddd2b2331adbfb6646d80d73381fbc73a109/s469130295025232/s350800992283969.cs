// Decompiled with JetBrains decompiler
// Type: s469130295025232.s350800992283969
// Assembly: s968508024776124, Version=2.0.47.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
// MVID: E3596912-35E7-405B-A05A-F5F12AB5E292
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.04\HEUR-Trojan.MSIL.PowerShell.gen-b1729c7ae8423cc844b16aa10ca8ddd2b2331adbfb6646d80d73381fbc73a109.exe

using s077414222832753;
using s356530178478151;
using s651029396580935;
using s719272214711671;
using s928707304529159;
using System;
using System.Collections.Generic;
using System.Globalization;
using System.IO;
using System.Linq;
using System.Runtime.CompilerServices;

namespace s469130295025232
{
  public static class s350800992283969
  {
    public static void s704032007787312(s293547439506271 s927756625543274, string s888171540195302)
    {
      if (File.Exists(s888171540195302))
        File.Delete(s888171540195302);
      using (StreamWriter text = File.CreateText(s888171540195302))
        s350800992283969.s711076612337021(s927756625543274, (TextWriter) text, Path.GetFileNameWithoutExtension(s888171540195302));
    }

    internal static void s711076612337021(
      s293547439506271 s351457334849171,
      TextWriter s414580641310952,
      string s290829006958979)
    {
      IReadOnlyDictionary<string, List<s350800992283969.s291612694479292>> readOnlyDictionary = s350800992283969.s671608757112915(s351457334849171);
      foreach (List<s350800992283969.s291612694479292> s661573835147381 in readOnlyDictionary.Values)
        s350800992283969.s775006088750431(s661573835147381);
      Dictionary<string, int> dictionary = new Dictionary<string, int>();
      Dictionary<string, IReadOnlyList<s350800992283969.s524279021933451>> s281236008191980 = new Dictionary<string, IReadOnlyList<s350800992283969.s524279021933451>>();
      foreach (KeyValuePair<string, List<s350800992283969.s291612694479292>> keyValuePair in (IEnumerable<KeyValuePair<string, List<s350800992283969.s291612694479292>>>) readOnlyDictionary)
      {
        IReadOnlyList<s350800992283969.s524279021933451> s524279021933451List = s350800992283969.s548643785158290(s350800992283969.s621137174736499(s351457334849171, (IEnumerable<s350800992283969.s291612694479292>) keyValuePair.Value, dictionary));
        s281236008191980.Add(keyValuePair.Key, s524279021933451List);
      }
      string[] array = dictionary.OrderBy<KeyValuePair<string, int>, int>((Func<KeyValuePair<string, int>, int>) (s819050574240884 => s819050574240884.Value)).Select<KeyValuePair<string, int>, string>((Func<KeyValuePair<string, int>, string>) (s102378097314593 => s102378097314593.Key)).ToArray<string>();
      s350800992283969.s048941367584486((IReadOnlyDictionary<string, IReadOnlyList<s350800992283969.s524279021933451>>) s281236008191980, (IReadOnlyList<string>) array, s414580641310952, s290829006958979);
    }

    internal static IReadOnlyDictionary<string, List<s350800992283969.s291612694479292>> s671608757112915(
      s293547439506271 s552648217161013)
    {
      // ISSUE: object of a compiler-generated type is created
      // ISSUE: variable of a compiler-generated type
      s350800992283969.s897531409974448 s897531409974448 = (s350800992283969.s897531409974448) new s350800992283969.s948820884834456();
      // ISSUE: reference to a compiler-generated field
      ((s350800992283969.s948820884834456) s897531409974448).s837967523373192 = s552648217161013;
      // ISSUE: reference to a compiler-generated field
      s897531409974448.s985553594211160 = new Dictionary<string, List<s350800992283969.s291612694479292>>();
      // ISSUE: reference to a compiler-generated field
      // ISSUE: reference to a compiler-generated method
      ((s350800992283969.s948820884834456) s897531409974448).s837967523373192.s827465297263042(new Action<s124232551204041>(s897531409974448.s190949442172370));
      // ISSUE: reference to a compiler-generated field
      foreach (List<s350800992283969.s291612694479292> s291612694479292List in s897531409974448.s985553594211160.Values)
        s291612694479292List.Sort((Comparison<s350800992283969.s291612694479292>) ((s698879919137353, s549443646024995) => s698879919137353.s851416238763149.CompareTo(s549443646024995.s851416238763149)));
      // ISSUE: reference to a compiler-generated field
      return (IReadOnlyDictionary<string, List<s350800992283969.s291612694479292>>) s897531409974448.s985553594211160;
    }

    internal static void s775006088750431(
      List<s350800992283969.s291612694479292> s661573835147381)
    {
      for (int index = 0; index < s661573835147381.Count - 1; ++index)
      {
        s350800992283969.s291612694479292 s291612694479292_1 = s661573835147381[index];
        s350800992283969.s291612694479292 s291612694479292_2 = s661573835147381[index + 1];
        if (s291612694479292_1.s851416238763149 + s291612694479292_1.s187065994401429 > s291612694479292_2.s851416238763149)
        {
          double metric = s291612694479292_2.s851416238763149 - s291612694479292_1.s851416238763149;
          // ISSUE: object of a compiler-generated type is created
          s661573835147381[index] = (s350800992283969.s291612694479292) new s302029464250094.s370166350307966(s291612694479292_1.s153191612653561, -1, s291612694479292_1.s851416238763149, metric, s291612694479292_1.s614907912050192);
        }
      }
    }

    internal static IReadOnlyDictionary<int, List<s350800992283969.s291612694479292>> s621137174736499(
      s293547439506271 s888860637154232,
      IEnumerable<s350800992283969.s291612694479292> s366040823028346,
      Dictionary<string, int> s528392165891069)
    {
      Dictionary<int, List<s350800992283969.s291612694479292>> dictionary = new Dictionary<int, List<s350800992283969.s291612694479292>>();
      Stack<s457867646003930> s457867646003930Stack = new Stack<s457867646003930>();
      foreach (s350800992283969.s291612694479292 s291612694479292 in s366040823028346)
      {
        for (s457867646003930 s617493125265954 = s291612694479292.s153191612653561; s617493125265954 != s457867646003930.Invalid; s617493125265954 = s888860637154232.s578756348595744(s617493125265954))
          s457867646003930Stack.Push(s617493125265954);
        int depth = -1;
        int callerFrameId = -1;
        while (s457867646003930Stack.Count > 0)
        {
          s457867646003930 s457867646003930 = s457867646003930Stack.Pop();
          ++depth;
          s275977756270514 s267041226972261 = s888860637154232.s275938953343520(s457867646003930);
          switch (s267041226972261)
          {
            case s275977756270514.Invalid:
            case s275977756270514.Broken:
              continue;
            default:
              string key = s888860637154232.s421928177288618(s267041226972261, false);
              if (!string.IsNullOrEmpty(key))
              {
                int count;
                if (!s528392165891069.TryGetValue(key, out count))
                  s528392165891069.Add(key, count = s528392165891069.Count);
                List<s350800992283969.s291612694479292> s291612694479292List;
                if (!dictionary.TryGetValue(count, out s291612694479292List))
                  dictionary.Add(count, s291612694479292List = new List<s350800992283969.s291612694479292>());
                // ISSUE: object of a compiler-generated type is created
                s291612694479292List.Add((s350800992283969.s291612694479292) new s302029464250094.s370166350307966(s457867646003930, callerFrameId, s291612694479292.s851416238763149, s291612694479292.s187065994401429, depth));
                callerFrameId = count;
                continue;
              }
              continue;
          }
        }
      }
      return (IReadOnlyDictionary<int, List<s350800992283969.s291612694479292>>) dictionary;
    }

    internal static IReadOnlyList<s350800992283969.s524279021933451> s548643785158290(
      IReadOnlyDictionary<int, List<s350800992283969.s291612694479292>> s303890335438622)
    {
      List<s350800992283969.s524279021933451> s524279021933451List = new List<s350800992283969.s524279021933451>();
      foreach (KeyValuePair<int, List<s350800992283969.s291612694479292>> keyValuePair in (IEnumerable<KeyValuePair<int, List<s350800992283969.s291612694479292>>>) s303890335438622)
      {
        int key = keyValuePair.Key;
        List<s350800992283969.s291612694479292> s291612694479292List = keyValuePair.Value;
        s291612694479292List.Sort((Comparison<s350800992283969.s291612694479292>) ((s352809979911065, s136564131539202) => s352809979911065.s851416238763149.CompareTo(s136564131539202.s851416238763149)));
        s350800992283969.s291612694479292 s584367343904607 = s291612694479292List[0];
        for (int index = 1; index < s291612694479292List.Count; ++index)
        {
          if (s350800992283969.s600963967490911(s291612694479292List[index - 1], s291612694479292List[index]))
          {
            s350800992283969.s509170755964630(s524279021933451List, s584367343904607, s291612694479292List[index - 1], key);
            s584367343904607 = s291612694479292List[index];
          }
        }
        s350800992283969.s509170755964630(s524279021933451List, s584367343904607, s291612694479292List[s291612694479292List.Count - 1], key);
      }
      return (IReadOnlyList<s350800992283969.s524279021933451>) s350800992283969.s581192899674931((IEnumerable<s350800992283969.s524279021933451>) s524279021933451List).ToArray<s350800992283969.s524279021933451>();
    }

    private static bool s600963967490911(
      s350800992283969.s291612694479292 s434149134610368,
      s350800992283969.s291612694479292 s542448015141086)
    {
      return s434149134610368.s614907912050192 != s542448015141086.s614907912050192 || s434149134610368.s771210874162833 != s542448015141086.s771210874162833 || s434149134610368.s851416238763149 + s434149134610368.s187065994401429 * 1.2 < s542448015141086.s851416238763149;
    }

    private static void s509170755964630(
      List<s350800992283969.s524279021933451> s077099629367970,
      s350800992283969.s291612694479292 s584367343904607,
      s350800992283969.s291612694479292 s705827602333438,
      int s788349604346619)
    {
      if (s584367343904607.s614907912050192 != s705827602333438.s614907912050192)
        throw new ArgumentException("Invalid arguments, both samples must be of the same depth");
      if (s584367343904607.s851416238763149 == s705827602333438.s851416238763149 + s705827602333438.s187065994401429)
        throw new ArgumentException("Invalid samples, two samples can not happen at the same time.");
      s077099629367970.Add((s350800992283969.s524279021933451) new s350800992283969.s291612694479292((s350800992283969.s533224633441723) 0, s788349604346619, s584367343904607.s851416238763149, s584367343904607.s614907912050192));
      s077099629367970.Add((s350800992283969.s524279021933451) new s350800992283969.s291612694479292((s350800992283969.s533224633441723) 1, s788349604346619, s705827602333438.s851416238763149 + s705827602333438.s187065994401429, s705827602333438.s614907912050192));
    }

    internal static IEnumerable<s350800992283969.s524279021933451> s581192899674931(
      IEnumerable<s350800992283969.s524279021933451> s249945001099850)
    {
      return s249945001099850.GroupBy<s350800992283969.s524279021933451, double>((Func<s350800992283969.s524279021933451, double>) (s157384058948379 => s157384058948379.s085444005195409)).OrderBy<IGrouping<double, s350800992283969.s524279021933451>, double>((Func<IGrouping<double, s350800992283969.s524279021933451>, double>) (s383734754642407 => s383734754642407.Key)).SelectMany<IGrouping<double, s350800992283969.s524279021933451>, s350800992283969.s524279021933451>((Func<IGrouping<double, s350800992283969.s524279021933451>, IEnumerable<s350800992283969.s524279021933451>>) (s926518223334528 => s926518223334528.Where<s350800992283969.s524279021933451>((Func<s350800992283969.s524279021933451, bool>) (s419277874537357 =>
      {
        // ISSUE: unable to decompile the method.
      })).OrderByDescending<s350800992283969.s524279021933451, int>((Func<s350800992283969.s524279021933451, int>) (s158074560377285 => s158074560377285.s432992669820323)).Concat<s350800992283969.s524279021933451>((IEnumerable<s350800992283969.s524279021933451>) s926518223334528.Where<s350800992283969.s524279021933451>((Func<s350800992283969.s524279021933451, bool>) (s086537149527018 =>
      {
        // ISSUE: unable to decompile the method.
      })).OrderBy<s350800992283969.s524279021933451, int>((Func<s350800992283969.s524279021933451, int>) (s246721419723240 => s246721419723240.s432992669820323)))));
    }

    internal static void s048941367584486(
      IReadOnlyDictionary<string, IReadOnlyList<s350800992283969.s524279021933451>> s281236008191980,
      IReadOnlyList<string> s840444386287176,
      TextWriter s637720389921300,
      string s419159336829604)
    {
      // ISSUE: unable to decompile the method.
    }

    internal struct s291612694479292
    {
      [SpecialName]
      public byte value__;

      public virtual string s415707678538325() => this.s851416238763149.ToString((IFormatProvider) CultureInfo.InvariantCulture);

      internal s457867646003930 s153191612653561 => (^(s302029464250094.s370166350307966&) ref this).s820285955131198;

      internal int s771210874162833 { get; }

      internal double s851416238763149 { get; }

      internal double s187065994401429 { get; }

      internal int s614907912050192 { get; }

      public s291612694479292(
        s350800992283969.s533224633441723 type,
        int frameId,
        double relativeTime,
        int depth)
      {
        // ISSUE: unable to decompile the method.
      }
    }

    internal enum s533224633441723
    {
      Open,
      Close,
    }

    internal struct s524279021933451
    {
      public static readonly s350800992283969.s948820884834456 s244144333974663 = new s350800992283969.s948820884834456();

      public virtual string s437482179066510()
      {
        // ISSUE: unable to decompile the method.
      }

      internal s350800992283969.s533224633441723 s823442067612243
      {
        get
        {
          // ISSUE: unable to decompile the method.
        }
      }

      internal int s141430056070910 { get; }

      internal double s085444005195409 { get; }

      internal int s432992669820323 { get; }
    }
  }
}
