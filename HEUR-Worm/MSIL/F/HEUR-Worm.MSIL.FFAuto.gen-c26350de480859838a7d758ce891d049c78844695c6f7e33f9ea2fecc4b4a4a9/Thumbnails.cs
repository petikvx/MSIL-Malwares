// Decompiled with JetBrains decompiler
// Type: Envoy.Thumbnails
// Assembly: ManifestRunn, Version=2.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: 4340E416-8599-4A73-B291-89371197E3DA
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.01-msil\HEUR-Worm.MSIL.FFAuto.gen-c26350de480859838a7d758ce891d049c78844695c6f7e33f9ea2fecc4b4a4a9.exe

using System;
using System.Collections;
using System.Collections.Generic;
using System.ComponentModel;
using System.Drawing;
using System.Runtime.InteropServices;
using System.Windows.Forms;
using System.Windows.Forms.Layout;

namespace Envoy
{
  public class Thumbnails : UserControl
  {
    private List<SelectablePictureBox> Images;
    private ImageList ImageList;
    private Thumbnails.ThumbnailClicked SelectedThumbnail;
    private IContainer components = (IContainer) null;

    public Thumbnails(ImageList imageList, Thumbnails.ThumbnailClicked thumbnailClicked)
    {
      this.InitializeComponent();
      this.ImageList = imageList;
      this.Images = new List<SelectablePictureBox>();
      this.SelectedThumbnail = thumbnailClicked;
    }

    public void AddHistoryThumbnail(ImageObject image)
    {
      SelectablePictureBox selectablePictureBox1 = new SelectablePictureBox(image);
      Thumbnails.\u202A​‎​⁯⁭⁮‏⁯⁮⁯‍⁮⁭‪‮‏‍⁭‮‪‫‎‫‌​‎‏‬‬‬‍‭⁬‬⁪⁯​‪⁯‮((Control) selectablePictureBox1, Thumbnails.\u200E‍‪‌⁮‮‪‎⁪‎‎​‪⁪‪⁬‎⁯​⁮⁯‬‮‪‫⁭⁮‫⁪‌‏‬‭‪⁭⁯⁮‏⁬⁫‮((Control) this) / 10);
      Thumbnails.\u200F⁫‬‌⁬‪‏‎⁮⁫‍‪‭‪‎‫‌‮⁫‮‌⁬‮⁮‬‎‫‮⁬‬‎⁮‪​⁫‪⁭‏‮⁯‮((Control) selectablePictureBox1, Thumbnails.\u202E⁮‏​⁪‮‌‭⁬⁭‌⁭‍‌⁬‬⁮‏‎‪‮⁯‏⁮⁬‬⁫‪⁭⁫‏‮‍⁭‭‮‎‎⁫‫‮((Control) this));
      SelectablePictureBox selectablePictureBox2 = selectablePictureBox1;
      this.DeselectThumbnails();
      selectablePictureBox2.SetSelected(true);
      Thumbnails.\u202C‏⁬​⁬⁭‫‫⁫‎‏‮⁬⁭‪‫‭‌⁬‪⁯​⁯‌⁬‮‪⁬‮‮​‫‪​⁫‫‭⁫‪‮((Control) selectablePictureBox2, new MouseEventHandler(this.HistoryPanel_MouseDown));
      Thumbnails.\u206B​⁬‫‮‮⁮⁫‌‫‪⁫‍‮‪⁫‌‬‎‌⁪⁯⁮‪⁫​⁭⁭‪‪‏⁪‬⁪‍‏‎‫⁪‮(Thumbnails.\u200C‭‍‮‍⁯⁬‬‏⁪‎‮‮​‌‭⁭‮⁯‫⁬⁫‮‏‭‬​⁭⁭‮‮‭⁪‍⁯⁯⁬‏⁫‭‮((Control) this), (Control) selectablePictureBox2);
      this.Images.Insert(0, selectablePictureBox2);
      if (this.Images.Count > 10)
      {
        SelectablePictureBox image1 = this.Images[this.Images.Count - 1];
        Thumbnails.\u200C‪‏‭⁪‮⁮⁮‬⁭‭‏‫⁪⁫‌⁫‏⁮‫‮‮⁬⁮⁯‭‭‏‫‍⁬‮‌⁯‏‬​‮‎⁭‮(Thumbnails.\u200C‭‍‮‍⁯⁬‬‏⁪‎‮‮​‌‭⁭‮⁯‫⁬⁫‮‏‭‬​⁭⁭‮‮‭⁪‍⁯⁯⁬‏⁫‭‮((Control) this), (Control) image1);
        Thumbnails.\u202A‎‎‪⁭⁯‭‏‮⁮‌‍⁭‮‏‭‍‪‭‬‌⁯⁯‪‏⁬‏‭‏⁯⁭‮‎​⁮⁫‎⁮​⁯‮((Component) image1);
        this.Images.RemoveAt(this.Images.Count - 1);
      }
      this.ResizeThumbnails();
    }

    private void DeselectThumbnails()
    {
      IEnumerator enumerator = Thumbnails.\u200C‪⁮⁫​⁫​‫​⁪‌‭‌‍​‏​⁯‫⁯‏‌‏‍⁬​‬‌⁮‎‬‮‍‪‫⁯‍⁫⁬‎‮((ArrangedElementCollection) Thumbnails.\u200C‭‍‮‍⁯⁬‬‏⁪‎‮‮​‌‭⁭‮⁯‫⁬⁫‮‏‭‬​⁭⁭‮‮‭⁪‍⁯⁯⁬‏⁫‭‮((Control) this));
      try
      {
        while (Thumbnails.\u200C‌‍‮‍⁪‎⁬⁭​​⁭⁫‏‮⁯⁭⁬‌‍‫‪‪⁪​‎​‭⁪‪‌‫‮‎‏‮‭‫‌⁮‮(enumerator))
          ((SelectablePictureBox) Thumbnails.\u200E‎‌⁭​‫‪‏‬‏⁫⁪⁮‭‮⁮‏⁮⁮⁪​‮‌‫⁫⁮‪⁭‪‍‌⁫‌‭‍‎⁫‫‏‍‮(enumerator)).SetSelected(false);
      }
      finally
      {
        if (enumerator is IDisposable disposable)
          Thumbnails.\u202D⁪‫‮⁭⁪‭⁮‮‬⁮⁪‪⁫⁭‎​⁪⁮‭‮​⁫‭⁯​‌⁮⁭​‏‎⁮⁯‏‬‌​‫‏‮(disposable);
      }
    }

    public void ResizeThumbnails()
    {
      int num1 = Thumbnails.\u200E‍‪‌⁮‮‪‎⁪‎‎​‪⁪‪⁬‎⁯​⁮⁯‬‮‪‫⁭⁮‫⁪‌‏‬‭‪⁭⁯⁮‏⁬⁫‮((Control) this) / 10;
      IEnumerator enumerator = Thumbnails.\u200C‪⁮⁫​⁫​‫​⁪‌‭‌‍​‏​⁯‫⁯‏‌‏‍⁬​‬‌⁮‎‬‮‍‪‫⁯‍⁫⁬‎‮((ArrangedElementCollection) Thumbnails.\u200C‭‍‮‍⁯⁬‬‏⁪‎‮‮​‌‭⁭‮⁯‫⁬⁫‮‏‭‬​⁭⁭‮‮‭⁪‍⁯⁯⁬‏⁫‭‮((Control) this));
      try
      {
        while (Thumbnails.\u200C‌‍‮‍⁪‎⁬⁭​​⁭⁫‏‮⁯⁭⁬‌‍‫‪‪⁪​‎​‭⁪‪‌‫‮‎‏‮‭‫‌⁮‮(enumerator))
          Thumbnails.\u202A​‎​⁯⁭⁮‏⁯⁮⁯‍⁮⁭‪‮‏‍⁭‮‪‫‎‫‌​‎‏‬‬‬‍‭⁬‬⁪⁯​‪⁯‮((Control) Thumbnails.\u200E‎‌⁭​‫‪‏‬‏⁫⁪⁮‭‮⁮‏⁮⁮⁪​‮‌‫⁫⁮‪⁭‪‍‌⁫‌‭‍‎⁫‫‏‍‮(enumerator), num1);
      }
      finally
      {
        if (enumerator is IDisposable disposable)
          Thumbnails.\u202D⁪‫‮⁭⁪‭⁮‮‬⁮⁪‪⁫⁭‎​⁪⁮‭‮​⁫‭⁯​‌⁮⁭​‏‎⁮⁯‏‬‌​‫‏‮(disposable);
      }
      int num2 = 0;
      foreach (SelectablePictureBox image in this.Images)
      {
        Thumbnails.\u202B‏⁬‎⁬‍‏⁬​‮‌‌‎​‫‭⁬‬‬⁪⁯‌‌‏​⁪⁬‬‮⁪‪‮‫‎⁬‭‫⁮⁪⁬‮((Control) image, new Point(num2 * Thumbnails.\u202A‬⁫​‫‪⁯‍‬‬‎‫‪‏⁪⁫⁫‮‏‫⁫⁪⁭‫⁪‍‎⁫‭‏⁮⁯⁬⁭​‍‌‮⁫‭‮((Control) image), 0));
        ++num2;
      }
    }

    private void SelectThumbnail(SelectablePictureBox selected)
    {
      if (this.Images.IndexOf(selected) == this.ImageList.GetSelectedHistoryIndex())
        return;
      this.DeselectThumbnails();
      selected.SetSelected(true);
      this.ImageList.SelectHistoryImage(this.Images.IndexOf(selected));
      this.SelectedThumbnail();
    }

    private void HistoryPanel_MouseDown(object sender, MouseEventArgs e) => this.SelectThumbnail((SelectablePictureBox) sender);

    public void SelectNext()
    {
      for (int index = 0; index < this.Images.Count; ++index)
      {
        if (this.Images[index].GetSelected() && index < this.Images.Count - 1)
        {
          this.Images[index].SetSelected(false);
          this.Images[index + 1].SetSelected(true);
          break;
        }
      }
    }

    protected override void Dispose(bool disposing)
    {
      if (disposing && this.components != null)
        Thumbnails.\u202D⁪‫‮⁭⁪‭⁮‮‬⁮⁪‪⁫⁭‎​⁪⁮‭‮​⁫‭⁯​‌⁮⁭​‏‎⁮⁯‏‬‌​‫‏‮((IDisposable) this.components);
      base.Dispose(disposing);
    }

    private void InitializeComponent()
    {
      Thumbnails.\u206D⁯​‫⁮‫‌‌​⁫‍⁯‭‏⁬⁬⁭‮​‮⁭‌‬‬‮‭⁭⁬​‌‏⁯‍‬⁮​‍‌⁯‮((Control) this);
      Thumbnails.\u206E⁪‮‎⁬‏‌‭‍⁫‭‌​‫‭⁮⁬‏⁪‪‫‍⁭‬⁭‮‫‎​⁫‎‍‫‮‫⁪‭⁯⁭‍‮((ContainerControl) this, new SizeF(6f, 13f));
      Thumbnails.\u202C‪⁮⁮⁭⁭‬⁭‪⁯​‭‎‎⁬‍⁫⁮‎‫‌‫⁪‍⁫⁪⁭⁪⁭‫‫⁮⁪⁮⁯⁬⁯⁯​⁭‮((ContainerControl) this, AutoScaleMode.Font);
      Thumbnails.\u206A⁪‎‍‌​‮‎⁯⁮‏‪‪‌‬⁮‌⁪⁮⁪‌​⁭⁭‮⁫‪⁪‎⁯‍⁮⁯⁫‬⁯​⁭⁮‪‮((Control) this, nameof (Thumbnails));
      Thumbnails.\u206B⁯‏⁪⁯⁮⁬‬‍‪‪⁪⁬⁬‫‫⁪‎‏‍⁮‭‬​‎‌‬‌⁪‎⁫⁭‭⁯⁬⁯⁫‪⁮‎‮((Control) this, new Size(250, 191));
      Thumbnails.\u206E⁮‭⁮‭⁬‪‫⁫‎‪‪‭‮⁬‏‍​‮​⁪‫‎‌⁮‮‎⁬‭‎‏⁪‬⁬‫‬⁪‪‏⁬‮((Control) this, false);
    }

    static int \u200E‍‪‌⁮‮‪‎⁪‎‎​‪⁪‪⁬‎⁯​⁮⁯‬‮‪‫⁭⁮‫⁪‌‏‬‭‪⁭⁯⁮‏⁬⁫‮([In] Control obj0) => obj0.Width;

    static void \u202A​‎​⁯⁭⁮‏⁯⁮⁯‍⁮⁭‪‮‏‍⁭‮‪‫‎‫‌​‎‏‬‬‬‍‭⁬‬⁪⁯​‪⁯‮([In] Control obj0, [In] int obj1) => obj0.Width = obj1;

    static int \u202E⁮‏​⁪‮‌‭⁬⁭‌⁭‍‌⁬‬⁮‏‎‪‮⁯‏⁮⁬‬⁫‪⁭⁫‏‮‍⁭‭‮‎‎⁫‫‮([In] Control obj0) => obj0.Height;

    static void \u200F⁫‬‌⁬‪‏‎⁮⁫‍‪‭‪‎‫‌‮⁫‮‌⁬‮⁮‬‎‫‮⁬‬‎⁮‪​⁫‪⁭‏‮⁯‮([In] Control obj0, [In] int obj1) => obj0.Height = obj1;

    static void \u202C‏⁬​⁬⁭‫‫⁫‎‏‮⁬⁭‪‫‭‌⁬‪⁯​⁯‌⁬‮‪⁬‮‮​‫‪​⁫‫‭⁫‪‮([In] Control obj0, [In] MouseEventHandler obj1) => obj0.MouseClick += obj1;

    static Control.ControlCollection \u200C‭‍‮‍⁯⁬‬‏⁪‎‮‮​‌‭⁭‮⁯‫⁬⁫‮‏‭‬​⁭⁭‮‮‭⁪‍⁯⁯⁬‏⁫‭‮(
      [In] Control obj0)
    {
      return obj0.Controls;
    }

    static void \u206B​⁬‫‮‮⁮⁫‌‫‪⁫‍‮‪⁫‌‬‎‌⁪⁯⁮‪⁫​⁭⁭‪‪‏⁪‬⁪‍‏‎‫⁪‮(
      [In] Control.ControlCollection obj0,
      [In] Control obj1)
    {
      obj0.Add(obj1);
    }

    static void \u200C‪‏‭⁪‮⁮⁮‬⁭‭‏‫⁪⁫‌⁫‏⁮‫‮‮⁬⁮⁯‭‭‏‫‍⁬‮‌⁯‏‬​‮‎⁭‮(
      [In] Control.ControlCollection obj0,
      [In] Control obj1)
    {
      obj0.Remove(obj1);
    }

    static void \u202A‎‎‪⁭⁯‭‏‮⁮‌‍⁭‮‏‭‍‪‭‬‌⁯⁯‪‏⁬‏‭‏⁯⁭‮‎​⁮⁫‎⁮​⁯‮([In] Component obj0) => obj0.Dispose();

    static IEnumerator \u200C‪⁮⁫​⁫​‫​⁪‌‭‌‍​‏​⁯‫⁯‏‌‏‍⁬​‬‌⁮‎‬‮‍‪‫⁯‍⁫⁬‎‮(
      [In] ArrangedElementCollection obj0)
    {
      return obj0.GetEnumerator();
    }

    static object \u200E‎‌⁭​‫‪‏‬‏⁫⁪⁮‭‮⁮‏⁮⁮⁪​‮‌‫⁫⁮‪⁭‪‍‌⁫‌‭‍‎⁫‫‏‍‮([In] IEnumerator obj0) => obj0.Current;

    static bool \u200C‌‍‮‍⁪‎⁬⁭​​⁭⁫‏‮⁯⁭⁬‌‍‫‪‪⁪​‎​‭⁪‪‌‫‮‎‏‮‭‫‌⁮‮([In] IEnumerator obj0) => obj0.MoveNext();

    static void \u202D⁪‫‮⁭⁪‭⁮‮‬⁮⁪‪⁫⁭‎​⁪⁮‭‮​⁫‭⁯​‌⁮⁭​‏‎⁮⁯‏‬‌​‫‏‮([In] IDisposable obj0) => obj0.Dispose();

    static int \u202A‬⁫​‫‪⁯‍‬‬‎‫‪‏⁪⁫⁫‮‏‫⁫⁪⁭‫⁪‍‎⁫‭‏⁮⁯⁬⁭​‍‌‮⁫‭‮([In] Control obj0) => obj0.Width;

    static void \u202B‏⁬‎⁬‍‏⁬​‮‌‌‎​‫‭⁬‬‬⁪⁯‌‌‏​⁪⁬‬‮⁪‪‮‫‎⁬‭‫⁮⁪⁬‮([In] Control obj0, [In] Point obj1) => obj0.Location = obj1;

    static void \u206D⁯​‫⁮‫‌‌​⁫‍⁯‭‏⁬⁬⁭‮​‮⁭‌‬‬‮‭⁭⁬​‌‏⁯‍‬⁮​‍‌⁯‮([In] Control obj0) => obj0.SuspendLayout();

    static void \u206E⁪‮‎⁬‏‌‭‍⁫‭‌​‫‭⁮⁬‏⁪‪‫‍⁭‬⁭‮‫‎​⁫‎‍‫‮‫⁪‭⁯⁭‍‮([In] ContainerControl obj0, [In] SizeF obj1) => obj0.AutoScaleDimensions = obj1;

    static void \u202C‪⁮⁮⁭⁭‬⁭‪⁯​‭‎‎⁬‍⁫⁮‎‫‌‫⁪‍⁫⁪⁭⁪⁭‫‫⁮⁪⁮⁯⁬⁯⁯​⁭‮(
      [In] ContainerControl obj0,
      [In] AutoScaleMode obj1)
    {
      obj0.AutoScaleMode = obj1;
    }

    static void \u206A⁪‎‍‌​‮‎⁯⁮‏‪‪‌‬⁮‌⁪⁮⁪‌​⁭⁭‮⁫‪⁪‎⁯‍⁮⁯⁫‬⁯​⁭⁮‪‮([In] Control obj0, [In] string obj1) => obj0.Name = obj1;

    static void \u206B⁯‏⁪⁯⁮⁬‬‍‪‪⁪⁬⁬‫‫⁪‎‏‍⁮‭‬​‎‌‬‌⁪‎⁫⁭‭⁯⁬⁯⁫‪⁮‎‮([In] Control obj0, [In] Size obj1) => obj0.Size = obj1;

    static void \u206E⁮‭⁮‭⁬‪‫⁫‎‪‪‭‮⁬‏‍​‮​⁪‫‎‌⁮‮‎⁬‭‎‏⁪‬⁬‫‬⁪‪‏⁬‮([In] Control obj0, [In] bool obj1) => obj0.ResumeLayout(obj1);

    public delegate void ThumbnailClicked();
  }
}
