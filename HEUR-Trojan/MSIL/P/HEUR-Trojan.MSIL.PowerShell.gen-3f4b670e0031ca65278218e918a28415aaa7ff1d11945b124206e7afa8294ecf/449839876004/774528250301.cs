// Decompiled with JetBrains decompiler
// Type: 449839876004.774528250301
// Assembly: 919255703032, Version=1.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
// MVID: F1AD5918-0B7E-492E-9A94-09EF01F479FE
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.04\HEUR-Trojan.MSIL.PowerShell.gen-3f4b670e0031ca65278218e918a28415aaa7ff1d11945b124206e7afa8294ecf.exe

using \u003003260473875;
using \u003335564603810;
using \u003449839876004;
using \u003919255703032.Properties;
using System;
using System.Collections.Generic;
using System.IO;
using System.IO.Compression;
using System.Reflection;
using System.Runtime.CompilerServices;
using System.Threading;

namespace \u003449839876004
{
  [CompilerGenerated]
  internal static class \u003774528250301
  {
    private static Dictionary<string, bool> \u003435665917332;
    private static Dictionary<string, string> \u003390471488800;
    private static Dictionary<string, string> \u003406730376634;
    private static int \u003775876809279;
    internal const string \u003975266615354 = "3.2.9.0";

    private static Assembly \u003317427846199(AssemblyName _param0)
    {
      foreach (Assembly assembly in AppDomain.CurrentDomain.GetAssemblies())
      {
        AssemblyName name = assembly.GetName();
        // ISSUE: reference to a compiler-generated method
        // ISSUE: reference to a compiler-generated method
        if (string.Equals(name.Name, _param0.Name, StringComparison.InvariantCultureIgnoreCase) && string.Equals(\u003432248218065.\u003061630545976(name.CultureInfo), \u003432248218065.\u003061630545976(_param0.CultureInfo), StringComparison.InvariantCultureIgnoreCase))
          return assembly;
      }
      return (Assembly) null;
    }

    private static void \u003571339467341(Stream _param0, Stream _param1)
    {
      byte[] buffer = new byte[81920];
      int count;
      while ((count = _param0.Read(buffer, 0, buffer.Length)) != 0)
        _param1.Write(buffer, 0, count);
    }

    private static Stream \u003644204992963(string _param0)
    {
      Assembly executingAssembly = Assembly.GetExecutingAssembly();
      if (!_param0.EndsWith(".compressed"))
        return executingAssembly.GetManifestResourceStream(_param0);
      using (Stream manifestResourceStream = executingAssembly.GetManifestResourceStream(_param0))
      {
        using (DeflateStream deflateStream = new DeflateStream(manifestResourceStream, CompressionMode.Decompress))
        {
          MemoryStream memoryStream = new MemoryStream();
          // ISSUE: reference to a compiler-generated method
          \u003774528250301.\u003571339467341((Stream) deflateStream, (Stream) memoryStream);
          memoryStream.Position = 0L;
          return (Stream) memoryStream;
        }
      }
    }

    private static Stream \u003890357644875(
      Dictionary<string, string> _param0,
      string _param1)
    {
      string str;
      // ISSUE: reference to a compiler-generated method
      return _param0.TryGetValue(_param1, out str) ? \u003774528250301.\u003644204992963(str) : (Stream) null;
    }

    private static byte[] \u003330773137499(Stream _param0)
    {
      byte[] buffer = new byte[_param0.Length];
      _param0.Read(buffer, 0, buffer.Length);
      return buffer;
    }

    private static Assembly \u003121677193982(
      Dictionary<string, string> _param0,
      Dictionary<string, string> _param1,
      AssemblyName _param2)
    {
      string str = _param2.Name.ToLowerInvariant();
      if (_param2.CultureInfo != null && !string.IsNullOrEmpty(_param2.CultureInfo.Name))
        str = _param2.CultureInfo.Name + "." + str;
      byte[] rawAssembly;
      // ISSUE: reference to a compiler-generated method
      using (Stream stream = \u003774528250301.\u003890357644875(_param0, str))
      {
        if (stream == null)
          return (Assembly) null;
        // ISSUE: reference to a compiler-generated method
        rawAssembly = \u003774528250301.\u003330773137499(stream);
      }
      // ISSUE: reference to a compiler-generated method
      using (Stream stream = \u003774528250301.\u003890357644875(_param1, str))
      {
        if (stream != null)
        {
          // ISSUE: reference to a compiler-generated method
          byte[] rawSymbolStore = \u003774528250301.\u003330773137499(stream);
          return Assembly.Load(rawAssembly, rawSymbolStore);
        }
      }
      return Assembly.Load(rawAssembly);
    }

    public static Assembly \u003711898070606(object _param0, ResolveEventArgs _param1)
    {
      // ISSUE: reference to a compiler-generated field
      lock (\u003228702203750.\u003146959684814)
      {
        // ISSUE: reference to a compiler-generated field
        if (\u003774528250301.\u003435665917332.ContainsKey(_param1.Name))
          return (Assembly) null;
      }
      AssemblyName assemblyRef = new AssemblyName(_param1.Name);
      // ISSUE: reference to a compiler-generated method
      Assembly assembly1 = \u003774528250301.\u003317427846199(assemblyRef);
      if (assembly1 != (Assembly) null)
        return assembly1;
      // ISSUE: reference to a compiler-generated field
      // ISSUE: reference to a compiler-generated field
      // ISSUE: reference to a compiler-generated method
      Assembly assembly2 = \u003774528250301.\u003121677193982(\u003774528250301.\u003390471488800, \u003774528250301.\u003406730376634, assemblyRef);
      if (assembly2 == (Assembly) null)
      {
        // ISSUE: reference to a compiler-generated field
        lock (\u003228702203750.\u003146959684814)
        {
          // ISSUE: reference to a compiler-generated field
          \u003774528250301.\u003435665917332[_param1.Name] = true;
        }
        if ((assemblyRef.Flags & AssemblyNameFlags.Retargetable) != AssemblyNameFlags.None)
          assembly2 = Assembly.Load(assemblyRef);
      }
      return assembly2;
    }

    static \u003774528250301()
    {
      // ISSUE: reference to a compiler-generated field
      \u003228702203750.\u003146959684814 = new object();
      // ISSUE: reference to a compiler-generated field
      \u003774528250301.\u003435665917332 = new Dictionary<string, bool>();
      // ISSUE: reference to a compiler-generated field
      \u003774528250301.\u003390471488800 = new Dictionary<string, string>();
      // ISSUE: reference to a compiler-generated field
      \u003774528250301.\u003406730376634 = new Dictionary<string, string>();
      // ISSUE: reference to a compiler-generated field
      \u003774528250301.\u003390471488800.Add("costura", "costura.costura.dll.compressed");
      // ISSUE: reference to a compiler-generated field
      \u003774528250301.\u003390471488800.Add("newtonsoft.json", "costura.newtonsoft.json.dll.compressed");
    }

    public static void \u003515135362304()
    {
      // ISSUE: reference to a compiler-generated field
      if (Interlocked.Exchange(ref \u003774528250301.\u003775876809279, 1) == 1)
        return;
      AppDomain.CurrentDomain.AssemblyResolve += (ResolveEventHandler) ((_param0, _param1) =>
      {
        // ISSUE: reference to a compiler-generated field
        lock (\u003228702203750.\u003146959684814)
        {
          // ISSUE: reference to a compiler-generated field
          if (\u003774528250301.\u003435665917332.ContainsKey(_param1.Name))
            return (Assembly) null;
        }
        AssemblyName assemblyRef = new AssemblyName(_param1.Name);
        // ISSUE: reference to a compiler-generated method
        Assembly assembly1 = \u003774528250301.\u003317427846199(assemblyRef);
        if (assembly1 != (Assembly) null)
          return assembly1;
        // ISSUE: reference to a compiler-generated field
        // ISSUE: reference to a compiler-generated field
        // ISSUE: reference to a compiler-generated method
        Assembly assembly2 = \u003774528250301.\u003121677193982(\u003774528250301.\u003390471488800, \u003774528250301.\u003406730376634, assemblyRef);
        if (assembly2 == (Assembly) null)
        {
          // ISSUE: reference to a compiler-generated field
          lock (\u003228702203750.\u003146959684814)
          {
            // ISSUE: reference to a compiler-generated field
            \u003774528250301.\u003435665917332[_param1.Name] = true;
          }
          if ((assemblyRef.Flags & AssemblyNameFlags.Retargetable) != AssemblyNameFlags.None)
            assembly2 = Assembly.Load(assemblyRef);
        }
        return assembly2;
      });
    }

    static \u003774528250301() => \u003360241173987.\u003466094907262.\u003174537060560 = new \u003104394995500.\u003592866100668();
  }
}
