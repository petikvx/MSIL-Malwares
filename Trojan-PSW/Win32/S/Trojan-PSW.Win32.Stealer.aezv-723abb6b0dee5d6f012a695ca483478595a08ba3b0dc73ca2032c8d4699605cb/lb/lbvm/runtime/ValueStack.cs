// Decompiled with JetBrains decompiler
// Type: org.lb.lbvm.runtime.ValueStack
// Assembly: ISectionEnt, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: 94D57F93-A342-4E0D-9A4D-9518717BA689
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.01-msil\Trojan-PSW.Win32.Stealer.aezv-723abb6b0dee5d6f012a695ca483478595a08ba3b0dc73ca2032c8d4699605cb.exe

using org.lb.lbvm.exceptions;

namespace org.lb.lbvm.runtime
{
  internal sealed class ValueStack
  {
    private readonly object[] stack = new object[1048576];
    private int count;

    public void Push(object obj)
    {
      if (this.count == this.stack.Length - 1)
        throw new RuntimeException("Value stack overflow");
      this.stack[this.count] = obj;
      ++this.count;
    }

    public object Pop() => this.count != 0 ? this.stack[--this.count] : throw new RuntimeException("Value stack underflow");

    public object TopOfStack() => this.stack[this.count - 1];

    public object GetFromTop(int distanceFromTopOfStack)
    {
      int index = this.count - distanceFromTopOfStack - 1;
      return index >= 0 ? this.stack[index] : throw new RuntimeException("Value stack underflow");
    }

    public int Count() => this.count;
  }
}
