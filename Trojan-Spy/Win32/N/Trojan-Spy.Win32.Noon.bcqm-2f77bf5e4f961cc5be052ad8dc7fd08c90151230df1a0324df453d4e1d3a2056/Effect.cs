// Decompiled with JetBrains decompiler
// Type: mmxAH.Effect
// Assembly: PermissionTokenFact, Version=1.0.2.2, Culture=neutral, PublicKeyToken=null
// MVID: 0E8B010F-DA1B-42FA-9C31-C1DCAF557A03
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.03\Trojan-Spy.Win32.Noon.bcqm-2f77bf5e4f961cc5be052ad8dc7fd08c90151230df1a0324df453d4e1d3a2056.exe

namespace mmxAH
{
  public abstract class Effect
  {
    protected GameEngine en;
    protected Func rp;
    protected byte invnum;

    public Effect(GameEngine eng) => this.en = eng;

    public virtual void Execute(Func f, byte pInvNum = 40)
    {
      this.rp = f;
      if (pInvNum == (byte) 40)
        this.invnum = this.en.clock.GetCurPlayer();
      else
        this.invnum = pInvNum;
    }

    protected virtual bool ReadFromTextIndivid(TextFileParser data) => true;

    public static Effect FromTextFile(TextFileParser data, GameEngine eng)
    {
      Effect effect;
      switch (data.GetToken().ToUpper())
      {
        case "LITAS":
          effect = (Effect) new EffLitas(eng);
          break;
        case "MONSTER":
          effect = (Effect) new EffMonsterApears(eng);
          break;
        case "MOVEROLL":
          effect = (Effect) new EffMonsterMoveRoll(eng);
          break;
        case "NO":
          effect = (Effect) new EffNothing(eng);
          break;
        case "SANLOSE":
          effect = (Effect) new EffSanityLose(eng);
          break;
        case "STALOSE":
          effect = (Effect) new EffStaminaLose(eng);
          break;
        case "TONEARGATE":
          effect = (Effect) new EffToNearGate(eng);
          break;
        case "TONEARINVEST":
          effect = (Effect) new EffToNearInvest(eng);
          break;
        default:
          return (Effect) null;
      }
      return !effect.ReadFromTextIndivid(data) ? (Effect) null : effect;
    }
  }
}
