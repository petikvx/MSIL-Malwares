// Decompiled with JetBrains decompiler
// Type: NuGet.Common.MJKycbB9ae
// Assembly: Ty6CWyxFEL, Version=5.0.0.2, Culture=neutral, PublicKeyToken=31bf3856ad364e35
// MVID: 271E2DAF-741A-443A-8BCF-B62C509DDC38
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.01-msil\HEUR-Trojan-Ransom.MSIL.Purgen.gen-185fafbeb00cd8238fdabee088763e27012dd3a0076e04dddca6266f129f0430.exe

using System;
using System.IO;
using System.Runtime.CompilerServices;
using System.Threading;
using System.Threading.Tasks;

namespace NuGet.Common
{
  public static class MJKycbB9ae
  {
    public static readonly int YKV96UT4bk = 3;
    public static readonly FileShare BgOhL0zzh4 = FileShare.ReadWrite | FileShare.Delete;

    public static string \u0032PKA7eM7LR(string hZPYtwc848)
    {
      string lowerInvariant = string.Format("{0}.tmp", (object) Guid.NewGuid()).ToLowerInvariant();
      return Path.GetFullPath(Path.Combine(hZPYtwc848, lowerInvariant));
    }

    public static Task elb2KbZd7d(string cSES2TQYse)
    {
      // ISSUE: variable of a compiler-generated type
      MJKycbB9ae.CNP8E5zkhi stateMachine;
      // ISSUE: reference to a compiler-generated field
      stateMachine.F8kPkjCqFo = cSES2TQYse;
      // ISSUE: reference to a compiler-generated field
      stateMachine.MulS4XnVAJ = AsyncTaskMethodBuilder.Create();
      // ISSUE: reference to a compiler-generated field
      stateMachine.Xu1sMuxwdk = -1;
      // ISSUE: reference to a compiler-generated field
      stateMachine.MulS4XnVAJ.Start<MJKycbB9ae.CNP8E5zkhi>(ref stateMachine);
      // ISSUE: reference to a compiler-generated field
      return stateMachine.MulS4XnVAJ.Task;
    }

    public static Task L8OHwz8RSt(Action<string> _param0, string ripzicdNcd)
    {
      // ISSUE: variable of a compiler-generated type
      MJKycbB9ae.\u0032lfi3WRp7V stateMachine;
      // ISSUE: reference to a compiler-generated field
      stateMachine.KvUgD6Zbe9 = _param0;
      // ISSUE: reference to a compiler-generated field
      stateMachine.oGcD6KoAlW = ripzicdNcd;
      // ISSUE: reference to a compiler-generated field
      stateMachine.b6E0NdF3uQ = AsyncTaskMethodBuilder.Create();
      // ISSUE: reference to a compiler-generated field
      stateMachine.b6CVIDcQ81 = -1;
      // ISSUE: reference to a compiler-generated field
      stateMachine.b6E0NdF3uQ.Start<MJKycbB9ae.\u0032lfi3WRp7V>(ref stateMachine);
      // ISSUE: reference to a compiler-generated field
      return stateMachine.b6E0NdF3uQ.Task;
    }

    public static void LxJmObn666(Action<string> jS11aCaewd, string Cgi6aM2vkB)
    {
      if (jS11aCaewd == null)
        throw new ArgumentNullException("writeSourceFile");
      string Y8SFN4rCzQ = Cgi6aM2vkB != null ? MJKycbB9ae.\u0032PKA7eM7LR(Path.GetDirectoryName(Cgi6aM2vkB)) : throw new ArgumentNullException("destFilePath");
      try
      {
        jS11aCaewd(Y8SFN4rCzQ);
        MJKycbB9ae.IaRma9rJaK(Y8SFN4rCzQ, Cgi6aM2vkB);
      }
      catch
      {
        MJKycbB9ae.\u00336bo7aBW4A(Y8SFN4rCzQ);
        throw;
      }
    }

    public static Task hIihKmvvvP(Func<string, Task> mJRPCunaK8, string RApG5Xs3UM)
    {
      // ISSUE: variable of a compiler-generated type
      MJKycbB9ae.T84rfyzVPB stateMachine;
      // ISSUE: reference to a compiler-generated field
      stateMachine.oeMm1fnVaC = mJRPCunaK8;
      // ISSUE: reference to a compiler-generated field
      stateMachine.hLqk6nEeg3 = RApG5Xs3UM;
      // ISSUE: reference to a compiler-generated field
      stateMachine.xyoK5XAU9F = AsyncTaskMethodBuilder.Create();
      // ISSUE: reference to a compiler-generated field
      stateMachine.\u0039CAmeeqmm9 = -1;
      // ISSUE: reference to a compiler-generated field
      stateMachine.xyoK5XAU9F.Start<MJKycbB9ae.T84rfyzVPB>(ref stateMachine);
      // ISSUE: reference to a compiler-generated field
      return stateMachine.xyoK5XAU9F.Task;
    }

    public static void IaRma9rJaK(string _param0, string BoE4vTfOYU)
    {
      MJKycbB9ae.\u00336bo7aBW4A(BoE4vTfOYU);
      MJKycbB9ae.sdJN1N5iqs(_param0, BoE4vTfOYU);
    }

    public static void sdJN1N5iqs(string My1F4OpkTh, string GoqEiRfBrU)
    {
      if (My1F4OpkTh == null)
        throw new ArgumentNullException("sourceFileName");
      if (GoqEiRfBrU == null)
        throw new ArgumentNullException("destFileName");
      for (int index = 0; index < MJKycbB9ae.YKV96UT4bk; ++index)
      {
        try
        {
          File.Move(My1F4OpkTh, GoqEiRfBrU);
          break;
        }
        catch (Exception ex) when (index < MJKycbB9ae.YKV96UT4bk - 1 && (ex is UnauthorizedAccessException || ex is IOException))
        {
          MJKycbB9ae.yuRrvc27iR(100);
        }
      }
    }

    public static void \u00336bo7aBW4A(string Y8SFN4rCzQ)
    {
      if (Y8SFN4rCzQ == null)
        throw new ArgumentNullException("path");
      for (int index = 0; index < MJKycbB9ae.YKV96UT4bk; ++index)
      {
        try
        {
          if (!File.Exists(Y8SFN4rCzQ))
            break;
          File.Delete(Y8SFN4rCzQ);
          break;
        }
        catch (Exception ex) when (index < MJKycbB9ae.YKV96UT4bk - 1 && (ex is UnauthorizedAccessException || ex is IOException))
        {
          MJKycbB9ae.yuRrvc27iR(100);
        }
      }
    }

    public static T \u00326W25i5RaW<T>(string l77b9Ngh5B, Func<FileStream, string, T> QJ8aMFa4cq)
    {
      int ykV96Ut4bk = MJKycbB9ae.YKV96UT4bk;
      for (int index = 1; index <= ykV96Ut4bk; ++index)
      {
        try
        {
          using (FileStream fileStream = new FileStream(l77b9Ngh5B, FileMode.Open, FileAccess.Read, MJKycbB9ae.BgOhL0zzh4))
            return QJ8aMFa4cq(fileStream, l77b9Ngh5B);
        }
        catch (Exception ex) when (index < ykV96Ut4bk && (ex is UnauthorizedAccessException || ex is IOException))
        {
          MJKycbB9ae.yuRrvc27iR(100);
        }
      }
      return default (T);
    }

    public static Task<T> jRjbIao1q4<T>(
      string AWKtOCyJiu,
      Func<FileStream, string, Task<T>> M6OilHv7DO)
    {
      // ISSUE: variable of a compiler-generated type
      MJKycbB9ae.\u0038AMfLxbLQ1<T> stateMachine;
      // ISSUE: reference to a compiler-generated field
      stateMachine.filePath = AWKtOCyJiu;
      // ISSUE: reference to a compiler-generated field
      stateMachine.read = M6OilHv7DO;
      // ISSUE: reference to a compiler-generated field
      stateMachine.\u003C\u003Et__builder = AsyncTaskMethodBuilder<T>.Create();
      // ISSUE: reference to a compiler-generated field
      stateMachine.\u003C\u003E1__state = -1;
      // ISSUE: reference to a compiler-generated field
      stateMachine.\u003C\u003Et__builder.Start<MJKycbB9ae.\u0038AMfLxbLQ1<T>>(ref stateMachine);
      // ISSUE: reference to a compiler-generated field
      return stateMachine.\u003C\u003Et__builder.Task;
    }

    private static void yuRrvc27iR(int hbnibMLmXY) => Thread.Sleep(hbnibMLmXY);
  }
}
