// Decompiled with JetBrains decompiler
// Type: Cradiator.Model.FetchExceptionHandler
// Assembly: EvidenceTypeDescript, Version=2.1.0.0, Culture=neutral, PublicKeyToken=null
// MVID: B50F5F07-D63E-4094-B80D-E78774C87D41
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.02-msil\HEUR-Trojan.MSIL.Crypt.gen-c59c8e3be7ec42553ff6af2588e3bcd0569e9467dbb9307218fb8724e02739f2.exe

using Cradiator.Views;
using log4net;
using System;

namespace Cradiator.Model
{
  public class FetchExceptionHandler
  {
    private static readonly ILog _log = LogManager.GetLogger(typeof (FetchExceptionHandler).Name);
    private readonly ICradiatorView _view;

    public FetchExceptionHandler(ICradiatorView view) => this._view = view;

    public void Handle(Exception fetchException)
    {
      FetchExceptionHandler._log.Error((object) fetchException.Message, fetchException);
      this._view.DataContext = (object) null;
      try
      {
        this._view.Invoke((Action) (() => this._view.ShowMessage("Connection problem")));
      }
      catch (Exception ex)
      {
        FetchExceptionHandler._log.Error((object) ex.Message, ex);
      }
    }
  }
}
