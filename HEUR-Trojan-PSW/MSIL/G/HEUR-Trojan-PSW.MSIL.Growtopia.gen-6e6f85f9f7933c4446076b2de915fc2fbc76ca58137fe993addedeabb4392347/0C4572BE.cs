// Decompiled with JetBrains decompiler
// Type: 0C4572BE
// Assembly: SpinHack_PC, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: 65E7A0C4-9AD9-4435-B85F-DA409F1EDFB9
// Assembly location: C:\Users\Administrateur\Downloads\ransomware_new\HEUR-Trojan-PSW.MSIL.Growtopia.gen-6e6f85f9f7933c4446076b2de915fc2fbc76ca58137fe993addedeabb4392347.exe

using System;
using System.Diagnostics;

internal struct \u0030C4572BE
{
  private const int \u0031A8E4363 = 32;
  private int \u0030CD20A6C;
  private uint \u00352D90912;
  private uint[] \u0037E5B4355;
  private bool \u0037FD77A34;

  [Conditional("DEBUG")]
  private void \u00332673B59(bool _param1)
  {
  }

  internal \u0030C4572BE(int _param1)
  {
    this.\u0030CD20A6C = 0;
    this.\u00352D90912 = 0U;
    if (_param1 > 1)
    {
      this.\u0037E5B4355 = new uint[_param1];
      this.\u0037FD77A34 = true;
    }
    else
    {
      this.\u0037E5B4355 = (uint[]) null;
      this.\u0037FD77A34 = false;
    }
  }

  internal \u0030C4572BE(\u003091051E3 _param1, ref int _param2)
  {
    this.\u0037FD77A34 = false;
    this.\u0037E5B4355 = _param1.\u00333286000;
    int num1 = _param1.\u0034F9874EC;
    int num2 = num1 >> 31;
    _param2 = (_param2 ^ num2) - num2;
    if (this.\u0037E5B4355 == null)
    {
      this.\u0030CD20A6C = 0;
      this.\u00352D90912 = (uint) ((num1 ^ num2) - num2);
    }
    else
    {
      this.\u0030CD20A6C = this.\u0037E5B4355.Length - 1;
      this.\u00352D90912 = this.\u0037E5B4355[0];
      while (this.\u0030CD20A6C > 0 && this.\u0037E5B4355[this.\u0030CD20A6C] == 0U)
        --this.\u0030CD20A6C;
    }
  }

  internal \u003091051E3 \u003252F045B(int _param1)
  {
    uint[] numArray;
    this.\u00350BA2E25(_param1, out _param1, out numArray);
    return new \u003091051E3(_param1, numArray);
  }

  private void \u00350BA2E25(int _param1, out int _param2, out uint[] _param3)
  {
    if (this.\u0030CD20A6C == 0)
    {
      if (this.\u00352D90912 <= (uint) int.MaxValue)
      {
        _param2 = _param1 * (int) this.\u00352D90912;
        _param3 = (uint[]) null;
        return;
      }
      if (this.\u0037E5B4355 == null)
        this.\u0037E5B4355 = new uint[1]
        {
          this.\u00352D90912
        };
      else if (this.\u0037FD77A34)
        this.\u0037E5B4355[0] = this.\u00352D90912;
      else if ((int) this.\u0037E5B4355[0] != (int) this.\u00352D90912)
        this.\u0037E5B4355 = new uint[1]
        {
          this.\u00352D90912
        };
    }
    _param2 = _param1;
    int num = this.\u0037E5B4355.Length - this.\u0030CD20A6C - 1;
    if (num <= 1)
    {
      if (num == 0 || this.\u0037E5B4355[this.\u0030CD20A6C + 1] == 0U)
      {
        this.\u0037FD77A34 = false;
        _param3 = this.\u0037E5B4355;
        return;
      }
      if (this.\u0037FD77A34)
      {
        this.\u0037E5B4355[this.\u0030CD20A6C + 1] = 0U;
        this.\u0037FD77A34 = false;
        _param3 = this.\u0037E5B4355;
        return;
      }
    }
    _param3 = this.\u0037E5B4355;
    Array.Resize<uint>(ref _param3, this.\u0030CD20A6C + 1);
    if (this.\u0037FD77A34)
      return;
    this.\u0037E5B4355 = _param3;
  }

  private void \u0030DBA092E(uint _param1)
  {
    this.\u00352D90912 = _param1;
    this.\u0030CD20A6C = 0;
  }

  private void \u003032B5F56(ulong _param1)
  {
    uint num = \u0030416139A.\u0033E3546F2(_param1);
    if (num == 0U)
    {
      this.\u00352D90912 = \u0030416139A.\u003655665E8(_param1);
      this.\u0030CD20A6C = 0;
    }
    else
    {
      this.\u003577C04DE(2);
      this.\u0037E5B4355[0] = (uint) _param1;
      this.\u0037E5B4355[1] = num;
    }
  }

  internal int \u00344E11B3B => this.\u0030CD20A6C + 1;

  private void \u00343394D7C()
  {
    if (this.\u0030CD20A6C <= 0 || this.\u0037E5B4355[this.\u0030CD20A6C] != 0U)
      return;
    this.\u00352D90912 = this.\u0037E5B4355[0];
    do
      ;
    while (--this.\u0030CD20A6C > 0 && this.\u0037E5B4355[this.\u0030CD20A6C] == 0U);
  }

  private int \u00309FB697F
  {
    get
    {
      int num = 0;
      for (int index = this.\u0030CD20A6C; index >= 0; --index)
      {
        if (this.\u0037E5B4355[index] != 0U)
          ++num;
      }
      return num;
    }
  }

  private void \u003577C04DE(int _param1)
  {
    if (_param1 <= 1)
    {
      this.\u0030CD20A6C = 0;
    }
    else
    {
      if (!this.\u0037FD77A34 || this.\u0037E5B4355.Length < _param1)
      {
        this.\u0037E5B4355 = new uint[_param1];
        this.\u0037FD77A34 = true;
      }
      this.\u0030CD20A6C = _param1 - 1;
    }
  }

  private void \u0037F522EDA(int _param1)
  {
    if (_param1 <= 1)
    {
      this.\u0030CD20A6C = 0;
      this.\u00352D90912 = 0U;
    }
    else
    {
      if (!this.\u0037FD77A34 || this.\u0037E5B4355.Length < _param1)
      {
        this.\u0037E5B4355 = new uint[_param1];
        this.\u0037FD77A34 = true;
      }
      else
        Array.Clear((Array) this.\u0037E5B4355, 0, _param1);
      this.\u0030CD20A6C = _param1 - 1;
    }
  }

  private void \u0030F8C7BCA(int _param1, int _param2)
  {
    if (_param1 <= 1)
    {
      if (this.\u0030CD20A6C > 0)
        this.\u00352D90912 = this.\u0037E5B4355[0];
      this.\u0030CD20A6C = 0;
    }
    else
    {
      if (!this.\u0037FD77A34 || this.\u0037E5B4355.Length < _param1)
      {
        uint[] destinationArray = new uint[_param1 + _param2];
        if (this.\u0030CD20A6C == 0)
          destinationArray[0] = this.\u00352D90912;
        else
          Array.Copy((Array) this.\u0037E5B4355, (Array) destinationArray, Math.Min(_param1, this.\u0030CD20A6C + 1));
        this.\u0037E5B4355 = destinationArray;
        this.\u0037FD77A34 = true;
      }
      else if (this.\u0030CD20A6C + 1 < _param1)
      {
        Array.Clear((Array) this.\u0037E5B4355, this.\u0030CD20A6C + 1, _param1 - this.\u0030CD20A6C - 1);
        if (this.\u0030CD20A6C == 0)
          this.\u0037E5B4355[0] = this.\u00352D90912;
      }
      this.\u0030CD20A6C = _param1 - 1;
    }
  }

  private void \u003378340AE(int _param1 = 0)
  {
    if (this.\u0037FD77A34)
      return;
    uint[] destinationArray = new uint[this.\u0030CD20A6C + 1 + _param1];
    Array.Copy((Array) this.\u0037E5B4355, (Array) destinationArray, this.\u0030CD20A6C + 1);
    this.\u0037E5B4355 = destinationArray;
    this.\u0037FD77A34 = true;
  }

  private void \u003771E0929(ref \u0030C4572BE _param1, int _param2)
  {
    if (_param1.\u0030CD20A6C == 0)
    {
      this.\u00352D90912 = _param1.\u00352D90912;
      this.\u0030CD20A6C = 0;
    }
    else
    {
      if (!this.\u0037FD77A34 || this.\u0037E5B4355.Length <= _param1.\u0030CD20A6C)
      {
        this.\u0037E5B4355 = new uint[_param1.\u0030CD20A6C + 1 + _param2];
        this.\u0037FD77A34 = true;
      }
      this.\u0030CD20A6C = _param1.\u0030CD20A6C;
      Array.Copy((Array) _param1.\u0037E5B4355, (Array) this.\u0037E5B4355, this.\u0030CD20A6C + 1);
    }
  }

  private void \u0037161625C(uint _param1)
  {
    if (_param1 == 0U)
    {
      this.\u0030DBA092E(0U);
    }
    else
    {
      if (_param1 == 1U)
        return;
      if (this.\u0030CD20A6C == 0)
      {
        this.\u003032B5F56((ulong) this.\u00352D90912 * (ulong) _param1);
      }
      else
      {
        this.\u003378340AE(1);
        uint num = 0;
        for (int index = 0; index <= this.\u0030CD20A6C; ++index)
          num = \u0030C4572BE.\u00313DC32CC(ref this.\u0037E5B4355[index], _param1, num);
        if (num == 0U)
          return;
        this.\u0030F8C7BCA(this.\u0030CD20A6C + 2, 0);
        this.\u0037E5B4355[this.\u0030CD20A6C] = num;
      }
    }
  }

  internal void \u00344702956(ref \u0030C4572BE _param1, ref \u0030C4572BE _param2)
  {
    if (_param1.\u0030CD20A6C == 0)
    {
      if (_param2.\u0030CD20A6C == 0)
      {
        this.\u003032B5F56((ulong) _param1.\u00352D90912 * (ulong) _param2.\u00352D90912);
      }
      else
      {
        this.\u003771E0929(ref _param2, 1);
        this.\u0037161625C(_param1.\u00352D90912);
      }
    }
    else if (_param2.\u0030CD20A6C == 0)
    {
      this.\u003771E0929(ref _param1, 1);
      this.\u0037161625C(_param2.\u00352D90912);
    }
    else
    {
      this.\u0037F522EDA(_param1.\u0030CD20A6C + _param2.\u0030CD20A6C + 2);
      uint[] numArray1;
      int num1;
      uint[] numArray2;
      int num2;
      if (_param1.\u00309FB697F <= _param2.\u00309FB697F)
      {
        numArray1 = _param1.\u0037E5B4355;
        num1 = _param1.\u0030CD20A6C + 1;
        numArray2 = _param2.\u0037E5B4355;
        num2 = _param2.\u0030CD20A6C + 1;
      }
      else
      {
        numArray1 = _param2.\u0037E5B4355;
        num1 = _param2.\u0030CD20A6C + 1;
        numArray2 = _param1.\u0037E5B4355;
        num2 = _param1.\u0030CD20A6C + 1;
      }
      for (int index1 = 0; index1 < num1; ++index1)
      {
        uint num3 = numArray1[index1];
        if (num3 != 0U)
        {
          uint num4 = 0;
          int index2 = index1;
          int index3 = 0;
          while (index3 < num2)
          {
            num4 = \u0030C4572BE.\u00304444C34(ref this.\u0037E5B4355[index2], num3, numArray2[index3], num4);
            ++index3;
            ++index2;
          }
          while (num4 != 0U)
            num4 = \u0030C4572BE.\u00352F86F6F(ref this.\u0037E5B4355[index2++], 0U, num4);
        }
      }
      this.\u00343394D7C();
    }
  }

  private static uint \u0031AAF6235(ref \u0030C4572BE _param0, uint _param1)
  {
    if (_param1 == 1U)
      return 0;
    if (_param0.\u0030CD20A6C == 0)
      return _param0.\u00352D90912 % _param1;
    ulong num = 0;
    for (int index = _param0.\u0030CD20A6C; index >= 0; --index)
      num = \u0030416139A.\u00328CC1442((uint) num, _param0.\u0037E5B4355[index]) % (ulong) _param1;
    return (uint) num;
  }

  internal void \u00305E80531(ref \u0030C4572BE _param1)
  {
    if (_param1.\u0030CD20A6C == 0)
    {
      this.\u0030DBA092E(\u0030C4572BE.\u0031AAF6235(ref this, _param1.\u00352D90912));
    }
    else
    {
      if (this.\u0030CD20A6C == 0)
        return;
      \u0030C4572BE obj = new \u0030C4572BE();
      \u0030C4572BE.\u0037C9F592A(ref this, ref _param1, false, ref obj);
    }
  }

  private static void \u0037C9F592A(
    ref \u0030C4572BE _param0,
    ref \u0030C4572BE _param1,
    bool _param2,
    ref \u0030C4572BE _param3)
  {
    _param3.\u0030DBA092E(0U);
    if (_param0.\u0030CD20A6C < _param1.\u0030CD20A6C)
      return;
    int num1 = _param1.\u0030CD20A6C + 1;
    int num2 = _param0.\u0030CD20A6C - _param1.\u0030CD20A6C;
    int num3 = num2;
    for (int index = _param0.\u0030CD20A6C; index >= num2; --index)
    {
      if ((int) _param1.\u0037E5B4355[index - num2] != (int) _param0.\u0037E5B4355[index])
      {
        if (_param1.\u0037E5B4355[index - num2] < _param0.\u0037E5B4355[index])
        {
          ++num3;
          goto label_9;
        }
        else
          goto label_9;
      }
    }
    ++num3;
label_9:
    if (num3 == 0)
      return;
    if (_param2)
      _param3.\u003577C04DE(num3);
    uint num4 = _param1.\u0037E5B4355[num1 - 1];
    uint num5 = _param1.\u0037E5B4355[num1 - 2];
    int num6 = \u0030416139A.\u003188A4AD0(num4);
    int num7 = 32 - num6;
    if (num6 > 0)
    {
      num4 = num4 << num6 | num5 >> num7;
      num5 <<= num6;
      if (num1 > 2)
        num5 |= _param1.\u0037E5B4355[num1 - 3] >> num7;
    }
    _param0.\u003378340AE();
    int index1 = num3;
    while (--index1 >= 0)
    {
      uint num8 = index1 + num1 <= _param0.\u0030CD20A6C ? _param0.\u0037E5B4355[index1 + num1] : 0U;
      ulong num9 = \u0030416139A.\u00328CC1442(num8, _param0.\u0037E5B4355[index1 + num1 - 1]);
      uint num10 = _param0.\u0037E5B4355[index1 + num1 - 2];
      if (num6 > 0)
      {
        num9 = num9 << num6 | (ulong) (num10 >> num7);
        num10 <<= num6;
        if (index1 + num1 >= 3)
          num10 |= _param0.\u0037E5B4355[index1 + num1 - 3] >> num7;
      }
      ulong num11 = num9 / (ulong) num4;
      ulong num12 = (ulong) (uint) (num9 % (ulong) num4);
      if (num11 > (ulong) uint.MaxValue)
      {
        num12 += (ulong) num4 * (num11 - (ulong) uint.MaxValue);
        num11 = (ulong) uint.MaxValue;
      }
      for (; num12 <= (ulong) uint.MaxValue && num11 * (ulong) num5 > \u0030416139A.\u00328CC1442((uint) num12, num10); num12 += (ulong) num4)
        --num11;
      if (num11 > 0UL)
      {
        ulong num13 = 0;
        for (int index2 = 0; index2 < num1; ++index2)
        {
          ulong num14 = num13 + (ulong) _param1.\u0037E5B4355[index2] * num11;
          uint num15 = (uint) num14;
          num13 = num14 >> 32;
          if (_param0.\u0037E5B4355[index1 + index2] < num15)
            ++num13;
          _param0.\u0037E5B4355[index1 + index2] -= num15;
        }
        if ((ulong) num8 < num13)
        {
          uint num16 = 0;
          for (int index3 = 0; index3 < num1; ++index3)
            num16 = \u0030C4572BE.\u00352F86F6F(ref _param0.\u0037E5B4355[index1 + index3], _param1.\u0037E5B4355[index3], num16);
          --num11;
        }
        _param0.\u0030CD20A6C = index1 + num1 - 1;
      }
      if (_param2)
      {
        if (num3 == 1)
          _param3.\u00352D90912 = (uint) num11;
        else
          _param3.\u0037E5B4355[index1] = (uint) num11;
      }
    }
    _param0.\u0030CD20A6C = num1 - 1;
    _param0.\u00343394D7C();
  }

  private static uint \u00352F86F6F(ref uint _param0, uint _param1, uint _param2)
  {
    ulong num = (ulong) _param0 + (ulong) _param1 + (ulong) _param2;
    _param0 = (uint) num;
    return (uint) (num >> 32);
  }

  private static uint \u00313DC32CC(ref uint _param0, uint _param1, uint _param2)
  {
    ulong num = (ulong) _param0 * (ulong) _param1 + (ulong) _param2;
    _param0 = (uint) num;
    return (uint) (num >> 32);
  }

  private static uint \u00304444C34(ref uint _param0, uint _param1, uint _param2, uint _param3)
  {
    ulong num = (ulong) _param1 * (ulong) _param2 + (ulong) _param0 + (ulong) _param3;
    _param0 = (uint) num;
    return (uint) (num >> 32);
  }
}
