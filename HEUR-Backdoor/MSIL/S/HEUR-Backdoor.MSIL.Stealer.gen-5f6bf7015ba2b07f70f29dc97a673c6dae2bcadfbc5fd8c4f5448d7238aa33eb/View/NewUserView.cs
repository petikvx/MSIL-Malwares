// Decompiled with JetBrains decompiler
// Type: AutoJack.View.NewUserView
// Assembly: DBCSDeco, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: 88F14F11-3C25-4928-9B64-C01D5FB1C3EF
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.03\HEUR-Backdoor.MSIL.Stealer.gen-5f6bf7015ba2b07f70f29dc97a673c6dae2bcadfbc5fd8c4f5448d7238aa33eb.exe

using AutoJack.Controller;
using AutoJack.Model;
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Drawing;
using System.Linq;
using System.Windows.Forms;

namespace AutoJack.View
{
  public class NewUserView : Form
  {
    private Engine Engine = new Engine();
    private IContainer components = (IContainer) null;
    private Label NewPLabel;
    private TextBox NameInput;
    private Button OkButton;
    private Button BackButton;

    public NewUserView()
    {
      this.InitializeComponent();
      this.OkButton.Click += new EventHandler(this.CreateNewUser);
      this.BackButton.Click += new EventHandler(this.CancelCreate);
      this.NameInput.KeyPress += new KeyPressEventHandler(this.EnterKeyPressed);
    }

    private void CreateNewUser(object sender, EventArgs e)
    {
      string text = this.NameInput.Text;
      if ("Your Name...".Contains(text))
      {
        int num = (int) MessageBox.Show("Please enter your name to continue.");
      }
      else
      {
        List<User> savedUsers = this.Engine.GetSavedUsers();
        int result;
        int.TryParse(savedUsers.ElementAt<User>(savedUsers.Count - 1).Id, out result);
        User User = new User((result + 1).ToString(), text);
        savedUsers.Add(User);
        this.Engine.WriteUsersJSON(savedUsers);
        this.Close();
        new GameController(User).StartGame();
      }
    }

    private void EnterKeyPressed(object sender, KeyPressEventArgs e)
    {
      if (e.KeyChar != '\r')
        return;
      e.Handled = true;
      this.OkButton.PerformClick();
    }

    private void CancelCreate(object sender, EventArgs e)
    {
      this.Close();
      new SelectController().AllowSelectUser();
    }

    protected override void Dispose(bool disposing)
    {
      if (disposing && this.components != null)
        this.components.Dispose();
      base.Dispose(disposing);
    }

    private void InitializeComponent()
    {
      this.NewPLabel = new Label();
      this.NameInput = new TextBox();
      this.OkButton = new Button();
      this.BackButton = new Button();
      this.SuspendLayout();
      this.NewPLabel.Dock = DockStyle.Top;
      this.NewPLabel.Font = new Font("Microsoft Sans Serif", 13f, FontStyle.Bold, GraphicsUnit.Point, (byte) 0);
      this.NewPLabel.Location = new Point(0, 0);
      this.NewPLabel.Name = "NewPLabel";
      this.NewPLabel.Size = new Size(304, 22);
      this.NewPLabel.TabIndex = 0;
      this.NewPLabel.Text = "New Player";
      this.NewPLabel.TextAlign = ContentAlignment.MiddleCenter;
      this.NameInput.Location = new Point(12, 34);
      this.NameInput.Name = "NameInput";
      this.NameInput.Size = new Size(280, 20);
      this.NameInput.TabIndex = 1;
      this.NameInput.Text = "Your Name...";
      this.OkButton.Location = new Point(12, 60);
      this.OkButton.Name = "OkButton";
      this.OkButton.Size = new Size(75, 23);
      this.OkButton.TabIndex = 2;
      this.OkButton.Text = "OK";
      this.OkButton.UseVisualStyleBackColor = true;
      this.BackButton.BackColor = SystemColors.GradientActiveCaption;
      this.BackButton.Location = new Point(217, 60);
      this.BackButton.Name = "BackButton";
      this.BackButton.Size = new Size(75, 23);
      this.BackButton.TabIndex = 3;
      this.BackButton.Text = "Back";
      this.BackButton.UseVisualStyleBackColor = false;
      this.AutoScaleDimensions = new SizeF(6f, 13f);
      this.AutoScaleMode = AutoScaleMode.Font;
      this.ClientSize = new Size(304, 93);
      this.ControlBox = false;
      this.Controls.Add((Control) this.BackButton);
      this.Controls.Add((Control) this.OkButton);
      this.Controls.Add((Control) this.NameInput);
      this.Controls.Add((Control) this.NewPLabel);
      this.Name = nameof (NewUserView);
      this.StartPosition = FormStartPosition.CenterParent;
      this.Text = "AutoJack";
      this.ResumeLayout(false);
      this.PerformLayout();
    }
  }
}
