// Decompiled with JetBrains decompiler
// Type: CiscoAnyconnectControl.UI.View.Controls.LoadingIndicator
// Assembly: CompilerMarshalOverr, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: 887C44A2-E14E-47D6-B77E-29DEF9E8CB8C
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.06\HEUR-Email-Worm.MSIL.LovGate.gen-cd6f56158196fbf736ea4b7487025de6e7a628d7f1f508a39879631018dcc9e0.exe

using System.Collections;
using System.Windows;
using System.Windows.Controls;

namespace CiscoAnyconnectControl.UI.View.Controls
{
  [TemplatePart(Name = "Border", Type = typeof (Border))]
  public class LoadingIndicator : Control
  {
    public static readonly DependencyProperty SpeedRatioProperty = DependencyProperty.Register(nameof (SpeedRatio), typeof (double), typeof (LoadingIndicator), new PropertyMetadata((object) 1.0, (PropertyChangedCallback) ((o, e) =>
    {
      LoadingIndicator loadingIndicator = (LoadingIndicator) o;
      if (loadingIndicator.PART_Border == null || !loadingIndicator.IsActive)
        return;
      foreach (VisualStateGroup visualStateGroup in (IEnumerable) VisualStateManager.GetVisualStateGroups((FrameworkElement) loadingIndicator.PART_Border))
      {
        if (visualStateGroup.Name == "ActiveStates")
        {
          foreach (VisualState state in (IEnumerable) visualStateGroup.States)
          {
            if (state.Name == "Active")
              state.Storyboard.SetSpeedRatio((FrameworkElement) loadingIndicator.PART_Border, (double) e.NewValue);
          }
        }
      }
    })));
    public static readonly DependencyProperty IsActiveProperty = DependencyProperty.Register(nameof (IsActive), typeof (bool), typeof (LoadingIndicator), new PropertyMetadata((object) true, (PropertyChangedCallback) ((o, e) =>
    {
      LoadingIndicator loadingIndicator = (LoadingIndicator) o;
      if (loadingIndicator.PART_Border == null)
        return;
      if (!(bool) e.NewValue)
      {
        VisualStateManager.GoToElementState((FrameworkElement) loadingIndicator.PART_Border, "Inactive", false);
        loadingIndicator.PART_Border.Visibility = Visibility.Collapsed;
      }
      else
      {
        VisualStateManager.GoToElementState((FrameworkElement) loadingIndicator.PART_Border, "Active", false);
        loadingIndicator.PART_Border.Visibility = Visibility.Visible;
        foreach (VisualStateGroup visualStateGroup in (IEnumerable) VisualStateManager.GetVisualStateGroups((FrameworkElement) loadingIndicator.PART_Border))
        {
          if (visualStateGroup.Name == "ActiveStates")
          {
            foreach (VisualState state in (IEnumerable) visualStateGroup.States)
            {
              if (state.Name == "Active")
                state.Storyboard.SetSpeedRatio((FrameworkElement) loadingIndicator.PART_Border, loadingIndicator.SpeedRatio);
            }
          }
        }
      }
    })));
    protected Border PART_Border;

    public double SpeedRatio
    {
      get => (double) this.GetValue(LoadingIndicator.SpeedRatioProperty);
      set => this.SetValue(LoadingIndicator.SpeedRatioProperty, (object) value);
    }

    public bool IsActive
    {
      get => (bool) this.GetValue(LoadingIndicator.IsActiveProperty);
      set => this.SetValue(LoadingIndicator.IsActiveProperty, (object) value);
    }

    public override void OnApplyTemplate()
    {
      base.OnApplyTemplate();
      this.PART_Border = (Border) this.GetTemplateChild("PART_Border");
      if (this.PART_Border == null)
        return;
      VisualStateManager.GoToElementState((FrameworkElement) this.PART_Border, this.IsActive ? "Active" : "Inactive", false);
      foreach (VisualStateGroup visualStateGroup in (IEnumerable) VisualStateManager.GetVisualStateGroups((FrameworkElement) this.PART_Border))
      {
        if (visualStateGroup.Name == "ActiveStates")
        {
          foreach (VisualState state in (IEnumerable) visualStateGroup.States)
          {
            if (state.Name == "Active")
              state.Storyboard.SetSpeedRatio((FrameworkElement) this.PART_Border, this.SpeedRatio);
          }
        }
      }
      this.PART_Border.Visibility = this.IsActive ? Visibility.Visible : Visibility.Collapsed;
    }
  }
}
