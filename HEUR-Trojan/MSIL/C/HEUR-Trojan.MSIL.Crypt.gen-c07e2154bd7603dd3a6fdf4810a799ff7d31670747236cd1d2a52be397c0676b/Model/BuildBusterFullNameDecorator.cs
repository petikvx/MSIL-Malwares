// Decompiled with JetBrains decompiler
// Type: Cradiator.Model.BuildBusterFullNameDecorator
// Assembly: FileOptio, Version=2.1.0.0, Culture=neutral, PublicKeyToken=null
// MVID: 0135208B-21B4-457A-BFCD-FFD93FD8BA14
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.02-msil\HEUR-Trojan.MSIL.Crypt.gen-c07e2154bd7603dd3a6fdf4810a799ff7d31670747236cd1d2a52be397c0676b.exe

using Cradiator.Config;
using System.Collections.Generic;

namespace Cradiator.Model
{
  public class BuildBusterFullNameDecorator : IBuildBuster, IConfigObserver
  {
    private readonly IBuildBuster _buildBuster;
    private IDictionary<string, string> _usernameMap;

    public BuildBusterFullNameDecorator([InjectBuildBuster] IBuildBuster buildBuster, IConfigSettings configSettings)
    {
      this._buildBuster = buildBuster;
      this._usernameMap = configSettings.UsernameMap;
      configSettings.AddObserver((IConfigObserver) this);
    }

    public string FindBreaker(string sentence)
    {
      string key = this._buildBuster.FindBreaker(sentence);
      if (this._usernameMap.ContainsKey(key))
        key = this._usernameMap[key];
      return key;
    }

    public void ConfigUpdated(ConfigSettings newSettings) => this._usernameMap = newSettings.UsernameMap;
  }
}
