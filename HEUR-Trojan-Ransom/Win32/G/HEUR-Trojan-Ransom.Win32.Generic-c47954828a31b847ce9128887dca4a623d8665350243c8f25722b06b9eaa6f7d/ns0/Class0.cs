// Decompiled with JetBrains decompiler
// Type: ns0.Class0
// Assembly: TRM, Version=1.0.4536.20171, Culture=neutral, PublicKeyToken=null
// MVID: CEEA56E5-11FC-4347-A0BD-C051910E6353
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.07\HEUR-Trojan-Ransom.Win32.Generic-c47954828a31b847ce9128887dca4a623d8665350243c8f25722b06b9eaa6f7d.exe

using ns1;
using ns7;
using System;
using System.ComponentModel;
using System.IO;
using System.Runtime.CompilerServices;
using System.Runtime.InteropServices;
using System.Text;

namespace ns0
{
  internal abstract class Class0
  {
    protected Class40 class40_0;
    protected Class40 class40_1;
    protected ushort ushort_0;
    protected IntPtr intptr_0 = IntPtr.Zero;
    protected IntPtr intptr_1 = IntPtr.Zero;
    protected int int_0;

    [SpecialName]
    public Class40 method_0() => this.class40_1;

    internal Class0()
    {
    }

    internal Class0(
      IntPtr intptr_2,
      IntPtr intptr_3,
      Class40 class40_2,
      Class40 class40_3,
      ushort ushort_1,
      int int_1)
    {
      this.intptr_0 = intptr_2;
      this.class40_0 = class40_2;
      this.class40_1 = class40_3;
      this.ushort_0 = ushort_1;
      this.intptr_1 = intptr_3;
      this.int_0 = int_1;
      this.method_1(intptr_2, intptr_3);
    }

    internal void method_1(IntPtr intptr_2, IntPtr intptr_3)
    {
      if (intptr_3 == IntPtr.Zero)
        return;
      IntPtr intptr_3_1 = Class38.LockResource(intptr_3);
      if (intptr_3_1 == IntPtr.Zero)
        throw new Win32Exception(Marshal.GetLastWin32Error());
      this.vmethod_0(intptr_2, intptr_3_1);
    }

    internal abstract IntPtr vmethod_0(IntPtr intptr_2, IntPtr intptr_3);

    internal abstract void vmethod_1(BinaryWriter binaryWriter_0);

    public byte[] method_2()
    {
      MemoryStream output = new MemoryStream();
      BinaryWriter binaryWriter_0 = new BinaryWriter((Stream) output, Encoding.Default);
      this.vmethod_1(binaryWriter_0);
      binaryWriter_0.Close();
      return output.ToArray();
    }

    public virtual void vmethod_2(string string_0) => this.method_3(string_0, this.class40_0, this.class40_1, this.ushort_0);

    internal void method_3(string string_0, Class40 class40_2, Class40 class40_3, ushort ushort_1)
    {
      byte[] byte_0 = this.method_2();
      Class0.smethod_1(string_0, class40_2, class40_3, ushort_1, byte_0);
    }

    public virtual void vmethod_3(string string_0) => Class0.smethod_0(string_0, this.class40_0, this.class40_1, this.ushort_0);

    internal static void smethod_0(
      string string_0,
      Class40 class40_2,
      Class40 class40_3,
      ushort ushort_1)
    {
      Class0.smethod_1(string_0, class40_2, class40_3, ushort_1, (byte[]) null);
    }

    internal static void smethod_1(
      string string_0,
      Class40 class40_2,
      Class40 class40_3,
      ushort ushort_1,
      byte[] byte_0)
    {
      IntPtr intptr_0 = Class38.BeginUpdateResourceW(string_0, false);
      if (intptr_0 == IntPtr.Zero)
        throw new Win32Exception(Marshal.GetLastWin32Error());
      if (!Class38.UpdateResourceW(intptr_0, class40_2.method_0(), class40_3.method_0(), ushort_1, byte_0, byte_0 == null ? 0U : (uint) byte_0.Length))
        throw new Win32Exception(Marshal.GetLastWin32Error());
      if (!Class38.EndUpdateResourceW(intptr_0, false))
        throw new Win32Exception(Marshal.GetLastWin32Error());
    }
  }
}
