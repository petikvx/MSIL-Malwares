// Decompiled with JetBrains decompiler
// Type: Vändtia_Live_Server.Form2
// Assembly: W1rxzw3ZKeRvpGn, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: 142397A1-15D1-D7EF-251C-AE295CB71E89
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2021.03-msil\HEUR-Trojan.MSIL.Remcos.gen-869da055040f18615ffee1bc2369c1e6496fce17b977c375b8501f7f91f0606d.exe

using Microsoft.VisualBasic;
using Microsoft.VisualBasic.CompilerServices;
using System;
using System.Collections;
using System.ComponentModel;
using System.Diagnostics;
using System.Drawing;
using System.Runtime.CompilerServices;
using System.Windows.Forms;
using Vändtia_Live_Server.My;

namespace Vändtia_Live_Server
{
  [DesignerGenerated]
  public class Form2 : Form
  {
    private IContainer components;
    public int Port;
    public int SwitchingTime;

    public Form2()
    {
label_4:
      int num1 = 6;
      int num2 = -11;
      while (true)
      {
        switch ((num2 ^ 34) + 44)
        {
          case 0:
            goto label_4;
          case 1:
            // ISSUE: method reference
            RuntimeMethodHandle runtimeMethodHandle1 = __methodref (Form2.\uE173\uE5E4\uEAC5\uE066\uEF7F\uE101\uE4C9\uF1BF\uF45C\uECF8\uF52C\uEDC4);
            num2 = -9;
            continue;
          case 2:
            switch (num1)
            {
              case 38:
                num1 = 9;
                goto label_1;
              case 39:
                this.Load += new EventHandler(this.\uE173\uE5E4\uEAC5\uE066\uEF7F\uE101\uE4C9\uF1BF\uF45C\uECF8\uF52C\uEDC1);
                num1 = 7;
                goto label_1;
              case 40:
                this.Server = new Server();
                num1 = 13;
                goto label_1;
              case 41:
                // ISSUE: method reference
                RuntimeMethodHandle runtimeMethodHandle2 = __methodref (Form2.Dispose);
                num1 = 8;
                goto label_1;
              case 42:
                this.\uE173\uE5E4\uEAC5\uE066\uEF7F\uE101\uE4C9\uF1BF\uF45C\uECF8\uF52C\uEDC0();
                num1 = 10;
                goto label_1;
              case 43:
                num1 = 12;
                goto label_1;
              case 44:
                num1 = 11;
                goto label_1;
              case 45:
                goto label_8;
              default:
                num2 = -10;
                continue;
            }
          case 3:
label_1:
            num1 ^= 33;
            break;
        }
        // ISSUE: reference to a compiler-generated method
        num2 = \uF05A\uF4FF\uF524\uE25F\uF3A8\uF3B5\uE9DA\uF65C\uE3C6\uE7E0\uEE49\uEA90.\uE152\uE14D\uE4B1\uE4CF\uEFA5\uEAA8\uF7D2\uF85C\uF37D\uF074\uF5CA\uE496(19);
      }
label_8:;
    }

    [DebuggerNonUserCode]
    protected override void Dispose(bool disposing)
    {
      if (((!disposing ? 1 : 0) != 0 || this.components == null ? 1 : 0) == 0)
      {
label_7:
        int num1 = FoodItem.\uE607\uE6C8\uF041\uE1D1\uEB67\uF562\uF59C\uEDEA\uEABB\uE409\uF42B\uF64E(28);
        int num2 = 11;
        while (true)
        {
          switch (num2 ^ 37)
          {
            case 43:
              switch (num1 + 35)
              {
                case 0:
                  num1 = -59;
                  goto label_1;
                case 1:
                  // ISSUE: method reference
                  RuntimeMethodHandle runtimeMethodHandle1 = __methodref (Form2.set_Server);
                  num1 = -5;
                  goto label_1;
                case 2:
                  this.components.Dispose();
                  num1 = FoodItem.\uE607\uE6C8\uF041\uE1D1\uEB67\uF562\uF59C\uEDEA\uEABB\uE409\uF42B\uF64E(16);
                  goto label_1;
                case 3:
                  goto label_11;
                default:
                  num2 = 8;
                  continue;
              }
            case 44:
              // ISSUE: method reference
              RuntimeMethodHandle runtimeMethodHandle2 = __methodref (Form2.\uE173\uE5E4\uEAC5\uE066\uEF7F\uE101\uE4C9\uF1BF\uF45C\uECF8\uF52C\uEDC0);
              num2 = 9;
              continue;
            case 45:
              goto label_7;
            case 46:
label_1:
              num1 ^= 37;
              break;
          }
          num2 = 14;
        }
      }
label_11:
      base.Dispose(disposing);
    }

    [DebuggerStepThrough]
    private void \uE173\uE5E4\uEAC5\uE066\uEF7F\uE101\uE4C9\uF1BF\uF45C\uECF8\uF52C\uEDC0()
    {
label_2:
      int num1 = 0;
label_1:
      while (true)
      {
        num1 ^= 34;
        switch (num1)
        {
          case 34:
            this.Label1 = new Label();
            this.Label2 = new Label();
            this.ClientsCount = new Label();
            num1 = 21;
            continue;
          case 35:
            this.Controls.Add((Control) this.ClientsCount);
            this.Controls.Add((Control) this.Label2);
            num1 = 22;
            continue;
          case 36:
            this.Button2.TabIndex = 4;
            this.Button2.Text = "Avsluta";
            this.Button2.UseVisualStyleBackColor = true;
            num1 = 4;
            continue;
          case 37:
            this.SuspendLayout();
            this.Label1.AutoSize = true;
            this.Label1.Location = new Point(13, 13);
            num1 = 9;
            continue;
          case 38:
            this.AutoScaleDimensions = new SizeF(6f, 13f);
            this.AutoScaleMode = AutoScaleMode.Font;
            num1 = 11;
            continue;
          case 39:
            this.Button1.Size = new Size(84, 31);
            this.Button1.TabIndex = 3;
            num1 = 19;
            continue;
          case 40:
            this.Label1.TabIndex = 0;
            this.Label1.Text = "Väntar in klienter...\r\nNär du vill börja klickar du på \"Börja\"!";
            this.Label2.AutoSize = true;
            num1 = 20;
            continue;
          case 41:
            goto label_10;
          case 42:
            this.Text = "Vändtia Live Server";
            this.ResumeLayout(false);
            this.PerformLayout();
            num1 = 26;
            continue;
          case 43:
            this.Label1.Name = "Label1";
            this.Label1.Size = new Size(184, 26);
            num1 = 10;
            continue;
          case 44:
            this.Button2.Name = "Button2";
            this.Button2.Size = new Size(75, 23);
            num1 = 6;
            continue;
          case 45:
            // ISSUE: method reference
            RuntimeMethodHandle runtimeMethodHandle = __methodref (Form2.get_Button1);
            num1 = 15;
            continue;
          case 46:
            this.Label2.Size = new Size(124, 13);
            this.Label2.TabIndex = 1;
            this.Label2.Text = "Klienter anslutna hitintills:";
            num1 = 17;
            continue;
          case 47:
            this.ClientsCount.ForeColor = Color.Red;
            this.ClientsCount.Location = new Point(139, 88);
            this.ClientsCount.Name = "ClientsCount";
            num1 = 16;
            continue;
          case 48:
            this.Name = nameof (Form2);
            this.StartPosition = FormStartPosition.Manual;
            num1 = 8;
            continue;
          case 49:
            this.Button1.Text = "Börja";
            this.Button1.UseVisualStyleBackColor = true;
            this.Button2.Location = new Point(285, 161);
            num1 = 14;
            continue;
          case 50:
            this.ClientsCount.Size = new Size(14, 13);
            this.ClientsCount.TabIndex = 2;
            num1 = 23;
            continue;
          case 51:
            this.ClientsCount.AutoSize = true;
            this.ClientsCount.Font = new Font("Microsoft Sans Serif", 8.25f, FontStyle.Bold, GraphicsUnit.Point, (byte) 0);
            num1 = 13;
            continue;
          case 52:
            this.Controls.Add((Control) this.Label1);
            this.FormBorderStyle = FormBorderStyle.FixedDialog;
            this.MaximizeBox = false;
            num1 = 18;
            continue;
          case 53:
            this.ClientsCount.Text = "0";
            this.Button1.Location = new Point(13, 153);
            this.Button1.Name = "Button1";
            num1 = 5;
            continue;
          case 54:
            this.Label2.Location = new Point(13, 88);
            this.Label2.Name = "Label2";
            num1 = 12;
            continue;
          case 55:
            this.Button1 = new Button();
            this.Button2 = new Button();
            num1 = 7;
            continue;
          case 56:
            goto label_33;
          default:
            goto label_2;
        }
      }
label_10:
      this.ClientSize = new Size(372, 196);
label_12:
      int num2 = 10;
      while (true)
      {
        switch (num2 ^ 33)
        {
          case 43:
            num2 = 17;
            continue;
          case 44:
            this.Controls.Add((Control) this.Button1);
            num2 = 14;
            continue;
          case 45:
            // ISSUE: method reference
            RuntimeMethodHandle runtimeMethodHandle1 = __methodref (Form2.\uE173\uE5E4\uEAC5\uE066\uEF7F\uE101\uE4C9\uF1BF\uF45C\uECF8\uF52C\uEDC2);
            num2 = 12;
            continue;
          case 46:
            num2 = 13;
            continue;
          case 47:
            num1 = 1;
            num2 = 16;
            continue;
          case 48:
            this.Controls.Add((Control) this.Button2);
            num2 = 15;
            continue;
          case 49:
            goto label_1;
          default:
            goto label_12;
        }
      }
label_33:;
    }

    [field: AccessedThroughProperty("Label1")]
    internal virtual Label Label1 { get; [MethodImpl(MethodImplOptions.Synchronized)] set; }

    [field: AccessedThroughProperty("Label2")]
    internal virtual Label Label2 { get; [MethodImpl(MethodImplOptions.Synchronized)] set; }

    [field: AccessedThroughProperty("ClientsCount")]
    internal virtual Label ClientsCount { get; [MethodImpl(MethodImplOptions.Synchronized)] set; }

    internal virtual Button Button1
    {
      get => this._Button1;
      [MethodImpl(MethodImplOptions.Synchronized)] set
      {
        EventHandler eventHandler = new EventHandler(this.\uE173\uE5E4\uEAC5\uE066\uEF7F\uE101\uE4C9\uF1BF\uF45C\uECF8\uF52C\uEDC4);
        Button button1_1 = this._Button1;
        if ((button1_1 == null ? 1 : 0) == 0)
          button1_1.Click -= eventHandler;
        this._Button1 = value;
        Button button1_2 = this._Button1;
        if ((button1_2 == null ? 1 : 0) != 0)
          return;
        button1_2.Click += eventHandler;
      }
    }

    internal virtual Button Button2
    {
      get => this._Button2;
      [MethodImpl(MethodImplOptions.Synchronized)] set
      {
        EventHandler eventHandler = new EventHandler(this.\uE173\uE5E4\uEAC5\uE066\uEF7F\uE101\uE4C9\uF1BF\uF45C\uECF8\uF52C\uEDC3);
        Button button2_1 = this._Button2;
        if ((button2_1 == null ? 1 : 0) == 0)
          button2_1.Click -= eventHandler;
        this._Button2 = value;
        Button button2_2 = this._Button2;
        if ((button2_2 == null ? 1 : 0) != 0)
          return;
        button2_2.Click += eventHandler;
      }
    }

    public virtual Server Server
    {
      get => this._Server;
      [MethodImpl(MethodImplOptions.Synchronized)] set
      {
        Server.OnNewClientEventHandler clientEventHandler = new Server.OnNewClientEventHandler(this.\uE173\uE5E4\uEAC5\uE066\uEF7F\uE101\uE4C9\uF1BF\uF45C\uECF8\uF52C\uEDC2);
        Server server1 = this._Server;
        if ((server1 == null ? 1 : 0) == 0)
          server1.OnNewClient -= clientEventHandler;
        this._Server = value;
        Server server2 = this._Server;
        if ((server2 == null ? 1 : 0) != 0)
          return;
        server2.OnNewClient += clientEventHandler;
      }
    }

    private void \uE173\uE5E4\uEAC5\uE066\uEF7F\uE101\uE4C9\uF1BF\uF45C\uECF8\uF52C\uEDC1(
      object _param1,
      EventArgs _param2)
    {
label_7:
      int num1 = FormLoader.\uF6D9\uF827\uF028\uED0F\uECCA\uE547\uF4C8\uF468\uEA41\uE615\uE78E\uE0F5(42);
      int num2 = 7;
      while (true)
      {
        switch (num2 ^ 33)
        {
          case 35:
            // ISSUE: method reference
            RuntimeMethodHandle runtimeMethodHandle1 = __methodref (Form2.set_Button2);
            num2 = 2;
            continue;
          case 36:
            switch (num1 + 33)
            {
              case 0:
                this.Server.SwitchingTime = this.SwitchingTime;
                num1 = -51;
                goto label_1;
              case 1:
                this.Server.Port = this.Port;
                num1 = -13;
                goto label_1;
              case 2:
                this.Server.StartWaitForConnections();
                num1 = -50;
                goto label_1;
              case 3:
                num1 = -56;
                goto label_1;
              case 4:
                // ISSUE: method reference
                RuntimeMethodHandle runtimeMethodHandle2 = __methodref (Form2.\uE173\uE5E4\uEAC5\uE066\uEF7F\uE101\uE4C9\uF1BF\uF45C\uECF8\uF52C\uEDC3);
                num1 = FormLoader.\uF6D9\uF827\uF028\uED0F\uECCA\uE547\uF4C8\uF468\uEA41\uE615\uE78E\uE0F5(43);
                goto label_1;
              case 5:
                goto label_11;
              default:
                num2 = 4;
                continue;
            }
          case 37:
            goto label_7;
          case 38:
label_1:
            num1 ^= 44;
            break;
        }
        num2 = 5;
      }
label_11:;
    }

    private void \uE173\uE5E4\uEAC5\uE066\uEF7F\uE101\uE4C9\uF1BF\uF45C\uECF8\uF52C\uEDC2(
      ref Player1 _param1)
    {
label_2:
      int num1 = FoodItem.\uE607\uE6C8\uF041\uE1D1\uEB67\uF562\uF59C\uEDEA\uEABB\uE409\uF42B\uF64E(26);
      while (true)
      {
        switch ((num1 ^ 38) + 41)
        {
          case 0:
            this.ClientsCount.Text = Conversions.ToString(this.Server.Clients.Count);
            num1 = FoodItem.\uE607\uE6C8\uF041\uE1D1\uEB67\uF562\uF59C\uEDEA\uEABB\uE409\uF42B\uF64E(34);
            continue;
          case 1:
            // ISSUE: method reference
            RuntimeMethodHandle runtimeMethodHandle1 = __methodref (Form2.get_Server);
            num1 = -2;
            continue;
          case 2:
            Console.WriteLine(_param1.Name + " har just anslutit");
            num1 = -6;
            continue;
          case 3:
            num1 = -1;
            continue;
          case 4:
            _param1.Name = _param1.Recieve();
            num1 = -15;
            continue;
          case 5:
            goto label_8;
          default:
            goto label_2;
        }
      }
label_8:
      IEnumerator enumerator;
      try
      {
        enumerator = this.Server.Clients.GetEnumerator();
label_16:
        while ((!enumerator.MoveNext() ? 0 : 1) != 0)
        {
          Player1 current = (Player1) enumerator.Current;
          if ((current.Equals((object) _param1) ? 1 : 0) == 0)
            current.Send("newplayer=" + _param1.Name);
label_12:
          int num2 = FormLoader.\uF6D9\uF827\uF028\uED0F\uECCA\uE547\uF4C8\uF468\uEA41\uE615\uE78E\uE0F5(31);
          while (true)
          {
            switch ((num2 ^ 35) + 37)
            {
              case 0:
                // ISSUE: method reference
                RuntimeMethodHandle runtimeMethodHandle2 = __methodref (Form2.get_Button2);
                num2 = -8;
                continue;
              case 1:
                _param1.Send("newplayer=" + current.Name);
                num2 = FoodItem.\uE607\uE6C8\uF041\uE1D1\uEB67\uF562\uF59C\uEDEA\uEABB\uE409\uF42B\uF64E(24);
                continue;
              case 2:
                num2 = -3;
                continue;
              case 3:
                goto label_16;
              default:
                goto label_12;
            }
          }
        }
      }
      finally
      {
        if ((!(enumerator is IDisposable) ? 1 : 0) == 0)
          (enumerator as IDisposable).Dispose();
      }
    }

    private void \uE173\uE5E4\uEAC5\uE066\uEF7F\uE101\uE4C9\uF1BF\uF45C\uECF8\uF52C\uEDC3(
      object _param1,
      EventArgs _param2)
    {
label_7:
      int num1 = 15;
      int num2 = FoodItem.\uE607\uE6C8\uF041\uE1D1\uEB67\uF562\uF59C\uEDEA\uEABB\uE409\uF42B\uF64E(24);
      while (true)
      {
        switch ((num2 ^ 39) + 42)
        {
          case 0:
            // ISSUE: method reference
            RuntimeMethodHandle runtimeMethodHandle1 = __methodref (Form2.\uE173\uE5E4\uEAC5\uE066\uEF7F\uE101\uE4C9\uF1BF\uF45C\uECF8\uF52C\uEDC3);
            num2 = -15;
            continue;
          case 1:
            switch (num1)
            {
              case 37:
                this.Close();
                num1 = 1;
                goto label_1;
              case 38:
                num1 = 11;
                goto label_1;
              case 39:
                num1 = 2;
                goto label_1;
              case 40:
                this.Server.EndWaitForConnections();
                num1 = 12;
                goto label_1;
              case 41:
                this.Server.CancelAll();
                num1 = 0;
                goto label_1;
              case 42:
                // ISSUE: method reference
                RuntimeMethodHandle runtimeMethodHandle2 = __methodref (Form2.\uE173\uE5E4\uEAC5\uE066\uEF7F\uE101\uE4C9\uF1BF\uF45C\uECF8\uF52C\uEDC1);
                num1 = 13;
                goto label_1;
              case 43:
                num1 = 14;
                goto label_1;
              case 44:
                goto label_13;
              default:
                num2 = -1;
                continue;
            }
          case 2:
            goto label_7;
          case 3:
label_1:
            num1 ^= 39;
            break;
        }
        num2 = FormLoader.\uF6D9\uF827\uF028\uED0F\uECCA\uE547\uF4C8\uF468\uEA41\uE615\uE78E\uE0F5(36);
      }
label_13:;
    }

    private void \uE173\uE5E4\uEAC5\uE066\uEF7F\uE101\uE4C9\uF1BF\uF45C\uECF8\uF52C\uEDC4(
      object _param1,
      EventArgs _param2)
    {
      if ((this.Server.Clients.Count <= 0 ? 1 : 0) == 0)
      {
        this.Server.EndWaitForConnections();
label_8:
        int num1 = FoodItem.\uE607\uE6C8\uF041\uE1D1\uEB67\uF562\uF59C\uEDEA\uEABB\uE409\uF42B\uF64E(34);
        int num2 = -4;
        while (true)
        {
          switch ((num2 ^ 35) + 36)
          {
            case 0:
              Form3 form3_1;
              switch (num1 + 39)
              {
                case 0:
                  form3_1.Server = this.Server;
                  num1 = -8;
                  goto label_2;
                case 1:
                  num1 = -64;
                  goto label_2;
                case 2:
                  num1 = -58;
                  goto label_2;
                case 3:
                  form3_1 = new Form3();
                  num1 = -5;
                  goto label_2;
                case 4:
                  // ISSUE: method reference
                  RuntimeMethodHandle runtimeMethodHandle1 = __methodref (Form2.\uE173\uE5E4\uEAC5\uE066\uEF7F\uE101\uE4C9\uF1BF\uF45C\uECF8\uF52C\uEDC2);
                  num1 = -1;
                  goto label_2;
                case 5:
                  num1 = -2;
                  goto label_2;
                case 6:
                  num1 = -57;
                  goto label_2;
                case 7:
                  num1 = -61;
                  goto label_2;
                case 8:
                  this.Close();
                  num1 = -63;
                  goto label_2;
                case 9:
                  Form3 form3_2 = form3_1;
                  Point location = this.Location;
                  int x = location.X;
                  location = this.Location;
                  int y = location.Y;
                  Point point = new Point(x, y);
                  form3_2.Location = point;
                  num1 = -7;
                  goto label_2;
                case 10:
                  num1 = FoodItem.\uE607\uE6C8\uF041\uE1D1\uEB67\uF562\uF59C\uEDEA\uEABB\uE409\uF42B\uF64E(26);
                  goto label_2;
                case 11:
                  form3_1.Show();
                  num1 = -62;
                  goto label_2;
                case 12:
                  goto label_21;
                default:
                  num2 = -3;
                  continue;
              }
            case 1:
              // ISSUE: method reference
              RuntimeMethodHandle runtimeMethodHandle2 = __methodref (Form2.Dispose);
              num2 = FoodItem.\uE607\uE6C8\uF041\uE1D1\uEB67\uF562\uF59C\uEDEA\uEABB\uE409\uF42B\uF64E(24);
              continue;
            case 2:
              goto label_8;
            case 3:
label_2:
              num1 ^= 34;
              break;
          }
          num2 = FormLoader.\uF6D9\uF827\uF028\uED0F\uECCA\uE547\uF4C8\uF468\uEA41\uE615\uE78E\uE0F5(31);
        }
label_21:;
      }
      else
      {
        int num = (int) Interaction.MsgBox((object) "Du kan inte starta utan att någon spelare har anslutit");
      }
    }

    internal static int \uE173\uE5E4\uEAC5\uE066\uEF7F\uE101\uE4C9\uF1BF\uF45C\uECF8\uF52C\uEDC5(
      int _param0)
    {
      switch (_param0 - (~(--1183377702 - 578314854) + 167524350 - -437538555))
      {
        case 0:
          return ~586384080 - -586383961;
        case 1:
          return ~-227244396 - 549911918 ^ 322667642;
        case 3:
          return -(478999549 - 392887250 - 86112236 << 3) >> 2;
        case 4:
          return (~-1405785633 >> 2 ^ -525108035) + 197011029;
        case 7:
          return -119625844 + 119625833;
        case 8:
          return -(646128563 - 896500468 ^ -182159465) ^ 70768386;
        default:
          return ~(~(632090644 - 632090772 >> 7) << 1);
      }
    }
  }
}
