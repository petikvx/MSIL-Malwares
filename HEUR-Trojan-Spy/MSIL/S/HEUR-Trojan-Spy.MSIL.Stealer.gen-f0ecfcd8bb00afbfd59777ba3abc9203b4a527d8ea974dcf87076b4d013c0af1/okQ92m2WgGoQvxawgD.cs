// Decompiled with JetBrains decompiler
// Type: Xq8heDpTCPJayNT7lI.okQ92m2WgGoQvxawgD
// Assembly: StaticArrayInitTypeSiz, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: F19BBEE0-E53D-4450-9FD0-690E55E6EA19
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.03\HEUR-Trojan-Spy.MSIL.Stealer.gen-f0ecfcd8bb00afbfd59777ba3abc9203b4a527d8ea974dcf87076b4d013c0af1.exe

using System;
using System.Collections.Generic;
using System.Globalization;
using System.IO;
using System.Runtime.CompilerServices;
using System.Runtime.InteropServices;
using System.Text;
using System.Text.RegularExpressions;
using System.Xml.XPath;

namespace Xq8heDpTCPJayNT7lI
{
  public static class okQ92m2WgGoQvxawgD
  {
    private static readonly Regex pyiARjlDEa;
    private static readonly UTF8Encoding IAmAEHUIcO;
    public static readonly Uri a26AJVVttc;
    private static Uri tFuAzX9lE5;
    private static okQ92m2WgGoQvxawgD LwjbpQEuDqiBDPhE3It;

    [SpecialName]
    public static Uri cZaAhEt3S2() => okQ92m2WgGoQvxawgD.tFuAzX9lE5;

    [SpecialName]
    public static void d1AANMPfwR(Uri _param0) => okQ92m2WgGoQvxawgD.tFuAzX9lE5 = _param0;

    public static kFEUcmqe6LYj4ZtZTT b7UAuWCrtY(int _param0, string _param1) => okQ92m2WgGoQvxawgD.Y5UAGxLKK0("/account/Characters.xml.aspx", (IDictionary<string, string>) okQ92m2WgGoQvxawgD.o0dATy8aDn(_param0, _param1));

    public static kFEUcmqe6LYj4ZtZTT gnWADl2YR7(
      int _param0,
      string _param1,
      int _param2)
    {
      return okQ92m2WgGoQvxawgD.Y5UAGxLKK0("/char/CharacterSheet.xml.aspx", (IDictionary<string, string>) okQ92m2WgGoQvxawgD.fKVAkcmmbw(_param0, _param1, _param2));
    }

    public static kFEUcmqe6LYj4ZtZTT wo4AdSmG1j(
      int _param0,
      string _param1,
      int _param2)
    {
      return okQ92m2WgGoQvxawgD.Y5UAGxLKK0("/char/AssetList.xml.aspx", (IDictionary<string, string>) okQ92m2WgGoQvxawgD.fKVAkcmmbw(_param0, _param1, _param2));
    }

    public static kFEUcmqe6LYj4ZtZTT Hw4Ae0ExWN(
      int _param0,
      string _param1,
      int _param2)
    {
      return okQ92m2WgGoQvxawgD.PpyABkNRoA("/char/AssetList.xml.aspx", (IDictionary<string, string>) okQ92m2WgGoQvxawgD.fKVAkcmmbw(_param0, _param1, _param2));
    }

    public static kFEUcmqe6LYj4ZtZTT n3aAURUJU9(
      int _param0,
      string _param1,
      int _param2,
      int _param3)
    {
      return okQ92m2WgGoQvxawgD.Y5UAGxLKK0("/corp/AssetList.xml.aspx", (IDictionary<string, string>) okQ92m2WgGoQvxawgD.e2LAYKAfFB(_param0, _param1, _param2, _param3));
    }

    public static kFEUcmqe6LYj4ZtZTT tbfAiHQneg(
      int _param0,
      string _param1,
      int _param2,
      int _param3)
    {
      return okQ92m2WgGoQvxawgD.PpyABkNRoA("/corp/AssetList.xml.aspx", (IDictionary<string, string>) okQ92m2WgGoQvxawgD.e2LAYKAfFB(_param0, _param1, _param2, _param3));
    }

    private static Dictionary<string, string> o0dATy8aDn(int _param0, string _param1) => new Dictionary<string, string>()
    {
      ["userID"] = _param0.ToString(),
      ["apiKey"] = _param1,
      ["version"] = "2"
    };

    private static Dictionary<string, string> fKVAkcmmbw(
      int _param0,
      string _param1,
      int _param2)
    {
      return new Dictionary<string, string>()
      {
        ["userID"] = _param0.ToString(),
        ["apiKey"] = _param1,
        ["characterID"] = _param2.ToString(),
        ["version"] = "2"
      };
    }

    private static Dictionary<string, string> e2LAYKAfFB(
      int _param0,
      string _param1,
      int _param2,
      int _param3)
    {
      return new Dictionary<string, string>()
      {
        ["userID"] = _param0.ToString(),
        ["apiKey"] = _param1,
        ["characterID"] = _param2.ToString(),
        ["corporationID"] = _param3.ToString(),
        ["version"] = "2"
      };
    }

    public static kFEUcmqe6LYj4ZtZTT PpyABkNRoA(
      string _param0,
      IDictionary<string, string> _param1)
    {
      return J6iPDbgMshEgTWP2Pf.KgwHMZOwrA(okQ92m2WgGoQvxawgD.IKMAWV3eRB(_param0, _param1), (sl4ZfjrcuUCSnjUV7W) new okQ92m2WgGoQvxawgD.XrDbx8unj3SlwrMbDx());
    }

    public static kFEUcmqe6LYj4ZtZTT Y5UAGxLKK0(
      string _param0,
      IDictionary<string, string> _param1)
    {
      string str = okQ92m2WgGoQvxawgD.IKMAWV3eRB(_param0, _param1);
      sl4ZfjrcuUCSnjUV7W sl4ZfjrcuUcSnjUv7W = (sl4ZfjrcuUCSnjUV7W) new okQ92m2WgGoQvxawgD.XrDbx8unj3SlwrMbDx();
      return J6iPDbgMshEgTWP2Pf.hTXHvjBZwN(new Uri(okQ92m2WgGoQvxawgD.tFuAzX9lE5, _param0).ToString(), str, sl4ZfjrcuUcSnjUv7W, (IEnumerable<KeyValuePair<string, string>>) _param1, (GOfqNtt5HGIITAXOqc) (tempPath =>
      {
        FileStream fileStream = File.Open(tempPath, FileMode.Open, FileAccess.Read);
        try
        {
          XPathNavigator navigator = new XPathDocument((Stream) fileStream).CreateNavigator();
          XPathNavigator xpathNavigator = navigator.SelectSingleNode("/eveapi/error");
          int num1 = 0;
          // ISSUE: reference to a compiler-generated method
          if (okQ92m2WgGoQvxawgD.E8Iw6IDncntxH49Zhb.BVfX6sdORrJqcHjlP3t() != null)
            goto label_6;
label_2:
          switch (num1)
          {
            default:
              if (xpathNavigator != null)
                throw new TvN4tq8SSiqQBs77bU(xpathNavigator.SelectSingleNode("@code").ValueAsInt, xpathNavigator.Value);
              if (navigator.SelectSingleNode("/eveapi") != null)
                return;
              throw new TvN4tq8SSiqQBs77bU(0, "No valid eveapi XML found in response.");
          }
label_6:
          int num2;
          num1 = num2;
          goto label_2;
        }
        finally
        {
          if (fileStream != null)
          {
            // ISSUE: reference to a compiler-generated method
            okQ92m2WgGoQvxawgD.E8Iw6IDncntxH49Zhb.E8FKDldUUOq8vO76Aki((object) fileStream);
          }
        }
      }));
    }

    private static DateTime qm2AcSiqTl(string _param0)
    {
      FileStream fileStream = File.Open(_param0, FileMode.Open, FileAccess.Read);
      try
      {
        DateTime time = DateTime.Parse(new XPathDocument((Stream) fileStream).CreateNavigator().SelectSingleNode("/eveapi/cachedUntil").Value, (IFormatProvider) CultureInfo.InvariantCulture);
        int num1 = 0;
        if (!okQ92m2WgGoQvxawgD.L2rNZLEidN64ENL7wDi())
          goto label_4;
label_2:
        switch (num1)
        {
          default:
            return TimeZone.CurrentTimeZone.ToLocalTime(time);
        }
label_4:
        int num2;
        num1 = num2;
        goto label_2;
      }
      finally
      {
        if (fileStream != null)
          okQ92m2WgGoQvxawgD.gpscUsEG8yGExKJroqj((object) fileStream);
      }
    }

    private static string IKMAWV3eRB(string _param0, IDictionary<string, string> _param1)
    {
      if (string.IsNullOrEmpty(_param0))
        throw new ArgumentNullException("apiPath");
      string input = _param0.StartsWith("/") ? _param0.Substring(1) : _param0;
      string str1 = okQ92m2WgGoQvxawgD.pyiARjlDEa.Replace(input, "").Replace('/', '.');
      string str2 = J6iPDbgMshEgTWP2Pf.vymHDAry7W((IEnumerable<KeyValuePair<string, string>>) _param1);
      string path2 = str1.Insert(str1.LastIndexOf('.'), "." + str2);
      string path = Path.Combine(J6iPDbgMshEgTWP2Pf.BewHeteFps(), path2);
      string directoryName = Path.GetDirectoryName(path);
      if (!Directory.Exists(directoryName))
        Directory.CreateDirectory(directoryName);
      return path;
    }

    static okQ92m2WgGoQvxawgD()
    {
      int num = 1;
      while (true)
      {
        switch (num)
        {
          case 1:
            NxX2fTcxLE28NYvGZm.dOE6C8et8tGSe();
            num = false ? 0 : 0;
            continue;
          default:
            goto label_3;
        }
      }
label_3:
      okQ92m2WgGoQvxawgD.pyiARjlDEa = new Regex("\\.aspx$");
      okQ92m2WgGoQvxawgD.IAmAEHUIcO = new UTF8Encoding(false);
      okQ92m2WgGoQvxawgD.a26AJVVttc = new Uri("http://api.eve-online.com/");
      okQ92m2WgGoQvxawgD.tFuAzX9lE5 = okQ92m2WgGoQvxawgD.a26AJVVttc;
    }

    internal static bool L2rNZLEidN64ENL7wDi() => okQ92m2WgGoQvxawgD.LwjbpQEuDqiBDPhE3It == null;

    internal static okQ92m2WgGoQvxawgD gwjDvxETV8bpR9hAOAp() => okQ92m2WgGoQvxawgD.LwjbpQEuDqiBDPhE3It;

    internal static void gpscUsEG8yGExKJroqj([In] object obj0) => ((IDisposable) obj0).Dispose();

    private class XrDbx8unj3SlwrMbDx : sl4ZfjrcuUCSnjUV7W
    {
      internal static okQ92m2WgGoQvxawgD.XrDbx8unj3SlwrMbDx Bw5IOqdK6cmXqcjP4GZ;

      public DateTime ncma50pOAi(string _param1) => okQ92m2WgGoQvxawgD.qm2AcSiqTl(_param1);

      public XrDbx8unj3SlwrMbDx()
      {
        NxX2fTcxLE28NYvGZm.dOE6C8et8tGSe();
        // ISSUE: explicit constructor call
        base.\u002Ector();
      }

      internal static bool n0EVxJdby9KewGayl7Z() => okQ92m2WgGoQvxawgD.XrDbx8unj3SlwrMbDx.Bw5IOqdK6cmXqcjP4GZ == null;

      internal static okQ92m2WgGoQvxawgD.XrDbx8unj3SlwrMbDx beCrmrdWNJHFM5mv9dt() => okQ92m2WgGoQvxawgD.XrDbx8unj3SlwrMbDx.Bw5IOqdK6cmXqcjP4GZ;
    }
  }
}
