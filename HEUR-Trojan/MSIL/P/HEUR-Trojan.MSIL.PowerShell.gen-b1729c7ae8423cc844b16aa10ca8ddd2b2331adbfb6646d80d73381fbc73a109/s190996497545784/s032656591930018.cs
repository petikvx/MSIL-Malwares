// Decompiled with JetBrains decompiler
// Type: s190996497545784.s032656591930018
// Assembly: s968508024776124, Version=2.0.47.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
// MVID: E3596912-35E7-405B-A05A-F5F12AB5E292
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.04\HEUR-Trojan.MSIL.PowerShell.gen-b1729c7ae8423cc844b16aa10ca8ddd2b2331adbfb6646d80d73381fbc73a109.exe

using s009907969975747;
using s035632872522336;
using s179458635260178;
using s365821887377573;
using s466143199922215;
using s528813736053581;
using s551269714710412;
using s643807026110792;
using s741627039812349;
using s742632018787840;
using s814626784262558;
using s844801034789096;
using s859483659459112;
using s909044072760651;
using s962360155664524;
using System;
using System.Collections.Generic;
using System.IO;

namespace s190996497545784
{
  public class s032656591930018 : s126519166327702
  {
    public const s076337548137908 s890811072309548 = (s076337548137908) 65534;
    private s554167503245380 s424729077234042;
    private Dictionary<Guid, List<s032656591930018.s679323227080734>> s215708763751891;
    private s393135817591258 s707517424181459;
    private s753579470239593 s356395002717555;

    public s032656591930018(s470725726477034 source)
      : base(source)
    {
      this.s424729077234042 = (s554167503245380) this.s509298839279904;
      if (this.s424729077234042 == null)
      {
        this.s509298839279904 = (object) (this.s424729077234042 = new s554167503245380());
        this.s215708763751891 = new Dictionary<Guid, List<s032656591930018.s679323227080734>>();
        this.source.RegisterUnhandledEvent(new Func<s034852122986107, bool>(this.s300569341493270));
      }
      this.s707517424181459 = new s393135817591258(source, true);
      this.s707517424181459.s084051141869034 = new Func<s034852122986107, bool, s600954608090611>(((s126519166327702) this).s335464334632004);
      this.s356395002717555 = new s753579470239593(source, true);
      this.s356395002717555.s084051141869034 = new Func<s034852122986107, bool, s600954608090611>(((s126519166327702) this).s335464334632004);
    }

    public IEnumerable<s073460428085580> s737075182527846 => (IEnumerable<s073460428085580>) this.s424729077234042.s763360598515876.Values;

    public void s135383512578312(s073460428085580 s191443812763954, bool s808206540594303 = false)
    {
      // ISSUE: variable of a compiler-generated type
      s032656591930018.s358972316045555 s358972316045555 = (s032656591930018.s358972316045555) new s032656591930018.s679323227080734();
      ((s032656591930018.s679323227080734) s358972316045555).s127670428852000 = this;
      // ISSUE: reference to a compiler-generated field
      s358972316045555.s997451671131413 = (s073460428085580) null;
      // ISSUE: reference to a compiler-generated field
      // ISSUE: reference to a compiler-generated field
      if (this.s424729077234042.s763360598515876.TryGetValue(s191443812763954.s364075289213431, out s358972316045555.s997451671131413) && !s191443812763954.s278488673950704(s358972316045555.s997451671131413))
        return;
      // ISSUE: reference to a compiler-generated method
      s191443812763954.s025516284684598(new Func<s244632129848843, s600954608090611>(s358972316045555.s892546116110913), s808206540594303);
      this.s424729077234042.s763360598515876[s191443812763954.s364075289213431] = s191443812763954;
      // ISSUE: reference to a compiler-generated method
      this.source.RegisterEventTemplate((s034852122986107) new s390050194578653(new Action<s034852122986107>(s358972316045555.s516951467428442), s191443812763954));
      // ISSUE: reference to a compiler-generated field
      Action<s073460428085580> s243904746295462 = this.s243904746295462;
      if (s243904746295462 == null)
        return;
      s243904746295462(s191443812763954);
    }

    public void s541506908737693(string s208963968437632)
    {
      Directory.CreateDirectory(s208963968437632);
      foreach (s073460428085580 s073460428085580 in this.s737075182527846)
      {
        string s534474526902734 = Path.Combine(s208963968437632, s073460428085580.s895558125260583 + ".manifest.xml");
        s073460428085580.s401999924786713(s534474526902734);
      }
    }

    public void s604691564910558(string s634528549386886)
    {
      foreach (string file in Directory.GetFiles(s634528549386886, "*.manifest.xml"))
        this.s135383512578312(new s073460428085580(file));
      foreach (string file in Directory.GetFiles(s634528549386886, "*.man"))
        this.s135383512578312(new s073460428085580(file));
    }

    public virtual bool s870860239633741 => false;

    public event Action<s073460428085580> s141116447385755;

    protected override string GetProviderName() => (string) null;

    private bool s300569341493270(s034852122986107 s152861729094012)
    {
      if (s152861729094012.s228250182984697 != (s076337548137908) 65534 || s152861729094012.s770722554724548 != ~s531105564102108.Start || s152861729094012.s051258297829085 != (s899843452464947) 65534)
        return false;
      List<s032656591930018.s679323227080734> s679323227080734List;
      if (!this.s215708763751891.TryGetValue(s152861729094012.s066186047870744, out s679323227080734List))
      {
        s679323227080734List = new List<s032656591930018.s679323227080734>();
        this.s215708763751891.Add(s152861729094012.s066186047870744, s679323227080734List);
      }
      s032656591930018.s679323227080734 s679323227080734_1 = (s032656591930018.s679323227080734) null;
      foreach (s032656591930018.s679323227080734 s679323227080734_2 in s679323227080734List)
      {
        if (s679323227080734_2.s413669544516542 == s152861729094012.s102913512010943 && s679323227080734_2.s346068409565102 == s152861729094012.s772030317894180)
        {
          s679323227080734_1 = s679323227080734_2;
          break;
        }
      }
      if (s679323227080734_1 == null)
      {
        // ISSUE: object of a compiler-generated type is created
        // ISSUE: variable of a compiler-generated type
        s101203479051678.s856715697922602 s856715697922602 = new s101203479051678.s856715697922602();
        ((s032656591930018.s679323227080734) s856715697922602).s413669544516542 = s152861729094012.s102913512010943;
        ((s032656591930018.s679323227080734) s856715697922602).s346068409565102 = s152861729094012.s772030317894180;
        s679323227080734_1 = (s032656591930018.s679323227080734) s856715697922602;
        s679323227080734List.Add(s679323227080734_1);
      }
      s073460428085580 s191443812763954 = s679323227080734_1.s900818061487804(s152861729094012);
      if (s191443812763954 == null)
        return false;
      // ISSUE: object of a compiler-generated type is created
      // ISSUE: variable of a compiler-generated type
      s032656591930018.s323053478230417 s323053478230417 = (s032656591930018.s323053478230417) new s032656591930018.s358972316045555();
      s679323227080734List.Remove(s679323227080734_1);
      // ISSUE: reference to a compiler-generated field
      ((s032656591930018.s358972316045555) s323053478230417).s167186360204012 = DateTime.UtcNow;
      // ISSUE: reference to a compiler-generated method
      if (s679323227080734List.Count == 0 || s679323227080734List.TrueForAll(new Predicate<s032656591930018.s679323227080734>(s323053478230417.s984355890834373)))
        this.s215708763751891.Remove(s152861729094012.s066186047870744);
      this.s135383512578312(s191443812763954, true);
      return true;
    }

    protected internal virtual void s960986409274964(
      Func<string, string, s600954608090611> s388839816351623,
      Action<s034852122986107> s415863695727726)
    {
      // ISSUE: object of a compiler-generated type is created
      // ISSUE: variable of a compiler-generated type
      s032656591930018.s795725478408236 s795725478408236 = (s032656591930018.s795725478408236) new s032656591930018.s323053478230417();
      // ISSUE: reference to a compiler-generated field
      ((s032656591930018.s323053478230417) s795725478408236).s613980863604781 = s388839816351623;
      // ISSUE: reference to a compiler-generated field
      s795725478408236.s715609141923601 = this;
      // ISSUE: reference to a compiler-generated field
      s795725478408236.s713291133829006 = s415863695727726;
      if (this.s424729077234042 == null)
        this.s424729077234042 = (s554167503245380) this.s509298839279904;
      foreach (s073460428085580 s073460428085580 in this.s424729077234042.s763360598515876.Values)
      {
        // ISSUE: reference to a compiler-generated field
        // ISSUE: reference to a compiler-generated field
        // ISSUE: reference to a compiler-generated method
        s073460428085580.s025516284684598(s795725478408236.s487639187541853 ?? (s795725478408236.s487639187541853 = new Func<s244632129848843, s600954608090611>(s795725478408236.s860728076755546)), true);
      }
      // ISSUE: reference to a compiler-generated field
      // ISSUE: reference to a compiler-generated field
      this.s707517424181459.s944072452776731(((s032656591930018.s323053478230417) s795725478408236).s613980863604781, s795725478408236.s713291133829006);
      // ISSUE: reference to a compiler-generated field
      // ISSUE: reference to a compiler-generated field
      this.s356395002717555.s944072452776731(((s032656591930018.s323053478230417) s795725478408236).s613980863604781, s795725478408236.s713291133829006);
    }

    private class s679323227080734
    {
      private byte[][] s526481531704749;
      private int s267422202757495;
      internal int s413669544516542;
      internal int s346068409565102;
      private s073460428085580 s246750982700395;
      private byte s693992026386100;
      private byte s046645937161598;
      private s089193367613511.s896777389041752 s897950601125147;
      public s032656591930018 s127670428852000;

      internal s073460428085580 s900818061487804(s034852122986107 s571320661129771)
      {
        // ISSUE: unable to decompile the method.
      }
    }
  }
}
