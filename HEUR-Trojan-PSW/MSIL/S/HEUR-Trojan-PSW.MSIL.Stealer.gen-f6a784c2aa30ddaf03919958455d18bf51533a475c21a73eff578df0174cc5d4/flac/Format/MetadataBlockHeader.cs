// Decompiled with JetBrains decompiler
// Type: flac.Format.MetadataBlockHeader
// Assembly: STAThreadAttrib, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: 6EE3DE1A-E148-4FBA-A193-65BEA1824C00
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.04\HEUR-Trojan-PSW.MSIL.Stealer.gen-f6a784c2aa30ddaf03919958455d18bf51533a475c21a73eff578df0174cc5d4.exe

using System;

namespace flac.Format
{
  public class MetadataBlockHeader
  {
    public const int METADATA_BLOCK_VORBIS_COMMENT = 4;
    private const sbyte LAST_METADATA_BLOC_FLAG = 1;
    private const int BLOCK_TYPE_BITS_COUNT = 7;
    private const int DATA_LENGTH_BITS_COUNT = 24;
    private sbyte isLastMetadataBlock_;
    private sbyte blockType_;
    private int dataLength_;

    public bool IsLastMetadataBlock
    {
      get => this.isLastMetadataBlock_ == (sbyte) 1;
      set => this.isLastMetadataBlock_ = value ? (sbyte) 1 : (sbyte) 0;
    }

    public int BlockType
    {
      get => (int) this.blockType_;
      set => this.blockType_ = Convert.ToSByte(value);
    }

    public int BlockLengthInBytes
    {
      get => this.dataLength_;
      set => this.dataLength_ = value;
    }

    public void Read(FlacStream stream)
    {
      this.isLastMetadataBlock_ = stream.Reader.ReadBit();
      this.blockType_ = stream.Reader.ReadBitsAsSByte(7);
      this.dataLength_ = stream.Reader.ReadBitsAsInt(24);
    }

    public void Write(FlacStream stream)
    {
      stream.Writer.WriteBit(this.isLastMetadataBlock_);
      stream.Writer.WriteBits((int) this.blockType_, 7);
      stream.Writer.WriteBits(this.dataLength_, 24);
    }
  }
}
