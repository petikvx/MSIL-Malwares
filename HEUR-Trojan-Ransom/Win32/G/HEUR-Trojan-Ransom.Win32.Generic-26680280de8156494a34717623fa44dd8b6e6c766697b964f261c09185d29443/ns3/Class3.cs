// Decompiled with JetBrains decompiler
// Type: ns3.Class3
// Assembly: TRM, Version=1.0.4536.20171, Culture=neutral, PublicKeyToken=null
// MVID: AA83BB74-0A66-4BAC-8184-D7E3DA7EFE4C
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.07\HEUR-Trojan-Ransom.Win32.Generic-26680280de8156494a34717623fa44dd8b6e6c766697b964f261c09185d29443.exe

using ns0;
using ns1;
using ns5;
using ns7;
using System;
using System.ComponentModel;
using System.Drawing.Imaging;
using System.IO;
using System.Runtime.CompilerServices;
using System.Runtime.InteropServices;

namespace ns3
{
  internal class Class3 : Class0
  {
    protected Class38.Struct6 struct6_0;
    protected Class10 class10_0 = new Class10();

    public Class3(Class40 class40_2)
      : base(IntPtr.Zero, IntPtr.Zero, class40_2, new Class40(IntPtr.Zero), Class15.smethod_7(), Marshal.SizeOf(typeof (Class38.Struct6)))
    {
    }

    [SpecialName]
    public byte method_4() => this.struct6_0.byte_0;

    [SpecialName]
    public byte method_5() => this.struct6_0.byte_1;

    internal override IntPtr vmethod_0(IntPtr intptr_2, IntPtr intptr_3)
    {
      this.struct6_0 = (Class38.Struct6) Marshal.PtrToStructure(intptr_3, typeof (Class38.Struct6));
      IntPtr resourceExW = Class38.FindResourceExW(intptr_2, this.class40_0.method_0(), (IntPtr) (int) this.struct6_0.ushort_2, this.ushort_0);
      IntPtr intptr_0 = !(resourceExW == IntPtr.Zero) ? Class38.LoadResource(intptr_2, resourceExW) : throw new Win32Exception(Marshal.GetLastWin32Error());
      IntPtr intptr_2_1 = !(intptr_0 == IntPtr.Zero) ? Class38.LockResource(intptr_0) : throw new Win32Exception(Marshal.GetLastWin32Error());
      if (intptr_2_1 == IntPtr.Zero)
        throw new Win32Exception(Marshal.GetLastWin32Error());
      this.vmethod_4(intptr_2_1, (uint) Class38.SizeofResource(intptr_2, resourceExW));
      return new IntPtr(intptr_3.ToInt32() + Marshal.SizeOf((object) this.struct6_0));
    }

    internal virtual void vmethod_4(IntPtr intptr_2, uint uint_0) => this.class10_0.method_1(intptr_2, uint_0);

    [SpecialName]
    public PixelFormat method_6()
    {
      switch (this.struct6_0.ushort_1)
      {
        case 1:
          return PixelFormat.Format1bppIndexed;
        case 4:
          return PixelFormat.Format4bppIndexed;
        case 8:
          return PixelFormat.Format8bppIndexed;
        case 16:
          return PixelFormat.Format16bppRgb565;
        case 24:
          return PixelFormat.Format24bppRgb;
        case 32:
          return PixelFormat.Format32bppArgb;
        default:
          return PixelFormat.Undefined;
      }
    }

    [SpecialName]
    public string method_7()
    {
      switch (this.method_6())
      {
        case PixelFormat.Format24bppRgb:
          return "24-bit True Colors";
        case PixelFormat.Format32bppRgb:
        case PixelFormat.Format32bppArgb:
          return "32-bit Alpha Channel";
        case PixelFormat.Format1bppIndexed:
          return "1-bit B/W";
        case PixelFormat.Format4bppIndexed:
          return "4-bit 16 Colors";
        case PixelFormat.Format8bppIndexed:
          return "8-bit 256 Colors";
        default:
          return "Unknown";
      }
    }

    public override string ToString() => string.Format("{0}x{1} {2}", (object) this.method_4(), (object) this.method_5(), (object) this.method_7());

    internal override void vmethod_1(BinaryWriter binaryWriter_0)
    {
      binaryWriter_0.Write(this.struct6_0.byte_0);
      binaryWriter_0.Write(this.struct6_0.byte_1);
      binaryWriter_0.Write(this.struct6_0.byte_2);
      binaryWriter_0.Write(this.struct6_0.byte_3);
      binaryWriter_0.Write(this.struct6_0.ushort_0);
      binaryWriter_0.Write(this.struct6_0.ushort_1);
      binaryWriter_0.Write(this.struct6_0.uint_0);
      binaryWriter_0.Write(this.struct6_0.ushort_2);
      Class15.smethod_1(binaryWriter_0);
    }

    public virtual void vmethod_5(string string_0) => Class0.smethod_1(string_0, this.class40_0, new Class40((uint) this.struct6_0.ushort_2), this.ushort_0, this.class10_0.method_0());
  }
}
