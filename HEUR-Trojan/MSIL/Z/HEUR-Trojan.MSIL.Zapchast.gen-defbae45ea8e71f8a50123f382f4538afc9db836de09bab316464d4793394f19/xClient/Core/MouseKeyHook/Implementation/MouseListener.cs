// Decompiled with JetBrains decompiler
// Type: xClient.Core.MouseKeyHook.Implementation.MouseListener
// Assembly: $77-Venom, Version=2.1.0.0, Culture=neutral, PublicKeyToken=null
// MVID: DC8E8704-647D-4CA7-99AB-BB7BE936B486
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.01-msil\HEUR-Trojan.MSIL.Zapchast.gen-defbae45ea8e71f8a50123f382f4538afc9db836de09bab316464d4793394f19.exe

using System;
using System.Windows.Forms;

namespace xClient.Core.MouseKeyHook.Implementation
{
  internal abstract class MouseListener : BaseListener, 逑ᑟἒ㙕\uFFFDẙΆউ䤇떧東斲뙥㙪\u2318\uE451\u32F8擑Ό园
  {
    private readonly ᾠ忼쏋弋햕쭊\uF8E4흦僌菡뇏\uE658\u2325䬒䴉锿뤏殍굂蝴 m_DoubleDown;
    private readonly ᾠ忼쏋弋햕쭊\uF8E4흦僌菡뇏\uE658\u2325䬒䴉锿뤏殍굂蝴 m_SingleDown;
    private ㄅ덜ꍗᐒ㥔\uF846卽Ꞷ㕋\uECA8\u24A6詷债뺰齉ቚ略䨳懲帽 m_PreviousPosition;

    protected MouseListener(\uF010䙵ᶓ퀘\uF8BA꽹騢쩠ჯ軬\uFFFDǝ\uE8E8츻쟦毿ﱬ씇翚띸 subscribe)
      : base(subscribe)
    {
      this.m_PreviousPosition = new ㄅ덜ꍗᐒ㥔\uF846卽Ꞷ㕋\uECA8\u24A6詷债뺰齉ቚ略䨳懲帽(-1, -1);
      this.m_DoubleDown = new ᾠ忼쏋弋햕쭊\uF8E4흦僌菡뇏\uE658\u2325䬒䴉锿뤏殍굂蝴();
      this.m_SingleDown = new ᾠ忼쏋弋햕쭊\uF8E4흦僌菡뇏\uE658\u2325䬒䴉锿뤏殍굂蝴();
    }

    protected override bool Callback(\uF194稟訛螕諿\u0DF9캹玎軨䎜ᷙ谢䶏磳輼Ὢ鉷컐쇻䩸 data)
    {
      죋\u27F4\uA67E\uE7DF᪲躎齂蕞硰࠭孒ଈ\u28FDĘ롇휂\uE63F䨞䇁ဿ eventArgs = this.GetEventArgs(data);
      if (eventArgs.IsMouseKeyDown)
        this.ProcessDown(ref eventArgs);
      if (eventArgs.IsMouseKeyUp)
        this.ProcessUp(ref eventArgs);
      if (eventArgs.WheelScrolled)
        this.ProcessWheel(ref eventArgs);
      if (this.HasMoved(eventArgs.Point))
        this.ProcessMove(ref eventArgs);
      return !eventArgs.Handled;
    }

    protected abstract 죋\u27F4\uA67E\uE7DF᪲躎齂蕞硰࠭孒ଈ\u28FDĘ롇휂\uE63F䨞䇁ဿ GetEventArgs(
      \uF194稟訛螕諿\u0DF9캹玎軨䎜ᷙ谢䶏磳輼Ὢ鉷컐쇻䩸 data);

    protected virtual void ProcessWheel(
      ref 죋\u27F4\uA67E\uE7DF᪲躎齂蕞硰࠭孒ଈ\u28FDĘ롇휂\uE63F䨞䇁ဿ e)
    {
      this.OnWheel((MouseEventArgs) e);
    }

    protected virtual void ProcessDown(
      ref 죋\u27F4\uA67E\uE7DF᪲躎齂蕞硰࠭孒ଈ\u28FDĘ롇휂\uE63F䨞䇁ဿ e)
    {
      this.OnDown((MouseEventArgs) e);
      this.OnDownExt(e);
      if (e.Handled)
        return;
      if (e.Clicks == 2)
        this.m_DoubleDown.敥欇\uE6B6ੈ斦ꬴ砯閱㭧墾ꍹ郎\u273E퇙纒畇뷵읖㮉\uED48(e.Button);
      if (e.Clicks != 1)
        return;
      this.m_SingleDown.敥欇\uE6B6ੈ斦ꬴ砯閱㭧墾ꍹ郎\u273E퇙纒畇뷵읖㮉\uED48(e.Button);
    }

    protected virtual void ProcessUp(
      ref 죋\u27F4\uA67E\uE7DF᪲躎齂蕞硰࠭孒ଈ\u28FDĘ롇휂\uE63F䨞䇁ဿ e)
    {
      if (this.m_SingleDown.\u2541ڍ삦𥉉៧\uFFFD噲벋琜얢䈃䍵䭪傹䱇讵偔ꐎ\u0B8C챍(e.Button))
      {
        this.OnUp((MouseEventArgs) e);
        this.OnUpExt(e);
        if (e.Handled)
          return;
        this.OnClick((MouseEventArgs) e);
        this.m_SingleDown.\u263Dᨕ앇颷ௐ㯴䑢刞迊\u18AD撂藴鷄샢芖\uE01E娴ꁡ㑁兖(e.Button);
      }
      if (!this.m_DoubleDown.\u2541ڍ삦𥉉៧\uFFFD噲벋琜얢䈃䍵䭪傹䱇讵偔ꐎ\u0B8C챍(e.Button))
        return;
      e = e.\uE7DA憮蔖泿\uE943\u279D婢ᐔ㤬碒릓㐐\u26C8롳辩\u2E30泍\u2A27䵧᥊();
      this.OnUp((MouseEventArgs) e);
      this.OnDoubleClick((MouseEventArgs) e);
      this.m_DoubleDown.\u263Dᨕ앇颷ௐ㯴䑢刞迊\u18AD撂藴鷄샢芖\uE01E娴ꁡ㑁兖(e.Button);
    }

    private void ProcessMove(
      ref 죋\u27F4\uA67E\uE7DF᪲躎齂蕞硰࠭孒ଈ\u28FDĘ롇휂\uE63F䨞䇁ဿ e)
    {
      this.m_PreviousPosition = e.Point;
      this.OnMove((MouseEventArgs) e);
      this.OnMoveExt(e);
    }

    private bool HasMoved(ㄅ덜ꍗᐒ㥔\uF846卽Ꞷ㕋\uECA8\u24A6詷债뺰齉ቚ略䨳懲帽 actualPoint) => ㄅ덜ꍗᐒ㥔\uF846卽Ꞷ㕋\uECA8\u24A6詷债뺰齉ቚ略䨳懲帽.躔莹鴦ᑕ꧀㮟ୣ㽅Ɏ迴䗜\uE47D缩ᖅ䑕럵鏒澐ᵹƬ(this.m_PreviousPosition, actualPoint);

    public event MouseEventHandler MouseMove;

    public event EventHandler<죋\u27F4\uA67E\uE7DF᪲躎齂蕞硰࠭孒ଈ\u28FDĘ롇휂\uE63F䨞䇁ဿ> MouseMoveExt;

    public event MouseEventHandler MouseClick;

    public event MouseEventHandler MouseDown;

    public event EventHandler<죋\u27F4\uA67E\uE7DF᪲躎齂蕞硰࠭孒ଈ\u28FDĘ롇휂\uE63F䨞䇁ဿ> MouseDownExt;

    public event MouseEventHandler MouseUp;

    public event EventHandler<죋\u27F4\uA67E\uE7DF᪲躎齂蕞硰࠭孒ଈ\u28FDĘ롇휂\uE63F䨞䇁ဿ> MouseUpExt;

    public event MouseEventHandler MouseWheel;

    public event MouseEventHandler MouseDoubleClick;

    protected virtual void OnMove(MouseEventArgs e)
    {
      MouseEventHandler mouseMove = this.MouseMove;
      if (mouseMove == null)
        return;
      mouseMove((object) this, e);
    }

    protected virtual void OnMoveExt(죋\u27F4\uA67E\uE7DF᪲躎齂蕞硰࠭孒ଈ\u28FDĘ롇휂\uE63F䨞䇁ဿ e)
    {
      EventHandler<죋\u27F4\uA67E\uE7DF᪲躎齂蕞硰࠭孒ଈ\u28FDĘ롇휂\uE63F䨞䇁ဿ> mouseMoveExt = this.MouseMoveExt;
      if (mouseMoveExt == null)
        return;
      mouseMoveExt((object) this, e);
    }

    protected virtual void OnClick(MouseEventArgs e)
    {
      MouseEventHandler mouseClick = this.MouseClick;
      if (mouseClick == null)
        return;
      mouseClick((object) this, e);
    }

    protected virtual void OnDown(MouseEventArgs e)
    {
      MouseEventHandler mouseDown = this.MouseDown;
      if (mouseDown == null)
        return;
      mouseDown((object) this, e);
    }

    protected virtual void OnDownExt(죋\u27F4\uA67E\uE7DF᪲躎齂蕞硰࠭孒ଈ\u28FDĘ롇휂\uE63F䨞䇁ဿ e)
    {
      EventHandler<죋\u27F4\uA67E\uE7DF᪲躎齂蕞硰࠭孒ଈ\u28FDĘ롇휂\uE63F䨞䇁ဿ> mouseDownExt = this.MouseDownExt;
      if (mouseDownExt == null)
        return;
      mouseDownExt((object) this, e);
    }

    protected virtual void OnUp(MouseEventArgs e)
    {
      MouseEventHandler mouseUp = this.MouseUp;
      if (mouseUp == null)
        return;
      mouseUp((object) this, e);
    }

    protected virtual void OnUpExt(죋\u27F4\uA67E\uE7DF᪲躎齂蕞硰࠭孒ଈ\u28FDĘ롇휂\uE63F䨞䇁ဿ e)
    {
      EventHandler<죋\u27F4\uA67E\uE7DF᪲躎齂蕞硰࠭孒ଈ\u28FDĘ롇휂\uE63F䨞䇁ဿ> mouseUpExt = this.MouseUpExt;
      if (mouseUpExt == null)
        return;
      mouseUpExt((object) this, e);
    }

    protected virtual void OnWheel(MouseEventArgs e)
    {
      MouseEventHandler mouseWheel = this.MouseWheel;
      if (mouseWheel == null)
        return;
      mouseWheel((object) this, e);
    }

    protected virtual void OnDoubleClick(MouseEventArgs e)
    {
      MouseEventHandler mouseDoubleClick = this.MouseDoubleClick;
      if (mouseDoubleClick == null)
        return;
      mouseDoubleClick((object) this, e);
    }
  }
}
