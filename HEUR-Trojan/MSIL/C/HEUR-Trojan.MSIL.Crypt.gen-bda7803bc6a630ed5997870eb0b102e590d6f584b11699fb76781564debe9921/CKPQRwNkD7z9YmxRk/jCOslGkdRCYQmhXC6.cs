// Decompiled with JetBrains decompiler
// Type: CKPQRwNkD7z9YmxRk.jCOslGkdRCYQmhXC6
// Assembly: Q7jU8zFqbfRJyQUdT, Version=5.6.0.5, Culture=neutral, PublicKeyToken=31bf3856ad364e35
// MVID: 36427E73-5524-420A-9724-276045DDB54E
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.03\HEUR-Trojan.MSIL.Crypt.gen-bda7803bc6a630ed5997870eb0b102e590d6f584b11699fb76781564debe9921.exe

using \u0031fTNqlFmAxykGbSmG;
using \u0034S5lhtZKfG9E3SO8L;
using asG2wIovp329kbSlg;
using eC1dFaoM7CX9d85KS;
using Newtonsoft.Json;
using Newtonsoft.Json.Linq;
using NuGet.Common;
using System;
using System.Collections.Generic;
using System.Globalization;
using System.IO;
using TED4rmKaSBXIKxDzq;

namespace CKPQRwNkD7z9YmxRk
{
  public class jCOslGkdRCYQmhXC6
  {
    private const string SnjPo4T64eXtIrt4d = "version";
    private const string \u00321iNXeriU92iP2yKQ = "dgSpecHash";
    private const string isgUBWEmsrdCwgygj = "success";
    private const string fPFcO10qKAKmt4Vk5 = "expectedPackageFiles";
    private const string sck4t1yCDFzSSkP8R = "projectFilePath";

    public static rKncqHVp9WgtviOw5 TsjzCcdcQHUBUWLP0(
      Stream eQmIQtvIsOIEP2phL,
      ILogger _param1,
      string OHyB93EtI4ytmti6Y)
    {
      using (StreamReader streamReader = new StreamReader(eQmIQtvIsOIEP2phL))
        return jCOslGkdRCYQmhXC6.G5ziJifREbrLrkLOE((TextReader) streamReader, _param1, OHyB93EtI4ytmti6Y);
    }

    private static rKncqHVp9WgtviOw5 G5ziJifREbrLrkLOE(
      TextReader _param0,
      ILogger LpheJMwPfGyUaiX9u,
      string G23YeUv7jArcMX7SE)
    {
      try
      {
        return jCOslGkdRCYQmhXC6.IXdtF3pbXqjHmjoEW(\u0030fG62LUjkewuNbewi.\u0031D6xFrkFSRdawAyAR(_param0));
      }
      catch (Exception ex)
      {
        LpheJMwPfGyUaiX9u.LogWarning(string.Format((IFormatProvider) CultureInfo.CurrentCulture, \u0035BtvAZ7iGu3fb9DUp.\u0030qcsfmemmrnEmACz2, (object) G23YeUv7jArcMX7SE, (object) ex.Message));
        return new rKncqHVp9WgtviOw5((string) null);
      }
    }

    public static void ASOfWIjxNWWcoQcen(
      string ovRkMqRGSXDYV03tQ,
      rKncqHVp9WgtviOw5 wC8fwWAPEGRVDmkaX)
    {
      new FileInfo(ovRkMqRGSXDYV03tQ).Directory.Create();
      using (FileStream y8kcsqXBbVjeNUIn1 = new FileStream(ovRkMqRGSXDYV03tQ, FileMode.Create, FileAccess.Write, FileShare.None))
        jCOslGkdRCYQmhXC6.yP8vDVmipjkQGyKWk((Stream) y8kcsqXBbVjeNUIn1, wC8fwWAPEGRVDmkaX);
    }

    public static void yP8vDVmipjkQGyKWk(
      Stream y8kcsqXBbVjeNUIn1,
      rKncqHVp9WgtviOw5 WS7CWkYrYfkCoCITm)
    {
      using (StreamWriter P4UszXRuf6dsOQtsU = new StreamWriter(y8kcsqXBbVjeNUIn1))
        jCOslGkdRCYQmhXC6.\u0038VupHLyTYymaQUGBb((TextWriter) P4UszXRuf6dsOQtsU, WS7CWkYrYfkCoCITm);
    }

    private static void \u0038VupHLyTYymaQUGBb(
      TextWriter P4UszXRuf6dsOQtsU,
      rKncqHVp9WgtviOw5 RLjY9Nwbo6RDujfx9)
    {
      using (JsonTextWriter jsonTextWriter = new JsonTextWriter(P4UszXRuf6dsOQtsU))
      {
        ((JsonWriter) jsonTextWriter).Formatting = (Formatting) 1;
        ((JToken) jCOslGkdRCYQmhXC6.Gp33M411Vugm4c2jM(RLjY9Nwbo6RDujfx9)).WriteTo((JsonWriter) jsonTextWriter, Array.Empty<JsonConverter>());
      }
    }

    private static rKncqHVp9WgtviOw5 IXdtF3pbXqjHmjoEW(JObject NfJxLw4chLKAoPDtO)
    {
      int num = jCOslGkdRCYQmhXC6.uq296mmUdBjOYurUZ(NfJxLw4chLKAoPDtO["version"]);
      string dgSpecHash = jCOslGkdRCYQmhXC6.kXJRKLyhEnX2FlKek(NfJxLw4chLKAoPDtO["dgSpecHash"]);
      bool flag = jCOslGkdRCYQmhXC6.HsDKq35kiPElxhZMu(NfJxLw4chLKAoPDtO["success"]);
      rKncqHVp9WgtviOw5 kncqHvp9WgtviOw5 = new rKncqHVp9WgtviOw5(dgSpecHash);
      kncqHvp9WgtviOw5.SvVETwf9hryxy2dwr = num;
      kncqHvp9WgtviOw5.\u0035qdYLZi9EMaxw3o5r = flag;
      if (num >= 2)
      {
        kncqHvp9WgtviOw5.us0b8bCO29k6mgiV5 = jCOslGkdRCYQmhXC6.kXJRKLyhEnX2FlKek(NfJxLw4chLKAoPDtO["projectFilePath"]);
        foreach (JToken Dn1tq9x9Ra2vlLHoe in (IEnumerable<JToken>) NfJxLw4chLKAoPDtO["expectedPackageFiles"])
        {
          string path = jCOslGkdRCYQmhXC6.kXJRKLyhEnX2FlKek(Dn1tq9x9Ra2vlLHoe);
          if (!string.IsNullOrWhiteSpace(path) && !File.Exists(path))
          {
            kncqHvp9WgtviOw5.\u0034GxHsLI1VggQRVHZj = true;
            break;
          }
        }
        kncqHvp9WgtviOw5.\u0037FVmMNLQayn0n1GUD = \u003410H3lVE6viBHY7ft.dVgOJrvsaDwsxJ3Jg(NfJxLw4chLKAoPDtO["logs"] as JArray, kncqHvp9WgtviOw5.us0b8bCO29k6mgiV5);
      }
      return kncqHvp9WgtviOw5;
    }

    private static JObject Gp33M411Vugm4c2jM(rKncqHVp9WgtviOw5 ekpXN3NsaRuw3brEl)
    {
      JObject jobject = new JObject();
      jobject["version"] = jCOslGkdRCYQmhXC6.AY0BuZQ3bAon1yDiA(ekpXN3NsaRuw3brEl.SvVETwf9hryxy2dwr);
      jobject["dgSpecHash"] = jCOslGkdRCYQmhXC6.SBdnbicDxXJyT4wuN(ekpXN3NsaRuw3brEl.rqu3ma8UsXVDCqsmg);
      jobject["success"] = jCOslGkdRCYQmhXC6.uxQdunLhQm5BREUjG(ekpXN3NsaRuw3brEl.\u0035qdYLZi9EMaxw3o5r);
      if (ekpXN3NsaRuw3brEl.SvVETwf9hryxy2dwr >= 2)
      {
        jobject["projectFilePath"] = JToken.op_Implicit(ekpXN3NsaRuw3brEl.us0b8bCO29k6mgiV5);
        jobject["expectedPackageFiles"] = (JToken) new JArray((object) ekpXN3NsaRuw3brEl.fuT80RK4Ouclp4aBB);
        jobject["logs"] = ekpXN3NsaRuw3brEl.\u0037FVmMNLQayn0n1GUD == null ? (JToken) new JArray() : (JToken) \u003410H3lVE6viBHY7ft.\u0033X8hyVbmPUP8RMPfe((IEnumerable<IAssetsLogMessage>) ekpXN3NsaRuw3brEl.\u0037FVmMNLQayn0n1GUD, ekpXN3NsaRuw3brEl.us0b8bCO29k6mgiV5);
      }
      return jobject;
    }

    private static string kXJRKLyhEnX2FlKek(JToken Dn1tq9x9Ra2vlLHoe) => Extensions.Value<string>((IEnumerable<JToken>) Dn1tq9x9Ra2vlLHoe);

    private static JToken SBdnbicDxXJyT4wuN(string GcefGbVT0MtwWSoWG) => GcefGbVT0MtwWSoWG == null ? (JToken) JValue.CreateNull() : (JToken) new JValue(GcefGbVT0MtwWSoWG);

    private static int uq296mmUdBjOYurUZ(JToken Y7AkMJN0uANpvWqmd) => Extensions.Value<int>((IEnumerable<JToken>) Y7AkMJN0uANpvWqmd);

    private static JToken AY0BuZQ3bAon1yDiA(int hWhA6uHkNBO2yXFZY) => (JToken) new JValue((long) hWhA6uHkNBO2yXFZY);

    private static bool HsDKq35kiPElxhZMu(JToken vO7X38uO0UsZjzbvE) => Extensions.Value<bool>((IEnumerable<JToken>) vO7X38uO0UsZjzbvE);

    private static JToken uxQdunLhQm5BREUjG(bool E34LubPQoRvErkURg) => (JToken) new JValue(E34LubPQoRvErkURg);
  }
}
