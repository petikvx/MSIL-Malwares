// Decompiled with JetBrains decompiler
// Type: SmartAssembly.MemoryManagement.MemoryManager
// Assembly: StubLoader, Version=0.0.0.0, Culture=neutral, PublicKeyToken=91dca1aa8aeb9cc2
// MVID: 39BCF4AF-8830-4837-8671-E11FBAC8211F
// Assembly location: C:\Users\Administrateur\Downloads\VirusShare_CryptoRansom_20160715-msil\HEUR-Trojan.MSIL.Generic-8db8492607a9b32d1e0dbe4fb343609d3b9c6660a9c6d4be2008abddb0a6c3ea.exe

using System;
using System.Diagnostics;
using System.Runtime.InteropServices;
using System.Windows.Forms;

namespace SmartAssembly.MemoryManagement
{
  public sealed class MemoryManager
  {
    private static MemoryManager \u0001;
    private long \u0001 = DateTime.Now.Ticks;

    [DllImport("kernel32", EntryPoint = "SetProcessWorkingSetSize")]
    private static extern int \u0001(IntPtr _param0, int _param1, int _param2);

    private void \u0001()
    {
      try
      {
        using (Process currentProcess = Process.GetCurrentProcess())
        {
          do
          {
            if (true)
              goto label_4;
label_2:
            continue;
label_4:
            MemoryManager.\u0001(currentProcess.Handle, -1, -1);
            goto label_2;
          }
          while (false);
        }
      }
      catch
      {
      }
    }

    private void \u0001(object _param1, EventArgs _param2)
    {
      try
      {
        long num1;
        if (true)
        {
          DateTime now = DateTime.Now;
          if (true)
            goto label_9;
label_1:
          DateTime dateTime;
          num1 = dateTime.Ticks;
          goto label_10;
label_9:
          dateTime = now;
          goto label_1;
        }
        else
          goto label_11;
label_10:
        long num2 = num1;
label_11:
        num1 = num2;
        if (true)
          goto label_12;
label_4:
        long num3;
        if (true)
          num3 = 10000000L;
        else
          goto label_10;
label_6:
        if (num1 <= num3)
          return;
        this.\u0001 = num2;
        this.\u0001();
        return;
label_12:
        long num4 = this.\u0001;
        if (true)
        {
          num1 -= num4;
          goto label_4;
        }
        else
        {
          num3 = num4;
          goto label_6;
        }
      }
      catch
      {
      }
    }

    private MemoryManager()
    {
      Application.Idle += new EventHandler(this.\u0001);
      this.\u0001();
    }

    public static void \u0005()
    {
      try
      {
        if (Environment.OSVersion.Platform != PlatformID.Win32NT)
          return;
        MemoryManager.\u0001 = new MemoryManager();
      }
      catch
      {
      }
    }
  }
}
