// Decompiled with JetBrains decompiler
// Type: s474370615807264.s249664905187139
// Assembly: s968508024776124, Version=2.0.47.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
// MVID: E3596912-35E7-405B-A05A-F5F12AB5E292
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.04\HEUR-Trojan.MSIL.PowerShell.gen-b1729c7ae8423cc844b16aa10ca8ddd2b2331adbfb6646d80d73381fbc73a109.exe

using s077414222832753;
using s128230936459470;
using s134854913015584;
using s501555885925211;
using s556496043205981;
using s668890993111249;
using s719272214711671;
using s941238214429226;
using System;
using System.Collections.Concurrent;
using System.Collections.Generic;
using System.Diagnostics;
using System.IO;
using System.Runtime.CompilerServices;
using System.Threading.Tasks;

namespace s474370615807264
{
  public class s249664905187139 : s538480329340798
  {
    private s249664905187139 s116919574016798;
    internal List<s249664905187139> s765007606372639;
    private IList<s249664905187139> s719844846828770;
    private string s998405405340183;
    private bool s217324956841393;

    public s249664905187139 s669000833407574 => this.s116919574016798;

    public IList<s249664905187139> s941181405381768
    {
      get
      {
        if (this.s765007606372639 == null)
          this.s765007606372639 = this.GetCallees();
        return (IList<s249664905187139>) this.s765007606372639;
      }
    }

    public bool s902018751087683 => this.s941181405381768 == null;

    public IList<s249664905187139> s136129662816521
    {
      get
      {
        if (this.s719844846828770 == null)
        {
          this.s719844846828770 = this.s941181405381768;
          if (this.s319572717419354.s844138151880462.s517254629407712)
            this.s719844846828770 = this.s958778651086219();
        }
        return this.s719844846828770;
      }
    }

    public virtual bool s226903874319271
    {
      get
      {
        IList<s249664905187139> s941181405381768 = this.s941181405381768;
        if (s941181405381768 != null && s941181405381768.Count != 0)
          return true;
        s293547439506271 s844138151880462 = this.s319572717419354.s844138151880462;
        if (s844138151880462 == null || !s844138151880462.s517254629407712)
          return false;
        IList<s249664905187139> s136129662816521 = this.s136129662816521;
        return s136129662816521 != null && s136129662816521.Count != 0;
      }
    }

    public bool s963830846440637 => this.s906128507860571;

    public void s951598423191109(TextWriter s138243742872348, string s108750811334888 = "")
    {
      s138243742872348.Write("{0}<CallTree ", (object) s108750811334888);
      this.s407205982320330(s138243742872348);
      s138243742872348.WriteLine(">");
      string s108750811334888_1 = s108750811334888 + " ";
      if (this.s941181405381768 != null)
      {
        foreach (s249664905187139 s249664905187139 in this.s765007606372639)
          s249664905187139.s951598423191109(s138243742872348, s108750811334888_1);
      }
      s138243742872348.WriteLine("{0}</CallTree>", (object) s108750811334888);
    }

    public virtual string s718578426362503()
    {
      StringWriter s138243742872348 = new StringWriter();
      this.s951598423191109((TextWriter) s138243742872348);
      return s138243742872348.ToString();
    }

    public float s931337673538953() => this.s056488696421448();

    public string s494111477798061(bool s003969699327671)
    {
      if (this.s998405405340183 == null || this.s217324956841393 != s003969699327671)
      {
        int length = this.s006891602269510();
        char[] chArray = new char[length];
        int index1 = length - 1;
        if (0 <= index1)
        {
          chArray[index1] = '+';
          s249664905187139 s669000833407574 = this.s669000833407574;
          for (int index2 = index1 - 1; index2 >= 0; --index2)
          {
            chArray[index2] = s669000833407574.s961568704584725(s003969699327671) ? ' ' : '|';
            s669000833407574 = s669000833407574.s669000833407574;
          }
        }
        this.s998405405340183 = new string(chArray);
        this.s217324956841393 = s003969699327671;
      }
      return this.s998405405340183;
    }

    protected override void FreeMemory(Stack<s538480329340798> nodesToFree)
    {
      if (this.s765007606372639 != null)
      {
        foreach (s249664905187139 s249664905187139 in this.s765007606372639)
          nodesToFree.Push((s538480329340798) s249664905187139);
        this.s765007606372639.Clear();
      }
      this.s116919574016798 = (s249664905187139) null;
      base.FreeMemory(nodesToFree);
    }

    internal s249664905187139(
      string name,
      s275977756270514 id,
      s249664905187139 caller,
      s404626138245365 container)
      : base(name, id, container)
    {
      this.s116919574016798 = caller;
    }

    internal void s349682108386967(
      IComparer<s249664905187139> s832716143942955,
      s455848080656944 s335150533900372 = default (s455848080656944))
    {
      if (s335150533900372.s635804596355064)
      {
        // ISSUE: object of a compiler-generated type is created
        // ISSUE: variable of a compiler-generated type
        s249664905187139.s341957766736951 s341957766736951 = (s249664905187139.s341957766736951) new s538480329340798.s760501968731925();
        // ISSUE: reference to a compiler-generated field
        ((s538480329340798.s760501968731925) s341957766736951).s897401325095568 = this;
        // ISSUE: reference to a compiler-generated field
        s341957766736951.s855896593440919 = s832716143942955;
        // ISSUE: reference to a compiler-generated field
        s341957766736951.s029270859528676 = s335150533900372;
        // ISSUE: reference to a compiler-generated method
        Task.Factory.StartNew(new Action(s341957766736951.s266373325314616), TaskCreationOptions.LongRunning).GetAwaiter().GetResult();
      }
      else
      {
        if (this.s941181405381768 == null)
          return;
        this.s765007606372639.Sort(s832716143942955);
        for (int index = 0; index < this.s765007606372639.Count; ++index)
          this.s765007606372639[index].s349682108386967(s832716143942955, s335150533900372.s914208791137207);
        this.s719844846828770 = (IList<s249664905187139>) null;
      }
    }

    private IList<s249664905187139> s958778651086219()
    {
      // ISSUE: object of a compiler-generated type is created
      // ISSUE: variable of a compiler-generated type
      s249664905187139.s266874676897651 s266874676897651 = (s249664905187139.s266874676897651) new s249664905187139.s341957766736951();
      // ISSUE: reference to a compiler-generated field
      s266874676897651.s962896277564927 = this;
      // ISSUE: reference to a compiler-generated field
      s266874676897651.s924493807658108 = this.s319572717419354.s844138151880462;
      // ISSUE: reference to a compiler-generated field
      s266874676897651.s926601043811442 = this.s319572717419354.s944597721507514;
      // ISSUE: reference to a compiler-generated field
      s266874676897651.s371790419083300 = new Dictionary<string, s249664905187139>();
      // ISSUE: reference to a compiler-generated field
      s266874676897651.s371790419083300[this.s174326133568332] = (s249664905187139) null;
      if (this.s941181405381768 != null)
      {
        foreach (s249664905187139 s249664905187139 in (IEnumerable<s249664905187139>) this.s941181405381768)
        {
          // ISSUE: reference to a compiler-generated field
          s266874676897651.s371790419083300[s249664905187139.s174326133568332] = (s249664905187139) null;
        }
      }
      // ISSUE: reference to a compiler-generated field
      s266874676897651.s115007203251041 = this as s951372810757427;
      // ISSUE: reference to a compiler-generated field
      s266874676897651.s706740573860542 = this.s388201051886062 ? s432179660757635.From : s432179660757635.To;
      // ISSUE: reference to a compiler-generated field
      ((s249664905187139.s341957766736951) s266874676897651).s023468413850749 = new bool[128];
      // ISSUE: reference to a compiler-generated method
      this.s568392714540031(true, new Func<s745426657201161, bool>(s266874676897651.s781084748715742));
      // ISSUE: reference to a compiler-generated method
      this.s568392714540031(true, new Func<s745426657201161, bool>(s266874676897651.s675167246003752));
      List<s249664905187139> s249664905187139List = new List<s249664905187139>();
      // ISSUE: reference to a compiler-generated field
      foreach (s249664905187139 s249664905187139 in s266874676897651.s371790419083300.Values)
      {
        if (s249664905187139 != null)
          s249664905187139List.Add(s249664905187139);
      }
      s249664905187139List.Sort((Comparison<s249664905187139>) ((s993354412848522, s337162661963200) =>
      {
        int num = s993354412848522.s056981997941856 - s337162661963200.s056981997941856;
        return num != 0 ? num : s993354412848522.s174326133568332.CompareTo(s337162661963200.s174326133568332);
      }));
      if (this.s941181405381768 != null)
        s249664905187139List.InsertRange(0, (IEnumerable<s249664905187139>) this.s941181405381768);
      return (IList<s249664905187139>) s249664905187139List;
    }

    protected virtual List<s249664905187139> GetCallees() => (List<s249664905187139>) null;

    internal int s780262675678793(
      float s091430677187794,
      Dictionary<int, s538480329340798> s169435063469254)
    {
      int num = 0;
      if (this.s941181405381768 != null)
      {
        int index1 = 0;
        for (int index2 = 0; index2 < this.s765007606372639.Count; ++index2)
        {
          s249664905187139 s149954765348569 = this.s765007606372639[index2];
          if ((double) Math.Abs(s149954765348569.s828902800123744) < (double) s091430677187794 && s149954765348569.s547274587818913 != s275977756270514.Broken && (s169435063469254 == null || s149954765348569.s898909281487112(s091430677187794, s169435063469254)))
          {
            ++num;
            this.s307706308281456 += s149954765348569.s017796430193333;
            this.s364226190596274 += s149954765348569.s146196484866953;
            this.s048816825194830 += s149954765348569.s146196484866953;
            this.s789138399840781 += s149954765348569.s017796430193333;
            s249664905187139.s876375369391996(s149954765348569, ref this.s280147559914771, s455848080656944.s005255197310417);
          }
          else
          {
            num += s149954765348569.s780262675678793(s091430677187794, s169435063469254);
            if (index1 != index2)
              this.s765007606372639[index1] = this.s765007606372639[index2];
            ++index1;
          }
        }
        if (index1 == 0)
          this.s765007606372639 = (List<s249664905187139>) null;
        else if (index1 != this.s765007606372639.Count)
          this.s765007606372639.RemoveRange(index1, this.s765007606372639.Count - index1);
      }
      return num;
    }

    private bool s898909281487112(
      float s506168765294617,
      Dictionary<int, s538480329340798> s724044504920597)
    {
      return (double) Math.Abs(s724044504920597[(int) this.s547274587818913].s828902800123744) < (double) s506168765294617;
    }

    private static void s876375369391996(
      s249664905187139 s149954765348569,
      ref GrowableArray<s745426657201161> s084007331629243,
      s455848080656944 s468705634984159)
    {
      // ISSUE: object of a compiler-generated type is created
      // ISSUE: variable of a compiler-generated type
      s249664905187139.s184650260512690 s184650260512690 = (s249664905187139.s184650260512690) new s249664905187139.s786098531613966();
      // ISSUE: reference to a compiler-generated field
      ((s249664905187139.s786098531613966) s184650260512690).s942362478436817 = s149954765348569;
      // ISSUE: reference to a compiler-generated field
      s184650260512690.s937163643531565 = s468705634984159;
      // ISSUE: reference to a compiler-generated field
      if (s184650260512690.s937163643531565.s635804596355064)
      {
        // ISSUE: object of a compiler-generated type is created
        // ISSUE: variable of a compiler-generated type
        s249664905187139.s129373190236026 s129373190236026 = (s249664905187139.s129373190236026) new s249664905187139.s184650260512690();
        // ISSUE: reference to a compiler-generated field
        s129373190236026.s444513985736504 = s184650260512690;
        // ISSUE: reference to a compiler-generated field
        ((s249664905187139.s184650260512690) s129373190236026).s025098065257551 = new StrongBox<GrowableArray<s745426657201161>>(s084007331629243);
        // ISSUE: reference to a compiler-generated method
        Task.Factory.StartNew(new Action(s129373190236026.s668981282947538), TaskCreationOptions.LongRunning).GetAwaiter().GetResult();
        // ISSUE: reference to a compiler-generated field
        s084007331629243 = ((s249664905187139.s184650260512690) s129373190236026).s025098065257551.Value;
      }
      else
      {
        // ISSUE: reference to a compiler-generated field
        for (int index = 0; index < ((s249664905187139.s786098531613966) s184650260512690).s942362478436817.s280147559914771.Count; ++index)
        {
          // ISSUE: reference to a compiler-generated field
          s084007331629243.Add(((s249664905187139.s786098531613966) s184650260512690).s942362478436817.s280147559914771[index]);
        }
        // ISSUE: reference to a compiler-generated field
        if (((s249664905187139.s786098531613966) s184650260512690).s942362478436817.s941181405381768 == null)
          return;
        // ISSUE: reference to a compiler-generated field
        for (int index = 0; index < ((s249664905187139.s786098531613966) s184650260512690).s942362478436817.s765007606372639.Count; ++index)
        {
          // ISSUE: reference to a compiler-generated field
          // ISSUE: reference to a compiler-generated field
          s249664905187139.s876375369391996(((s249664905187139.s786098531613966) s184650260512690).s942362478436817.s765007606372639[index], ref s084007331629243, s184650260512690.s937163643531565.s914208791137207);
        }
      }
    }

    internal s249664905187139 s630222843848779(s275977756270514 s082374063197540)
    {
      s275977756270514 orAdd = this.s001369360234730.s684065448338542[(int) s082374063197540];
      string str = (string) null;
      if (orAdd == s275977756270514.Root)
      {
        str = this.s001369360234730.s562266176772904.s421928177288618(s082374063197540, false);
        orAdd = this.s001369360234730.s039197233378398.GetOrAdd(str, s082374063197540);
        this.s001369360234730.s684065448338542[(int) s082374063197540] = orAdd;
      }
      ConcurrentDictionary<s275977756270514, s249664905187139> concurrentDictionary1 = (ConcurrentDictionary<s275977756270514, s249664905187139>) null;
      s249664905187139 s249664905187139_1;
      lock (this)
      {
        if (this.s765007606372639 != null)
        {
          if (this.s765007606372639.Count > 16)
          {
            concurrentDictionary1 = (this.s001369360234730.s734301824021560 ?? (this.s001369360234730.s734301824021560 = new ConcurrentDictionary<s249664905187139, ConcurrentDictionary<s275977756270514, s249664905187139>>())).GetOrAdd(this, (Func<s249664905187139, ConcurrentDictionary<s275977756270514, s249664905187139>>) (s521064239147588 =>
            {
              ConcurrentDictionary<s275977756270514, s249664905187139> concurrentDictionary2 = new ConcurrentDictionary<s275977756270514, s249664905187139>();
              foreach (s249664905187139 s249664905187139_2 in s521064239147588.s765007606372639)
                concurrentDictionary2[s249664905187139_2.s547274587818913] = s249664905187139_2;
              return concurrentDictionary2;
            }));
            if (concurrentDictionary1.TryGetValue(orAdd, out s249664905187139_1))
              return s249664905187139_1;
          }
          else
          {
            int count = this.s765007606372639.Count;
            while (0 < count)
            {
              --count;
              s249664905187139_1 = this.s765007606372639[count];
              if (s249664905187139_1 != null && s249664905187139_1.s547274587818913 == orAdd)
                return s249664905187139_1;
            }
          }
        }
        if (str == null)
          str = this.s001369360234730.s562266176772904.s421928177288618(orAdd, false);
        s249664905187139_1 = new s249664905187139(str, orAdd, this, this.s001369360234730);
        if (this.s765007606372639 == null)
          this.s765007606372639 = new List<s249664905187139>();
        this.s765007606372639.Add(s249664905187139_1);
        if (concurrentDictionary1 != null)
          concurrentDictionary1[s249664905187139_1.s547274587818913] = s249664905187139_1;
      }
      return s249664905187139_1;
    }

    private bool s961568704584725(bool s957528112147067)
    {
      IList<s249664905187139> s249664905187139List = s957528112147067 ? this.s669000833407574.s941181405381768 : this.s669000833407574.s136129662816521;
      return s249664905187139List[s249664905187139List.Count - 1] == this;
    }

    private int s006891602269510()
    {
      int num = 0;
      for (s249664905187139 s669000833407574 = this.s669000833407574; s669000833407574 != null; s669000833407574 = s669000833407574.s669000833407574)
        ++num;
      return num;
    }

    private float s056488696421448(int s737826076573692 = 4)
    {
      if (s737826076573692 <= 0)
        return 0.0f;
      if (this.s174326133568332 == "BROKEN")
        return this.s989488795270965;
      float num = 0.0f;
      if (this.s941181405381768 != null)
      {
        foreach (s249664905187139 s249664905187139 in (IEnumerable<s249664905187139>) this.s941181405381768)
          num += s249664905187139.s056488696421448(s737826076573692 - 1);
      }
      return num;
    }

    [Conditional("DEBUG")]
    internal void s221560748798495()
    {
      float s364226190596274 = this.s364226190596274;
      float s307706308281456 = this.s307706308281456;
      if (this.s765007606372639 == null)
        return;
      for (int index = 0; index < this.s941181405381768.Count; ++index)
      {
        s249664905187139 s249664905187139 = this.s765007606372639[index];
        s364226190596274 += s249664905187139.s146196484866953;
        s307706308281456 += s249664905187139.s017796430193333;
      }
    }

    internal virtual bool s388201051886062
    {
      get => !this.s859217343570051;
      set => this.s859217343570051 = !value;
    }
  }
}
