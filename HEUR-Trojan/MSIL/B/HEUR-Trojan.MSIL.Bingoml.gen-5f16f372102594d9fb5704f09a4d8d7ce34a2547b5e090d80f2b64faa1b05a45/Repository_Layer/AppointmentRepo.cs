// Decompiled with JetBrains decompiler
// Type: HospitalMgmtSys.Repository_Layer.AppointmentRepo
// Assembly: HospitalMgmtSys, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: C7566877-C1AA-4E10-A05D-DB3E9254F927
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.03\HEUR-Trojan.MSIL.Bingoml.gen-5f16f372102594d9fb5704f09a4d8d7ce34a2547b5e090d80f2b64faa1b05a45.exe

using HospitalMgmtSys.Data_Layer;
using System;
using System.Data;

namespace HospitalMgmtSys.Repository_Layer
{
  public class AppointmentRepo
  {
    public int AppointmentID { get; set; }

    public string Time { get; set; }

    public string Date { get; set; }

    public int DoctorID { get; set; }

    public int PatientID { get; set; }

    public DataTable GetAllAppointmentInformation(string sql = "select * from appointment") => DataAccess.GetDataSet(sql).Tables[0];

    public int CreateAppointment(string starttime, string date, int personid, int doctorid) => DataAccess.ExecuteQuery("insert into appointment values('" + starttime + "', '" + date + "',  '" + (object) personid + "', '" + (object) doctorid + "' , '" + (object) Convert.ToInt32(0) + "')");

    public int UpdateAppointment(
      int id,
      string starttime,
      string date,
      int personid,
      int doctorid)
    {
      return DataAccess.ExecuteQuery("update appointment\n                            set starttime = '" + starttime + "',\n                            date = '" + date + "',\n                            personid = '" + (object) personid + "',\n                            doctorid = '" + (object) doctorid + "'\n                            where appointmentid = '" + (object) id + "';");
    }

    public int DeleteAppointment(int appoointmentID) => DataAccess.ExecuteQuery("DELETE FROM appointment WHERE appointmentid = '" + (object) appoointmentID + "';");

    public DataTable GetIndividualAppointment(string starttime, string date, int doctorid) => DataAccess.GetDataSet("select * from appointment where starttime = '" + starttime + "' and date = '" + date + "' and doctorid = '" + (object) doctorid + "'").Tables[0];

    public bool RowExits(string starttime, string date, int doctorid) => DataAccess.RowExists("select * from appointment where starttime = '" + starttime + "' and date = '" + date + "' and doctorid = '" + (object) doctorid + "'");

    public static int RemoveParticularDoctorsAppointments(int doctorID) => DataAccess.ExecuteQuery("DELETE FROM appointment WHERE doctorid = '" + (object) doctorID + "';");

    public static DataTable GetSpecificDoctorAppointments(int doctorid) => DataAccess.GetDataTable("select * from appointment where date='" + DateTime.Today.ToString("d") + "' and doctorid=" + (object) doctorid + ";");

    public static void DeleteAllToday(int doctorid) => DataAccess.ExecuteQuery("delete from appointment where doctorid=" + (object) doctorid + " and date ='" + DateTime.Today.ToString("d") + "';");

    public static void DeleteCompletedAppointment(int personid) => DataAccess.ExecuteQuery("delete from appointment where personid=" + (object) personid + ";");

    public static void DeleteByPatient(int personid, int doctorid) => DataAccess.ExecuteQuery("delete from appointment where personid=" + (object) personid + " and doctorid=" + (object) doctorid + ";");
  }
}
