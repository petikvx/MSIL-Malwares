// Decompiled with JetBrains decompiler
// Type: VanillaStub.Helpers.Telepathy.SafeQueue`1
// Assembly: VanillaStub, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: EA90E0E3-D3F0-4587-A40F-47A7FA59CCA7
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2021.06-msil\HEUR-Trojan-Ransom.MSIL.Blocker.gen-b3851e5c28e260637f2bb0d27bd956234053f958c19d044c30c87ff4b731caac.exe

using System.Collections.Generic;

namespace VanillaStub.Helpers.Telepathy
{
  public class SafeQueue<T>
  {
    private readonly Queue<T> queue = new Queue<T>();

    public int Count
    {
      get
      {
        lock (this.queue)
          return this.queue.Count;
      }
    }

    public void Enqueue(T item)
    {
      lock (this.queue)
        this.queue.Enqueue(item);
    }

    public bool TryDequeue(out T result)
    {
      lock (this.queue)
      {
        result = default (T);
        if (this.queue.Count <= 0)
          return false;
        result = this.queue.Dequeue();
        return true;
      }
    }

    public bool TryDequeueAll(out T[] result)
    {
      lock (this.queue)
      {
        result = this.queue.ToArray();
        this.queue.Clear();
        return result.Length != 0;
      }
    }

    public void Clear()
    {
      lock (this.queue)
        this.queue.Clear();
    }
  }
}
