// Decompiled with JetBrains decompiler
// Type: NuGet.Common.Wd94bUjMh1
// Assembly: Ty6CWyxFEL, Version=5.0.0.2, Culture=neutral, PublicKeyToken=31bf3856ad364e35
// MVID: 271E2DAF-741A-443A-8BCF-B62C509DDC38
// Assembly location: C:\Users\Administrateur\Downloads\toto\HEUR-Trojan-Ransom.MSIL.Purgen.gen-185fafbeb00cd8238fdabee088763e27012dd3a0076e04dddca6266f129f0430.exe

using System;
using System.Collections.Generic;
using System.Globalization;
using System.IO;
using System.IO.Compression;
using System.Linq;

namespace NuGet.Common
{
  public static class Wd94bUjMh1
  {
    private static readonly Lazy<bool> FVqarKbTuB = new Lazy<bool>(new Func<bool>(Wd94bUjMh1.zPfuMBByXW));

    public static StringComparer oVX3n8Ffyv() => Wd94bUjMh1.\u00392A1qiV1w5 ? StringComparer.OrdinalIgnoreCase : StringComparer.Ordinal;

    public static StringComparison OKozL7W3e1() => Wd94bUjMh1.\u00392A1qiV1w5 ? StringComparison.OrdinalIgnoreCase : StringComparison.Ordinal;

    public static IEnumerable<string> FjHeATah5A(IEnumerable<string> tgDppHFU1S) => (IEnumerable<string>) new Wd94bUjMh1.Q0oL7JN5CO(-2)
    {
      ff5zfVfxfe = tgDppHFU1S
    };

    public static string UME0ZVjoNu(string cajKwfy9I5) => cajKwfy9I5 != null && cajKwfy9I5.IndexOf('\\') > -1 ? cajKwfy9I5.Replace('\\', '/') : cajKwfy9I5;

    public static string HI0UnGpWt7(string _param0) => Wd94bUjMh1.kx6Zcsmhff(_param0, Path.DirectorySeparatorChar);

    public static string fWEasICwul(string ZCnccFElL0) => Wd94bUjMh1.kx6Zcsmhff(ZCnccFElL0, '/');

    private static string kx6Zcsmhff(string jZEK6RTAyV, char NVPbDbCC3a)
    {
      switch (jZEK6RTAyV)
      {
        case "":
          return jZEK6RTAyV;
        case null:
          throw new ArgumentNullException("path");
        default:
          if ((int) jZEK6RTAyV[jZEK6RTAyV.Length - 1] != (int) NVPbDbCC3a)
            return Wd94bUjMh1.rxIaXQyNsQ(jZEK6RTAyV) ? jZEK6RTAyV.Substring(0, jZEK6RTAyV.Length - 1) + NVPbDbCC3a.ToString() : jZEK6RTAyV + NVPbDbCC3a.ToString();
          goto case "";
      }
    }

    public static bool krql8HBQol(string cXP5pxYgZp, string _param1)
    {
      if (cXP5pxYgZp == null)
        throw new ArgumentNullException("dir");
      if (_param1 == null)
        throw new ArgumentNullException("candidate");
      cXP5pxYgZp = Path.GetFullPath(cXP5pxYgZp);
      cXP5pxYgZp = Wd94bUjMh1.HI0UnGpWt7(cXP5pxYgZp);
      _param1 = Path.GetFullPath(_param1);
      return _param1.StartsWith(cXP5pxYgZp, StringComparison.OrdinalIgnoreCase);
    }

    public static bool rxIaXQyNsQ(string BfcLbJWGRM) => !string.IsNullOrEmpty(BfcLbJWGRM) && Wd94bUjMh1.CuCp4Hq3YQ(BfcLbJWGRM[BfcLbJWGRM.Length - 1]);

    public static bool CuCp4Hq3YQ(char _param0)
    {
      if (!l6BkPTcFbv.ooEPhgvzVK)
        return (int) _param0 == (int) Path.DirectorySeparatorChar;
      return (int) _param0 == (int) Path.DirectorySeparatorChar || (int) _param0 == (int) Path.AltDirectorySeparatorChar;
    }

    public static void viMiNdL8c7(string SMwk12kNCH)
    {
      string directoryName = Path.GetDirectoryName(SMwk12kNCH);
      if (Directory.Exists(directoryName))
        return;
      Directory.CreateDirectory(directoryName);
    }

    public static string B9kuWWeYEI(string LPEnctZYDt, string J0TQu4TOIh) => Wd94bUjMh1.O8x2chaxEH(LPEnctZYDt, J0TQu4TOIh, Path.DirectorySeparatorChar);

    public static string O8x2chaxEH(string T23HDCMlzd, string redG7G0Ug4, char X9w3aybvk4)
    {
      if (string.IsNullOrEmpty(T23HDCMlzd))
        throw new ArgumentException("Path must have a value", "path1");
      if (string.IsNullOrEmpty(redG7G0Ug4))
        throw new ArgumentException("Path must have a value", "path2");
      StringComparison comparisonType;
      if (l6BkPTcFbv.ooEPhgvzVK)
      {
        comparisonType = StringComparison.OrdinalIgnoreCase;
        if (!string.Equals(Path.GetPathRoot(T23HDCMlzd), Path.GetPathRoot(redG7G0Ug4), comparisonType))
          return redG7G0Ug4;
      }
      else
        comparisonType = StringComparison.Ordinal;
      int index1 = 0;
      string[] strArray1 = T23HDCMlzd.Split(Path.DirectorySeparatorChar, Path.AltDirectorySeparatorChar);
      string[] strArray2 = redG7G0Ug4.Split(Path.DirectorySeparatorChar, Path.AltDirectorySeparatorChar);
      int val1 = strArray1.Length - 1;
      int length = strArray2.Length;
      int num = Math.Min(val1, length);
      while (num > index1 && string.Equals(strArray1[index1], strArray2[index1], comparisonType) && (val1 != index1 || length <= index1 + 1) && (val1 <= index1 || length != index1 + 1))
        ++index1;
      string str = "";
      if (val1 + 1 == length && !string.IsNullOrEmpty(strArray1[index1]) && string.Equals(strArray1[index1], strArray2[index1], comparisonType))
        return str;
      for (int index2 = index1; val1 > index2; ++index2)
        str = str + ".." + X9w3aybvk4.ToString();
      for (int index3 = index1; length - 1 > index3; ++index3)
        str = str + strArray2[index3] + X9w3aybvk4.ToString();
      if (!string.IsNullOrEmpty(strArray2[length - 1]))
        str += strArray2[length - 1];
      return str;
    }

    public static string \u00377eTKFdmz5(string R0ZVX7MpUL, string _param1)
    {
      if (R0ZVX7MpUL == null)
        throw new ArgumentNullException("basePath");
      if (_param1 == null)
        throw new ArgumentNullException("relativePath");
      return new Uri(new Uri(R0ZVX7MpUL), new Uri(_param1, UriKind.Relative)).LocalPath;
    }

    public static string \u0038BbGNsMEHI(string woxkVMdh5t)
    {
      woxkVMdh5t = woxkVMdh5t.TrimEnd(Path.DirectorySeparatorChar);
      return woxkVMdh5t.Substring(Path.GetDirectoryName(woxkVMdh5t).Length).Trim(Path.DirectorySeparatorChar, Path.AltDirectorySeparatorChar);
    }

    public static string \u0034bjtWD0XUN(string HMUQsM3hd7) => HMUQsM3hd7.Replace('/', '\\');

    public static string \u0035dJLwZmqtx(string _param0) => Path.DirectorySeparatorChar == '/' ? Wd94bUjMh1.UME0ZVjoNu(_param0) : Wd94bUjMh1.\u0034bjtWD0XUN(_param0);

    public static string \u0039Txwi5KLdm(Uri TvWwdVMFaF)
    {
      string str = TvWwdVMFaF.OriginalString;
      if (str.StartsWith("/", StringComparison.Ordinal))
        str = str.Substring(1);
      return Uri.UnescapeDataString(str.Replace('/', Path.DirectorySeparatorChar));
    }

    public static string Zbdb3ZbQwR(string WEbkJjfy32)
    {
      WEbkJjfy32 = WEbkJjfy32 != null ? WEbkJjfy32.Replace("[", "`[").Replace("]", "`]") : throw new ArgumentNullException("path");
      return WEbkJjfy32.Contains("'") ? "\"" + WEbkJjfy32.Replace("$", "`$") + "\"" : "'" + WEbkJjfy32 + "'";
    }

    public static string AneaXnD8U9(string DURGqex9fe, int _param1)
    {
      if (_param1 < 6)
        throw new ArgumentOutOfRangeException("maxWidth", string.Format((IFormatProvider) CultureInfo.CurrentCulture, vK4KTOtZYy.hjn6tH9CHG, (object) 6));
      if (DURGqex9fe == null)
        throw new ArgumentNullException("path");
      if (DURGqex9fe.Length <= _param1)
        return DURGqex9fe;
      string str1 = ((IEnumerable<string>) DURGqex9fe.Split(new char[1]
      {
        Path.DirectorySeparatorChar
      }, StringSplitOptions.RemoveEmptyEntries)).LastOrDefault<string>() ?? string.Empty;
      char directorySeparatorChar = Path.DirectorySeparatorChar;
      string str2 = directorySeparatorChar.ToString();
      string str3 = str1;
      directorySeparatorChar = Path.DirectorySeparatorChar;
      string str4 = directorySeparatorChar.ToString();
      string str5 = str2 + str3 + str4;
      string pathRoot = Path.GetPathRoot(DURGqex9fe);
      int num = _param1 - pathRoot.Length - 3;
      return str5.Length >= num ? string.Format((IFormatProvider) CultureInfo.InvariantCulture, "{0}...{1}", (object) pathRoot, (object) str5.Substring(str5.Length - num)) : string.Format((IFormatProvider) CultureInfo.InvariantCulture, "{0}...{1}", (object) pathRoot, (object) str5);
    }

    public static bool ivxAJ9Kewz(string q0pvaIYLqZ, string h22Khs8Oo0)
    {
      if (q0pvaIYLqZ == null)
        throw new ArgumentNullException("basePath");
      if (h22Khs8Oo0 == null)
        throw new ArgumentNullException("path");
      q0pvaIYLqZ = q0pvaIYLqZ.TrimEnd(Path.DirectorySeparatorChar);
      return h22Khs8Oo0.StartsWith(q0pvaIYLqZ, StringComparison.OrdinalIgnoreCase);
    }

    public static string ZwpcpOjGOk(string Ucvj1j15IV) => Ucvj1j15IV.Replace(Path.AltDirectorySeparatorChar, Path.DirectorySeparatorChar);

    public static string hHU8ln8Div(string laHbNQVdPf) => laHbNQVdPf.Replace(Path.DirectorySeparatorChar, Path.AltDirectorySeparatorChar);

    public static ZipArchiveEntry FFsJaYxg2M(ZipArchive _param0, string euHRSiZ1zA) => _param0.Entries.SingleOrDefault<ZipArchiveEntry>(new Func<ZipArchiveEntry, bool>(new Wd94bUjMh1.C1eWkUf3OL()
    {
      DCxrpY8FFD = euHRSiZ1zA
    }.JItth0kmzT));

    public static bool \u00392A1qiV1w5 => Wd94bUjMh1.FVqarKbTuB.Value;

    private static bool zPfuMBByXW()
    {
      if (l6BkPTcFbv.ooEPhgvzVK)
        return true;
      string[] strArray = new string[3]
      {
        hE1biszR17.SX1Br5Fk1Y(YeXhnQPbgq.NuGetHome),
        hE1biszR17.SX1Br5Fk1Y(YeXhnQPbgq.Temp),
        Directory.GetCurrentDirectory()
      };
      bool flag1 = true;
      foreach (string yKDLhgoHcg in strArray)
      {
        bool flag2;
        bool flag3 = Wd94bUjMh1.tiC8aIe1iE(yKDLhgoHcg, out flag2);
        if (!flag2)
          flag1 &= flag3;
      }
      return flag1;
    }

    private static bool tiC8aIe1iE(string yKDLhgoHcg, out bool _param1)
    {
      bool flag = true;
      yKDLhgoHcg = Path.GetFullPath(yKDLhgoHcg);
      _param1 = true;
      for (; yKDLhgoHcg.Length > 1; yKDLhgoHcg = Path.GetDirectoryName(yKDLhgoHcg))
      {
        if (Directory.Exists(yKDLhgoHcg))
        {
          _param1 = false;
          goto label_6;
        }
      }
      _param1 = true;
      flag = false;
label_6:
      return flag && Directory.Exists(yKDLhgoHcg.ToLowerInvariant()) && Directory.Exists(yKDLhgoHcg.ToUpperInvariant());
    }

    public static string KbCNfyxVIp(string RYC9jJ9bm1)
    {
      RYC9jJ9bm1 = Wd94bUjMh1.UME0ZVjoNu(RYC9jJ9bm1);
      string str = "./";
      if (RYC9jJ9bm1.StartsWith(str))
        RYC9jJ9bm1 = RYC9jJ9bm1.Substring(str.Length);
      return RYC9jJ9bm1.TrimStart('/');
    }
  }
}
