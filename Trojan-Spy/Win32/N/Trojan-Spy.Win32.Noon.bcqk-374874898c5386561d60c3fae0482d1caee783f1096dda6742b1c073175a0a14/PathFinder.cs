// Decompiled with JetBrains decompiler
// Type: mmxAH.PathFinder
// Assembly: IAsyncLocalValue, Version=1.0.2.2, Culture=neutral, PublicKeyToken=null
// MVID: 5C4F3FBF-C751-4B18-BBEA-B1DDBC6F76B9
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.03\Trojan-Spy.Win32.Noon.bcqk-374874898c5386561d60c3fae0482d1caee783f1096dda6742b1c073175a0a14.exe

using System.Collections.Generic;

namespace mmxAH
{
  public class PathFinder
  {
    private GameEngine en;
    private List<short> doneLoc;
    private List<short> curLoc;
    private List<short> nextLoc;
    private List<short> res;

    public PathFinder(GameEngine eng) => this.en = eng;

    public List<short> Find(short startLoc, FuncBoolReturn checkFunc)
    {
      this.doneLoc = new List<short>();
      this.curLoc = new List<short>();
      this.res = new List<short>();
      this.curLoc.Add(startLoc);
      this.doneLoc.Add(startLoc);
      do
      {
        this.nextLoc = new List<short>();
        foreach (short index in this.curLoc)
        {
          if (checkFunc(index))
          {
            this.res.Add(index);
          }
          else
          {
            foreach (short linkedLoc in ((ArchemArea) this.en.locs[(int) index]).GetLinkedLocs())
            {
              if (!this.doneLoc.Contains(linkedLoc))
              {
                this.doneLoc.Add(linkedLoc);
                this.nextLoc.Add(linkedLoc);
              }
            }
          }
        }
        this.curLoc = this.nextLoc;
      }
      while (this.res.Count == 0 && this.curLoc.Count != 0);
      return this.res;
    }
  }
}
