// Decompiled with JetBrains decompiler
// Type: mmxAH.MainMenuForm
// Assembly: X509Ut, Version=1.0.2.2, Culture=neutral, PublicKeyToken=null
// MVID: 1E869FE1-6699-4C5A-A346-E3A268AF0CFF
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.03\Trojan-Spy.Win32.Noon.bcql-59417b76e826677caae54470d776ac97355fea2080e278b08439fa5229cc46a3.exe

using System;
using System.Drawing;
using System.Windows.Forms;

namespace mmxAH
{
  public class MainMenuForm : Form
  {
    private GameEngine en;
    private WorkForm frm;
    private Button btnResume;
    private Button btnSave;
    private static string[] CommandLineArgs;
    private static bool isPlayMode = true;

    public MainMenuForm()
    {
      if (MainMenuForm.CommandLineArgs.Length != 0 && MainMenuForm.CommandLineArgs[0].ToUpper() == "TOBIN")
      {
        this.en = new GameEngine(this);
        MainMenuForm.isPlayMode = false;
        this.en.ToBin();
      }
      if (!this.GlobalInit())
        Application.Exit();
      this.FormBorderStyle = FormBorderStyle.None;
      this.WindowState = FormWindowState.Maximized;
      this.Text = this.en.sysstr.GetString(SSType.Title);
      int width = SystemInformation.VirtualScreen.Width;
      int height = SystemInformation.VirtualScreen.Height;
      Label label = new Label();
      label.Text = this.en.sysstr.GetString(SSType.Title);
      label.Font = new Font("Times New Roman", 16f, FontStyle.Bold);
      label.Location = new Point(width * 4 / 10, height * 15 / 100);
      label.Width = width * 2 / 10;
      this.Controls.Add((Control) label);
      Button button1 = new Button();
      button1.Text = this.en.sysstr.GetString(SSType.Exit);
      button1.Location = new Point(width * 4 / 10, height * 8 / 10);
      button1.Width = width * 2 / 10;
      button1.Click += new EventHandler(this.ExitClick);
      this.Controls.Add((Control) button1);
      Button button2 = new Button();
      button2.Text = this.en.sysstr.GetString(SSType.ResumeGame);
      button2.Location = new Point(width * 4 / 10, height * 3 / 10);
      button2.Width = width * 2 / 10;
      button2.Click += new EventHandler(this.ResumeClick);
      button2.Visible = false;
      this.btnResume = button2;
      this.Controls.Add((Control) button2);
      Button button3 = new Button();
      button3.Text = this.en.sysstr.GetString(SSType.NewGame);
      button3.Location = new Point(width * 4 / 10, height * 4 / 10);
      button3.Width = width * 2 / 10;
      button3.Click += new EventHandler(this.NewGameClick);
      this.Controls.Add((Control) button3);
      Button button4 = new Button();
      button4.Text = this.en.sysstr.GetString(SSType.LoadGame);
      button4.Location = new Point(width * 4 / 10, height * 5 / 10);
      button4.Width = width * 2 / 10;
      button4.Click += new EventHandler(this.LoadGameClick);
      this.Controls.Add((Control) button4);
      Button button5 = new Button();
      button5.Text = this.en.sysstr.GetString(SSType.SaveGame);
      button5.Location = new Point(width * 4 / 10, height * 6 / 10);
      button5.Width = width * 2 / 10;
      button5.Click += new EventHandler(this.SaveGameClick);
      this.Controls.Add((Control) button5);
      this.btnSave = button5;
      this.btnSave.Enabled = false;
      Button button6 = new Button();
      button6.Text = this.en.sysstr.GetString(SSType.Preference);
      button6.Location = new Point(width * 4 / 10, height * 7 / 10);
      button6.Width = width * 2 / 10;
      button6.Click += new EventHandler(this.PreferenseClick);
      this.Controls.Add((Control) button6);
    }

    private void ResumeClick(object sender, EventArgs arg)
    {
      this.Hide();
      this.frm.Show();
    }

    private void ExitClick(object sender, EventArgs arg) => Application.Exit();

    private void NewGameClick(object sender, EventArgs arg)
    {
      this.frm = new WorkForm(this.en);
      this.btnResume.Visible = true;
      this.en.newGame();
      this.Hide();
      this.frm.Show();
    }

    private void LoadGameClick(object sender, EventArgs arg)
    {
      this.btnResume.Visible = true;
      this.Hide();
      this.frm = new WorkForm(this.en);
      if (this.en.io.LoadSaveFile("test"))
        return;
      Application.Exit();
    }

    private void SaveGameClick(object sender, EventArgs arg) => this.en.io.CreateSaveFile("test");

    private void PreferenseClick(object sender, EventArgs arg)
    {
      int num = (int) MessageBox.Show("Pref");
    }

    private bool GlobalInit()
    {
      this.en = new GameEngine(this);
      return this.en.Init();
    }

    private void InitializeComponent()
    {
      this.SuspendLayout();
      this.ClientSize = new Size(284, 261);
      this.Name = nameof (MainMenuForm);
      this.Load += new EventHandler(this.MainMenuForm_Load);
      this.ResumeLayout(false);
    }

    private void MainMenuForm_Load(object sender, EventArgs e)
    {
    }

    public void SaveEnabled(bool mode) => this.btnSave.Enabled = mode;
  }
}
