// Decompiled with JetBrains decompiler
// Type: s756178962572455.s004814079377862
// Assembly: s778197286190734, Version=16.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
// MVID: B8DB6840-BCA0-4EC3-93C1-1E026E238560
// Assembly location: C:\Users\Administrateur\Downloads\Bazaar.2022.04\HEUR-Trojan.MSIL.PowerShell.gen-541fbec081719c440d95155189e5f90573351b94bbae41393656e91ca641bffa.exe

using s278976162950916;
using s281269497025338;
using s347182466859981;
using s520628476526073;
using s532214271682888;
using s534748892454285;
using s778197286190734.Properties;
using s835852469040117;
using System;
using System.IO;
using System.Net;

namespace s756178962572455
{
  public class s004814079377862
  {
    private const string s520776048085726 = "application/json";
    private const string s002621581764043 = ";base64";
    private const string s199078808451582 = ";charset=";

    private string s738641646522558(string s067732352617719, out bool s060321994375880)
    {
      // ISSUE: variable of a compiler-generated type
      s004814079377862.s418100251346296 s418100251346296 = (s004814079377862.s418100251346296) new s004814079377862.s514476985478093<>();
      // ISSUE: reference to a compiler-generated field
      s418100251346296.s247773176127849 = s067732352617719;
      // ISSUE: reference to a compiler-generated field
      ((s461264732335760) s418100251346296).s543049958503542 = "data:".Length;
      // ISSUE: reference to a compiler-generated field
      // ISSUE: method pointer
      // ISSUE: object of a compiler-generated type is created
      s418100251346296.s292774685177778 = (s004814079377862.s656514789671258) new s899935449792575((object) s418100251346296, __methodptr(s002252016031284));
      // ISSUE: reference to a compiler-generated method
      s004814079377862.s585148009347668 s585148009347668 = (s004814079377862.s585148009347668) new s004814079377862.s656514789671258(s418100251346296.s987796584651530);
      s060321994375880 = false;
      // ISSUE: reference to a compiler-generated field
      if (!s418100251346296.s292774685177778() || !s585148009347668("application/json"))
        return (string) null;
      if (s585148009347668(";charset="))
      {
        int s543049958503542;
        // ISSUE: reference to a compiler-generated field
        // ISSUE: reference to a compiler-generated field
        // ISSUE: reference to a compiler-generated field
        // ISSUE: reference to a compiler-generated field
        // ISSUE: reference to a compiler-generated field
        // ISSUE: reference to a compiler-generated field
        // ISSUE: reference to a compiler-generated field
        for (; ((s461264732335760) s418100251346296).s543049958503542 < s418100251346296.s247773176127849.Length && s418100251346296.s247773176127849[((s461264732335760) s418100251346296).s543049958503542] != ';' && s418100251346296.s247773176127849[((s461264732335760) s418100251346296).s543049958503542] != ','; ((s461264732335760) s418100251346296).s543049958503542 = s543049958503542 + 1)
        {
          // ISSUE: reference to a compiler-generated field
          s543049958503542 = ((s461264732335760) s418100251346296).s543049958503542;
        }
        // ISSUE: reference to a compiler-generated field
        if (!s418100251346296.s292774685177778())
          return (string) null;
      }
      if (s585148009347668(";base64"))
        s060321994375880 = true;
      // ISSUE: reference to a compiler-generated field
      // ISSUE: reference to a compiler-generated field
      return s585148009347668(",") ? s418100251346296.s247773176127849.Substring(((s461264732335760) s418100251346296).s543049958503542) : (string) null;
    }

    private bool s715067462833300(string s785792795339184)
    {
      string str = this.s738641646522558(s785792795339184, out bool _);
      return str != null && str.IndexOf(',') < 0 && str.IndexOf(';') < 0;
    }

    public s863674376552032 s092687979425624(
      string s485521203097234,
      string s933173553398945,
      string s126888618426596,
      string s019694543638007)
    {
      s863674376552032 s863674376552032 = (s863674376552032) null;
      if (!string.IsNullOrEmpty(s019694543638007))
      {
        if (s028001312605085.s656451194463703(s019694543638007))
          return this.s715067462833300(s019694543638007) ? (s863674376552032) new s822423069983235(s019694543638007) : throw new s223294296520489(s019694543638007);
        try
        {
          s863674376552032 = new s863674376552032(s019694543638007, UriKind.Absolute);
        }
        catch (FormatException ex)
        {
        }
        if ((Uri) s863674376552032 == (Uri) null)
        {
          Uri baseUri;
          try
          {
            baseUri = s028001312605085.s469818331284658(s485521203097234, s933173553398945, s126888618426596);
          }
          catch (FormatException ex)
          {
            throw new s536492930774617(s019694543638007, s485521203097234, (Exception) ex);
          }
          try
          {
            s863674376552032 = new s863674376552032(baseUri, new Uri(s019694543638007, UriKind.Relative));
          }
          catch (Exception ex)
          {
            throw new s536492930774617(s019694543638007, s485521203097234, ex);
          }
        }
      }
      return s863674376552032;
    }

    public s863674376552032 s326427845766250(
      string s631425176360921,
      string s319200868520132,
      string s100426815676409,
      string s174370422852077,
      out string s303827098696697)
    {
      return this.ReadSourceMap<string>(s631425176360921, s319200868520132, s100426815676409, s174370422852077, out s303827098696697, (s004814079377862.s514476985478093<string>) (s091454408786519 => s091454408786519.ReadToEnd()));
    }

    protected s863674376552032 ReadSourceMap<T>(
      string scriptFilePathOrUrl,
      string originUrl,
      string sourceUrl,
      string sourceMapUrl,
      out T sourceMapText,
      s004814079377862.s514476985478093<T> textReadDelegate)
    {
      s863674376552032 sourceMapUri = this.s092687979425624(scriptFilePathOrUrl, originUrl, sourceUrl, sourceMapUrl);
      sourceMapText = !((Uri) sourceMapUri != (Uri) null) ? default (T) : this.ReadMapFile<T>(sourceMapUri, textReadDelegate);
      return sourceMapUri;
    }

    protected T ReadMapFile<T>(
      s863674376552032 sourceMapUri,
      s004814079377862.s514476985478093<T> textReadDelegate)
    {
      try
      {
        if (sourceMapUri.s835923363520546)
        {
          bool s060321994375880;
          string str = this.s738641646522558(sourceMapUri.s397817210381655, out s060321994375880);
          if (s060321994375880)
            str = s825718661421142.s666506445404449(str);
          return textReadDelegate((TextReader) new StringReader(str));
        }
        if (sourceMapUri.IsFile)
        {
          using (StreamReader streamReader = new StreamReader(sourceMapUri.LocalPath))
            return textReadDelegate((TextReader) streamReader);
        }
        else
        {
          using (WebResponse webResponse = s028001312605085.s939883195364330((Uri) sourceMapUri))
          {
            using (Stream responseStream = webResponse.GetResponseStream())
            {
              using (StreamReader streamReader = new StreamReader(responseStream))
                return textReadDelegate((TextReader) streamReader);
            }
          }
        }
      }
      catch (Exception ex)
      {
        throw new s586006472610644(sourceMapUri.IsFile ? sourceMapUri.LocalPath : sourceMapUri.s397817210381655, ex);
      }
    }

    private delegate bool s656514789671258();

    private delegate bool s585148009347668(string syntax);

    protected delegate T s514476985478093<T>(TextReader textReader);
  }
}
